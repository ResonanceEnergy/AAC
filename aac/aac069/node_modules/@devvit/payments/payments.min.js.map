{
  "version": 3,
  "sources": ["../../../node_modules/kind-of/index.js", "../../../node_modules/shallow-clone/index.js", "../../../node_modules/isobject/index.js", "../../../node_modules/clone-deep/node_modules/is-plain-object/index.js", "../../../node_modules/clone-deep/index.js", "../../../node_modules/base64-js/index.js", "../src/hooks/hook-types.ts", "../../public-api/dist/apis/reddit/common.js", "../../public-api/dist/apis/reddit/models/Comment.js", "../../shared-types/dist/NonNull.js", "../../public-api/dist/devvit/Devvit.js", "../../shared-types/dist/Actor.js", "../../shared-types/dist/fetch-domains.js", "../../shared/dist/types/triggers.js", "../../shared-types/dist/shared/form.js", "../../shared-types/dist/assert.js", "../../shared-types/dist/tid.js", "../../public-api/dist/apis/ui/helpers/assertValidFormFields.js", "../../public-api/dist/types/hooks.js", "../../public-api/dist/types/triggers.js", "../../public-api/dist/devvit/internals/app-settings.js", "../../public-api/dist/apis/ui/helpers/transformForm.js", "../../public-api/dist/devvit/internals/helpers/extendDevvitPrototype.js", "../../public-api/dist/devvit/internals/helpers/settingsUtils.js", "../../public-api/dist/devvit/internals/blocks/useChannel.js", "../../shared-types/dist/Header.js", "../../public-api/dist/types/realtime.js", "../../public-api/dist/apis/ui/helpers/getFormValues.js", "../../public-api/dist/devvit/internals/blocks/useForm.js", "../../public-api/dist/devvit/internals/blocks/useInterval.js", "../../public-api/dist/devvit/internals/blocks/useState.js", "../../public-api/dist/devvit/internals/promise_cache.js", "../../public-api/dist/devvit/internals/cache.js", "../../public-api/dist/apis/AssetsClient/AssetsClient.js", "../../public-api/dist/apis/key-value-storage/KeyValueStorage.js", "../../public-api/dist/apis/media/MediaClient.js", "../../public-api/dist/apis/realtime/RealtimeClient.js", "../../public-api/dist/apis/reddit/RedditAPIClient.js", "../../public-api/dist/types/tid.js", "../../public-api/dist/apis/redis/RedisClient.js", "../../public-api/dist/apis/scheduler/SchedulerClient.js", "../../public-api/dist/apis/settings/SettingsClient.js", "../../public-api/dist/apis/ui/UIClient.js", "../../public-api/dist/apis/makeAPIClients.js", "../../public-api/dist/version.json", "../../public-api/dist/devvit/internals/context.js", "../../public-api/dist/devvit/internals/custom-post.js", "../../public-api/dist/devvit/internals/blocks/BlocksReconciler.js", "../../public-api/dist/apis/ui/helpers/getEffectsFromUIClient.js", "../../public-api/dist/devvit/internals/helpers/makeUniqueIdGenerator.js", "../../public-api/dist/devvit/internals/blocks/BlocksTransformer.js", "../../public-api/dist/devvit/internals/semanticColors.js", "../../public-api/dist/devvit/internals/helpers/color.js", "../../public-api/dist/devvit/internals/blocks/transformContext.js", "../../public-api/dist/devvit/internals/blocks/transformerUtils.js", "../../public-api/dist/devvit/internals/installation-settings.js", "../../public-api/dist/devvit/internals/menu-items.js", "../../public-api/dist/devvit/internals/csrf.js", "../../public-api/dist/devvit/internals/plugins.js", "../../public-api/dist/devvit/internals/scheduler.js", "../../public-api/dist/devvit/internals/triggers.js", "../../shared-types/dist/StringUtil.js", "../../public-api/dist/devvit/internals/ui-event-handler.js", "../../../node_modules/moderndash/src/array/chunk.ts", "../../../node_modules/moderndash/src/array/count.ts", "../../../node_modules/moderndash/src/helpers/fastArrayFlat.ts", "../../../node_modules/moderndash/src/array/difference.ts", "../../../node_modules/moderndash/src/array/dropRightWhile.ts", "../../../node_modules/moderndash/src/array/dropWhile.ts", "../../../node_modules/moderndash/src/array/group.ts", "../../../node_modules/moderndash/src/array/unique.ts", "../../../node_modules/moderndash/src/array/intersection.ts", "../../../node_modules/moderndash/src/array/move.ts", "../../../node_modules/moderndash/src/array/range.ts", "../../../node_modules/moderndash/src/array/shuffle.ts", "../../../node_modules/moderndash/src/array/sort.ts", "../../../node_modules/moderndash/src/array/takeRightWhile.ts", "../../../node_modules/moderndash/src/array/takeWhile.ts", "../../../node_modules/moderndash/src/crypto/hash.ts", "../../../node_modules/moderndash/src/crypto/randomInt.ts", "../../../node_modules/moderndash/src/crypto/randomElem.ts", "../../../node_modules/moderndash/src/crypto/randomFloat.ts", "../../../node_modules/moderndash/src/crypto/randomString.ts", "../../../node_modules/moderndash/src/decorator/toDecorator.ts", "../../../node_modules/moderndash/src/function/debounce.ts", "../../../node_modules/moderndash/src/decorator/decDebounce.ts", "../../../node_modules/moderndash/src/function/maxCalls.ts", "../../../node_modules/moderndash/src/decorator/decMaxCalls.ts", "../../../node_modules/moderndash/src/function/memoize.ts", "../../../node_modules/moderndash/src/decorator/decMemoize.ts", "../../../node_modules/moderndash/src/function/minCalls.ts", "../../../node_modules/moderndash/src/decorator/decMinCalls.ts", "../../../node_modules/moderndash/src/function/throttle.ts", "../../../node_modules/moderndash/src/decorator/decThrottle.ts", "../../../node_modules/moderndash/src/function/times.ts", "../../../node_modules/moderndash/src/number/sum.ts", "../../../node_modules/moderndash/src/number/average.ts", "../../../node_modules/moderndash/src/number/median.ts", "../../../node_modules/moderndash/src/number/round.ts", "../../../node_modules/moderndash/src/validate/isPlainObject.ts", "../../../node_modules/moderndash/src/object/flatKeys.ts", "../../../node_modules/moderndash/src/object/merge.ts", "../../../node_modules/moderndash/src/object/pick.ts", "../../../node_modules/moderndash/src/object/omit.ts", "../../../node_modules/moderndash/src/object/set.ts", "../../../node_modules/moderndash/src/promise/queue.ts", "../../../node_modules/moderndash/src/promise/races.ts", "../../../node_modules/moderndash/src/promise/sleep.ts", "../../../node_modules/moderndash/src/promise/retry.ts", "../../../node_modules/moderndash/src/promise/timeout.ts", "../../../node_modules/moderndash/src/promise/tryCatch.ts", "../../../node_modules/moderndash/src/string/splitWords.ts", "../../../node_modules/moderndash/src/string/capitalize.ts", "../../../node_modules/moderndash/src/string/deburr.ts", "../../../node_modules/moderndash/src/string/camelCase.ts", "../../../node_modules/moderndash/src/string/escapeHtml.ts", "../../../node_modules/moderndash/src/string/escapeRegExp.ts", "../../../node_modules/moderndash/src/string/kebabCase.ts", "../../../node_modules/moderndash/src/string/pascalCase.ts", "../../../node_modules/moderndash/src/string/replaceLast.ts", "../../../node_modules/moderndash/src/string/snakeCase.ts", "../../../node_modules/moderndash/src/string/titleCase.ts", "../../../node_modules/moderndash/src/string/trim.ts", "../../../node_modules/moderndash/src/string/trimEnd.ts", "../../../node_modules/moderndash/src/string/trimStart.ts", "../../../node_modules/moderndash/src/string/truncate.ts", "../../../node_modules/moderndash/src/string/unescapeHtml.ts", "../../../node_modules/moderndash/src/validate/isEmpty.ts", "../../../node_modules/moderndash/src/validate/isEqual.ts", "../../../node_modules/moderndash/src/validate/isUrl.ts", "../../public-api/dist/devvit/internals/ui-request-handler.js", "../../public-api/dist/devvit/internals/blocks/handler/BlocksHandler.js", "../../shared-types/dist/CircuitBreaker.js", "../../public-api/dist/devvit/internals/blocks/handler/promise_cache.js", "../../public-api/dist/devvit/internals/blocks/handler/cache.js", "../../public-api/dist/devvit/internals/blocks/handler/UIClient.js", "../../shared-types/dist/useForm.js", "../../public-api/dist/devvit/internals/blocks/handler/useForm.js", "../../public-api/dist/devvit/internals/blocks/handler/useChannel.js", "../../public-api/dist/devvit/internals/blocks/handler/useInterval.js", "../../public-api/dist/devvit/internals/blocks/handler/RenderContext.js", "../../public-api/dist/devvit/internals/blocks/handler/useState.js", "../../public-api/dist/devvit/internals/blocks/handler/types.js", "../../public-api/dist/devvit/internals/blocks/handler/useAsync.js", "../../public-api/dist/devvit/internals/blocks/handler/ContextBuilder.js", "../../public-api/dist/devvit/internals/upgrade-app-shim.js", "../../public-api/dist/apis/reddit/helpers/makeGettersEnumerable.js", "../../shared-types/dist/richtext/types.js", "../../shared-types/dist/richtext/elements.js", "../../shared-types/dist/richtext/mixins.js", "../../shared-types/dist/richtext/RichTextBuilder.js", "../../public-api/dist/apis/reddit/helpers/richtextToString.js", "../../public-api/dist/apis/reddit/models/Flair.js", "../../public-api/dist/apis/reddit/models/Listing.js", "../../public-api/dist/apis/reddit/models/ModNote.js", "../../public-api/dist/apis/reddit/graphql/GraphQL.js", "../../public-api/dist/apis/reddit/helpers/permissions.js", "../../public-api/dist/apis/reddit/models/Post.js", "../../shared-types/dist/helpers/protoErrorDecoder.js", "../../public-api/dist/apis/reddit/helpers/textFallbackToRichtext.js", "../../public-api/dist/apis/reddit/models/User.js", "../../public-api/dist/apis/reddit/models/ModAction.js", "../../public-api/dist/apis/reddit/models/ModMail.js", "../../public-api/dist/apis/reddit/models/PrivateMessage.js", "../../public-api/dist/apis/reddit/models/Subreddit.js", "../../public-api/dist/apis/reddit/models/Vault.js", "../../public-api/dist/apis/reddit/models/Widget.js", "../../public-api/dist/apis/reddit/models/WikiPage.js", "../../public-api/dist/devvit/internals/blocks/handler/useWebView.js", "../../shared-types/dist/payments/Order.js", "../../shared-types/dist/reservedDevvitMetadataKeys.js", "../../shared-types/dist/payments/Product.js", "../src/plugin.ts", "../src/paymentHelpMenuItem.ts", "../src/hooks/use-orders.ts", "../src/hooks/use-payments.ts", "../src/hooks/use-products.ts", "../src/paymentHandler.ts"],
  "sourcesContent": ["var toString = Object.prototype.toString;\n\nmodule.exports = function kindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n\n  var type = typeof val;\n  if (type === 'boolean') return 'boolean';\n  if (type === 'string') return 'string';\n  if (type === 'number') return 'number';\n  if (type === 'symbol') return 'symbol';\n  if (type === 'function') {\n    return isGeneratorFn(val) ? 'generatorfunction' : 'function';\n  }\n\n  if (isArray(val)) return 'array';\n  if (isBuffer(val)) return 'buffer';\n  if (isArguments(val)) return 'arguments';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  if (isRegexp(val)) return 'regexp';\n\n  switch (ctorName(val)) {\n    case 'Symbol': return 'symbol';\n    case 'Promise': return 'promise';\n\n    // Set, Map, WeakSet, WeakMap\n    case 'WeakMap': return 'weakmap';\n    case 'WeakSet': return 'weakset';\n    case 'Map': return 'map';\n    case 'Set': return 'set';\n\n    // 8-bit typed arrays\n    case 'Int8Array': return 'int8array';\n    case 'Uint8Array': return 'uint8array';\n    case 'Uint8ClampedArray': return 'uint8clampedarray';\n\n    // 16-bit typed arrays\n    case 'Int16Array': return 'int16array';\n    case 'Uint16Array': return 'uint16array';\n\n    // 32-bit typed arrays\n    case 'Int32Array': return 'int32array';\n    case 'Uint32Array': return 'uint32array';\n    case 'Float32Array': return 'float32array';\n    case 'Float64Array': return 'float64array';\n  }\n\n  if (isGeneratorObj(val)) {\n    return 'generator';\n  }\n\n  // Non-plain objects\n  type = toString.call(val);\n  switch (type) {\n    case '[object Object]': return 'object';\n    // iterators\n    case '[object Map Iterator]': return 'mapiterator';\n    case '[object Set Iterator]': return 'setiterator';\n    case '[object String Iterator]': return 'stringiterator';\n    case '[object Array Iterator]': return 'arrayiterator';\n  }\n\n  // other\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n};\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isArray(val) {\n  if (Array.isArray) return Array.isArray(val);\n  return val instanceof Array;\n}\n\nfunction isError(val) {\n  return val instanceof Error || (typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number');\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function'\n    && typeof val.getDate === 'function'\n    && typeof val.setDate === 'function';\n}\n\nfunction isRegexp(val) {\n  if (val instanceof RegExp) return true;\n  return typeof val.flags === 'string'\n    && typeof val.ignoreCase === 'boolean'\n    && typeof val.multiline === 'boolean'\n    && typeof val.global === 'boolean';\n}\n\nfunction isGeneratorFn(name, val) {\n  return ctorName(name) === 'GeneratorFunction';\n}\n\nfunction isGeneratorObj(val) {\n  return typeof val.throw === 'function'\n    && typeof val.return === 'function'\n    && typeof val.next === 'function';\n}\n\nfunction isArguments(val) {\n  try {\n    if (typeof val.length === 'number' && typeof val.callee === 'function') {\n      return true;\n    }\n  } catch (err) {\n    if (err.message.indexOf('callee') !== -1) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * If you need to support Safari 5-7 (8-10 yr-old browser),\n * take a look at https://github.com/feross/is-buffer\n */\n\nfunction isBuffer(val) {\n  if (val.constructor && typeof val.constructor.isBuffer === 'function') {\n    return val.constructor.isBuffer(val);\n  }\n  return false;\n}\n", "/*!\n * shallow-clone <https://github.com/jonschlinkert/shallow-clone>\n *\n * Copyright (c) 2015-present, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nconst valueOf = Symbol.prototype.valueOf;\nconst typeOf = require('kind-of');\n\nfunction clone(val, deep) {\n  switch (typeOf(val)) {\n    case 'array':\n      return val.slice();\n    case 'object':\n      return Object.assign({}, val);\n    case 'date':\n      return new val.constructor(Number(val));\n    case 'map':\n      return new Map(val);\n    case 'set':\n      return new Set(val);\n    case 'buffer':\n      return cloneBuffer(val);\n    case 'symbol':\n      return cloneSymbol(val);\n    case 'arraybuffer':\n      return cloneArrayBuffer(val);\n    case 'float32array':\n    case 'float64array':\n    case 'int16array':\n    case 'int32array':\n    case 'int8array':\n    case 'uint16array':\n    case 'uint32array':\n    case 'uint8clampedarray':\n    case 'uint8array':\n      return cloneTypedArray(val);\n    case 'regexp':\n      return cloneRegExp(val);\n    case 'error':\n      return Object.create(val);\n    default: {\n      return val;\n    }\n  }\n}\n\nfunction cloneRegExp(val) {\n  const flags = val.flags !== void 0 ? val.flags : (/\\w+$/.exec(val) || void 0);\n  const re = new val.constructor(val.source, flags);\n  re.lastIndex = val.lastIndex;\n  return re;\n}\n\nfunction cloneArrayBuffer(val) {\n  const res = new val.constructor(val.byteLength);\n  new Uint8Array(res).set(new Uint8Array(val));\n  return res;\n}\n\nfunction cloneTypedArray(val, deep) {\n  return new val.constructor(val.buffer, val.byteOffset, val.length);\n}\n\nfunction cloneBuffer(val) {\n  const len = val.length;\n  const buf = Buffer.allocUnsafe ? Buffer.allocUnsafe(len) : Buffer.from(len);\n  val.copy(buf);\n  return buf;\n}\n\nfunction cloneSymbol(val) {\n  return valueOf ? Object(valueOf.call(val)) : {};\n}\n\n/**\n * Expose `clone`\n */\n\nmodule.exports = clone;\n", "/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n", "/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n", "'use strict';\n\n/**\n * Module dependenices\n */\n\nconst clone = require('shallow-clone');\nconst typeOf = require('kind-of');\nconst isPlainObject = require('is-plain-object');\n\nfunction cloneDeep(val, instanceClone) {\n  switch (typeOf(val)) {\n    case 'object':\n      return cloneObjectDeep(val, instanceClone);\n    case 'array':\n      return cloneArrayDeep(val, instanceClone);\n    default: {\n      return clone(val);\n    }\n  }\n}\n\nfunction cloneObjectDeep(val, instanceClone) {\n  if (typeof instanceClone === 'function') {\n    return instanceClone(val);\n  }\n  if (instanceClone || isPlainObject(val)) {\n    const res = new val.constructor();\n    for (let key in val) {\n      res[key] = cloneDeep(val[key], instanceClone);\n    }\n    return res;\n  }\n  return val;\n}\n\nfunction cloneArrayDeep(val, instanceClone) {\n  const res = new val.constructor(val.length);\n  for (let i = 0; i < val.length; i++) {\n    res[i] = cloneDeep(val[i], instanceClone);\n  }\n  return res;\n}\n\n/**\n * Expose `cloneDeep`\n */\n\nmodule.exports = cloneDeep;\n", "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n", "import { OrderResultStatus as OrderResultStatusProto } from '@devvit/protos/types/devvit/ui/effect_types/v1alpha/create_order.js';\nimport type { AsyncError } from '@devvit/public-api/types/hooks.js';\n\nexport enum OrderResultStatus {\n  Cancelled,\n  Success,\n  Error,\n}\n\nexport type OrderMetadata = Record<string, string>;\n\nexport type OnPurchaseResult = {\n  status: OrderResultStatus;\n  errorCode?: number | undefined;\n  errorMessage?: string | undefined;\n  orderId?: string | undefined;\n  sku: string;\n  metadata: OrderMetadata;\n};\n\nexport type OnPurchaseResultHandler = (result: OnPurchaseResult) => void | Promise<void>;\n\n/** @internal */\nexport function orderStatusProtoToHook(\n  orderResultStatus: OrderResultStatusProto\n): OrderResultStatus {\n  switch (orderResultStatus) {\n    case OrderResultStatusProto.STATUS_SUCCESS:\n      return OrderResultStatus.Success;\n    case OrderResultStatusProto.STATUS_ERROR:\n      return OrderResultStatus.Error;\n    default:\n      return OrderResultStatus.Cancelled;\n  }\n}\n\nexport type LoadingAsyncState = {\n  loading: true;\n  error: null;\n};\n\nexport type SuccessAsyncState = {\n  loading: false;\n  error: null;\n};\n\nexport type ErrorAsyncState = {\n  loading: false;\n  error: AsyncError;\n};\n\n/**\n@link https://github.com/sindresorhus/type-fest/blob/main/source/simplify.d.ts#L58C1-L58C67\n@description Useful to flatten the type output to improve type hints shown in editors. And also to transform an interface into a type to aide with assignability.\n*/\nexport type Simplify<T> = { [KeyType in keyof T]: T[KeyType] } & {};\n\nexport type AsyncHookResult<T extends Record<string, unknown>> = Simplify<\n  T & (SuccessAsyncState | ErrorAsyncState | LoadingAsyncState)\n>;\n", "export const RunAs = {\n    APP: 0,\n    USER: 1,\n    UNSPECIFIED: 2,\n};\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _a, _Comment_id, _Comment_authorId, _Comment_authorName, _Comment_body, _Comment_createdAt, _Comment_parentId, _Comment_postId, _Comment_subredditId, _Comment_subredditName, _Comment_replies, _Comment_approved, _Comment_approvedAtUtc, _Comment_bannedAtUtc, _Comment_edited, _Comment_locked, _Comment_removed, _Comment_stickied, _Comment_spam, _Comment_distinguishedBy, _Comment_numReports, _Comment_collapsedBecauseCrowdControl, _Comment_score, _Comment_permalink, _Comment_modReportReasons, _Comment_userReportReasons, _Comment_url, _Comment_ignoringReports, _Comment_authorFlair, _Comment_metadata, _Comment_getCommentsListing, _Comment_buildCommentsTree;\nimport { Scope } from '@devvit/protos/json/reddit/devvit/app_permission/v1/app_permission.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT1ID, asT2ID, asT3ID, asT5ID, isCommentId, isT1ID } from '../../../types/tid.js';\nimport { RunAs } from '../common.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nimport { richtextToString } from '../helpers/richtextToString.js';\nimport { convertProtosFlairToCommonFlair } from './Flair.js';\nimport { Listing } from './Listing.js';\nimport { ModNote } from './ModNote.js';\nimport { User } from './User.js';\nexport class Comment {\n    /**\n     * @internal\n     */\n    constructor(data, metadata) {\n        _Comment_id.set(this, void 0);\n        _Comment_authorId.set(this, void 0);\n        _Comment_authorName.set(this, void 0);\n        _Comment_body.set(this, void 0);\n        _Comment_createdAt.set(this, void 0);\n        _Comment_parentId.set(this, void 0);\n        _Comment_postId.set(this, void 0);\n        _Comment_subredditId.set(this, void 0);\n        _Comment_subredditName.set(this, void 0);\n        _Comment_replies.set(this, void 0);\n        _Comment_approved.set(this, void 0);\n        _Comment_approvedAtUtc.set(this, void 0);\n        _Comment_bannedAtUtc.set(this, void 0);\n        _Comment_edited.set(this, void 0);\n        _Comment_locked.set(this, void 0);\n        _Comment_removed.set(this, void 0);\n        _Comment_stickied.set(this, void 0);\n        _Comment_spam.set(this, void 0);\n        _Comment_distinguishedBy.set(this, void 0);\n        _Comment_numReports.set(this, void 0);\n        _Comment_collapsedBecauseCrowdControl.set(this, void 0);\n        _Comment_score.set(this, void 0);\n        _Comment_permalink.set(this, void 0);\n        _Comment_modReportReasons.set(this, void 0);\n        _Comment_userReportReasons.set(this, void 0);\n        _Comment_url.set(this, void 0);\n        _Comment_ignoringReports.set(this, void 0);\n        _Comment_authorFlair.set(this, void 0);\n        _Comment_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        assertNonNull(data.id, 'Comment id is null or undefined');\n        assertNonNull(data.body, 'Comment body is null or undefined');\n        assertNonNull(data.createdUtc, 'Comment is missing created date');\n        assertNonNull(data.author, 'Comment author is null or undefined');\n        assertNonNull(data.parentId, 'Comment parentId is null or undefined');\n        assertNonNull(data.linkId, 'Comment linkId is null or undefined');\n        assertNonNull(data.permalink, 'Comment permalink is null or undefined');\n        assertNonNull(data.subreddit, 'Comment is missing subreddit name');\n        assertNonNull(data.subredditId, 'Comment is missing subreddit id');\n        __classPrivateFieldSet(this, _Comment_id, asT1ID(`t1_${data.id}`), \"f\");\n        __classPrivateFieldSet(this, _Comment_authorId, data.authorFullname ? asT2ID(data.authorFullname) : undefined, \"f\");\n        __classPrivateFieldSet(this, _Comment_authorName, data.author, \"f\");\n        __classPrivateFieldSet(this, _Comment_body, data.body, \"f\");\n        __classPrivateFieldSet(this, _Comment_subredditId, asT5ID(data.subredditId), \"f\");\n        __classPrivateFieldSet(this, _Comment_subredditName, data.subreddit, \"f\");\n        __classPrivateFieldSet(this, _Comment_parentId, isCommentId(data.parentId) ? asT1ID(data.parentId) : asT3ID(data.parentId), \"f\");\n        __classPrivateFieldSet(this, _Comment_postId, asT3ID(data.linkId), \"f\");\n        __classPrivateFieldSet(this, _Comment_edited, data.edited ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_locked, data.locked ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_removed, data.removed ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_stickied, data.stickied ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_approved, data.approved ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_approvedAtUtc, data.approvedAtUtc ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Comment_bannedAtUtc, data.bannedAtUtc ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Comment_spam, data.spam ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_distinguishedBy, data.distinguished, \"f\");\n        __classPrivateFieldSet(this, _Comment_numReports, data.numReports ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Comment_collapsedBecauseCrowdControl, data.collapsedBecauseCrowdControl ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_score, data.score ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Comment_permalink, data.permalink, \"f\");\n        // R2 API does not include a URL for a comment, just a permalink\n        __classPrivateFieldSet(this, _Comment_url, new URL(data.permalink ?? '', 'https://www.reddit.com/').toString(), \"f\");\n        __classPrivateFieldSet(this, _Comment_ignoringReports, data.ignoreReports ?? false, \"f\");\n        __classPrivateFieldSet(this, _Comment_authorFlair, convertProtosFlairToCommonFlair({\n            flairBackgroundColor: data.authorFlairBackgroundColor,\n            flairCssClass: data.authorFlairCssClass,\n            flairText: data.authorFlairText,\n            flairType: data.authorFlairType,\n            flairTemplateId: data.authorFlairTemplateId,\n            flairRichtext: data.authorFlairRichtext,\n            flairTextColor: data.authorFlairTextColor,\n        }), \"f\");\n        __classPrivateFieldSet(this, _Comment_modReportReasons, (data.modReports ?? []).map(([reason]) => reason), \"f\");\n        __classPrivateFieldSet(this, _Comment_userReportReasons, (data.userReports ?? []).map(([reason]) => reason), \"f\");\n        const createdAt = new Date(0);\n        createdAt.setUTCSeconds(data.createdUtc);\n        __classPrivateFieldSet(this, _Comment_createdAt, createdAt, \"f\");\n        __classPrivateFieldSet(this, _Comment_replies, __classPrivateFieldGet(_a, _a, \"m\", _Comment_getCommentsListing).call(_a, {\n            postId: __classPrivateFieldGet(this, _Comment_postId, \"f\"),\n            commentId: __classPrivateFieldGet(this, _Comment_id, \"f\"),\n        }, metadata), \"f\");\n        __classPrivateFieldSet(this, _Comment_metadata, metadata, \"f\");\n    }\n    get id() {\n        return __classPrivateFieldGet(this, _Comment_id, \"f\");\n    }\n    get authorId() {\n        return __classPrivateFieldGet(this, _Comment_authorId, \"f\");\n    }\n    get authorName() {\n        return __classPrivateFieldGet(this, _Comment_authorName, \"f\");\n    }\n    get subredditId() {\n        return __classPrivateFieldGet(this, _Comment_subredditId, \"f\");\n    }\n    get subredditName() {\n        return __classPrivateFieldGet(this, _Comment_subredditName, \"f\");\n    }\n    get body() {\n        return __classPrivateFieldGet(this, _Comment_body, \"f\");\n    }\n    get createdAt() {\n        return __classPrivateFieldGet(this, _Comment_createdAt, \"f\");\n    }\n    get parentId() {\n        return __classPrivateFieldGet(this, _Comment_parentId, \"f\");\n    }\n    get postId() {\n        return __classPrivateFieldGet(this, _Comment_postId, \"f\");\n    }\n    get replies() {\n        return __classPrivateFieldGet(this, _Comment_replies, \"f\");\n    }\n    get distinguishedBy() {\n        return __classPrivateFieldGet(this, _Comment_distinguishedBy, \"f\");\n    }\n    get locked() {\n        return __classPrivateFieldGet(this, _Comment_locked, \"f\");\n    }\n    get stickied() {\n        return __classPrivateFieldGet(this, _Comment_stickied, \"f\");\n    }\n    get removed() {\n        return __classPrivateFieldGet(this, _Comment_removed, \"f\");\n    }\n    get approved() {\n        return __classPrivateFieldGet(this, _Comment_approved, \"f\");\n    }\n    /**\n     * A number representing the UTC timestamp in seconds, or 0 if its not approved.\n     */\n    get approvedAtUtc() {\n        return __classPrivateFieldGet(this, _Comment_approvedAtUtc, \"f\");\n    }\n    get bannedAtUtc() {\n        return __classPrivateFieldGet(this, _Comment_bannedAtUtc, \"f\");\n    }\n    get spam() {\n        return __classPrivateFieldGet(this, _Comment_spam, \"f\");\n    }\n    get edited() {\n        return __classPrivateFieldGet(this, _Comment_edited, \"f\");\n    }\n    get numReports() {\n        return __classPrivateFieldGet(this, _Comment_numReports, \"f\");\n    }\n    get collapsedBecauseCrowdControl() {\n        return __classPrivateFieldGet(this, _Comment_collapsedBecauseCrowdControl, \"f\");\n    }\n    get score() {\n        return __classPrivateFieldGet(this, _Comment_score, \"f\");\n    }\n    get permalink() {\n        return __classPrivateFieldGet(this, _Comment_permalink, \"f\");\n    }\n    get userReportReasons() {\n        return __classPrivateFieldGet(this, _Comment_userReportReasons, \"f\");\n    }\n    get modReportReasons() {\n        return __classPrivateFieldGet(this, _Comment_modReportReasons, \"f\");\n    }\n    get url() {\n        return __classPrivateFieldGet(this, _Comment_url, \"f\");\n    }\n    get ignoringReports() {\n        return __classPrivateFieldGet(this, _Comment_ignoringReports, \"f\");\n    }\n    get authorFlair() {\n        return __classPrivateFieldGet(this, _Comment_authorFlair, \"f\");\n    }\n    toJSON() {\n        return {\n            id: this.id,\n            authorName: this.authorName,\n            subredditId: this.subredditId,\n            subredditName: this.subredditName,\n            body: this.body,\n            createdAt: this.createdAt,\n            parentId: this.parentId,\n            postId: this.postId,\n            replies: this.replies,\n            approved: this.approved,\n            locked: this.locked,\n            removed: this.removed,\n            stickied: this.stickied,\n            spam: this.spam,\n            edited: this.edited,\n            distinguishedBy: this.distinguishedBy,\n            numReports: this.numReports,\n            collapsedBecauseCrowdControl: this.collapsedBecauseCrowdControl,\n            score: this.score,\n            permalink: this.permalink,\n            modReportReasons: this.modReportReasons,\n            userReportReasons: this.userReportReasons,\n            url: this.url,\n            ignoringReports: this.ignoringReports,\n            authorFlair: __classPrivateFieldGet(this, _Comment_authorFlair, \"f\"),\n        };\n    }\n    isLocked() {\n        return __classPrivateFieldGet(this, _Comment_locked, \"f\");\n    }\n    isApproved() {\n        return __classPrivateFieldGet(this, _Comment_approved, \"f\");\n    }\n    isRemoved() {\n        return __classPrivateFieldGet(this, _Comment_removed, \"f\");\n    }\n    isSpam() {\n        return __classPrivateFieldGet(this, _Comment_spam, \"f\");\n    }\n    isStickied() {\n        return __classPrivateFieldGet(this, _Comment_stickied, \"f\");\n    }\n    isDistinguished() {\n        return Boolean(__classPrivateFieldGet(this, _Comment_distinguishedBy, \"f\"));\n    }\n    isEdited() {\n        return __classPrivateFieldGet(this, _Comment_edited, \"f\");\n    }\n    isIgnoringReports() {\n        return __classPrivateFieldGet(this, _Comment_ignoringReports, \"f\");\n    }\n    async delete() {\n        return _a.delete(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n    }\n    async edit(options) {\n        const newComment = await _a.edit({\n            id: this.id,\n            ...options,\n        }, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_body, newComment.body, \"f\");\n        __classPrivateFieldSet(this, _Comment_edited, newComment.edited, \"f\");\n        return this;\n    }\n    async approve() {\n        await _a.approve(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_approved, true, \"f\");\n        __classPrivateFieldSet(this, _Comment_removed, false, \"f\");\n    }\n    async remove(isSpam = false) {\n        await _a.remove(this.id, isSpam, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_removed, true, \"f\");\n        __classPrivateFieldSet(this, _Comment_spam, isSpam, \"f\");\n        __classPrivateFieldSet(this, _Comment_approved, false, \"f\");\n    }\n    async lock() {\n        await _a.lock(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_locked, true, \"f\");\n    }\n    async unlock() {\n        await _a.unlock(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_locked, false, \"f\");\n    }\n    async reply(options) {\n        return _a.submit({\n            id: this.id,\n            ...options,\n        }, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n    }\n    async getAuthor() {\n        return User.getByUsername(__classPrivateFieldGet(this, _Comment_authorName, \"f\"), __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n    }\n    async distinguish(makeSticky = false) {\n        const { distinguishedBy, stickied } = await _a.distinguish(this.id, makeSticky, false, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_distinguishedBy, distinguishedBy, \"f\");\n        __classPrivateFieldSet(this, _Comment_stickied, stickied, \"f\");\n    }\n    async distinguishAsAdmin(makeSticky = false) {\n        const { distinguishedBy, stickied } = await _a.distinguish(this.id, makeSticky, true, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_distinguishedBy, distinguishedBy, \"f\");\n        __classPrivateFieldSet(this, _Comment_stickied, stickied, \"f\");\n    }\n    async undistinguish() {\n        const { distinguishedBy, stickied } = await _a.undistinguish(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_distinguishedBy, distinguishedBy, \"f\");\n        __classPrivateFieldSet(this, _Comment_stickied, stickied, \"f\");\n    }\n    async ignoreReports() {\n        await _a.ignoreReports(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_ignoringReports, true, \"f\");\n    }\n    async unignoreReports() {\n        await _a.unignoreReports(this.id, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Comment_ignoringReports, false, \"f\");\n    }\n    /**\n     * Add a mod note for why the comment was removed\n     *\n     * @param options.reasonId id of a Removal Reason - you can leave this as an empty string if you don't have one\n     * @param options.modNote the reason for removal (maximum 100 characters) (optional)\n     * @returns\n     */\n    addRemovalNote(options) {\n        return ModNote.addRemovalNote({ itemIds: [__classPrivateFieldGet(this, _Comment_id, \"f\")], ...options }, __classPrivateFieldGet(this, _Comment_metadata, \"f\"));\n    }\n    /** @internal */\n    static async getById(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        const commentId = isT1ID(id) ? id : `t1_${id}`;\n        const response = await client.Info({\n            subreddits: [],\n            thingIds: [commentId],\n        }, metadata);\n        if (!response.data?.children?.[0]?.data) {\n            throw new Error('not found');\n        }\n        return new _a(response.data.children[0].data, metadata);\n    }\n    /** @internal */\n    static getComments(options, metadata) {\n        const { postId, commentId, ...rest } = options;\n        return __classPrivateFieldGet(_a, _a, \"m\", _Comment_getCommentsListing).call(_a, {\n            postId: asT3ID(postId),\n            commentId: commentId ? asT1ID(commentId) : undefined,\n            ...rest,\n        }, metadata);\n    }\n    /** @internal */\n    static async edit(options, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        const { id } = options;\n        let richtextString;\n        if ('richtext' in options) {\n            richtextString = richtextToString(options.richtext);\n        }\n        const response = await client.EditUserText({\n            thingId: id,\n            text: 'text' in options ? options.text : '',\n            richtextJson: richtextString,\n            runAs: RunAs.APP,\n        }, metadata);\n        if (response.json?.errors?.length) {\n            throw new Error('Failed to edit comment');\n        }\n        const comment = response.json?.data?.things?.[0]?.data;\n        assertNonNull(comment);\n        return new _a(comment, metadata);\n    }\n    /** @internal */\n    static async delete(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Del({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async approve(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.Approve({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async remove(id, isSpam = false, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.Remove({\n            id,\n            spam: isSpam,\n        }, metadata);\n    }\n    /** @internal */\n    static async lock(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Lock({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unlock(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Unlock({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async submit(options, metadata) {\n        const { runAs = 'APP' } = options;\n        const runAsType = RunAs[runAs];\n        const client = runAsType === RunAs.USER\n            ? Devvit.userActionsPlugin\n            : Devvit.redditAPIPlugins.LinksAndComments;\n        const { id } = options;\n        if (runAsType === RunAs.USER) {\n            Devvit.assertUserScope(Scope.SUBMIT_COMMENT);\n        }\n        let richtextString;\n        if ('richtext' in options) {\n            richtextString = richtextToString(options.richtext);\n        }\n        const response = await client.Comment({\n            thingId: id,\n            text: 'text' in options ? options.text : '',\n            richtextJson: richtextString,\n            runAs: runAsType,\n        }, metadata);\n        // TODO: figure out a better errors to throw\n        if (response.json?.errors?.length) {\n            throw new Error('failed to reply to comment');\n        }\n        const data = response.json?.data?.things?.[0]?.data;\n        assertNonNull(data);\n        return new _a(data, metadata);\n    }\n    /** @internal */\n    static async distinguish(id, sticky, asAdmin, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        const response = await client.Distinguish({\n            id,\n            how: asAdmin ? 'admin' : 'yes',\n            sticky,\n        }, metadata);\n        const comment = response.json?.data?.things?.[0]?.data;\n        assertNonNull(comment);\n        return {\n            distinguishedBy: comment.distinguished,\n            stickied: Boolean(comment.stickied),\n        };\n    }\n    /** @internal */\n    static async undistinguish(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        const response = await client.Distinguish({\n            id,\n            how: 'no',\n            sticky: false,\n        }, metadata);\n        const comment = response.json?.data?.things?.[0]?.data;\n        assertNonNull(comment);\n        return {\n            distinguishedBy: comment.distinguished,\n            stickied: Boolean(comment.stickied),\n        };\n    }\n    /** @internal */\n    static getCommentsByUser(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            async fetch(fetchOptions) {\n                const response = await client.UserWhere({\n                    username: options.username,\n                    where: 'comments',\n                    ...fetchOptions,\n                }, metadata);\n                assertNonNull(response.data, 'Failed to get comments for user');\n                const children = response.data.children?.map((child) => new _a(child.data, metadata)) || [];\n                return {\n                    children,\n                    before: response.data.before,\n                    after: response.data.after,\n                };\n            },\n        });\n    }\n    /** @internal */\n    static async ignoreReports(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.IgnoreReports({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unignoreReports(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.UnignoreReports({\n            id,\n        }, metadata);\n    }\n}\n_a = Comment, _Comment_id = new WeakMap(), _Comment_authorId = new WeakMap(), _Comment_authorName = new WeakMap(), _Comment_body = new WeakMap(), _Comment_createdAt = new WeakMap(), _Comment_parentId = new WeakMap(), _Comment_postId = new WeakMap(), _Comment_subredditId = new WeakMap(), _Comment_subredditName = new WeakMap(), _Comment_replies = new WeakMap(), _Comment_approved = new WeakMap(), _Comment_approvedAtUtc = new WeakMap(), _Comment_bannedAtUtc = new WeakMap(), _Comment_edited = new WeakMap(), _Comment_locked = new WeakMap(), _Comment_removed = new WeakMap(), _Comment_stickied = new WeakMap(), _Comment_spam = new WeakMap(), _Comment_distinguishedBy = new WeakMap(), _Comment_numReports = new WeakMap(), _Comment_collapsedBecauseCrowdControl = new WeakMap(), _Comment_score = new WeakMap(), _Comment_permalink = new WeakMap(), _Comment_modReportReasons = new WeakMap(), _Comment_userReportReasons = new WeakMap(), _Comment_url = new WeakMap(), _Comment_ignoringReports = new WeakMap(), _Comment_authorFlair = new WeakMap(), _Comment_metadata = new WeakMap(), _Comment_getCommentsListing = function _Comment_getCommentsListing(options, metadata, depthOffset = 0) {\n    return new Listing({\n        limit: options.limit,\n        pageSize: options.pageSize,\n        fetch: async (fetchOptions) => {\n            let limit = fetchOptions.limit;\n            const listingsClient = Devvit.redditAPIPlugins.Listings;\n            const linksAndCommentsClient = Devvit.redditAPIPlugins.LinksAndComments;\n            let commentId = options.commentId;\n            if (fetchOptions.more) {\n                if (fetchOptions.more.children.length) {\n                    const more = fetchOptions.more;\n                    // The maximum page size for MoreChildren is 100\n                    if (!limit || limit > 100) {\n                        limit = 100;\n                    }\n                    const moreIds = more.children.splice(0, limit);\n                    const response = await linksAndCommentsClient.MoreChildren({\n                        linkId: options.postId,\n                        children: moreIds,\n                        sort: options.sort,\n                    }, metadata);\n                    if (!response.json?.data?.things?.length) {\n                        return { children: [] };\n                    }\n                    const { children } = __classPrivateFieldGet(_a, _a, \"m\", _Comment_buildCommentsTree).call(_a, response.json.data.things, options.postId, options, metadata);\n                    return { children, more: more.children.length ? more : undefined };\n                }\n                else {\n                    // parentId is only ever T3 for the MoreChildren case.\n                    commentId = fetchOptions.more.parentId;\n                    depthOffset = depthOffset + fetchOptions.more.depth;\n                }\n            }\n            const response = await listingsClient.Comments({\n                article: options.postId.substring(3),\n                comment: commentId?.substring(3),\n                limit,\n                depth: options.depth,\n                sort: options.sort,\n            }, metadata);\n            // The first item of `response.listings` is always the post (t3) listing\n            // and the second item is the comments (t1) listing.\n            let responseChildren = response.listings?.[1]?.data?.children ?? [];\n            const topLevelComment = responseChildren[0];\n            if (commentId && topLevelComment?.data?.replyList?.data) {\n                responseChildren = topLevelComment.data.replyList.data.children;\n            }\n            return __classPrivateFieldGet(_a, _a, \"m\", _Comment_buildCommentsTree).call(_a, responseChildren, commentId ?? options.postId, options, metadata, depthOffset);\n        },\n    });\n}, _Comment_buildCommentsTree = function _Comment_buildCommentsTree(redditObjects, parentId, options, metadata, depthOffset = 0) {\n    const children = [];\n    let more;\n    // Map of comments to help set parent-child relationship between comments returned by MoreChildren.\n    const commentsMap = {};\n    for (const child of redditObjects) {\n        if (!child.data) {\n            continue;\n        }\n        if (child.data.depth != null) {\n            child.data.depth = child.data.depth + depthOffset;\n        }\n        // Prevent returning comments that are beyond the maximum depth requested.\n        if (child.data.depth != null && options.depth != null && child.data.depth >= options.depth) {\n            continue;\n        }\n        const parentComment = child.data.parentId ? commentsMap[child.data.parentId] : undefined;\n        if (child.kind === 't1') {\n            // Sometimes MoreChildren API returns a comment that has already been seen.\n            if (child.data.name === parentId) {\n                continue;\n            }\n            const comment = new _a(child.data, metadata);\n            commentsMap[comment.id] = comment;\n            __classPrivateFieldSet(comment, _Comment_replies, __classPrivateFieldGet(_a, _a, \"m\", _Comment_getCommentsListing).call(_a, {\n                ...options,\n                postId: comment.postId,\n                commentId: comment.id,\n            }, metadata, depthOffset), \"f\");\n            // Preload the comment's replies Listing\n            if ('replyList' in child.data && child.data.replyList?.data) {\n                const { children, more } = __classPrivateFieldGet(_a, _a, \"m\", _Comment_buildCommentsTree).call(_a, child.data.replyList.data.children, comment.id, options, metadata, depthOffset);\n                if (children.length) {\n                    comment.replies.children.push(...children);\n                }\n                if (more) {\n                    comment.replies.setMore(more);\n                }\n            }\n            // Since the replies for this comment were already load we can skip the first fetch call\n            comment.replies.preventInitialFetch();\n            if (parentComment) {\n                parentComment.replies.children.push(comment);\n            }\n            else {\n                children.push(comment);\n            }\n        }\n        else if (child.kind === 'more' && child.data.parentId && child.data.depth != null) {\n            const thisMore = {\n                parentId: isCommentId(child.data.parentId)\n                    ? asT1ID(child.data.parentId)\n                    : asT3ID(child.data.parentId),\n                children: child.data.children ?? [],\n                depth: child.data.depth,\n            };\n            if (parentComment) {\n                parentComment.replies.setMore(thisMore);\n            }\n            else if (thisMore.parentId === parentId) {\n                more = thisMore;\n            }\n        }\n    }\n    return { children, more };\n};\n", "export function assertNonNull(val, msg) {\n    if (val == null)\n        throw Error(msg ?? 'Expected nonnullish value.');\n}\nexport function NonNull(val, msg) {\n    assertNonNull(val, msg);\n    return val;\n}\n", "var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _a, _Devvit_appSettings, _Devvit_config, _Devvit_customPostType, _Devvit_formDefinitions, _Devvit_installationSettings, _Devvit_menuItems, _Devvit_scheduledJobHandlers, _Devvit_triggerOnEventHandlers, _Devvit_webViewAssets, _Devvit_domains, _Devvit_scopes, _Devvit_additionallyProvides, _Devvit_uses, _Devvit_pluginClients, _Devvit_getUserScopesFromConfig;\nimport * as protos from '@devvit/protos';\nimport { Scope } from '@devvit/protos/json/reddit/devvit/app_permission/v1/app_permission.js';\nimport { Actor } from '@devvit/shared-types/Actor.js';\nimport { assertRequestedFetchDomainsLimit, normalizeDomains, } from '@devvit/shared-types/fetch-domains.js';\nimport { assertValidFormFields } from '../apis/ui/helpers/assertValidFormFields.js';\nimport { SettingScope } from '../types/index.js';\nimport { registerAppSettings } from './internals/app-settings.js';\nimport { registerCustomPost } from './internals/custom-post.js';\nimport { registerInstallationSettings } from './internals/installation-settings.js';\nimport { registerMenuItems } from './internals/menu-items.js';\nimport { pluginIsEnabled } from './internals/plugins.js';\nimport { registerScheduler } from './internals/scheduler.js';\nimport { registerTriggers } from './internals/triggers.js';\nimport { registerUIEventHandler } from './internals/ui-event-handler.js';\nimport { registerUIRequestHandlers } from './internals/ui-request-handler.js';\nexport class Devvit extends Actor {\n    /**\n     * To use certain APIs and features of Devvit, you must enable them using this function.\n     *\n     * @param config - The configuration object.\n     * @param config.http - Enables the HTTP API.\n     * @param config.redditAPI - Enables the Reddit API.\n     * @param config.kvStore - Enables the Key Value Storage API.\n     * @example\n     * ```ts\n     * Devvit.configure({\n     *   http: true,\n     *   redditAPI: true,\n     *   redis: true,\n     *   media: true\n     * });\n     * ```\n     */\n    static configure(config) {\n        __classPrivateFieldSet(this, _a, { ...__classPrivateFieldGet(this, _a, \"f\", _Devvit_config), ...config }, \"f\", _Devvit_config);\n        const httpConfig = config.http;\n        const hasRequestedDomains = typeof httpConfig === 'object' && 'domains' in httpConfig;\n        const pluginSettings = hasRequestedDomains\n            ? { enabled: true }\n            : httpConfig;\n        if (pluginIsEnabled(pluginSettings)) {\n            if (hasRequestedDomains) {\n                assertRequestedFetchDomainsLimit(httpConfig.domains);\n                __classPrivateFieldSet(this, _a, normalizeDomains(httpConfig.domains), \"f\", _Devvit_domains);\n            }\n            this.use(protos.HTTPDefinition);\n        }\n        // We're now defaulting this to on.\n        const redisNotSpecified = config.redis === undefined;\n        if (redisNotSpecified || pluginIsEnabled(config.kvStore) || pluginIsEnabled(config.redis)) {\n            this.use(protos.KVStoreDefinition);\n            this.use(protos.RedisAPIDefinition);\n        }\n        if (pluginIsEnabled(config.media)) {\n            this.use(protos.MediaServiceDefinition);\n        }\n        if (pluginIsEnabled(config.redditAPI)) {\n            // Loading all Reddit API plugins for now.\n            // In the future we can split this by oauth scope or section.\n            this.use(protos.FlairDefinition);\n            this.use(protos.GraphQLDefinition);\n            this.use(protos.LinksAndCommentsDefinition);\n            this.use(protos.ListingsDefinition);\n            this.use(protos.ModerationDefinition);\n            this.use(protos.ModNoteDefinition);\n            this.use(protos.NewModmailDefinition);\n            this.use(protos.PrivateMessagesDefinition);\n            this.use(protos.SubredditsDefinition);\n            this.use(protos.UsersDefinition);\n            this.use(protos.WidgetsDefinition);\n            this.use(protos.WikiDefinition);\n        }\n        if (pluginIsEnabled(config.realtime)) {\n            this.use(protos.RealtimeDefinition);\n        }\n        const userActionsConfig = config.userActions;\n        const hasScopes = typeof userActionsConfig === 'object' && 'scopes' in userActionsConfig;\n        const pluginEnabled = hasScopes\n            ? { enabled: true }\n            : userActionsConfig;\n        if (pluginIsEnabled(pluginEnabled)) {\n            this.use(protos.UserActionsDefinition);\n            __classPrivateFieldSet(this, _a, __classPrivateFieldGet(this, _a, \"m\", _Devvit_getUserScopesFromConfig).call(this, config), \"f\", _Devvit_scopes);\n        }\n    }\n    /**\n     * Add a menu item to the Reddit UI.\n     * @param menuItem - The menu item to add.\n     * @param menuItem.label - The label of the menu item.\n     * @example\n     * ```ts\n     * Devvit.addMenuItem({\n     *   label: 'My Menu Item',\n     *   location: 'subreddit',\n     *   onPress: (event, context) => {\n     *     const location = event.location;\n     *     const targetId = event.targetId;\n     *     context.ui.showToast(`You clicked on ${location} ${targetId}`);\n     *   }\n     * });\n     * ```\n     */\n    static addMenuItem(item) {\n        this._initMenu();\n        __classPrivateFieldGet(this, _a, \"f\", _Devvit_menuItems).push(item);\n    }\n    /**\n     * Add a custom post type for your app.\n     * @param customPostType - The custom post type to add.\n     * @param customPostType.name - The name of the custom post type.\n     * @param customPostType.description - An optional description.\n     * @param customPostType.height - An optional parameter to set post height, defaults to 'regular'.\n     * @param customPostType.render - A function or `Devvit.CustomPostComponent` that returns the UI for the custom post.\n     * @example\n     * ```ts\n     * import { Devvit, useState } from '@devvit/public-api';\n     *\n     * Devvit.addCustomPostType({\n     *   name: 'Counter',\n     *   description: 'A simple click counter post.',\n     *   render: (context) => {\n     *     const [counter, setCounter] = useState();\n     *\n     *     return (\n     *       <vstack>\n     *         <text>{counter}</text>\n     *         <button onPress={() => setCounter((counter) => counter + 1)}>Click me!</button>\n     *       </vstack>\n     *     );\n     *   },\n     * });\n     * ```\n     */\n    static addCustomPostType(customPostType) {\n        __classPrivateFieldSet(this, _a, customPostType, \"f\", _Devvit_customPostType);\n    }\n    /**\n     * Create a form that can be opened from menu items and custom posts.\n     * @param form - The form or a function that returns the form.\n     * @param onSubmit - The function to call when the form is submitted.\n     * @returns A unique key for the form that can used with `ui.showForm`.\n     */\n    static createForm(form, onSubmit) {\n        this._initForms();\n        const formKey = `form.${__classPrivateFieldGet(this, _a, \"f\", _Devvit_formDefinitions).size}`;\n        __classPrivateFieldGet(this, _a, \"f\", _Devvit_formDefinitions).set(formKey, {\n            form,\n            onSubmit,\n        });\n        return formKey;\n    }\n    /**\n     * Add a scheduled job type for your app. This will allow you to schedule jobs using the `scheduler` API.\n     * @param job - The scheduled job type to add.\n     * @param job.name - The name of the scheduled job type.\n     * @param job.onRun - The function to call when the scheduled job is run.\n     * @example\n     * ```ts\n     * Devvit.addSchedulerJob({\n     *   name: 'checkNewPosts',\n     *   onRun: async (event, context) => {\n     *     const newPosts = await context.reddit.getNewPosts({ limit: 5 }).all();\n     *     for (const post of newPosts) {\n     *       if (post.title.includes('bad word')) {\n     *         await post.remove();\n     *       }\n     *     }\n     *   }\n     * });\n     *\n     * Devvit.addMenuItem({\n     *   label: 'Check for new posts',\n     *   location: 'location',\n     *   onPress: (event, context) => {\n     *     const = await context.scheduler.runJob({\n     *       name: 'checkNewPosts',\n     *       when: new Date(Date.now() + 5000) // in 5 seconds\n     *     });\n     *   }\n     * });\n     * ```\n     */\n    static addSchedulerJob(job) {\n        this._initScheduler();\n        if (__classPrivateFieldGet(this, _a, \"f\", _Devvit_scheduledJobHandlers).has(job.name)) {\n            throw new Error(`Job ${job.name} is already defined`);\n        }\n        __classPrivateFieldGet(this, _a, \"f\", _Devvit_scheduledJobHandlers).set(job.name, job.onRun);\n    }\n    /**\n     * Add settings that can be configured to customize the behavior of your app.\n     *\n     * There are two levels of settings:\n     * - App settings (scope: 'app')\n     * - Installation settings (scope: 'installation' or unspecified scope).\n     *\n     * Installation settings are meant to be configured by the user that installs your app.\n     * This is a good place to add anything that a user might want to change to personalize the app (e.g. the default city to show the weather for or a\n     * specific sport team that a subreddit follows). Note that these are good for subreddit level customization but not necessarily good for things\n     * that might be different for two users in a subreddit (e.g. setting the default city to show the weather for is only useful at a sub level if\n     * the sub is for a specific city or region).\n     * Installation settings can be viewed and configured here: https://developers.reddit.com/r/subreddit-name/apps/app-name.\n     *\n     * App settings can be accessed and consumed by all installations of the app. This is mainly useful for developer secrets/API keys that your\n     * app needs to function. They can only be changed/viewed by you via the CLI (devvit settings set and devvit settings list). This ensures secrets\n     * are persisted in an encrypted store and don't get committed in the source code.\n     *\n     * Warning: You should never paste your actual key into any fields passed into Devvit.addSettings - this is merely where you state what your API key's name and description are. You will be able to set the actual value of the key via CLI.\n     *\n     * Note: setting names must be unique across all settings.\n     *\n     * @param fields - Fields for the app and installation settings.\n     * @example Add multiple fields\n     * ```ts\n     * Devvit.addSettings([\n     *   {\n     *     type: 'string',\n     *     name: 'weather-api-key',\n     *     label: 'My weather.com API key',\n     *     scope: SettingScope.App,\n     *     isSecret: true\n     *   },\n     *   {\n     *     type: 'string',\n     *     name: 'Default City',\n     *     label: 'Default city to show the weather for by default',\n     *     scope: SettingScope.Installation,\n     *     onValidate: ({ value }) => {\n     *       if (!isValidCity(value)) {\n     *         return 'You must ender a valid city: ${validCities.join(\", \")}';\n     *       }\n     *     }\n     *   },\n     *   {\n     *     type: 'number',\n     *     name: 'Default Forecast Window (in days)',\n     *     label: 'The number of days to show for forecast for by default',\n     *     scope: SettingScope.Installation,\n     *     onValidate: ({ value }) => {\n     *       if (value > 10 || value < 1) {\n     *         return 'Forecast window must be from 1 to 10 days';\n     *       }\n     *     }\n     *   },\n     * ]);\n     * ```\n     *\n     * @example Add a single field\n     * ```ts\n     * Devvit.addSettings({\n     *   type: 'string',\n     *   name: 'weather-api-key',\n     *   label: 'My weather.com API key',\n     *   scope: SettingScope.App,\n     *   isSecret: true\n     * });\n     * ```\n     */\n    static addSettings(fields) {\n        var _b;\n        // if the fields is a single field, convert it to an array\n        const fieldsArray = Array.isArray(fields) ? fields : [fields];\n        const installSettings = fieldsArray.filter((field) => field.type === 'group' || !field.scope || field.scope === SettingScope.Installation);\n        const appSettings = fieldsArray.filter((field) => field.type !== 'group' && field.scope === SettingScope.App);\n        this._initSettings(appSettings.length > 0, installSettings.length > 0);\n        if (installSettings.length > 0) {\n            // initialize the installation settings with empty array if it is not initialized\n            __classPrivateFieldGet(this, _a, \"f\", _Devvit_installationSettings).push(...installSettings);\n        }\n        if (appSettings.length > 0) {\n            // initialize the app settings with empty array if it is not initialized\n            __classPrivateFieldGet(this, _a, \"f\", _Devvit_appSettings).push(...appSettings);\n        }\n        assertValidFormFields([...(__classPrivateFieldGet(this, _a, \"f\", _Devvit_installationSettings) ?? []), ...(__classPrivateFieldGet(this, _a, \"f\", _Devvit_appSettings) ?? [])]);\n        if (!__classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.SettingsDefinition.fullName]) {\n            this.use(protos.SettingsDefinition);\n        }\n        // Save the settings to the global devvit object so that they can be accessed by the settings\n        // plugin.\n        // TODO: This should be set in the devvit.json config, saved on the bundle by the CLI,\n        //  and loaded into the globalThis.devvit.settings object by the bootstrap code.\n        globalThis.devvit ?? (globalThis.devvit = {});\n        (_b = globalThis.devvit).settings ?? (_b.settings = {});\n        globalThis.devvit.settings.app = __classPrivateFieldGet(this, _a, \"f\", _Devvit_appSettings);\n        globalThis.devvit.settings.installation = __classPrivateFieldGet(this, _a, \"f\", _Devvit_installationSettings);\n    }\n    static addTrigger(triggerDefinition) {\n        if ('events' in triggerDefinition) {\n            for (const eventType of triggerDefinition.events) {\n                this.addTrigger({\n                    event: eventType,\n                    onEvent: (event, context) => triggerDefinition.onEvent(event, context),\n                }); // eslint-disable-line @typescript-eslint/no-explicit-any\n            }\n            return this;\n        }\n        if (__classPrivateFieldGet(this, _a, \"f\", _Devvit_triggerOnEventHandlers).has(triggerDefinition.event)) {\n            __classPrivateFieldGet(this, _a, \"f\", _Devvit_triggerOnEventHandlers)\n                .get(triggerDefinition.event)\n                ?.push(triggerDefinition.onEvent);\n        }\n        else {\n            __classPrivateFieldGet(this, _a, \"f\", _Devvit_triggerOnEventHandlers).set(triggerDefinition.event, [\n                triggerDefinition.onEvent,\n            ]);\n        }\n        return _a;\n    }\n    /**\n     * @internal\n     * utility static method to register additional actor types without exposing an explicit\n     * registration hook such as `addTrigger` or `addMenuItem`\n     */\n    static provide(def) {\n        __classPrivateFieldGet(this, _a, \"f\", _Devvit_additionallyProvides).push(def);\n    }\n    /** @internal */\n    static use(d) {\n        __classPrivateFieldGet(this, _a, \"f\", _Devvit_uses)[d.fullName] = { def: d, handler: undefined };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const wrapped = {};\n        for (const method of Object.values(d.methods)) {\n            wrapped[method.name] = (args, metadata) => __classPrivateFieldGet(this, _a, \"f\", _Devvit_uses)[d.fullName].handler?.[method.name]?.(\n            // eslint-disable-next-line no-restricted-properties\n            method.requestType?.fromPartial(args ?? {}), metadata);\n        }\n        __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[d.fullName] = wrapped;\n        return wrapped;\n    }\n    /** @internal */\n    static get redditAPIPlugins() {\n        if (!pluginIsEnabled(__classPrivateFieldGet(this, _a, \"f\", _Devvit_config).redditAPI)) {\n            throw new Error('Reddit API is not enabled. You can enable it by passing `redditAPI: true` to `Devvit.configure`.');\n        }\n        return {\n            Flair: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.FlairDefinition.fullName],\n            GraphQL: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.GraphQLDefinition.fullName],\n            LinksAndComments: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.LinksAndCommentsDefinition.fullName],\n            Listings: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.ListingsDefinition.fullName],\n            Moderation: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.ModerationDefinition.fullName],\n            ModNote: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.ModNoteDefinition.fullName],\n            NewModmail: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.NewModmailDefinition.fullName],\n            PrivateMessages: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.PrivateMessagesDefinition.fullName],\n            Subreddits: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.SubredditsDefinition.fullName],\n            Users: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.UsersDefinition.fullName],\n            Widgets: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.WidgetsDefinition.fullName],\n            Wiki: __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.WikiDefinition.fullName],\n        };\n    }\n    /** @internal */\n    static get schedulerPlugin() {\n        const scheduler = __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.SchedulerDefinition.fullName];\n        if (!scheduler) {\n            // todo: better error with more details\n            throw new Error('Scheduler is not enabled. You can enable it by calling `Devvit.addSchedulerJob` at the top level of your app.');\n        }\n        return scheduler;\n    }\n    /** @internal */\n    static get kvStorePlugin() {\n        const kvStore = __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.KVStoreDefinition.fullName];\n        if (!kvStore) {\n            throw new Error('Key Value Store is not enabled. You can enable it by passing `kvStore: true` to `Devvit.configure`');\n        }\n        return kvStore;\n    }\n    /** @internal */\n    static get redisPlugin() {\n        const redis = __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.RedisAPIDefinition.fullName];\n        if (!redis) {\n            throw new Error('Redis is not enabled. You can enable it by passing `redis: true` to `Devvit.configure`');\n        }\n        return redis;\n    }\n    /** @internal */\n    static get mediaPlugin() {\n        const media = __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.MediaServiceDefinition.fullName];\n        if (!media) {\n            throw new Error('MediaService is not enabled. You can enable it by passing `media: true` to `Devvit.configure`');\n        }\n        return media;\n    }\n    /** @internal */\n    static get settingsPlugin() {\n        const settings = __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.SettingsDefinition.fullName];\n        if (!settings) {\n            throw new Error('Settings must first be configured with `Devvit.addSettings()` before they can be accessed');\n        }\n        return settings;\n    }\n    /** @internal */\n    static get realtimePlugin() {\n        const realtime = __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.RealtimeDefinition.fullName];\n        if (!realtime) {\n            throw new Error('Realtime is not enabled. You can enable it by passing `realtime: true` to `Devvit.configure`');\n        }\n        return realtime;\n    }\n    /** @internal */\n    static get userActionsPlugin() {\n        const userActionsAndRedditApiEnabled = __classPrivateFieldGet(this, _a, \"f\", _Devvit_scopes).length > 0 && pluginIsEnabled(__classPrivateFieldGet(this, _a, \"f\", _Devvit_config).redditAPI);\n        if (!userActionsAndRedditApiEnabled) {\n            throw new Error('UserActions is not enabled. You can enable it by passing scopes in `userActions: { scopes: [...scopes] }` and `redditAPI: true` to `Devvit.configure`');\n        }\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.UserActionsDefinition.fullName];\n    }\n    /** @internal */\n    static get scopes() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_scopes);\n    }\n    /** @internal */\n    static get menuItems() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_menuItems) ?? [];\n    }\n    /** @internal */\n    static get customPostType() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_customPostType);\n    }\n    /** @internal */\n    static get formDefinitions() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_formDefinitions);\n    }\n    /** @internal */\n    static get scheduledJobHandlers() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_scheduledJobHandlers);\n    }\n    /** @internal */\n    static get installationSettings() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_installationSettings);\n    }\n    /** @internal */\n    static get appSettings() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_appSettings);\n    }\n    /** @internal */\n    static get triggerOnEventHandlers() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_triggerOnEventHandlers);\n    }\n    /** Do not cache. @internal */\n    static get assets() {\n        return globalThis.devvit?.assets ?? {};\n    }\n    /** @internal */\n    static get webViewAssets() {\n        return __classPrivateFieldGet(this, _a, \"f\", _Devvit_webViewAssets);\n    }\n    /**\n     * Force service implementation. Keep in sync with `blocks.template.tsx`.\n     * @internal\n     */\n    static _initForms() {\n        __classPrivateFieldSet(this, _a, __classPrivateFieldGet(this, _a, \"f\", _Devvit_formDefinitions) ?? new Map(), \"f\", _Devvit_formDefinitions);\n    }\n    /**\n     * Force service implementation. Keep in sync with `blocks.template.tsx`.\n     * @internal\n     */\n    static _initMenu() {\n        __classPrivateFieldSet(this, _a, __classPrivateFieldGet(this, _a, \"f\", _Devvit_menuItems) ?? [], \"f\", _Devvit_menuItems);\n    }\n    /**\n     * Force service implementation. Keep in sync with `blocks.template.tsx`.\n     * @internal\n     */\n    static _initScheduler() {\n        if (!__classPrivateFieldGet(this, _a, \"f\", _Devvit_pluginClients)[protos.SchedulerDefinition.fullName]) {\n            this.use(protos.SchedulerDefinition);\n        }\n        __classPrivateFieldSet(this, _a, __classPrivateFieldGet(this, _a, \"f\", _Devvit_scheduledJobHandlers) ?? new Map(), \"f\", _Devvit_scheduledJobHandlers);\n    }\n    /**\n     * Force service implementation. Keep in sync with `blocks.template.tsx`.\n     * @internal\n     */\n    static _initSettings(global, sub) {\n        if (global)\n            __classPrivateFieldSet(this, _a, __classPrivateFieldGet(this, _a, \"f\", _Devvit_appSettings) ?? [], \"f\", _Devvit_appSettings);\n        if (sub)\n            __classPrivateFieldSet(this, _a, __classPrivateFieldGet(this, _a, \"f\", _Devvit_installationSettings) ?? [], \"f\", _Devvit_installationSettings);\n    }\n    /** @internal */\n    constructor(config) {\n        var _b, _c;\n        super(config);\n        globalThis.devvit ?? (globalThis.devvit = {});\n        (_b = globalThis.devvit).assets ?? (_b.assets = config.assets);\n        // __devvit__ is initialized by ESBuildPack for Webbit apps only.\n        // @ts-expect-error no type.\n        (_c = globalThis.devvit).appConfig ?? (_c.appConfig = globalThis.__devvit__?.config);\n        __classPrivateFieldSet(_a, _a, config.webviewAssets ?? {}, \"f\", _Devvit_webViewAssets);\n        for (const fullName in __classPrivateFieldGet(_a, _a, \"f\", _Devvit_uses)) {\n            const use = __classPrivateFieldGet(_a, _a, \"f\", _Devvit_uses)[fullName];\n            use.handler = config.use(use.def);\n        }\n        // Check for nonnullish provides, not length, since `devvit.json` may\n        // declare a service is provided but not actually populate it with any\n        // items. Any `LinkedBundle`  provides must have a server implementation.\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_menuItems)) {\n            registerMenuItems(config);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_scheduledJobHandlers)) {\n            registerScheduler(config);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_customPostType)) {\n            registerCustomPost(config);\n            /**\n             * We're trying to migrate custom posts to generic ui handlers, but they'll\n             * both work for now.\n             */\n            registerUIRequestHandlers(config);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_customPostType) || __classPrivateFieldGet(_a, _a, \"f\", _Devvit_formDefinitions)) {\n            registerUIEventHandler(config);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_installationSettings)) {\n            registerInstallationSettings(config);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_appSettings)) {\n            registerAppSettings(config);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_triggerOnEventHandlers).size > 0) {\n            registerTriggers(config);\n        }\n        for (const provides of __classPrivateFieldGet(_a, _a, \"f\", _Devvit_additionallyProvides)) {\n            config.provides(provides);\n        }\n        if (__classPrivateFieldGet(_a, _a, \"f\", _Devvit_domains).length > 0 || __classPrivateFieldGet(_a, _a, \"f\", _Devvit_scopes).length > 0) {\n            config.addPermissions?.({\n                requestedFetchDomains: __classPrivateFieldGet(_a, _a, \"f\", _Devvit_domains),\n                asUserScopes: __classPrivateFieldGet(_a, _a, \"f\", _Devvit_scopes),\n            });\n        }\n    }\n    /**\n     * Throws an error if the specified scope is not present in the Devvit.scopes configuration.\n     * @internal\n     * @param scope - The scope to check for.\n     */\n    static assertUserScope(scope) {\n        const scopeName = Scope[scope];\n        if (!_a.scopes.includes(scope)) {\n            throw Error(`To call this API with 'runAs: \"USER\"', set 'userActions: { scopes: [ Scope.${scopeName} ] }' in your Devvit.configure().`);\n        }\n    }\n}\n_a = Devvit, _Devvit_getUserScopesFromConfig = function _Devvit_getUserScopesFromConfig(config) {\n    const configUserActions = config.userActions;\n    if (!configUserActions)\n        return [];\n    // Case: Devvit.configure({ userActions: true })\n    if (typeof configUserActions === 'boolean' && configUserActions)\n        return [Scope.SUBMIT_POST, Scope.SUBMIT_COMMENT];\n    // Case: Devvit.configure({ userActions: { enabled: true } })\n    if (typeof configUserActions === 'object' &&\n        'enabled' in configUserActions &&\n        configUserActions.enabled) {\n        return 'scopes' in configUserActions\n            ? configUserActions.scopes\n            : [Scope.SUBMIT_POST, Scope.SUBMIT_COMMENT];\n    }\n    // Case: Devvit.configure({ userActions: { scopes: [...scopes] } })\n    if (typeof configUserActions === 'object' && 'scopes' in configUserActions)\n        return configUserActions.scopes;\n    // If none of the above cases are true, return no scopes.\n    return [];\n};\nDevvit.debug = {};\n_Devvit_appSettings = { value: void 0 };\n_Devvit_config = { value: {} };\n_Devvit_customPostType = { value: void 0 };\n_Devvit_formDefinitions = { value: void 0 };\n_Devvit_installationSettings = { value: void 0 };\n_Devvit_menuItems = { value: void 0 };\n_Devvit_scheduledJobHandlers = { value: void 0 };\n_Devvit_triggerOnEventHandlers = { value: new Map() };\n_Devvit_webViewAssets = { value: {} };\n_Devvit_domains = { value: [] };\n_Devvit_scopes = { value: [] };\n_Devvit_additionallyProvides = { value: [] };\n/** @internal */\n_Devvit_uses = { value: {} };\n/** @internal */\n_Devvit_pluginClients = { value: {} };\n(function (Devvit) {\n    function createElement(type, props, ...children) {\n        const blockElement = {\n            type,\n            props,\n            children,\n        };\n        return blockElement;\n    }\n    Devvit.createElement = createElement;\n})(Devvit || (Devvit = {}));\n", "/**\n * All Bundle programs are Actor subclasses. Actor instances are expected to\n * populate the passed in Config which is used by the builder to compile and\n * link the programs. Bundle programs are expected to export their subclass\n * constructor, either their own Actor subclass or Devvit.\n *\n * Devvit is an Actor subclass singleton with a non-class-based API.\n *\n * `instanceof` and `isPrototypeOf()` tests fail because Devvit and Actor\n * are multiply defined.\n *\n * Developers will, for now, implement this class and\n * utilize the the `cfg.use/provide` api for both:\n *\n * 1. specifying their `DependencySpec` (proto: devvit/runtime/bundle)\n *      Build packs will, for now, create an instance of the Actor and use the\n *      result of `config.export` for linking\n *\n * 2. When running within the overall system, `Bootstrap` actor will\n *      inject a config that is used to setup links within the runtime.\n */\n/**\n * Subclasses are expected to call config.init(), provides(), and uses(). It\n * is erroneous to not override the constructor. Override, invoke\n * `super(config)`, and call the Config APIs.\n */\nexport class Actor {\n    constructor(\n    // @ts-expect-error ignore unused variable without a _ prefix.\n    config) { }\n}\n", "// Regular expression to check if a domain contains a top-level domain, eg '.com' or '.org'\nconst TOP_LEVEL_DOMAIN_REGEX = /\\.[a-zA-Z]{2,}$/;\nconst MAX_DOMAINS = 25;\n/**\n * Asserts that the number of requested fetch domains is within the allowed limit.\n * @param requestedFetchDomains - The array of requested fetch domains.\n * @throws Error if the number of domains exceeds the limit.\n */\nexport function assertRequestedFetchDomainsLimit(requestedFetchDomains) {\n    if (requestedFetchDomains.length > MAX_DOMAINS) {\n        throw new Error(`The size of requestedFetchDomains is limited to ${MAX_DOMAINS} domains.`);\n    }\n}\n/**\n * Normalizes the requested fetch domains by removing the protocol and 'www' prefix if present.\n * @param requestedFetchDomains - The array of requested fetch domains.\n * @returns An array of normalized domains.\n * @throws Error if any domain format is invalid.\n */\nexport function normalizeDomains(requestedFetchDomains) {\n    const normalizedSet = new Set();\n    for (let rawDomain of requestedFetchDomains) {\n        try {\n            // Check for valid TLD (like '.com', '.net', etc.)\n            if (!TOP_LEVEL_DOMAIN_REGEX.test(rawDomain)) {\n                throw new Error(`The domain does not have a valid top-level domain.`);\n            }\n            // Prepend 'http://' if no protocol is present\n            if (!rawDomain.includes('://')) {\n                rawDomain = 'http://' + rawDomain;\n            }\n            // Create URL object and extract hostname\n            const url = new URL(rawDomain);\n            const normalizedDomain = url.hostname.replace(/^www\\./, ''); // Remove 'www.' prefix\n            normalizedSet.add(normalizedDomain);\n        }\n        catch (error) {\n            throw new Error(`Failed to determine hostname from requested domain: '${rawDomain}'. ${error}`);\n        }\n    }\n    return Array.from(normalizedSet);\n}\n", "// See TestInvokeAllTypes for what's actually wired up (votes are not).\n// Export enums functionally and everything else as types. The current\n// implementation is getting ts-proto hydrated events from the Devvit singleton\n// but then serializes those to JSON so Date, Duration, Timestamp, and\n// bytes / Uint8Array differ.\nimport {} from '@devvit/protos/json/devvit/events/v1alpha/events.js';\nexport { DeletionReason, EventSource } from '@devvit/protos/json/devvit/events/v1alpha/events.js';\nexport { CrowdControlLevel, DistinguishType, } from '@devvit/protos/json/devvit/reddit/v2alpha/postv2.js';\nexport { SubredditRating, SubredditType, } from '@devvit/protos/json/devvit/reddit/v2alpha/subredditv2.js';\n", "export var SettingScope;\n(function (SettingScope) {\n    SettingScope[\"Installation\"] = \"installation\";\n    SettingScope[\"App\"] = \"app\";\n})(SettingScope || (SettingScope = {}));\n", "export function assert(condition, msg) {\n    if (!condition)\n        throw Error(msg);\n}\n", "import { assert } from './assert.js';\n/**\n * - **C**omment (T1).\n * - **A**ccount (T2).\n * - **L**ink (T3).\n * - **M**essage (T4).\n * - **S**ubreddit (T5).\n * - **T**rophies (T6).\n */\nexport var T_PREFIX;\n(function (T_PREFIX) {\n    T_PREFIX[\"COMMENT\"] = \"t1_\";\n    T_PREFIX[\"ACCOUNT\"] = \"t2_\";\n    T_PREFIX[\"LINK\"] = \"t3_\";\n    T_PREFIX[\"MESSAGE\"] = \"t4_\";\n    T_PREFIX[\"SUBREDDIT\"] = \"t5_\";\n    T_PREFIX[\"AWARD\"] = \"t6_\";\n})(T_PREFIX || (T_PREFIX = {}));\n// type guards\nexport function isT1(id) {\n    return !!id?.startsWith(T_PREFIX.COMMENT);\n}\nexport function isT2(id) {\n    return !!id?.startsWith(T_PREFIX.ACCOUNT);\n}\nexport function isT3(id) {\n    return !!id?.startsWith(T_PREFIX.LINK);\n}\nexport function isT4(id) {\n    return !!id?.startsWith(T_PREFIX.MESSAGE);\n}\nexport function isT5(id) {\n    return !!id?.startsWith(T_PREFIX.SUBREDDIT);\n}\nexport function isT6(id) {\n    return !!id?.startsWith(T_PREFIX.AWARD);\n}\n// assertion functions\nexport function assertT1(id) {\n    assert(isT1(id), `Expected comment id to start with ${T_PREFIX.COMMENT}, got ${id}`);\n}\nexport function assertT2(id) {\n    assert(isT2(id), `Expected account id to start with ${T_PREFIX.ACCOUNT}, got ${id}`);\n}\nexport function assertT3(id) {\n    assert(isT3(id), `Expected link id to start with ${T_PREFIX.LINK}, got ${id}`);\n}\nexport function assertT4(id) {\n    assert(isT4(id), `Expected message id to start with ${T_PREFIX.MESSAGE}, got ${id}`);\n}\nexport function assertT5(id) {\n    assert(isT5(id), `Expected subreddit id to start with ${T_PREFIX.SUBREDDIT}, got ${id}`);\n}\nexport function assertT6(id) {\n    assert(isT6(id), `Expected award id to start with ${T_PREFIX.AWARD}, got ${id}`);\n}\n// factory functions\nexport function T1(id) {\n    assertT1(id);\n    return id;\n}\nexport function T2(id) {\n    assertT2(id);\n    return id;\n}\nexport function T3(id) {\n    assertT3(id);\n    return id;\n}\nexport function T4(id) {\n    assertT4(id);\n    return id;\n}\nexport function T5(id) {\n    assertT5(id);\n    return id;\n}\nexport function T6(id) {\n    assertT6(id);\n    return id;\n}\nexport function asTid(id) {\n    if (isT1(id)) {\n        return T1(id);\n    }\n    if (isT2(id)) {\n        return T2(id);\n    }\n    if (isT3(id)) {\n        return T3(id);\n    }\n    if (isT4(id)) {\n        return T4(id);\n    }\n    if (isT5(id)) {\n        return T5(id);\n    }\n    if (isT6(id)) {\n        return T6(id);\n    }\n    throw new Error(`Expected thing id to start with ${Object.values(T_PREFIX).join(', ')} got ${id}}`);\n}\n", "import { SettingScope } from '../../../types/form.js';\n/**\n * Make sure that the form fields have unique names.\n */\nexport function assertValidFormFields(fields, seenNames = new Set()) {\n    for (const field of fields) {\n        if (field.type === 'group') {\n            assertValidFormFields(field.fields, seenNames);\n            continue;\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const fieldName = field.name;\n        if (seenNames.has(fieldName)) {\n            throw new Error(`Duplicate field name: ${fieldName}`);\n        }\n        seenNames.add(fieldName);\n    }\n    assertAppSecretsOnly(fields);\n}\nexport function assertAppSecretsOnly(fields) {\n    for (const field of fields) {\n        if (field.type === 'string' && field.isSecret && field.scope !== SettingScope.App) {\n            throw `Invalid setting: only app settings can be secrets. Add \"scope: SettingScope.App\" to field \"${field.name}\"`;\n        }\n    }\n}\n", "/** @internal */\nexport const Hook = Object.freeze({\n    INTERVAL: 0, // useInterval hook\n    FORM: 1, // useForm hook\n    STATE: 2, // useState hook\n    CHANNEL: 3, // useChannel hook\n    WEB_VIEW: 4, // useWebView hook\n});\n", "export { DeletionReason, EventSource } from '@devvit/protos';\n", "import { AppSettingsDefinition, GetFieldsResponse } from '@devvit/protos';\nimport { transformFormFields } from '../../apis/ui/helpers/transformForm.js';\nimport { Devvit } from '../Devvit.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nimport { onValidateFormHelper } from './helpers/settingsUtils.js';\nasync function onGetSettingsFields() {\n    return GetFieldsResponse.fromJSON({\n        fields: {\n            fields: transformFormFields(Devvit.appSettings ?? []),\n        },\n    });\n}\nasync function onValidateForm(req, metadata) {\n    return onValidateFormHelper(req, Devvit.appSettings, metadata);\n}\nexport function registerAppSettings(config) {\n    config.provides(AppSettingsDefinition);\n    extendDevvitPrototype('GetAppSettingsFields', onGetSettingsFields);\n    extendDevvitPrototype('ValidateAppForm', onValidateForm);\n}\n", "import { FormField as FormFieldProto, FormFieldType } from '@devvit/protos';\nexport function transformFormFields(fields) {\n    return fields.map((field) => {\n        switch (field.type) {\n            case 'string':\n                return transformStringField(field);\n            case 'image':\n                return transformImageField(field);\n            case 'paragraph':\n                return transformParagraphField(field);\n            case 'number':\n                return transformNumberField(field);\n            case 'select':\n                return transformSelectField(field);\n            case 'boolean':\n                return transformBooleanField(field);\n            case 'group':\n                return transformGroupField(field);\n            default:\n                throw new Error('Unknown field type.');\n        }\n    });\n}\nfunction transformStringField(field) {\n    return {\n        defaultValue: {\n            fieldType: FormFieldType.STRING,\n            stringValue: field.defaultValue,\n        },\n        disabled: field.disabled,\n        fieldConfig: {\n            stringConfig: {\n                placeholder: field.placeholder,\n            },\n        },\n        fieldId: field.name,\n        fieldType: FormFieldType.STRING,\n        helpText: field.helpText,\n        label: field.label,\n        required: field.required,\n        isSecret: field.isSecret,\n    };\n}\nfunction transformImageField(field) {\n    return {\n        disabled: field.disabled,\n        fieldId: field.name,\n        fieldType: FormFieldType.IMAGE,\n        helpText: field.helpText,\n        label: field.label,\n        required: field.required,\n    };\n}\nfunction transformParagraphField(field) {\n    return {\n        defaultValue: {\n            fieldType: FormFieldType.PARAGRAPH,\n            stringValue: field.defaultValue,\n        },\n        disabled: field.disabled,\n        fieldConfig: {\n            paragraphConfig: {\n                lineHeight: field.lineHeight,\n                placeholder: field.placeholder,\n            },\n        },\n        fieldId: field.name,\n        fieldType: FormFieldType.PARAGRAPH,\n        helpText: field.helpText,\n        label: field.label,\n        required: field.required,\n    };\n}\nfunction transformNumberField(field) {\n    return {\n        defaultValue: {\n            fieldType: FormFieldType.NUMBER,\n            numberValue: field.defaultValue,\n        },\n        disabled: field.disabled,\n        fieldConfig: {\n            numberConfig: {},\n        },\n        fieldId: field.name,\n        fieldType: FormFieldType.NUMBER,\n        helpText: field.helpText,\n        label: field.label,\n        required: field.required,\n    };\n}\nfunction transformSelectField(field) {\n    return {\n        defaultValue: {\n            fieldType: FormFieldType.SELECTION,\n            selectionValue: {\n                values: field.defaultValue ?? [],\n            },\n        },\n        disabled: field.disabled,\n        fieldConfig: {\n            selectionConfig: {\n                choices: field.options,\n                multiSelect: field.multiSelect,\n            },\n        },\n        fieldId: field.name,\n        fieldType: FormFieldType.SELECTION,\n        helpText: field.helpText,\n        label: field.label,\n        required: field.required,\n    };\n}\nfunction transformBooleanField(field) {\n    return {\n        defaultValue: {\n            fieldType: FormFieldType.BOOLEAN,\n            boolValue: field.defaultValue,\n        },\n        disabled: field.disabled,\n        fieldId: field.name,\n        fieldType: FormFieldType.BOOLEAN,\n        helpText: field.helpText,\n        label: field.label,\n    };\n}\nfunction transformGroupField(field) {\n    return {\n        fieldId: '',\n        fieldType: FormFieldType.GROUP,\n        fieldConfig: {\n            groupConfig: {\n                fields: transformFormFields(field.fields),\n            },\n        },\n        label: field.label,\n        helpText: field.helpText,\n    };\n}\n", "import { Devvit } from '../../Devvit.js';\n// to-do: ask for a whole service and assign that to the prototype instead. Most\n//        usages do not want a partial service implementation and the typing for\n//        that is clumsy anyway.\nexport function extendDevvitPrototype(key, value) {\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n    Devvit.prototype[key] = value;\n}\n", "import { ValidateFormResponse } from '@devvit/protos';\nimport { makeAPIClients } from '../../../apis/makeAPIClients.js';\nimport { getFormValues } from '../../../apis/ui/helpers/getFormValues.js';\nimport { getContextFromMetadata } from '../context.js';\nexport function extractSettingsFields(settings) {\n    return settings.flatMap((field) => {\n        if (field.type === 'group') {\n            return extractSettingsFields(field.fields);\n        }\n        return field;\n    });\n}\nexport async function onValidateFormHelper(req, settings, metadata) {\n    if (!settings) {\n        throw new Error('Settings were not defined.');\n    }\n    const response = {\n        success: true,\n        errors: {},\n    };\n    const formValues = getFormValues(req.fieldValues);\n    const flattendFields = extractSettingsFields(settings);\n    await Promise.all(flattendFields.map(async (field) => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const fieldName = field.name;\n        if (fieldName && field.onValidate) {\n            const value = formValues[fieldName];\n            const validator = field.onValidate;\n            const context = Object.assign(makeAPIClients({\n                metadata,\n            }), getContextFromMetadata(metadata));\n            const error = await validator({\n                value,\n                isEditing: req.editing,\n            }, context);\n            if (error) {\n                response.success = false;\n                response.errors[fieldName] = error;\n            }\n        }\n    }));\n    return ValidateFormResponse.fromJSON(response);\n}\n", "import { RealtimeSubscriptionStatus } from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Hook } from '../../../types/hooks.js';\nimport { ChannelStatus } from '../../../types/realtime.js';\nexport function makeUseChannelHook(reconciler) {\n    function useChannel(options) {\n        const debug = false;\n        const hookIndex = reconciler.currentHookIndex;\n        const currentState = reconciler.getCurrentComponentState();\n        const previousState = reconciler.getPreviousComponentState();\n        const appId = reconciler.metadata[Header.App]?.values[0];\n        assertNonNull(appId, 'useChannel - app is missing from Context');\n        const installationId = reconciler.metadata[Header.Installation]?.values[0];\n        assertNonNull(installationId, 'useChannel - installation is missing from Context');\n        async function send(msg) {\n            if (debug)\n                console.debug('[realtime] sends', msg);\n            const name = currentState[hookIndex].channel;\n            if (currentState[hookIndex].active) {\n                if (currentState[hookIndex].connected) {\n                    await reconciler.realtime.send(name, msg);\n                }\n                else {\n                    throw Error(`Failed to send to channel '${name}'; it is active but not yet connected`);\n                }\n            }\n            else {\n                throw Error(`Cannot send a message over inactive channel: ${name}`);\n            }\n        }\n        function subscribe() {\n            if (!currentState[hookIndex].active) {\n                if (debug)\n                    console.debug('[realtime] subscribe');\n                const name = currentState[hookIndex].channel;\n                currentState[hookIndex].active = true;\n                reconciler.addRealtimeChannel(name);\n            }\n        }\n        function unsubscribe() {\n            if (currentState[hookIndex].active) {\n                if (debug)\n                    console.debug('[realtime] unsubscribe');\n                const name = currentState[hookIndex].channel;\n                currentState[hookIndex].active = false;\n                reconciler.removeRealtimeChannel(name);\n            }\n        }\n        function hook(event) {\n            return async () => {\n                let result;\n                switch (event.status) {\n                    case RealtimeSubscriptionStatus.REALTIME_SUBSCRIBED:\n                        if (debug)\n                            console.debug('[realtime] onSubscribed()');\n                        currentState[hookIndex].connected = true;\n                        result = options.onSubscribed?.();\n                        break;\n                    case RealtimeSubscriptionStatus.REALTIME_UNSUBSCRIBED:\n                        if (debug)\n                            console.debug('[realtime] onUnsubscribed()');\n                        currentState[hookIndex].connected = false;\n                        result = options.onUnsubscribed?.();\n                        break;\n                    default:\n                        if (debug)\n                            console.debug('[realtime] receives', event.event?.data);\n                        // expect msg. this must align to RealtimeClient.send().\n                        result = options.onMessage(event.event?.data?.msg);\n                        break;\n                }\n                await result;\n            };\n        }\n        let hookState = {\n            channel: `${appId}:${installationId}:${options.name}`,\n            active: false,\n            connected: false,\n            preventCallback: false,\n            type: Hook.CHANNEL,\n        };\n        if (hookIndex in currentState) {\n            hookState = currentState[hookIndex];\n        }\n        else if (hookIndex in previousState) {\n            hookState = previousState[hookIndex];\n        }\n        const event = reconciler.realtimeEvent;\n        if (reconciler.isInitialRender) {\n            hookState.active = false;\n        }\n        else if (event && hookState.active && event.event.channel === hookState.channel) {\n            if (!hookState.preventCallback) {\n                reconciler.runHook(hook(event));\n            }\n            reconciler.rerenderIn(0);\n        }\n        currentState[hookIndex] = hookState;\n        reconciler.currentHookIndex++;\n        let status = ChannelStatus.Unknown;\n        if (hookState.active && hookState.connected) {\n            status = ChannelStatus.Connected;\n        }\n        else if (hookState.active && !hookState.connected) {\n            status = ChannelStatus.Connecting;\n        }\n        else if (!hookState.active && hookState.connected) {\n            status = ChannelStatus.Disconnecting;\n        }\n        else if (!hookState.active && !hookState.connected) {\n            status = ChannelStatus.Disconnected;\n        }\n        return {\n            subscribe,\n            unsubscribe,\n            send,\n            status,\n        };\n    }\n    return useChannel;\n}\n", "/**\n * Metadata header key. Every system header should start with \"devvit-\".\n *\n * Synchronize to headers.md.\n */\nexport const Header = Object.freeze({\n    Actor: 'devvit-actor',\n    App: 'devvit-app',\n    AppDependencies: 'devvit-app-dependencies',\n    AppUser: 'devvit-app-user',\n    AppViewerAuthToken: 'devvit-app-viewer-authorization',\n    Canary: 'devvit-canary',\n    Context: 'devvit-context',\n    Debug: 'devvit-debug',\n    GQLHost: 'devvit-gql-host',\n    Installation: 'devvit-installation',\n    ModPermissions: 'devvit-mod-permissions',\n    Post: 'devvit-post',\n    PostAuthor: 'devvit-post-author',\n    PostData: 'devvit-post-data',\n    R2Auth: 'devvit-sec-authorization',\n    R2Host: 'devvit-r2-host',\n    RemoteHostname: 'devvit-remote-hostname',\n    SettingsUri: 'devvit-sec-settings-uri',\n    StreamID: 'devvit-stream-id',\n    Subreddit: 'devvit-subreddit',\n    SubredditName: 'devvit-subreddit-name',\n    TraceID: 'devvit-trace-id',\n    User: 'devvit-user',\n    Username: 'devvit-user-name',\n    UserSnoovatarUrl: 'devvit-user-snoovatar-url',\n    UserAgent: 'devvit-user-agent',\n    Version: 'devvit-version',\n    Language: 'devvit-accept-language',\n    Timezone: 'devvit-accept-timezone',\n    Traceparent: 'traceparent',\n});\n/** Prefix common to all Devvit system headers. */\nexport const headerPrefix = 'devvit-';\n/** See DevvitGlobal and ContextDebugInfo. */\nexport var AppDebug;\n(function (AppDebug) {\n    /** Enable debug logging for blocks. */\n    AppDebug[\"Blocks\"] = \"blocks\";\n    /**\n     * Log the entire reified blocks JSX/XML tree on each render. Eg:\n     *\n     *   <hstack><text>hi world</text></hstack>\n     */\n    AppDebug[\"EmitSnapshots\"] = \"emitSnapshots\";\n    /** Log app state changes. */\n    AppDebug[\"EmitState\"] = \"emitState\";\n    /** Enable debug logging for realtime and useChannel() hook. */\n    AppDebug[\"Realtime\"] = \"realtime\";\n    /** Enable runtime and dispatcher logging. */\n    AppDebug[\"Runtime\"] = \"runtime\";\n    /** Enable debug logging for devvit-surface and dispatcher. */\n    AppDebug[\"Surface\"] = \"surface\";\n    /** Enable debug logging for the useAsync() hook family. */\n    AppDebug[\"UseAsync\"] = \"useAsync\";\n    /** Enable debug logging for payments APIs */\n    AppDebug[\"Payments\"] = \"payments\";\n    /** Enable bootstrap logging */\n    AppDebug[\"Bootstrap\"] = \"bootstrap\";\n    /** WebView debug logs */\n    AppDebug[\"WebView\"] = \"webView\";\n})(AppDebug || (AppDebug = {}));\n", "export var ChannelStatus;\n(function (ChannelStatus) {\n    ChannelStatus[ChannelStatus[\"Unknown\"] = 0] = \"Unknown\";\n    ChannelStatus[ChannelStatus[\"Connecting\"] = 1] = \"Connecting\";\n    ChannelStatus[ChannelStatus[\"Connected\"] = 2] = \"Connected\";\n    ChannelStatus[ChannelStatus[\"Disconnecting\"] = 3] = \"Disconnecting\";\n    ChannelStatus[ChannelStatus[\"Disconnected\"] = 4] = \"Disconnected\";\n})(ChannelStatus || (ChannelStatus = {}));\n", "import { FormFieldType } from '@devvit/protos';\nexport function flattenFormFieldValue(value) {\n    switch (value.fieldType) {\n        case FormFieldType.STRING:\n            return value.stringValue;\n        case FormFieldType.IMAGE:\n            // the string value is the URL\n            return value.stringValue;\n        case FormFieldType.PARAGRAPH:\n            return value.stringValue;\n        case FormFieldType.NUMBER:\n            return value.numberValue;\n        case FormFieldType.BOOLEAN:\n            return value.boolValue;\n        case FormFieldType.SELECTION:\n            return value.selectionValue?.values ?? [];\n        default:\n            return undefined;\n    }\n}\nexport function getFormValues(results) {\n    return Object.keys(results).reduce((acc, key) => {\n        const val = flattenFormFieldValue(results[key]);\n        if (val !== undefined)\n            acc[key] = val;\n        return acc;\n    }, {});\n}\n", "import { getFormValues } from '../../../apis/ui/helpers/getFormValues.js';\nimport { Hook } from '../../../types/hooks.js';\nexport function makeUseFormHook(reconciler) {\n    function useForm(form, onSubmit) {\n        const hookIndex = reconciler.currentHookIndex;\n        const componentKey = reconciler.getCurrentComponentKey();\n        const currentState = reconciler.getCurrentComponentState();\n        const previousState = reconciler.getPreviousComponentState();\n        const formKey = `form.hook.${componentKey}.${hookIndex}`;\n        let hookState = {\n            formKey,\n            preventSubmit: false,\n            type: Hook.FORM,\n        };\n        if (hookIndex in currentState) {\n            hookState = currentState[hookIndex];\n        }\n        else if (hookIndex in previousState) {\n            hookState = previousState[hookIndex];\n        }\n        currentState[hookIndex] = hookState;\n        reconciler.forms.set(formKey, form);\n        const formSubmittedEvent = reconciler.formSubmittedEvent;\n        if (formSubmittedEvent && !hookState.preventSubmit) {\n            if (formSubmittedEvent.formId === formKey) {\n                reconciler.runHook(async () => {\n                    const response = onSubmit(getFormValues(formSubmittedEvent.results));\n                    if (response && response instanceof Promise) {\n                        await response;\n                    }\n                    reconciler.rerenderIn(0);\n                });\n            }\n        }\n        currentState[hookIndex].preventSubmit = false;\n        reconciler.currentHookIndex++;\n        return formKey;\n    }\n    return useForm;\n}\n", "import { Hook } from '../../../types/hooks.js';\nexport function makeUseIntervalHook(reconciler) {\n    function useInterval(callback, requestedDelayMs) {\n        const hookIndex = reconciler.currentHookIndex;\n        const currentState = reconciler.getCurrentComponentState();\n        const previousState = reconciler.getPreviousComponentState();\n        // delayMs may only be a minimum of 100ms\n        const minDelay = 100;\n        const delayMs = Math.max(minDelay, requestedDelayMs);\n        let hookState = {\n            lastRun: undefined,\n            running: false,\n            preventCallback: false,\n            type: Hook.INTERVAL,\n        };\n        if (hookIndex in currentState) {\n            hookState = currentState[hookIndex];\n        }\n        else if (hookIndex in previousState) {\n            hookState = previousState[hookIndex];\n        }\n        function start() {\n            if (requestedDelayMs < minDelay) {\n                console.error(`useInterval delay must be at least ${minDelay}ms. Your interval of ${requestedDelayMs}ms was automatically extended.`);\n            }\n            for (const [i, stateItem] of Object.entries(currentState)) {\n                if (i !== hookIndex.toString() && stateItem?.type === Hook.INTERVAL && stateItem?.running) {\n                    throw new Error('Only one useInterval hook may be running at a time');\n                }\n            }\n            currentState[hookIndex] = {\n                running: true,\n                lastRun: currentState[hookIndex]?.lastRun ?? Date.now(),\n                preventCallback: false,\n                type: Hook.INTERVAL,\n            };\n            reconciler.rerenderIn(delayMs);\n        }\n        function stop() {\n            currentState[hookIndex].running = false;\n            currentState[hookIndex].lastRun = undefined;\n            currentState[hookIndex].preventCallback = false;\n        }\n        if (reconciler.isEffectRender && hookState.running) {\n            if (!hookState.preventCallback) {\n                if (hookState.lastRun === undefined || hookState.lastRun + delayMs < Date.now()) {\n                    reconciler.runHook(async () => {\n                        const response = callback();\n                        if (response && response instanceof Promise) {\n                            await response;\n                        }\n                        hookState.lastRun = Date.now();\n                    });\n                }\n            }\n            reconciler.rerenderIn(delayMs);\n        }\n        hookState.preventCallback = false;\n        currentState[hookIndex] = hookState;\n        reconciler.currentHookIndex++;\n        return {\n            start,\n            stop,\n        };\n    }\n    return useInterval;\n}\n", "export function makeUseStateHook(reconciler) {\n    function useState(initialState) {\n        const hookIndex = reconciler.currentHookIndex;\n        const currentState = reconciler.getCurrentComponentState();\n        const previousState = reconciler.getPreviousComponentState();\n        if (hookIndex in currentState) {\n            reconciler.currentHookIndex++;\n            return [currentState[hookIndex], stateSetter];\n        }\n        if (reconciler.isInitialRender || !(hookIndex in previousState)) {\n            const value = initialState instanceof Function ? initialState() : initialState;\n            if (value instanceof Promise) {\n                const asyncResolver = async () => {\n                    currentState[hookIndex] = await value;\n                    reconciler.currentHookIndex = 0;\n                };\n                throw asyncResolver();\n            }\n            currentState[hookIndex] = value;\n        }\n        else {\n            currentState[hookIndex] = previousState[hookIndex];\n        }\n        function stateSetter(valueOrFunction) {\n            if (reconciler.isRendering) {\n                throw new Error('Cannot call setState while rendering.');\n            }\n            currentState[hookIndex] =\n                valueOrFunction instanceof Function\n                    ? valueOrFunction(currentState[hookIndex])\n                    : valueOrFunction;\n        }\n        reconciler.currentHookIndex++;\n        return [currentState[hookIndex], stateSetter];\n    }\n    return useState;\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PromiseCache_instances, _PromiseCache_redis, _PromiseCache_localCache, _PromiseCache_clock, _PromiseCache_state, _PromiseCache_localCachedAnswer, _PromiseCache_maybeRefreshCache, _PromiseCache_refreshCache, _PromiseCache_pollForCache, _PromiseCache_updateCache, _PromiseCache_calculateRamp, _PromiseCache_redisEntry, _PromiseCache_enforceTTL;\nexport const SystemClock = {\n    now() {\n        return new Date();\n    },\n};\nexport function _namespaced(key) {\n    return `__autocache__${key}`;\n}\nexport function _lock(key) {\n    return `__lock__${key}`;\n}\nconst pollEvery = 300; // milli\nconst maxPollingTimeout = 1000; // milli\nconst minTtlValue = 5000;\nexport const retryLimit = 3;\nconst errorRetryProbability = 0.1;\nexport const clientRetryDelay = 1000;\nexport const allowStaleFor = 30000;\nfunction _unwrap(entry) {\n    if (entry.error) {\n        throw new Error(entry.error);\n    }\n    return entry.value;\n}\n/**\n * Refactored out into a class to allow for easier testing and clarity of purpose.\n *\n * This class is responsible for managing the caching of promises. It is a layered cache, meaning it will first check\n * the local cache, then the redis cache, and finally the source of truth. It will also handle refreshing the cache according\n * to the TTL and error handling.\n *\n * Please note that in order to prevent a stampede of requests to the source of truth, we use a lock in redis to ensure only one\n * request is made to the source of truth at a time.  If the lock is obtained, the cache will be updated and the lock will be released.\n *\n * Additionally, we use a polling mechanism to fetch the cache if the lock is not obtained.  This is to prevent unnecessary errors.\n *\n * Finally, we also want to prevent stampedes against redis for the lock election and the retries.  We use a ramping probability to ease in the\n * attempts to get the lock, and not every error will trigger a retry.\n *\n * This means that the cache will be eventually consistent, but will not be immediately consistent. This is a tradeoff we are willing to make.\n * Additionally, this means that the TTL is not precice.  The cache may be updated a bit more often than the TTL, but it will not be updated less often.\n *\n */\nexport class PromiseCache {\n    constructor(redis, state, clock = SystemClock) {\n        _PromiseCache_instances.add(this);\n        _PromiseCache_redis.set(this, void 0);\n        _PromiseCache_localCache.set(this, {});\n        _PromiseCache_clock.set(this, void 0);\n        _PromiseCache_state.set(this, void 0);\n        __classPrivateFieldSet(this, _PromiseCache_redis, redis, \"f\");\n        __classPrivateFieldSet(this, _PromiseCache_state, state, \"f\");\n        __classPrivateFieldSet(this, _PromiseCache_clock, clock, \"f\");\n    }\n    /**\n     * This is the public API for the cache.  Call this method to cache a promise.\n     *\n     * @param closure\n     * @param options\n     * @returns\n     */\n    async cache(closure, options) {\n        __classPrivateFieldSet(this, _PromiseCache_localCache, __classPrivateFieldGet(this, _PromiseCache_state, \"f\").__cache = __classPrivateFieldGet(this, _PromiseCache_state, \"f\").__cache ?? {}, \"f\");\n        __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_enforceTTL).call(this, options);\n        const localCachedAnswer = __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_localCachedAnswer).call(this, options.key);\n        if (localCachedAnswer !== undefined) {\n            return localCachedAnswer;\n        }\n        const existing = await __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_redisEntry).call(this, options.key);\n        const entry = await __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_maybeRefreshCache).call(this, options, existing, closure);\n        return _unwrap(entry);\n    }\n}\n_PromiseCache_redis = new WeakMap(), _PromiseCache_localCache = new WeakMap(), _PromiseCache_clock = new WeakMap(), _PromiseCache_state = new WeakMap(), _PromiseCache_instances = new WeakSet(), _PromiseCache_localCachedAnswer = function _PromiseCache_localCachedAnswer(key) {\n    const val = __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key];\n    if (val) {\n        const now = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n        const hasRetryableError = val?.error &&\n            val?.errorTime &&\n            val.errorCount < retryLimit &&\n            Math.random() < errorRetryProbability &&\n            val.errorTime + clientRetryDelay < now;\n        const expired = val?.expires && val.expires < now && val.checkedAt + clientRetryDelay < now;\n        if (expired || hasRetryableError) {\n            delete __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key];\n            return undefined;\n        }\n        else {\n            return _unwrap(val);\n        }\n    }\n    return undefined;\n}, _PromiseCache_maybeRefreshCache = \n/**\n * If we've bothered to check redis, we're already on the backend.  Let's see if the cache either (1) contains an error, (2)\n * is expired, (3) is missing, or (4) is about to expire.  If any of these are true, we'll refresh the cache based on heuristics.\n *\n * We'll always refresh if missing or expired, but its probabilistic if we'll refresh if about to expire or if we have an error.\n */\nasync function _PromiseCache_maybeRefreshCache(options, entry, closure) {\n    const expires = entry?.expires;\n    const rampProbability = expires ? __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_calculateRamp).call(this, expires) : 1;\n    if (!entry ||\n        (entry?.error && entry.errorCount < retryLimit && errorRetryProbability > Math.random()) ||\n        rampProbability > Math.random()) {\n        return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_refreshCache).call(this, options, entry, closure);\n    }\n    else {\n        return entry;\n    }\n}, _PromiseCache_refreshCache = \n/**\n * The conditions for refreshing the cache are handled in the calling method, which should be\n * #maybeRefreshCache.\n *\n * If you don't win the lock, you'll poll for the cache.  If you don't get the cache within maxPollingTimeout, you'll throw an error.\n */\nasync function _PromiseCache_refreshCache(options, entry, closure) {\n    const lockKey = _lock(options.key);\n    const now = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n    /**\n     * The write lock should last for a while, but not the full TTL.  Hopefully write attempts settle down after a while.\n     */\n    const lockExpiration = new Date(now + options.ttl / 2);\n    const lockObtained = await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").set(lockKey, '1', {\n        expiration: lockExpiration,\n        nx: true,\n    });\n    if (lockObtained) {\n        return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_updateCache).call(this, options.key, entry, closure, options.ttl);\n    }\n    else if (entry) {\n        // This entry is still valid, return it\n        return entry;\n    }\n    else {\n        const start = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now();\n        return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_pollForCache).call(this, start, options.key, options.ttl);\n    }\n}, _PromiseCache_pollForCache = async function _PromiseCache_pollForCache(start, key, ttl) {\n    const pollingTimeout = Math.min(ttl, maxPollingTimeout);\n    const existing = await __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_redisEntry).call(this, key);\n    if (existing) {\n        return existing;\n    }\n    if (__classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime() - start.getTime() >= pollingTimeout) {\n        throw new Error(`Cache request timed out trying to get data at key: ${key}`);\n    }\n    await new Promise((resolve) => setTimeout(resolve, pollEvery));\n    return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_pollForCache).call(this, start, key, ttl);\n}, _PromiseCache_updateCache = \n/**\n * Actually update the cache.  This is the method that will be called if we have the lock.\n */\nasync function _PromiseCache_updateCache(key, entry, closure, ttl) {\n    const expires = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime() + ttl;\n    entry = entry ?? {\n        value: null,\n        expires,\n        errorCount: 0,\n        error: null,\n        errorTime: null,\n        checkedAt: 0,\n    };\n    try {\n        entry.value = await closure();\n        entry.error = null;\n        entry.errorCount = 0;\n        entry.errorTime = null;\n    }\n    catch (e) {\n        entry.value = null;\n        entry.error = e.message ?? 'Unknown error';\n        entry.errorTime = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n        entry.errorCount++;\n    }\n    __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key] = entry;\n    await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").set(_namespaced(key), JSON.stringify(entry), {\n        expiration: new Date(expires + allowStaleFor),\n    });\n    /**\n     * Unlocking will allow retries to happen if there was an error.  Otherwise we don't unlock, because the lock\n     * will expire on its own.\n     */\n    if (entry.error && entry.errorCount < retryLimit) {\n        await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").del(_lock(key));\n    }\n    return entry;\n}, _PromiseCache_calculateRamp = function _PromiseCache_calculateRamp(expiry) {\n    const now = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n    const remaining = expiry - now;\n    if (remaining < 0) {\n        return 1;\n    }\n    else if (remaining < 1000) {\n        return 0.1;\n    }\n    else if (remaining < 2000) {\n        return 0.01;\n    }\n    else if (remaining < 3000) {\n        return 0.001;\n    }\n    else {\n        return 0;\n    }\n}, _PromiseCache_redisEntry = async function _PromiseCache_redisEntry(key) {\n    const val = await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").get(_namespaced(key));\n    if (val) {\n        const entry = JSON.parse(val);\n        entry.checkedAt = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n        __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key] = entry;\n        return entry;\n    }\n    return undefined;\n}, _PromiseCache_enforceTTL = function _PromiseCache_enforceTTL(options) {\n    if (options.ttl < minTtlValue) {\n        console.warn(`Cache TTL cannot be less than ${minTtlValue} milliseconds! Updating ttl value of ${options.ttl} to ${minTtlValue}.`);\n        options.ttl = minTtlValue;\n    }\n};\n", "import { PromiseCache, SystemClock } from './promise_cache.js';\nexport function makeCache(redis, state, clock = SystemClock) {\n    const pc = new PromiseCache(redis, state, clock);\n    return pc.cache.bind(pc);\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AssetsClient_instances, _AssetsClient_webViewAssetMap, _AssetsClient_getURL, _AssetsClient_getURLs;\nimport { Devvit } from '../../devvit/Devvit.js';\nfunction assertValidUrl(path) {\n    // This will throw an exception if it's an invalid URL such as a relative path\n    // NOTE: substring is here to only check up until the data segment if this is a data URL so we don't waste time needlessly parsing data.\n    //       Technically this will lose the last character if this isn't a data URL but we're just validating structure.\n    new URL(path.slice(0, path.indexOf(',')));\n}\nexport class AssetsClient {\n    constructor() {\n        _AssetsClient_instances.add(this);\n        _AssetsClient_webViewAssetMap.set(this, {});\n        __classPrivateFieldSet(this, _AssetsClient_webViewAssetMap, Devvit.webViewAssets, \"f\");\n    }\n    /**\n     * Takes one or more asset names, relative to the media (or 'assets/') folder, and returns either the\n     * public URL for that one asset, or a map of each asset name to its URL.\n     * @param assetPathOrPaths - Either the path you need the public URL for, or an array of paths.\n     * @param options\n     * @returns Either the public URL for the one asset you asked for, or a map of assets to their URLs.\n     */\n    getURL(assetPathOrPaths, options) {\n        if (typeof assetPathOrPaths === 'string') {\n            return __classPrivateFieldGet(this, _AssetsClient_instances, \"m\", _AssetsClient_getURL).call(this, assetPathOrPaths, options ?? { webView: false });\n        }\n        return __classPrivateFieldGet(this, _AssetsClient_instances, \"m\", _AssetsClient_getURLs).call(this, assetPathOrPaths, options ?? { webView: false });\n    }\n}\n_AssetsClient_webViewAssetMap = new WeakMap(), _AssetsClient_instances = new WeakSet(), _AssetsClient_getURL = function _AssetsClient_getURL(assetPath, options) {\n    // Has the assetPath already been resolved?\n    const localUrl = options.webView ? __classPrivateFieldGet(this, _AssetsClient_webViewAssetMap, \"f\")[assetPath] : Devvit.assets[assetPath];\n    if (localUrl) {\n        return localUrl;\n    }\n    try {\n        assertValidUrl(assetPath);\n        // URL is valid\n        return assetPath;\n    }\n    catch {\n        // Not a fully qualified URL, not an asset, return an empty string\n        return '';\n    }\n}, _AssetsClient_getURLs = function _AssetsClient_getURLs(assetPaths, options) {\n    const retval = {};\n    let missingPaths = [];\n    // Try and short circuit using the locally available assets list if possible, keeping a list\n    // of all the paths that we couldn't find locally to ask the backend about\n    const cache = options.webView ? __classPrivateFieldGet(this, _AssetsClient_webViewAssetMap, \"f\") : Devvit.assets;\n    if (cache) {\n        for (const path of assetPaths) {\n            if (cache[path]) {\n                retval[path] = cache[path];\n            }\n            else {\n                try {\n                    assertValidUrl(path);\n                    retval[path] = path;\n                }\n                catch {\n                    // invalid URL, missing from cache\n                    missingPaths.push(path);\n                }\n            }\n        }\n    }\n    else {\n        // No local assets - everything is missing\n        missingPaths = assetPaths;\n    }\n    if (missingPaths.length > 0) {\n        throw new Error(`The following assets were missing from the assets list: ${missingPaths.join(', ')}`);\n    }\n    return retval;\n};\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _KeyValueStorage_metadata;\nimport { Devvit } from '../../devvit/Devvit.js';\nexport class KeyValueStorage {\n    constructor(metadata) {\n        _KeyValueStorage_metadata.set(this, void 0);\n        __classPrivateFieldSet(this, _KeyValueStorage_metadata, metadata, \"f\");\n    }\n    async get(key) {\n        const { messages } = await Devvit.kvStorePlugin.Get({ keys: [key] }, __classPrivateFieldGet(this, _KeyValueStorage_metadata, \"f\"));\n        try {\n            if (messages[key]) {\n                return JSON.parse(messages[key]);\n            }\n        }\n        catch {\n            return undefined;\n        }\n        return undefined;\n    }\n    async put(key, value) {\n        const messages = {};\n        messages[key] = JSON.stringify(value);\n        await Devvit.kvStorePlugin.Put({ messages }, __classPrivateFieldGet(this, _KeyValueStorage_metadata, \"f\"));\n    }\n    async delete(key) {\n        await Devvit.kvStorePlugin.Del({ keys: [key] }, __classPrivateFieldGet(this, _KeyValueStorage_metadata, \"f\"));\n    }\n    async list() {\n        const { keys } = await Devvit.kvStorePlugin.List({ filter: '*' }, __classPrivateFieldGet(this, _KeyValueStorage_metadata, \"f\"));\n        return keys;\n    }\n}\n_KeyValueStorage_metadata = new WeakMap();\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _MediaClient_metadata;\nimport { Devvit } from '../../devvit/Devvit.js';\nexport class MediaClient {\n    constructor(metadata) {\n        _MediaClient_metadata.set(this, void 0);\n        __classPrivateFieldSet(this, _MediaClient_metadata, metadata, \"f\");\n    }\n    async upload(opts) {\n        const response = await Devvit.mediaPlugin.Upload(opts, __classPrivateFieldGet(this, _MediaClient_metadata, \"f\"));\n        if (!response.mediaId) {\n            throw new Error('unable to get mediaId via uploads');\n        }\n        return { mediaId: response.mediaId, mediaUrl: response.mediaUrl };\n    }\n}\n_MediaClient_metadata = new WeakMap();\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RealtimeClient_metadata;\nimport { Devvit } from '../../devvit/Devvit.js';\nexport class RealtimeClient {\n    constructor(metadata) {\n        _RealtimeClient_metadata.set(this, void 0);\n        __classPrivateFieldSet(this, _RealtimeClient_metadata, metadata, \"f\");\n    }\n    async send(channel, msg) {\n        // guarantee an object by wrapping msg. the key must align to useChannel().\n        await Devvit.realtimePlugin.Send({ channel, data: { msg } }, __classPrivateFieldGet(this, _RealtimeClient_metadata, \"f\"));\n    }\n}\n_RealtimeClient_metadata = new WeakMap();\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RedditAPIClient_metadata, _RedditAPIClient_modMailService, _RedditAPIClient_currentUser, _RedditAPIClient_currentUsername;\nimport {} from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { Devvit } from '../../devvit/Devvit.js';\nimport { asT3ID, asT5ID, asTID, isT1ID, isT3ID } from '../../types/tid.js';\nimport { AboutLocations, Comment, Flair, FlairTemplate, getCurrentUsernameFromMetadata, getModerationLog, getSubredditInfoById, getSubredditInfoByName, getSubredditLeaderboard, getSubredditNameById, getSubredditStyles, getVaultByAddress, getVaultByUserId, ModMailService, ModNote, Post, PrivateMessage, Subreddit, User, Widget, WikiPage, } from './models/index.js';\n/**\n * The Reddit API Client\n *\n * To use the Reddit API Client, add it to the plugin configuration at the top of the file.\n *\n * @example\n * ```ts\n *\n * Devvit.configure({\n *    redditAPI: true,\n *    // other plugins\n * })\n\n * // use within one of our capability handlers e.g. Menu Actions, Triggers, Scheduled Job Type, etc\n * async (event, context) => {\n *     const subreddit = await context.reddit.getSubredditById(context.subredditId);\n *     context.reddit.submitPost({\n *       subredditName: subreddit.name,\n *       title: 'test post',\n *       text: 'test body',\n *     })\n *     // additional code\n * }\n * ```\n */\nexport class RedditAPIClient {\n    constructor(metadata) {\n        _RedditAPIClient_metadata.set(this, void 0);\n        _RedditAPIClient_modMailService.set(this, void 0);\n        _RedditAPIClient_currentUser.set(this, void 0);\n        _RedditAPIClient_currentUsername.set(this, void 0);\n        __classPrivateFieldSet(this, _RedditAPIClient_metadata, metadata, \"f\");\n        __classPrivateFieldSet(this, _RedditAPIClient_modMailService, new ModMailService(metadata), \"f\");\n    }\n    /**\n     * Get ModMail API object\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.reply({\n     *   body: \"Here is my message\",\n     *   conversationId: \"abcd42\";\n     * })\n     * ```\n     */\n    get modMail() {\n        return __classPrivateFieldGet(this, _RedditAPIClient_modMailService, \"f\");\n    }\n    /**\n     * Gets a {@link Subreddit} object by ID\n     *\n     * @deprecated Use {@link getSubredditInfoById} instead.\n     * @param {string} id - The ID (starting with t5_) of the subreddit to retrieve. e.g. t5_2qjpg\n     * @returns {Promise<Subreddit>} A Promise that resolves a Subreddit object.\n     * @example\n     * ```ts\n     * const memes = await reddit.getSubredditById('t5_2qjpg');\n     * ```\n     */\n    getSubredditById(id) {\n        return Subreddit.getById(asTID(id), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link SubredditInfo} object by ID\n     *\n     * @param {string} id - The ID (starting with t5_) of the subreddit to retrieve. e.g. t5_2qjpg\n     * @returns {Promise<SubredditInfo>} A Promise that resolves a SubredditInfo object.\n     * @example\n     * ```ts\n     * const memes = await reddit.getSubredditInfoById('t5_2qjpg');\n     * ```\n     */\n    getSubredditInfoById(id) {\n        return getSubredditInfoById(id, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link Subreddit} object by name\n     *\n     * @deprecated Use {@link getSubredditInfoByName} instead.\n     * @param {string} name The name of a subreddit omitting the r/. This is case insensitive.\n     * @returns {Promise<Subreddit>} A Promise that resolves a Subreddit object.\n     * @example\n     * ```ts\n     * const askReddit = await reddit.getSubredditByName('askReddit');\n     * ```\n     */\n    getSubredditByName(name) {\n        return Subreddit.getByName(name, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link SubredditInfo} object by name\n     *\n     * @param {string} name The name of a subreddit omitting the r/. This is case insensitive.\n     * @returns {Promise<SubredditInfo>} A Promise that resolves a SubredditInfo object.\n     * @example\n     * ```ts\n     * const askReddit = await reddit.getSubredditInfoByName('askReddit');\n     * ```\n     */\n    getSubredditInfoByName(name) {\n        return getSubredditInfoByName(name, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Add a removal reason to a subreddit\n     *\n     * @param subredditName Name of the subreddit being removed.\n     * @param options Options.\n     * @param options.title The title of the removal reason.\n     * @param options.message The message associated with the removal reason.\n     * @example\n     * ```ts\n     * const newReason = await reddit.addSubredditRemovalReasons(\n     *   'askReddit',\n     *   {\n     *     title: 'Spam',\n     *     message: 'This is spam!'\n     *   }\n     * );\n     * console.log(newReason.id)\n     * ```\n     *\n     * @returns {string} Removal Reason ID\n     */\n    addSubredditRemovalReason(subredditName, options) {\n        return Subreddit.addRemovalReason(subredditName, options.title, options.message, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the list of subreddit's removal reasons (ordered)\n     *\n     * @param subredditName\n     * @example\n     * ```ts\n     * const reasons = await reddit.getSubredditRemovalReasons('askReddit');\n     *\n     * for (let reason of reasons) {\n     *   console.log(reason.id, reason.message, reason.title)\n     * }\n     * ```\n     *\n     * @returns Ordered array of Removal Reasons\n     */\n    getSubredditRemovalReasons(subredditName) {\n        return Subreddit.getRemovalReasons(subredditName, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Retrieves the name of the current subreddit.\n     *\n     * @returns {Promise<string>} A Promise that resolves a string representing the current subreddit's name.\n     * @example\n     * ```ts\n     * const currentSubredditName = await reddit.getCurrentSubredditName();\n     * ```\n     */\n    async getCurrentSubredditName() {\n        const nameFromMetadata = __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\")?.[Header.SubredditName]?.values[0];\n        if (nameFromMetadata) {\n            return nameFromMetadata;\n        }\n        const subredditId = __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\")?.[Header.Subreddit]?.values[0];\n        const nameFromId = await getSubredditNameById(asT5ID(subredditId), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n        if (!nameFromId) {\n            throw new Error(\"Couldn't get current subreddit's name\");\n        }\n        return nameFromId;\n    }\n    /**\n     * Retrieves the current subreddit.\n     *\n     * @returns {Promise<Subreddit>} A Promise that resolves a Subreddit object.\n     * @example\n     * ```ts\n     * const currentSubreddit = await reddit.getCurrentSubreddit();\n     * ```\n     */\n    async getCurrentSubreddit() {\n        const currentSubreddit = await Subreddit.getFromMetadata(__classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n        if (!currentSubreddit) {\n            throw new Error(\"Couldn't get current subreddit\");\n        }\n        return currentSubreddit;\n    }\n    /**\n     * Gets a {@link Post} object by ID\n     *\n     * @param id\n     * @returns A Promise that resolves to a Post object.\n     */\n    getPostById(id) {\n        return Post.getById(asTID(id), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Submits a new post to a subreddit.\n     *\n     * @param options - Either a self post or a link post.\n     * @returns A Promise that resolves to a Post object.\n     * @example\n     * ```ts\n     * const post = await reddit.submitPost({\n     *   subredditName: 'devvit',\n     *   title: 'Hello World',\n     *   richtext: new RichTextBuilder()\n     *     .heading({ level: 1 }, (h) => {\n     *       h.rawText('Hello world');\n     *     })\n     *     .codeBlock({}, (cb) => cb.rawText('This post was created via the Devvit API'))\n     *     .build()\n     * });\n     * ```\n     *\n     * By default, `submitPost()` creates a Post on behalf of the App account, but it may be called on behalf of the User making the request by setting the option `runAs: RunAs.USER`.\n     * When using `runAs: RunAs.USER` to create an experience Post, you must specify the `userGeneratedContent` option. For example:\n     * @example\n     * ```ts\n     * import { RunAs } from '@devvit/public-api';\n     *\n     * const post = await reddit.submitPost({\n     *  title: 'My Devvit Post',\n     *  runAs: RunAs.USER,\n     *  userGeneratedContent: {\n     *    text: \"hello there\",\n     *    imageUrls: [\"https://styles.redditmedia.com/t5_5wa5ww/styles/communityIcon_wyopomb2xb0a1.png\", \"https://styles.redditmedia.com/t5_49fkib/styles/bannerBackgroundImage_5a4axis7cku61.png\"]\n        },\n     *  subredditName: await reddit.getCurrentSubredditName(),\n     *  textFallback: {\n     *    text: 'This is a Devvit post!',\n     *  },\n     *  preview: (\n     *    <vstack height=\"100%\" width=\"100%\" alignment=\"middle center\">\n     *      <text size=\"large\">Loading...</text>\n     *    </vstack>\n     *  ),\n     * });\n     * ```\n     */\n    submitPost(options) {\n        return Post.submit(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Crossposts a post to a subreddit.\n     *\n     * @param options - Options for crossposting a post\n     * @param options.subredditName - The name of the subreddit to crosspost to\n     * @param options.postId - The ID of the post to crosspost\n     * @param options.title - The title of the crosspost\n     * @returns - A Promise that resolves to a Post object.\n     */\n    crosspost(options) {\n        return Post.crosspost(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link User} object by ID\n     *\n     * @param id - The ID (starting with t2_) of the user to retrieve. e.g. t2_1qjpg\n     * @returns A Promise that resolves to a User object.\n     * @example\n     * ```ts\n     * const user = await reddit.getUserById('t2_1qjpg');\n     * ```\n     */\n    getUserById(id) {\n        return User.getById(asTID(id), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link User} object by username\n     *\n     * @param username - The username of the user omitting the u/. e.g. 'devvit'\n     * @returns A Promise that resolves to a User object or undefined if user is\n     *          not found (user doesn't exist, account suspended, etc).\n     * @example\n     * ```ts\n     * const user = await reddit.getUserByUsername('devvit');\n     * if (user) {\n     *   console.log(user)\n     * }\n     * ```\n     */\n    getUserByUsername(username) {\n        return User.getByUsername(username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the current calling user's username.\n     * Resolves to undefined for logged-out custom post renders.\n     *\n     * @returns A Promise that resolves to a string representing the username or undefined\n     * @example\n     * ```ts\n     * const username = await reddit.getCurrentUsername();\n     * ```\n     */\n    async getCurrentUsername() {\n        __classPrivateFieldSet(this, _RedditAPIClient_currentUsername, __classPrivateFieldGet(this, _RedditAPIClient_currentUsername, \"f\") ?? getCurrentUsernameFromMetadata(__classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\")), \"f\");\n        return __classPrivateFieldGet(this, _RedditAPIClient_currentUsername, \"f\");\n    }\n    /**\n     * Get the current calling user.\n     * Resolves to undefined for logged-out custom post renders.\n     *\n     * @returns A Promise that resolves to a User object or undefined\n     * @example\n     * ```ts\n     * const user = await reddit.getCurrentUser();\n     * ```\n     */\n    async getCurrentUser() {\n        __classPrivateFieldSet(this, _RedditAPIClient_currentUser, __classPrivateFieldGet(this, _RedditAPIClient_currentUser, \"f\") ?? this.getCurrentUsername().then((username) => username ? User.getByUsername(username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\")) : undefined), \"f\");\n        return __classPrivateFieldGet(this, _RedditAPIClient_currentUser, \"f\");\n    }\n    /**\n     * Get the user that the app runs as on the provided metadata.\n     *\n     * @returns A Promise that resolves to a User object.\n     * @example\n     * ```ts\n     * const user = await reddit.getAppUser(metadata);\n     * ```\n     */\n    getAppUser() {\n        return User.getFromMetadata(Header.AppUser, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the snoovatar URL for a given username.\n     *\n     * @param username - The username of the snoovatar to retrieve\n     * @returns A Promise that resolves to a URL of the snoovatar image if it exists.\n     */\n    async getSnoovatarUrl(username) {\n        const currentUsername = await this.getCurrentUsername();\n        if (currentUsername && username === currentUsername) {\n            const snoovatarUrl = __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\")?.[Header.UserSnoovatarUrl]?.values[0];\n            if (snoovatarUrl) {\n                return snoovatarUrl;\n            }\n        }\n        return User.getSnoovatarUrl(username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a {@link Comment} object by ID\n     *\n     * @param id - The ID (starting with t1_) of the comment to retrieve. e.g. t1_1qjpg\n     * @returns A Promise that resolves to a Comment object.\n     * @example\n     * ```ts\n     * const comment = await reddit.getCommentById('t1_1qjpg');\n     * ```\n     */\n    getCommentById(id) {\n        return Comment.getById(asTID(id), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of comments from a specific post or comment.\n     *\n     * @param options - Options for the request\n     * @param options.postId - The ID of the post e.g. 't3_1qjpg'\n     * @param options.commentId - The ID of the comment e.g. 't1_1qjpg'\n     * @param options.limit - The maximum number of comments to return. e.g. 1000\n     * @param options.pageSize - The number of comments to return per request. e.g. 100\n     * @param options.sort - The sort order of the comments. e.g. 'new'\n     * @returns A Listing of Comment objects.\n     * @example\n     * ```ts\n     * const comments = await reddit.getComments({\n     *   postId: 't3_1qjpg',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getComments(options) {\n        return Comment.getComments(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of comments by a specific user.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user omitting the u/. e.g. 'spez'\n     * @param options.sort - The sort order of the comments. e.g. 'new'\n     * @param options.timeframe - The timeframe of the comments. e.g. 'all'\n     * @param options.limit - The maximum number of comments to return. e.g. 1000\n     * @param options.pageSize - The number of comments to return per request. e.g. 100\n     * @returns A Listing of Comment objects.\n     */\n    getCommentsByUser(options) {\n        return Comment.getCommentsByUser(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Submit a new comment to a post or comment.\n     *\n     * @param options - You must provide either `options.text` or `options.richtext` but not both.\n     * @param options.id - The ID of the post or comment to comment on. e.g. 't3_1qjpg' for post and 't1_1qgif' for comment\n     * @param options.text - The text of the comment\n     * @param options.richtext - The rich text of the comment\n     * @param options.runAs - The user type to submit the comment as, eg 'APP' or 'USER'\n     * @returns A Promise that resolves to a Comment object.\n     * @example\n     * ```ts\n     * import { RunAs } from '@devvit/public-api';\n     *\n     * const comment = await reddit.submitComment({\n     *  id: 't1_1qgif',\n     *  text: 'Hello world!',\n     *  runAs: RunAs.APP,\n     * })\n     * ```\n     */\n    submitComment(options) {\n        return Comment.submit({\n            ...options,\n            id: asTID(options.id),\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of controversial posts from a specific subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get posts from. e.g. 'memes'\n     * @param options.timeframe - The timeframe to get posts from. e.g. 'day'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     * @example\n     * ```ts\n     * const posts = await reddit.getControversialPosts({\n     *   subredditName: 'memes',\n     *   timeframe: 'day',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getControversialPosts(options) {\n        return Post.getControversialPosts(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of controversial posts from a specific subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get posts from. e.g. 'memes'\n     * @param options.timeframe - The timeframe to get posts from. e.g. 'day'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     * @example\n     * ```ts\n     * const posts = await reddit.getControversialPosts({\n     *   subredditName: 'memes',\n     *   timeframe: 'day',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getTopPosts(options) {\n        return Post.getTopPosts(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of hot posts from a specific subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get posts from. e.g. 'memes'\n     * @param options.timeframe - The timeframe to get posts from. e.g. 'day'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     * @example\n     * ```ts\n     * const posts = await reddit.getHotPosts({\n     *   subredditName: 'memes',\n     *   timeframe: 'day',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getHotPosts(options) {\n        return Post.getHotPosts(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of new posts from a specific subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get posts from. e.g. 'memes'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     * @example\n     * ```ts\n     * const posts = await reddit.getNewPosts({\n     *   subredditName: 'memes',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getNewPosts(options) {\n        return Post.getNewPosts(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of hot posts from a specific subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get posts from. e.g. 'memes'\n     * @param options.timeframe - The timeframe to get posts from. e.g. 'day'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     * @example\n     * ```ts\n     * const posts = await reddit.getRisingPosts({\n     *   subredditName: 'memes',\n     *   timeframe: 'day',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getRisingPosts(options) {\n        return Post.getRisingPosts(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of posts from a specific user.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user omitting the u/. e.g. 'spez'\n     * @param options.sort - The sort method to use. e.g. 'new'\n     * @param options.timeframe - The timeframe to get posts from. e.g. 'day'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     */\n    getPostsByUser(options) {\n        return Post.getPostsByUser(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of posts and comments from a specific user.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user omitting the u/. e.g. 'spez'\n     * @param options.sort - The sort method to use. e.g. 'new'\n     * @param options.timeframe - The timeframe to get posts from. e.g. 'day'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of `Post` and `Comment` objects.\n     */\n    getCommentsAndPostsByUser(options) {\n        return User.getOverview(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Returns the karma for a given user in the current subreddit.\n     * The user making the request must be a moderator of the subreddit to read another user's karma in the subreddit.\n     * An exception is if the specified user is the same as the user making the request.\n     *\n     * @param username - The username of the user to get the karma for. e.g. 'spez'\n     * @returns The GetUserKarmaForSubredditResponse, containing the user's karma for posts and comments in the subreddit.\n     */\n    getUserKarmaFromCurrentSubreddit(username) {\n        return User.getUserKarmaFromCurrentSubreddit(username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the moderation log for a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the moderation log from. e.g. 'memes'\n     * @param options.moderatorUsernames (optional) A moderator filter. Accepts an array of usernames\n     * @param options.type (optional) Filter the entries by the type of the Moderator action\n     * @param options.limit - (optional) The maximum number of ModActions to return. e.g. 1000\n     * @param options.pageSize - (optional) The number of ModActions to return per request. e.g. 100\n     * @returns A Listing of ModAction objects.\n     * @example\n     * ```ts\n     * const modActions = await reddit.getModerationLog({\n     *   subredditName: 'memes',\n     *   moderatorUsernames: ['spez'],\n     *   type: 'banuser',\n     *   limit: 1000,\n     *   pageSize: 100\n     * }).all();\n     * ```\n     */\n    getModerationLog(options) {\n        return getModerationLog(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of users who have been approved to post in a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the approved users from. e.g. 'memes'\n     * @param options.username - Use this to see if a user is approved to post in the subreddit.\n     * @param options.limit - The maximum number of users to return. e.g. 1000\n     * @param options.pageSize - The number of users to return per request. e.g. 100\n     * @returns A Listing of User objects.\n     */\n    getApprovedUsers(options) {\n        return User.getSubredditUsersByType({\n            type: 'contributors',\n            ...options,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Approve a user to post in a subreddit.\n     *\n     * @param username - The username of the user to approve. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to approve the user in. e.g. 'memes'\n     */\n    approveUser(username, subredditName) {\n        return User.createRelationship({\n            username,\n            subredditName,\n            type: 'contributor',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Remove a user's approval to post in a subreddit.\n     *\n     * @param username - The username of the user to remove approval from. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to remove the user's approval from. e.g. 'memes'\n     */\n    removeUser(username, subredditName) {\n        return User.removeRelationship({\n            username,\n            subredditName,\n            type: 'contributor',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of users who are wiki contributors of a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the wiki contributors from. e.g. 'memes'\n     * @param options.username - Use this to see if a user is a wiki contributor for the subreddit.\n     * @param options.limit - The maximum number of users to return. e.g. 1000\n     * @param options.pageSize - The number of users to return per request. e.g. 100\n     * @returns A Listing of User objects.\n     */\n    getWikiContributors(options) {\n        return User.getSubredditUsersByType({\n            type: 'wikicontributors',\n            ...options,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Add a user as a wiki contributor for a subreddit.\n     *\n     * @param username - The username of the user to add as a wiki contributor. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to add the user as a wiki contributor. e.g. 'memes'\n     */\n    addWikiContributor(username, subredditName) {\n        return User.createRelationship({\n            username,\n            subredditName,\n            type: 'wikicontributor',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Remove a user's wiki contributor status for a subreddit.\n     *\n     * @param username - The username of the user to remove wiki contributor status from. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to remove the user's wiki contributor status from. e.g. 'memes'\n     */\n    removeWikiContributor(username, subredditName) {\n        return User.removeRelationship({\n            username,\n            subredditName,\n            type: 'wikicontributor',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of users who are banned from a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the banned users from. e.g. 'memes'\n     * @param options.username - Use this to see if a user is banned from the subreddit.\n     * @param options.limit - The maximum number of users to return. e.g. 1000\n     * @param options.pageSize - The number of users to return per request. e.g. 100\n     * @returns A Listing of User objects.\n     */\n    getBannedUsers(options) {\n        return User.getSubredditUsersByType({\n            type: 'banned',\n            ...options,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Ban a user from a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user to ban. e.g. 'spez'\n     * @param options.subredditName - The name of the subreddit to ban the user from. e.g. 'memes'\n     * @param options.note - A mod note for the ban. (optional)\n     * @param options.duration - The number of days the user should be banned for. (optional)\n     * @param options.message - A message to send to the user when they are banned. (optional)\n     * @param options.context - The ID of the post or comment that caused the ban. (optional)\n     * @param options.reason - The reason for the ban. (optional)\n     */\n    banUser(options) {\n        return User.createRelationship({\n            username: options.username,\n            subredditName: options.subredditName,\n            type: 'banned',\n            banReason: options.reason,\n            banMessage: options.message,\n            note: options.note,\n            duration: options.duration,\n            banContext: options.context,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Unban a user from a subreddit.\n     *\n     * @param username - The username of the user to unban. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to unban the user from. e.g. 'memes'\n     */\n    unbanUser(username, subredditName) {\n        return User.removeRelationship({\n            username,\n            subredditName,\n            type: 'banned',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of users who are banned from contributing to the wiki on a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the banned wiki contributors from. e.g. 'memes'\n     * @param options.username - Use this to see if a user is banned from contributing to the wiki on a subreddit.\n     * @param options.limit - The maximum number of users to return. e.g. 1000\n     * @param options.pageSize - The number of users to return per request. e.g. 100\n     * @returns A Listing of User objects.\n     */\n    getBannedWikiContributors(options) {\n        return User.getSubredditUsersByType({\n            type: 'wikibanned',\n            ...options,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Ban a user from contributing to the wiki on a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user to ban. e.g. 'spez'\n     * @param options.subredditName - The name of the subreddit to ban the user from contributing to the wiki on. e.g. 'memes'\n     * @param options.reason - The reason for the ban. (optional)\n     * @param options.duration - The number of days the user should be banned for. (optional)\n     * @param options.note - A mod note for the ban. (optional)\n     */\n    banWikiContributor(options) {\n        return User.createRelationship({\n            ...options,\n            type: 'wikibanned',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     *\n     * @param username - The username of the user to unban. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to unban the user from contributing to the wiki on. e.g. 'memes'\n     */\n    unbanWikiContributor(username, subredditName) {\n        return User.removeRelationship({\n            username,\n            subredditName,\n            type: 'wikibanned',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of users who are moderators for a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the moderators from. e.g. 'memes'\n     * @param options.username - Use this to see if a user is a moderator of the subreddit.\n     * @param options.limit - The maximum number of users to return. e.g. 1000\n     * @param options.pageSize - The number of users to return per request. e.g. 100\n     * @returns A Listing of User objects.\n     */\n    getModerators(options) {\n        return User.getSubredditUsersByType({\n            type: 'moderators',\n            ...options,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Invite a user to become a moderator of a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user to invite. e.g. 'spez'\n     * @param options.subredditName - The name of the subreddit to invite the user to moderate. e.g. 'memes'\n     * @param options.permissions - The permissions to give the user. (optional) Defaults to 'all'.\n     */\n    inviteModerator(options) {\n        return User.createRelationship({\n            type: 'moderator_invite',\n            subredditName: options.subredditName,\n            username: options.username,\n            permissions: options.permissions ?? [],\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Revoke a moderator invite for a user to a subreddit.\n     *\n     * @param username - The username of the user to revoke the invite for. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to revoke the invite for. e.g. 'memes'\n     */\n    revokeModeratorInvite(username, subredditName) {\n        return User.removeRelationship({\n            username,\n            subredditName,\n            type: 'moderator_invite',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Remove a user as a moderator of a subreddit.\n     *\n     * @param username - The username of the user to remove as a moderator. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to remove the user as a moderator from. e.g. 'memes'\n     */\n    removeModerator(username, subredditName) {\n        return User.removeRelationship({\n            type: 'moderator',\n            subredditName,\n            username,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Update the permissions of a moderator of a subreddit.\n     *\n     * @param username - The username of the user to update the permissions for. e.g. 'spez'\n     * @param subredditName - The name of the subreddit. e.g. 'memes'\n     * @param permissions - The permissions to give the user. e.g ['posts', 'wiki']\n     */\n    setModeratorPermissions(username, subredditName, permissions) {\n        return User.setModeratorPermissions(username, subredditName, permissions, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of users who are muted in a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the muted users from. e.g. 'memes'\n     * @param options.username - Use this to see if a user is muted in the subreddit.\n     * @param options.limit - The maximum number of users to return. e.g. 1000\n     * @param options.pageSize - The number of users to return per request. e.g. 100\n     * @returns A listing of User objects.\n     */\n    getMutedUsers(options) {\n        return User.getSubredditUsersByType({\n            type: 'muted',\n            ...options,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Mute a user in a subreddit. Muting a user prevents them from sending modmail.\n     *\n     * @param options - Options for the request\n     * @param options.username - The username of the user to mute. e.g. 'spez'\n     * @param options.subredditName - The name of the subreddit to mute the user in. e.g. 'memes'\n     * @param options.note - A mod note on why the user was muted. (optional)\n     */\n    muteUser(options) {\n        return User.createRelationship({\n            ...options,\n            type: 'muted',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Unmute a user in a subreddit. Unmuting a user allows them to send modmail.\n     *\n     * @param username - The username of the user to unmute. e.g. 'spez'\n     * @param subredditName - The name of the subreddit to unmute the user in. e.g. 'memes'\n     */\n    unmuteUser(username, subredditName) {\n        return User.removeRelationship({\n            username,\n            subredditName,\n            type: 'muted',\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a list of mod notes related to a user in a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to get the mod notes from. e.g. 'memes'\n     * @param options.username - The username of the user to get the mod notes for. e.g. 'spez'\n     * @param options.filter - Filter the mod notes by type. e.g. 'NOTE', 'BAN', 'APPROVAL'\n     * @param options.limit - The maximum number of mod notes to return. e.g. 1000\n     * @param options.pageSize - The number of mod notes to return per request. e.g. 100\n     * @returns A listing of ModNote objects.\n     */\n    getModNotes(options) {\n        return ModNote.get(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Delete a mod note.\n     *\n     * @param options - Options for the request\n     * @param options.subreddit - The name of the subreddit to delete the mod note from. e.g. 'memes'\n     * @param options.noteId - The ID of the mod note to delete (should have a ModNote_ prefix).\n     * @returns True if it was deleted successfully; false otherwise.\n     */\n    deleteModNote(options) {\n        return ModNote.delete(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Add a mod note.\n     *\n     * @param options - Options for the request\n     * @param options.subreddit - The name of the subreddit to add the mod note to. e.g. 'memes'\n     * @param options.user - The username of the user to add the mod note to. e.g. 'spez'\n     * @param options.redditId - (optional) The ID of the comment or post to add the mod note to. e.g. 't3_1234'\n     * @param options.label - (optional) The label of the mod note. e.g. 'SPAM_WARNING'\n     * @param options.note - The text of the mod note.\n     * @returns A Promise that resolves if the mod note was successfully added.\n     */\n    addModNote(options) {\n        const req = {\n            ...options,\n            redditId: options.redditId ? asTID(options.redditId) : undefined,\n        };\n        return ModNote.add(req, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Add a mod note for why a post or comment was removed\n     *\n     * @param options.itemIds list of thing ids\n     * @param options.reasonId id of a Removal Reason - you can leave this as an empty string if you don't have one\n     * @param options.modNote the reason for removal (maximum 100 characters) (optional)\n     */\n    addRemovalNote(options) {\n        return ModNote.addRemovalNote(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Sends a private message to a user.\n     *\n     * @param options - The options for sending the message.\n     * @returns A Promise that resolves if the private message was successfully sent.\n     */\n    async sendPrivateMessage(options) {\n        return PrivateMessage.send(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Sends a private message to a user on behalf of a subreddit.\n     * @deprecated No longer working as expected. Use {@link modMail.createConversation} with `isAuthorHidden: true` instead\n     * @param options - The options for sending the message as a subreddit.\n     * @returns A Promise that resolves if the private message was successfully sent.\n     */\n    async sendPrivateMessageAsSubreddit(options) {\n        return PrivateMessage.sendAsSubreddit(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Approve a post or comment.\n     *\n     * @param id - The id of the post (t3_) or comment (t1_) to approve.\n     * @example\n     * ```ts\n     * await reddit.approve('t3_123456');\n     * await reddit.approve('t1_123456');\n     * ```\n     */\n    async approve(id) {\n        if (isT1ID(id)) {\n            return Comment.approve(id, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n        }\n        else if (isT3ID(id)) {\n            return Post.approve(id, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n        }\n        throw new Error('id must start with either t1_ or t3_');\n    }\n    /**\n     * Remove a post or comment.\n     *\n     * @param id - The id of the post (t3_) or comment (t1_) to remove.\n     * @param isSpam - Is the post or comment being removed because it's spam?\n     * @example\n     * ```ts\n     * await reddit.remove('t3_123456', false);\n     * await reddit.remove('t1_123456', true);\n     * ```\n     */\n    async remove(id, isSpam) {\n        if (isT1ID(id)) {\n            return Comment.remove(id, isSpam, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n        }\n        else if (isT3ID(id)) {\n            return Post.remove(id, isSpam, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n        }\n        throw new Error('id must start with either t1_ or t3_');\n    }\n    /**\n     * Get the list of post flair templates for a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to get the post flair templates for.\n     * @returns A Promise that resolves with an array of FlairTemplate objects.\n     */\n    async getPostFlairTemplates(subredditName) {\n        return FlairTemplate.getPostFlairTemplates(subredditName, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the list of user flair templates for a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to get the user flair templates for.\n     * @returns A Promise that resolves with an array of FlairTemplate objects.\n     */\n    async getUserFlairTemplates(subredditName) {\n        return FlairTemplate.getUserFlairTemplates(subredditName, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Create a post flair template for a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to create the flair template for.\n     * @param options.allowableContent - The content that is allowed to be used with this flair template. e.g. 'all' or 'text' or 'emoji'\n     * @param options.backgroundColor - The background color of the flair template. e.g. '#ff0000' or 'transparent'\n     * @param options.maxEmojis - The maximum number of emojis that can be used with this flair template.\n     * @param options.modOnly - Whether or not this flair template is only available to mods.\n     * @param options.text - The text of the flair template.\n     * @param options.textColor - The text color of the flair template. Either 'dark' or 'light'.\n     * @param options.allowUserEdits - Whether or not users can edit the flair template when selecting a flair.\n     * @returns The created FlairTemplate object.\n     */\n    async createPostFlairTemplate(options) {\n        return FlairTemplate.createPostFlairTemplate(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Create a user flair template for a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to create the flair template for.\n     * @param options.allowableContent - The content that is allowed to be used with this flair template. e.g. 'all' or 'text' or 'emoji'\n     * @param options.backgroundColor - The background color of the flair template. e.g. '#ff0000' or 'transparent'\n     * @param options.maxEmojis - The maximum number of emojis that can be used with this flair template.\n     * @param options.modOnly - Whether or not this flair template is only available to mods.\n     * @param options.text - The text of the flair template.\n     * @param options.textColor - The text color of the flair template. Either 'dark' or 'light'.\n     * @param options.allowUserEdits - Whether or not users can edit the flair template when selecting a flair.\n     * @returns The created FlairTemplate object.\n     */\n    async createUserFlairTemplate(options) {\n        return FlairTemplate.createUserFlairTemplate(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Edit a flair template for a subreddit. This can be either a post or user flair template.\n     * Note: If you leave any of the options fields as undefined, they will reset to their default values.\n     *\n     * @param options - Options for the request\n     * @param options.id - The ID of the flair template to edit.\n     * @param options.subredditName - The name of the subreddit to create the flair template for.\n     * @param options.allowableContent - The content that is allowed to be used with this flair template. e.g. 'all' or 'text' or 'emoji'\n     * @param options.backgroundColor - The background color of the flair template. e.g. '#ff0000' or 'transparent'\n     * @param options.maxEmojis - The maximum number of emojis that can be used with this flair template.\n     * @param options.modOnly - Is this flair template only available to mods?\n     * @param options.text - The text of the flair template.\n     * @param options.textColor - The text color of the flair template. Either 'dark' or 'light'.\n     * @param options.allowUserEdits - Can users can edit the flair template when selecting a flair?\n     * @returns The edited FlairTemplate object.\n     */\n    async editFlairTemplate(options) {\n        return FlairTemplate.editFlairTemplate(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Delete a flair template from a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to delete the flair template from.\n     * @param flairTemplateId - The ID of the flair template to delete.\n     */\n    async deleteFlairTemplate(subredditName, flairTemplateId) {\n        return FlairTemplate.deleteFlairTemplate(subredditName, flairTemplateId, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Set the flair for a user in a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to set the flair for.\n     * @param options.username - The username of the user to set the flair for.\n     * @param options.flairTemplateId - The ID of the flair template to use.\n     * @param options.text - The text of the flair.\n     * @param options.cssClass - The CSS class of the flair.\n     * @param options.backgroundColor - The background color of the flair.\n     * @param options.textColor - The text color of the flair.\n     */\n    async setUserFlair(options) {\n        return Flair.setUserFlair(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Set the flair of multiple users in the same subreddit with a single API call.\n     * Can process up to 100 entries at once.\n     *\n     * @param subredditName - The name of the subreddit to edit flairs in.\n     * @param {SetUserFlairBatchConfig[]} flairs - Array of user flair configuration objects. If both text and cssClass are empty for a given user the flair will be cleared.\n     * @param flairs[].username - The username of the user to edit the flair for.\n     * @param flairs[].text - The text of the flair.\n     * @param flairs[].cssClass - The CSS class of the flair.\n     * @returns {FlairCsvResult[]} - Array of statuses for each entry provided.\n     */\n    async setUserFlairBatch(subredditName, flairs) {\n        return Flair.setUserFlairBatch(subredditName, flairs, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Remove the flair for a user in a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to remove the flair from.\n     * @param username - The username of the user to remove the flair from.\n     */\n    async removeUserFlair(subredditName, username) {\n        return Flair.removeUserFlair(subredditName, username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Set the flair for a post in a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit to set the flair for.\n     * @param options.postId - The ID of the post to set the flair for.\n     * @param options.flairTemplateId - The ID of the flair template to use.\n     * @param options.text - The text of the flair.\n     * @param options.cssClass - The CSS class of the flair.\n     * @param options.backgroundColor - The background color of the flair.\n     * @param options.textColor - The text color of the flair.\n     */\n    async setPostFlair(options) {\n        return Flair.setPostFlair(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Remove the flair for a post in a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to remove the flair from.\n     * @param postId - The ID of the post to remove the flair from.\n     */\n    async removePostFlair(subredditName, postId) {\n        return Flair.removePostFlair(subredditName, asT3ID(postId), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the widgets for a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to get the widgets for.\n     * @returns - An array of Widget objects.\n     */\n    async getWidgets(subredditName) {\n        return Widget.getWidgets(subredditName, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Delete a widget from a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to delete the widget from.\n     * @param widgetId - The ID of the widget to delete.\n     */\n    async deleteWidget(subredditName, widgetId) {\n        return Widget.delete(subredditName, widgetId, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Add a widget to a subreddit.\n     *\n     * @param widgetData - The data for the widget to add.\n     * @returns - The added Widget object.\n     */\n    async addWidget(widgetData) {\n        return Widget.add(widgetData, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Update a widget for a subreddit.\n     *\n     * @param widgetData - The data for the widget to update.\n     * @returns - The updated Widget object.\n     */\n    async updateWidget(widgetData) {\n        return Widget.patch(widgetData, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Reorder the widgets for a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to reorder the widgets for.\n     * @param orderByIds - An array of widget IDs in the order that they should be displayed.\n     */\n    async reorderWidgets(subredditName, orderByIds) {\n        return Widget.reorder(subredditName, orderByIds, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get a wiki page from a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to get the wiki page from.\n     * @param page - The name of the wiki page to get.\n     * @param revisionId - The revision ID of the wiki page version to get. Setting this value will return the wiki page\n     * version at that revision, and leaving it empty will return the latest version.\n     * @returns The requested WikiPage object.\n     */\n    async getWikiPage(subredditName, page, revisionId) {\n        return WikiPage.getPage(subredditName, page, revisionId, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the wiki pages for a subreddit.\n     *\n     * @param subredditName - The name of the subreddit to get the wiki pages from.\n     * @returns A list of the wiki page names for the subreddit.\n     */\n    async getWikiPages(subredditName) {\n        return WikiPage.getPages(subredditName, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Create a new wiki page for a subreddit.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit the wiki is in.\n     * @param options.page - The name of the wiki page to create.\n     * @param options.content - The Markdown content of the wiki page.\n     * @param options.reason - The reason for creating the wiki page.\n     * @returns - The created WikiPage object.\n     */\n    async createWikiPage(options) {\n        return WikiPage.createPage(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Update a wiki page.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit the wiki is in.\n     * @param options.page - The name of the wiki page to update.\n     * @param options.content - The Markdown content of the wiki page.\n     * @param options.reason - The reason for updating the wiki page.\n     * @returns The updated WikiPage object.\n     */\n    async updateWikiPage(options) {\n        return WikiPage.updatePage(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the revisions for a wiki page.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit the wiki is in.\n     * @param options.page - The name of the wiki page to get the revisions for.\n     * @param options.limit - The maximum number of revisions to return.\n     * @param options.after - The ID of the revision to start after.\n     * @returns A Listing of WikiPageRevision objects.\n     */\n    getWikiPageRevisions(options) {\n        return WikiPage.getPageRevisions(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Revert a wiki page to a previous revision.\n     *\n     * @param subredditName - The name of the subreddit the wiki is in.\n     * @param page - The name of the wiki page to revert.\n     * @param revisionId - The ID of the revision to revert to.\n     */\n    async revertWikiPage(subredditName, page, revisionId) {\n        return WikiPage.revertPage(subredditName, page, revisionId, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get the settings for a wiki page.\n     *\n     * @param subredditName - The name of the subreddit the wiki is in.\n     * @param page - The name of the wiki page to get the settings for.\n     * @returns A WikiPageSettings object.\n     */\n    async getWikiPageSettings(subredditName, page) {\n        return WikiPage.getPageSettings(subredditName, page, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Update the settings for a wiki page.\n     *\n     * @param options - Options for the request\n     * @param options.subredditName - The name of the subreddit the wiki is in.\n     * @param options.page - The name of the wiki page to update the settings for.\n     * @param options.listed - Whether the wiki page should be listed in the wiki index.\n     * @param options.permLevel - The permission level required to edit the wiki page.\n     * @returns A WikiPageSettings object.\n     */\n    async updateWikiPageSettings(options) {\n        return WikiPage.updatePageSettings(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Add an editor to a wiki page.\n     *\n     * @param subredditName - The name of the subreddit the wiki is in.\n     * @param page - The name of the wiki page to add the editor to.\n     * @param username - The username of the user to add as an editor.\n     */\n    async addEditorToWikiPage(subredditName, page, username) {\n        return WikiPage.addEditor(subredditName, page, username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Remove an editor from a wiki page.\n     *\n     * @param subredditName - The name of the subreddit the wiki is in.\n     * @param page - The name of the wiki page to remove the editor from.\n     * @param username - The username of the user to remove as an editor.\n     */\n    async removeEditorFromWikiPage(subredditName, page, username) {\n        return WikiPage.removeEditor(subredditName, page, username, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Get private messages sent to the currently authenticated user.\n     *\n     * @param options - Options for the request\n     * @param options.type - The type of messages to get.\n     */\n    getMessages(options) {\n        return PrivateMessage.getMessages(options, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Mark all private messages as read.\n     */\n    markAllMessagesAsRead() {\n        return PrivateMessage.markAllAsRead(__classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Report a Post or Comment\n     *\n     * The report is sent to the moderators of the subreddit for review.\n     *\n     * @param thing Post or Comment\n     * @param options Options\n     * @param options.reason Why the thing is reported\n     *\n     * @example\n     * ```ts\n     * await reddit.report(post, {\n     *  reason: 'This is spam!',\n     * })\n     * ```\n     */\n    report(thing, options) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        return client.Report({\n            reason: options.reason,\n            thingId: thing.id,\n            srName: thing.subredditName,\n            usernames: thing.authorName,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    getModQueue(options) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Modqueue,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    getReports(options) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Reports,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    getSpam(options) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Spam,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    getUnmoderated(options) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Unmoderated,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    getEdited(options) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Edited,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link Vault} for the specified address.\n     *\n     * @param {string} address - The address (starting with 0x) of the Vault.\n     * @example\n     * ```ts\n     * const vault = await reddit.getVaultByAddress('0x205ee28744456bDBf180A0Fa7De51e0F116d54Ed');\n     * ```\n     */\n    getVaultByAddress(address) {\n        return getVaultByAddress(address, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Gets a {@link Vault} for the specified user.\n     *\n     * @param {string} userId - The ID (starting with t2_) of the Vault owner.\n     * @example\n     * ```ts\n     * const vault = await reddit.getVaultByUserId('t2_1w72');\n     * ```\n     */\n    getVaultByUserId(userId) {\n        return getVaultByUserId(asTID(userId), __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Returns a leaderboard for a given subreddit ID.\n     *\n     * @param subredditId ID of the subreddit for which the leaderboard is being queried.\n     *\n     * @returns {SubredditLeaderboard} Leaderboard for the given subreddit.\n     */\n    getSubredditLeaderboard(subredditId) {\n        return getSubredditLeaderboard(subredditId, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Returns the styles for a given subreddit ID.\n     *\n     * @param subredditId ID of the subreddit from which to retrieve the styles.\n     *\n     * @returns {SubredditStyles} Styles for the given subreddit.\n     */\n    getSubredditStyles(subredditId) {\n        return getSubredditStyles(subredditId, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Subscribes to the subreddit in which the app is installed. No-op if the user is already subscribed.\n     * This method will execute as the app account by default.\n     * To subscribe on behalf of a user, please contact Reddit.\n     */\n    async subscribeToCurrentSubreddit() {\n        const currentSubreddit = await this.getCurrentSubreddit();\n        const client = Devvit.redditAPIPlugins.Subreddits;\n        await client.Subscribe({\n            action: 'sub',\n            actionSource: '',\n            srName: currentSubreddit.name,\n            sr: '',\n            skipInitialDefaults: true,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n    /**\n     * Unsubscribes from the subreddit in which the app is installed. No-op if the user isn't subscribed.\n     * This method will execute as the app account by default.\n     * To unsubscribe on behalf of a user, please contact Reddit.\n     */\n    async unsubscribeFromCurrentSubreddit() {\n        const currentSubreddit = await this.getCurrentSubreddit();\n        const client = Devvit.redditAPIPlugins.Subreddits;\n        await client.Subscribe({\n            action: 'unsub',\n            actionSource: '',\n            srName: currentSubreddit.name,\n            sr: '',\n            skipInitialDefaults: false,\n        }, __classPrivateFieldGet(this, _RedditAPIClient_metadata, \"f\"));\n    }\n}\n_RedditAPIClient_metadata = new WeakMap(), _RedditAPIClient_modMailService = new WeakMap(), _RedditAPIClient_currentUser = new WeakMap(), _RedditAPIClient_currentUsername = new WeakMap();\n", "import { assert } from '@devvit/shared-types/assert.js';\n// CALMS!\nexport var T_PREFIX;\n(function (T_PREFIX) {\n    T_PREFIX[\"COMMENT\"] = \"t1_\";\n    T_PREFIX[\"ACCOUNT\"] = \"t2_\";\n    T_PREFIX[\"LINK\"] = \"t3_\";\n    T_PREFIX[\"MESSAGE\"] = \"t4_\";\n    T_PREFIX[\"SUBREDDIT\"] = \"t5_\";\n    T_PREFIX[\"AWARD\"] = \"t6_\";\n})(T_PREFIX || (T_PREFIX = {}));\n// type guards\nexport function isT1ID(id) {\n    return id.startsWith(T_PREFIX.COMMENT);\n}\nexport function isT2ID(id) {\n    return id.startsWith(T_PREFIX.ACCOUNT);\n}\nexport function isT3ID(id) {\n    return id.startsWith(T_PREFIX.LINK);\n}\nexport function isT4ID(id) {\n    return id.startsWith(T_PREFIX.MESSAGE);\n}\nexport function isT5ID(id) {\n    return id.startsWith(T_PREFIX.SUBREDDIT);\n}\nexport function isT6ID(id) {\n    return id.startsWith(T_PREFIX.AWARD);\n}\n// assertion functions\nexport function assertT1ID(id) {\n    assert(isT1ID(id), `Expected comment id to start with ${T_PREFIX.COMMENT}, got ${id}}`);\n}\nexport function assertT2ID(id) {\n    assert(isT2ID(id), `Expected account id to start with ${T_PREFIX.ACCOUNT}, got ${id}}`);\n}\nexport function assertT3ID(id) {\n    assert(isT3ID(id), `Expected link id to start with ${T_PREFIX.LINK}, got ${id}}`);\n}\nexport function assertT4ID(id) {\n    assert(isT4ID(id), `Expected message id to start with ${T_PREFIX.MESSAGE}, got ${id}}`);\n}\nexport function assertT5ID(id) {\n    assert(isT5ID(id), `Expected subreddit id to start with ${T_PREFIX.SUBREDDIT}, got ${id}}`);\n}\nexport function assertT6ID(id) {\n    assert(isT6ID(id), `Expected award id to start with ${T_PREFIX.AWARD}, got ${id}}`);\n}\n// factory functions\nexport function asT1ID(id) {\n    assertT1ID(id);\n    return id;\n}\nexport function asT2ID(id) {\n    assertT2ID(id);\n    return id;\n}\nexport function asT3ID(id) {\n    assertT3ID(id);\n    return id;\n}\nexport function asT4ID(id) {\n    assertT4ID(id);\n    return id;\n}\nexport function asT5ID(id) {\n    assertT5ID(id);\n    return id;\n}\nexport function asT6ID(id) {\n    assertT6ID(id);\n    return id;\n}\nexport function asTID(id) {\n    if (isT1ID(id)) {\n        return asT1ID(id);\n    }\n    if (isT2ID(id)) {\n        return asT2ID(id);\n    }\n    if (isT3ID(id)) {\n        return asT3ID(id);\n    }\n    if (isT4ID(id)) {\n        return asT4ID(id);\n    }\n    if (isT5ID(id)) {\n        return asT5ID(id);\n    }\n    if (isT6ID(id)) {\n        return asT6ID(id);\n    }\n    throw new Error(`Expected thing id to start with ${Object.values(T_PREFIX).join(', ')} got ${id}}`);\n}\n// convenience functions\nexport function isCommentId(id) {\n    return isT1ID(id);\n}\nexport function isAccountId(id) {\n    return isT2ID(id);\n}\nexport function isLinkId(id) {\n    return isT3ID(id);\n}\nexport function isMessageId(id) {\n    return isT4ID(id);\n}\nexport function isSubredditId(id) {\n    return isT5ID(id);\n}\nexport function isAwardId(id) {\n    return isT6ID(id);\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _TxClient_storage, _TxClient_transactionId, _TxClient_metadata, _RedisClient_metadata, _RedisClient_storage;\nimport { BitfieldOverflowBehavior, RedisKeyScope } from '@devvit/protos';\nimport { Devvit } from '../../devvit/Devvit.js';\n// TODO: This code is currently cloned to the Devvit Web world in the `@devvit/redis` package. If\n//  you change this code, please make sure to update the other package as well. Eventually, this\n//  copy of the code will be deleted, when we move to a fully Devvit Web world.\nfunction isRedisNilError(e) {\n    // TODO: Replace with impl in a Gatsby-only world\n    //return e && e.details === 'redis: nil';\n    if (e &&\n        typeof e === 'object' &&\n        'message' in e &&\n        e.message !== undefined &&\n        typeof e.message === 'string') {\n        return e.message.includes('redis: nil');\n    }\n    else {\n        return false;\n    }\n}\nexport class TxClient {\n    constructor(storage, transactionId, metadata) {\n        _TxClient_storage.set(this, void 0);\n        _TxClient_transactionId.set(this, void 0);\n        _TxClient_metadata.set(this, void 0);\n        __classPrivateFieldSet(this, _TxClient_storage, storage, \"f\");\n        __classPrivateFieldSet(this, _TxClient_transactionId, transactionId, \"f\");\n        __classPrivateFieldSet(this, _TxClient_metadata, metadata, \"f\");\n    }\n    async get(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Get({ key: key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async multi() {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Multi(__classPrivateFieldGet(this, _TxClient_transactionId, \"f\"), __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n    }\n    async set(key, value, options) {\n        let expiration;\n        if (options?.expiration) {\n            expiration = Math.floor((options.expiration.getTime() - Date.now()) / 1000); // convert to seconds\n            if (expiration < 1) {\n                expiration = 1; // minimum expiration is 1 second, clock skew can cause issues, so let's set 1 second.\n            }\n        }\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Set({\n            key,\n            value,\n            nx: options?.nx === true,\n            xx: options?.xx === true,\n            expiration: expiration || 0,\n            transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\"),\n        }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async del(...keys) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Del({ keys: keys, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async type(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Type({ key: key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async exec() {\n        const response = await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Exec(__classPrivateFieldGet(this, _TxClient_transactionId, \"f\"), __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        // eslint-disable-next-line\n        let output = [];\n        for (const result of response.response) {\n            if (result.members) {\n                output.push(result.members);\n            }\n            else if (result.nil !== undefined) {\n                output.push(null);\n            }\n            else if (result.num !== undefined) {\n                output.push(result.num);\n            }\n            else if (result.values !== undefined) {\n                output.push(result.values.values);\n            }\n            else if (result.str !== undefined) {\n                output.push(result.str);\n            }\n            else if (result.dbl !== undefined) {\n                output.push(result.dbl);\n            }\n            else if (result.bool !== undefined) {\n                output.push(result.bool);\n            }\n        }\n        return output;\n    }\n    async discard() {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Discard(__classPrivateFieldGet(this, _TxClient_transactionId, \"f\"), __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n    }\n    async watch(...keys) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Watch({ keys: keys, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async unwatch() {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Unwatch(__classPrivateFieldGet(this, _TxClient_transactionId, \"f\"), __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async getRange(key, start, end) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").GetRange({ key, start, end, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async setRange(key, offset, value) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").SetRange({ key, offset, value, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async strlen(key) {\n        return this.strLen(key);\n    }\n    async strLen(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Strlen({ key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async mget(keys) {\n        return this.mGet(keys);\n    }\n    async mGet(keys) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").MGet({ keys, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async mset(keyValues) {\n        return this.mSet(keyValues);\n    }\n    async mSet(keyValues) {\n        const kv = Object.entries(keyValues).map(([key, value]) => ({ key, value }));\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").MSet({ kv, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async incrBy(key, value) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").IncrBy({ key, value, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async expire(key, seconds) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").Expire({ key, seconds, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async expireTime(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ExpireTime({ key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zAdd(key, ...members) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZAdd({ key, members, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zScore(key, member) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZScore({ key: { key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, member }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zRank(key, member) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZRank({ key: { key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, member }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zIncrBy(key, member, value) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZIncrBy({ key, member, value, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zScan(key, cursor, pattern, count) {\n        const request = {\n            key,\n            cursor,\n            pattern,\n            count,\n            transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\"),\n        };\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZScan(request, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zCard(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZCard({ key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zRange(key, start, stop, options) {\n        // eslint-disable-next-line\n        let opts = { rev: false, byLex: false, byScore: false, offset: 0, count: 1000 };\n        if (options?.reverse) {\n            opts.rev = options.reverse;\n        }\n        if (options?.by === 'lex') {\n            opts.byLex = true;\n        }\n        else if (options?.by === 'score') {\n            opts.byScore = true;\n        }\n        if (options?.limit) {\n            if (opts.byLex || opts.byScore) {\n                opts.offset = options.limit.offset;\n                opts.count = options.limit.count;\n            }\n            else {\n                throw new Error(`zRange parsing error: 'limit' only allowed when 'options.by' is 'lex' or 'score'`);\n            }\n        }\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZRange({\n            key: { key: key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") },\n            start: start + '',\n            stop: stop + '',\n            ...opts,\n        }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zRem(key, members) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZRem({ key: { key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, members: members }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zRemRangeByLex(key, min, max) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZRemRangeByLex({ key: { key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, min: min, max: max }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zRemRangeByRank(key, start, stop) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZRemRangeByRank({ key: { key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, start: start, stop: stop }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async zRemRangeByScore(key, min, max) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").ZRemRangeByScore({ key: { key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, min: min, max: max }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hgetall(key) {\n        return this.hGetAll(key);\n    }\n    async hGetAll(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HGetAll({ key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hget(key, field) {\n        return this.hGet(key, field);\n    }\n    async hGet(key, field) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HGet({ key: key, field: field, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hMGet(key, fields) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HMGet({ key: key, fields: fields, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hset(key, fieldValues) {\n        return this.hSet(key, fieldValues);\n    }\n    async hSet(key, fieldValues) {\n        const fv = Object.entries(fieldValues).map(([field, value]) => ({ field, value }));\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HSet({ key, fv, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hincrby(key, field, value) {\n        return this.hIncrBy(key, field, value);\n    }\n    async hIncrBy(key, field, value) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HIncrBy({ key, field, value, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hdel(key, fields) {\n        return this.hDel(key, fields);\n    }\n    async hDel(key, fields) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HDel({ key, fields, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hscan(key, cursor, pattern, count) {\n        return this.hScan(key, cursor, pattern, count);\n    }\n    async hScan(key, cursor, pattern, count) {\n        const request = {\n            key,\n            cursor,\n            pattern,\n            count,\n            transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\"),\n        };\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HScan(request, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hkeys(key) {\n        return this.hKeys(key);\n    }\n    async hKeys(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HKeys({ key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n    async hlen(key) {\n        return this.hLen(key);\n    }\n    async hLen(key) {\n        await __classPrivateFieldGet(this, _TxClient_storage, \"f\").HLen({ key, transactionId: __classPrivateFieldGet(this, _TxClient_transactionId, \"f\") }, __classPrivateFieldGet(this, _TxClient_metadata, \"f\"));\n        return this;\n    }\n}\n_TxClient_storage = new WeakMap(), _TxClient_transactionId = new WeakMap(), _TxClient_metadata = new WeakMap();\n/**\n * This is a subset of the overall Redis API.  You should be able to look up https://redis.io/commands\n * for more details on each command.\n *\n * For the moment, we've implemented a lot of the basic string/number commands, sorted sets, and transactions.\n * This is the most powerful subset and the safest.\n */\nexport class RedisClient {\n    constructor(metadata, storage = undefined, scope = RedisKeyScope.INSTALLATION) {\n        _RedisClient_metadata.set(this, void 0);\n        _RedisClient_storage.set(this, void 0);\n        __classPrivateFieldSet(this, _RedisClient_metadata, metadata, \"f\");\n        __classPrivateFieldSet(this, _RedisClient_storage, storage, \"f\");\n        this.scope = scope;\n        this.global =\n            scope === RedisKeyScope.INSTALLATION\n                ? new RedisClient(__classPrivateFieldGet(this, _RedisClient_metadata, \"f\"), __classPrivateFieldGet(this, _RedisClient_storage, \"f\"), RedisKeyScope.GLOBAL)\n                : this;\n    }\n    get storage() {\n        return __classPrivateFieldGet(this, _RedisClient_storage, \"f\") || Devvit.redisPlugin;\n    }\n    async watch(...keys) {\n        const txId = await this.storage.Watch({ keys }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return new TxClient(this.storage, txId, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n    }\n    async get(key) {\n        try {\n            const response = await this.storage.Get({ key, scope: this.scope }, {\n                ...__classPrivateFieldGet(this, _RedisClient_metadata, \"f\"),\n                'throw-redis-nil': { values: ['true'] },\n            });\n            return response !== null ? (response.value ?? undefined) : response;\n        }\n        catch (e) {\n            if (isRedisNilError(e)) {\n                return undefined;\n            }\n            throw e;\n        }\n    }\n    async getBuffer(key) {\n        try {\n            const response = await this.storage.GetBytes({ key, scope: this.scope }, {\n                ...__classPrivateFieldGet(this, _RedisClient_metadata, \"f\"),\n                'throw-redis-nil': { values: ['true'] },\n            });\n            return response !== null ? Buffer.from(response.value) : response;\n        }\n        catch (e) {\n            if (isRedisNilError(e)) {\n                return undefined;\n            }\n            throw e;\n        }\n    }\n    async set(key, value, options) {\n        let expiration;\n        if (options?.expiration) {\n            expiration = Math.floor((options.expiration.getTime() - Date.now()) / 1000); // convert to seconds\n            if (expiration < 1) {\n                expiration = 1; // minimum expiration is 1 second, clock skew can cause issues, so let's set 1 second.\n            }\n        }\n        const response = await this.storage.Set({\n            key,\n            value,\n            nx: options?.nx === true && !options.xx,\n            xx: options?.xx === true && !options.nx,\n            expiration: expiration || 0,\n            scope: this.scope,\n        }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async exists(...keys) {\n        const response = await this.storage.Exists({ keys, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.existingKeys;\n    }\n    async del(...keys) {\n        await this.storage.Del({ keys, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n    }\n    async incrBy(key, value) {\n        const response = await this.storage.IncrBy({ key, value, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async getRange(key, start, end) {\n        const response = await this.storage.GetRange({ key, start, end, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.value : response;\n    }\n    async setRange(key, offset, value) {\n        const response = await this.storage.SetRange({ key, offset, value, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async strlen(key) {\n        return this.strLen(key);\n    }\n    async strLen(key) {\n        const response = await this.storage.Strlen({ key, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async expire(key, seconds) {\n        await this.storage.Expire({ key, seconds, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n    }\n    async expireTime(key) {\n        const response = await this.storage.ExpireTime({ key, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async zAdd(key, ...members) {\n        return (await this.storage.ZAdd({ key, members, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"))).value;\n    }\n    async zRange(key, start, stop, options) {\n        // eslint-disable-next-line\n        let opts = { rev: false, byLex: false, byScore: false, offset: 0, count: 1000 };\n        if (options?.reverse) {\n            opts.rev = options.reverse;\n        }\n        if (options?.by === 'lex') {\n            opts.byLex = true;\n        }\n        else if (options?.by === 'score') {\n            opts.byScore = true;\n        }\n        else {\n            // LIMIT requires BYLEX/BYSCORE\n            opts.offset = 0;\n            opts.count = 0;\n        }\n        if (options?.limit) {\n            if (opts.byLex || opts.byScore) {\n                opts.offset = options.limit.offset;\n                opts.count = options.limit.count;\n            }\n            else {\n                throw new Error(`zRange parsing error: 'limit' only allowed when 'options.by' is 'lex' or 'score'`);\n            }\n        }\n        return (await this.storage.ZRange({ key: { key: key }, start: start + '', stop: stop + '', ...opts, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"))).members;\n    }\n    async zRem(key, members) {\n        const response = await this.storage.ZRem({ key: { key }, members, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async zRemRangeByLex(key, min, max) {\n        const response = await this.storage.ZRemRangeByLex({ key: { key }, min, max, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async zRemRangeByRank(key, start, stop) {\n        const response = await this.storage.ZRemRangeByRank({ key: { key }, start, stop, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async zRemRangeByScore(key, min, max) {\n        const response = await this.storage.ZRemRangeByScore({ key: { key }, min, max, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async zScore(key, member) {\n        try {\n            const response = await this.storage.ZScore({ key: { key }, member, scope: this.scope }, {\n                ...__classPrivateFieldGet(this, _RedisClient_metadata, \"f\"),\n                'throw-redis-nil': { values: ['true'] },\n            });\n            return response !== null ? response.value : response;\n        }\n        catch (e) {\n            if (isRedisNilError(e)) {\n                return undefined;\n            }\n            throw e;\n        }\n    }\n    async zRank(key, member) {\n        try {\n            const response = await this.storage.ZRank({ key: { key }, member, scope: this.scope }, {\n                ...__classPrivateFieldGet(this, _RedisClient_metadata, \"f\"),\n                'throw-redis-nil': { values: ['true'] },\n            });\n            return response !== null ? response.value : response;\n        }\n        catch (e) {\n            if (isRedisNilError(e)) {\n                return undefined;\n            }\n            throw e;\n        }\n    }\n    async zIncrBy(key, member, value) {\n        const response = await this.storage.ZIncrBy({ key, member, value, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.value : response;\n    }\n    async mget(keys) {\n        return this.mGet(keys);\n    }\n    async mGet(keys) {\n        const response = await this.storage.MGet({ keys, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.values.map((value) => value || null) : response;\n    }\n    async mset(keyValues) {\n        return this.mSet(keyValues);\n    }\n    async mSet(keyValues) {\n        const kv = Object.entries(keyValues).map(([key, value]) => ({ key, value }));\n        await this.storage.MSet({ kv, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n    }\n    async zCard(key) {\n        const response = await this.storage.ZCard({ key, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.value : response;\n    }\n    async zScan(key, cursor, pattern, count) {\n        const request = { key, cursor, pattern, count, scope: this.scope };\n        return await this.storage.ZScan(request, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n    }\n    async type(key) {\n        const response = await this.storage.Type({ key: key, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.value : response;\n    }\n    async rename(key, newKey) {\n        const response = await this.storage.Rename({ key, newKey, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.result;\n    }\n    async hget(key, field) {\n        return this.hGet(key, field);\n    }\n    async hGet(key, field) {\n        try {\n            const response = await this.storage.HGet({ key, field, scope: this.scope }, {\n                ...__classPrivateFieldGet(this, _RedisClient_metadata, \"f\"),\n                'throw-redis-nil': { values: ['true'] },\n            });\n            return response !== null ? (response.value ?? undefined) : response;\n        }\n        catch (e) {\n            if (isRedisNilError(e)) {\n                return undefined;\n            }\n            throw e;\n        }\n    }\n    async hMGet(key, fields) {\n        const response = await this.storage.HMGet({ key, fields, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.values.map((value) => value || null) : response;\n    }\n    async hset(key, fieldValues) {\n        return this.hSet(key, fieldValues);\n    }\n    async hSet(key, fieldValues) {\n        const fv = Object.entries(fieldValues).map(([field, value]) => ({ field, value }));\n        const response = await this.storage.HSet({ key, fv, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async hSetNX(key, field, value) {\n        const response = await this.storage.HSetNX({ key, field, value, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.success;\n    }\n    async hgetall(key) {\n        return this.hGetAll(key);\n    }\n    async hGetAll(key) {\n        const response = await this.storage.HGetAll({ key, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.fieldValues : response;\n    }\n    async hdel(key, fields) {\n        return this.hDel(key, fields);\n    }\n    async hDel(key, fields) {\n        const response = await this.storage.HDel({ key, fields, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async hscan(key, cursor, pattern, count) {\n        return this.hScan(key, cursor, pattern, count);\n    }\n    async hScan(key, cursor, pattern, count) {\n        const request = { key, cursor, pattern, count, scope: this.scope };\n        return await this.storage.HScan(request, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n    }\n    async hkeys(key) {\n        return this.hKeys(key);\n    }\n    async hKeys(key) {\n        const response = await this.storage.HKeys({ key, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response !== null ? response.keys : response;\n    }\n    async hincrby(key, field, value) {\n        return this.hIncrBy(key, field, value);\n    }\n    async hIncrBy(key, field, value) {\n        const response = await this.storage.HIncrBy({ key, field, value, scope: this.scope }, __classPrivateFieldGet(this, _RedisClient_metadata, \"f\"));\n        return response.value;\n    }\n    async hlen(key) {\n        return this.hLen(key);\n    }\n    async hLen(key) {\n        const response = await this.storage.HLen({\n            key,\n            scope: this.scope,\n        });\n        return response.value;\n    }\n    async bitfield(key, ...cmds) {\n        const commands = [];\n        for (let argIndex = 0; argIndex < cmds.length;) {\n            const currentArg = cmds[argIndex];\n            const command = {};\n            switch (currentArg) {\n                case 'get': {\n                    if (argIndex + 2 >= cmds.length) {\n                        throw Error(`bitfield command parse failed; not enough arguments for 'get' command`);\n                    }\n                    command.get = {\n                        encoding: cmds[argIndex + 1],\n                        offset: cmds[argIndex + 2].toString(),\n                    };\n                    argIndex += 3;\n                    break;\n                }\n                case 'set': {\n                    if (argIndex + 3 >= cmds.length) {\n                        throw Error(`bitfield command parse failed; not enough arguments for 'set' command`);\n                    }\n                    command.set = {\n                        encoding: cmds[argIndex + 1],\n                        offset: cmds[argIndex + 2].toString(),\n                        value: cmds[argIndex + 3].toString(),\n                    };\n                    argIndex += 4;\n                    break;\n                }\n                case 'incrBy': {\n                    if (argIndex + 3 >= cmds.length) {\n                        throw Error(`bitfield command parse failed; not enough arguments for 'incrBy' command`);\n                    }\n                    command.incrBy = {\n                        encoding: cmds[argIndex + 1],\n                        offset: cmds[argIndex + 2].toString(),\n                        increment: cmds[argIndex + 3].toString(),\n                    };\n                    argIndex += 4;\n                    break;\n                }\n                case 'overflow': {\n                    if (argIndex + 1 >= cmds.length) {\n                        throw Error(`bitfield command parse failed; not enough arguments for 'overflow' command`);\n                    }\n                    const behavior = cmds[argIndex + 1].toString();\n                    command.overflow = {\n                        behavior: toBehaviorProto(behavior),\n                    };\n                    argIndex += 2;\n                    break;\n                }\n                default: {\n                    throw Error(`bitfield command parse failed; ${currentArg} unrecognized (must be 'get', 'set', 'incrBy', or 'overflow')`);\n                }\n            }\n            commands.push(command);\n        }\n        const response = await this.storage.Bitfield({\n            key,\n            commands,\n            scope: this.scope,\n        });\n        return response.results;\n    }\n}\n_RedisClient_metadata = new WeakMap(), _RedisClient_storage = new WeakMap();\nfunction toBehaviorProto(behavior) {\n    const lowercase = behavior.toLowerCase();\n    switch (lowercase) {\n        case 'wrap':\n            return BitfieldOverflowBehavior.BITFIELD_OVERFLOW_BEHAVIOR_WRAP;\n        case 'sat':\n            return BitfieldOverflowBehavior.BITFIELD_OVERFLOW_BEHAVIOR_SAT;\n        case 'fail':\n            return BitfieldOverflowBehavior.BITFIELD_OVERFLOW_BEHAVIOR_FAIL;\n        default:\n            throw Error(`unknown bitfield overflow behavior: ${lowercase}`);\n    }\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SchedulerClient_metadata;\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../devvit/Devvit.js';\nexport class SchedulerClient {\n    constructor(metadata) {\n        _SchedulerClient_metadata.set(this, void 0);\n        __classPrivateFieldSet(this, _SchedulerClient_metadata, metadata, \"f\");\n    }\n    async runJob(job) {\n        const response = await Devvit.schedulerPlugin.Schedule({\n            action: {\n                type: job.name,\n                data: job.data,\n            },\n            cron: 'cron' in job ? job.cron : undefined,\n            when: 'runAt' in job ? job.runAt : undefined,\n        }, __classPrivateFieldGet(this, _SchedulerClient_metadata, \"f\"));\n        return response.id;\n    }\n    async cancelJob(jobId) {\n        await Devvit.schedulerPlugin.Cancel({\n            id: jobId,\n        }, __classPrivateFieldGet(this, _SchedulerClient_metadata, \"f\"));\n    }\n    async listJobs() {\n        const response = await Devvit.schedulerPlugin.List(\n        /**\n         * after and before are required for this API to work\n         * so we hardcode after to Unix epoch and before to 10 years from now\n         * https://reddit.atlassian.net/browse/DX-3060\n         */\n        {\n            after: new Date(0),\n            before: new Date(Date.now() + 10 * 365 * 86400 * 1000),\n        }, __classPrivateFieldGet(this, _SchedulerClient_metadata, \"f\"));\n        return response.actions.map((action) => {\n            assertNonNull(action.request?.action, 'Scheduled job is malformed');\n            if ('when' in action.request && action.request.when != null) {\n                return {\n                    id: action.id,\n                    name: action.request.action.type,\n                    runAt: action.request.when,\n                    data: action.request.action.data,\n                };\n            }\n            return {\n                id: action.id,\n                name: action.request.action.type,\n                cron: action.request.cron ?? '',\n                data: action.request.action.data,\n            };\n        });\n    }\n}\n_SchedulerClient_metadata = new WeakMap();\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _SettingsClient_metadata;\nimport { FormFieldType } from '@devvit/protos';\nimport { Devvit } from '../../devvit/Devvit.js';\nimport { flattenFormFieldValue } from '../ui/helpers/getFormValues.js';\nexport class SettingsClient {\n    constructor(metadata) {\n        _SettingsClient_metadata.set(this, void 0);\n        __classPrivateFieldSet(this, _SettingsClient_metadata, metadata, \"f\");\n    }\n    async get(name) {\n        const settings = await this.getAll();\n        return settings[name];\n    }\n    async getAll() {\n        const settingsClient = Devvit.settingsPlugin;\n        const response = await settingsClient.GetSettings({}, __classPrivateFieldGet(this, _SettingsClient_metadata, \"f\"));\n        if (!response.installationSettings) {\n            throw new Error('Could not get installation settings');\n        }\n        if (!response.appSettings) {\n            throw new Error('Could not get app settings');\n        }\n        cleanAppSettings(response);\n        return {\n            ...getSettingsValues(response.installationSettings.settings, Devvit.installationSettings),\n            ...getSettingsValues(response.appSettings.settings, Devvit.appSettings),\n        };\n    }\n}\n_SettingsClient_metadata = new WeakMap();\nexport function cleanAppSettings(response) {\n    if (!response.appSettings) {\n        throw new Error('Could not get app settings');\n    }\n    // FIX: appSettings don't come back typed correctly for bools or numbers.\n    // Fix that. This is a workaround. We intend to make appSettings set this\n    // way entirely obsolete in the future; this is just a stopgap.\n    for (const [key, value] of Object.entries(response.appSettings.settings)) {\n        // Find the matching setting definition, because we can't trust the types in the response.\n        const settingDefinition = Devvit.appSettings?.find((s) => s.type !== 'group' && s.name === key);\n        if (!settingDefinition) {\n            continue;\n        }\n        // If the setting is a boolean or number, we need to convert it from string to the correct type.\n        if (settingDefinition.type === 'boolean' &&\n            value.fieldType === FormFieldType.STRING &&\n            value.boolValue == null &&\n            value.stringValue != null) {\n            value.fieldType = FormFieldType.BOOLEAN;\n            value.boolValue = Boolean(value.stringValue);\n            delete value.stringValue;\n        }\n        else if (settingDefinition.type === 'number' &&\n            value.fieldType === FormFieldType.STRING &&\n            value.numberValue == null &&\n            value.stringValue != null) {\n            value.fieldType = FormFieldType.NUMBER;\n            value.numberValue = Number(value.stringValue);\n            delete value.stringValue;\n        }\n    }\n}\nexport function getSettingsValues(results, settingsDefinitions) {\n    const settingsValues = Object.keys(results).reduce((acc, key) => {\n        acc[key] = flattenFormFieldValue(results[key]);\n        return acc;\n    }, {});\n    if (settingsDefinitions) {\n        setDefaultsIfNecessary(settingsValues, settingsDefinitions);\n    }\n    return settingsValues;\n}\nexport function setDefaultsIfNecessary(settingsValues, settingsDefinitions) {\n    for (const definition of settingsDefinitions) {\n        if (definition.type === 'group') {\n            // Groups get their defaults set recursively\n            setDefaultsIfNecessary(settingsValues, definition.fields);\n        }\n        else {\n            // Only set the default if the value is not already set - note that this checks if the key is\n            // missing from the object, not if the value is falsy. So if the user somehow manually sets a\n            // setting to `undefined`, we won't use the default value here. Same goes for 'defaultValue' -\n            // if the user didn't set a default value, we won't set it to anything.\n            if (!(definition.name in settingsValues) && 'defaultValue' in definition) {\n                settingsValues[definition.name] = definition.defaultValue;\n            }\n        }\n    }\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _UIClient_effects, _UIClient_reconciler, _UIClient_webViewClient, _UIClient_postMessage;\nimport { EffectType, Form as FormProto, ToastAppearance, } from '@devvit/protos';\nimport { Devvit } from '../../devvit/Devvit.js';\nimport { assertValidFormFields } from './helpers/assertValidFormFields.js';\nimport { transformFormFields } from './helpers/transformForm.js';\nexport class UIClient {\n    constructor(reconciler) {\n        _UIClient_effects.set(this, []);\n        _UIClient_reconciler.set(this, void 0);\n        _UIClient_webViewClient.set(this, void 0);\n        _UIClient_postMessage.set(this, (webViewIdOrMessage, message) => {\n            const webViewId = message !== undefined ? webViewIdOrMessage : '';\n            const msg = message !== undefined ? message : webViewIdOrMessage;\n            __classPrivateFieldGet(this, _UIClient_effects, \"f\").push({\n                type: EffectType.EFFECT_WEB_VIEW,\n                webView: {\n                    postMessage: {\n                        webViewId,\n                        app: { message: msg },\n                    },\n                },\n            });\n        });\n        __classPrivateFieldSet(this, _UIClient_reconciler, reconciler, \"f\");\n        __classPrivateFieldSet(this, _UIClient_webViewClient, {\n            postMessage: __classPrivateFieldGet(this, _UIClient_postMessage, \"f\"),\n        }, \"f\");\n    }\n    get webView() {\n        return __classPrivateFieldGet(this, _UIClient_webViewClient, \"f\");\n    }\n    showForm(formKey, data) {\n        return this.showFormInternal(formKey, data);\n    }\n    showFormInternal(formKey, data, formInternalOverride) {\n        let formDefinition = Devvit.formDefinitions?.get(formKey);\n        if (!formDefinition && __classPrivateFieldGet(this, _UIClient_reconciler, \"f\")) {\n            const hookForm = __classPrivateFieldGet(this, _UIClient_reconciler, \"f\").forms.get(formKey);\n            if (hookForm) {\n                formDefinition = {\n                    form: hookForm,\n                    onSubmit: () => { }, // no-op\n                };\n            }\n        }\n        if (!formDefinition) {\n            throw new Error('Form does not exist. Make sure you have added it using Devvit.createForm at the root of your app.');\n        }\n        const formData = formInternalOverride ??\n            (formDefinition.form instanceof Function\n                ? formDefinition.form(data ?? {})\n                : formDefinition.form);\n        const form = {\n            fields: [],\n            id: formKey,\n            title: formData.title,\n            acceptLabel: formData.acceptLabel,\n            cancelLabel: formData.cancelLabel,\n            shortDescription: formData.description,\n        };\n        assertValidFormFields(formData.fields);\n        form.fields = transformFormFields(formData.fields);\n        __classPrivateFieldGet(this, _UIClient_effects, \"f\").push({\n            type: EffectType.EFFECT_SHOW_FORM,\n            showForm: {\n                form,\n            },\n        });\n    }\n    showToast(textOrToast) {\n        let toast;\n        if (textOrToast instanceof Object) {\n            toast = {\n                text: textOrToast.text,\n                appearance: textOrToast.appearance === 'success' ? ToastAppearance.SUCCESS : ToastAppearance.NEUTRAL,\n            };\n        }\n        else {\n            toast = {\n                text: textOrToast,\n            };\n        }\n        __classPrivateFieldGet(this, _UIClient_effects, \"f\").push({\n            type: EffectType.EFFECT_SHOW_TOAST,\n            showToast: {\n                toast,\n            },\n        });\n    }\n    navigateTo(thingOrUrl) {\n        const inputUrl = typeof thingOrUrl === 'string' ? thingOrUrl : thingOrUrl.url;\n        if (!URL.canParse(inputUrl)) {\n            throw new TypeError(`Invalid URL: ${inputUrl}`);\n        }\n        const normalizedUrl = new URL(inputUrl).toString();\n        __classPrivateFieldGet(this, _UIClient_effects, \"f\").push({\n            type: EffectType.EFFECT_NAVIGATE_TO_URL,\n            navigateToUrl: {\n                url: normalizedUrl,\n            },\n        });\n    }\n    /** @internal */\n    get __effects() {\n        return __classPrivateFieldGet(this, _UIClient_effects, \"f\");\n    }\n}\n_UIClient_effects = new WeakMap(), _UIClient_reconciler = new WeakMap(), _UIClient_webViewClient = new WeakMap(), _UIClient_postMessage = new WeakMap();\n", "import { makeUseChannelHook } from '../devvit/internals/blocks/useChannel.js';\nimport { makeUseFormHook } from '../devvit/internals/blocks/useForm.js';\nimport { makeUseIntervalHook } from '../devvit/internals/blocks/useInterval.js';\nimport { makeUseStateHook } from '../devvit/internals/blocks/useState.js';\nimport { makeCache } from '../devvit/internals/cache.js';\nimport { AssetsClient } from './AssetsClient/AssetsClient.js';\nimport { KeyValueStorage } from './key-value-storage/KeyValueStorage.js';\nimport { MediaClient } from './media/MediaClient.js';\nimport { RealtimeClient } from './realtime/RealtimeClient.js';\nimport { RedditAPIClient } from './reddit/RedditAPIClient.js';\nimport { RedisClient } from './redis/RedisClient.js';\nimport { SchedulerClient } from './scheduler/SchedulerClient.js';\nimport { SettingsClient } from './settings/SettingsClient.js';\nimport { UIClient } from './ui/UIClient.js';\nexport function makeAPIClients({ metadata, ui, hooks, reconciler, }) {\n    const kvStore = new KeyValueStorage(metadata);\n    const redis = new RedisClient(metadata);\n    const cache = makeCache(redis, reconciler ? reconciler.state : {});\n    const reddit = new RedditAPIClient(metadata);\n    const scheduler = new SchedulerClient(metadata);\n    const settings = new SettingsClient(metadata);\n    const uiClient = ui ? new UIClient(reconciler) : undefined;\n    const media = new MediaClient(metadata);\n    const assets = new AssetsClient();\n    const realtime = new RealtimeClient(metadata);\n    const useState = hooks && reconciler ? makeUseStateHook(reconciler) : undefined;\n    const useInterval = hooks && reconciler ? makeUseIntervalHook(reconciler) : undefined;\n    const useForm = hooks && reconciler ? makeUseFormHook(reconciler) : undefined;\n    const useChannel = hooks && reconciler ? makeUseChannelHook(reconciler) : undefined;\n    return {\n        kvStore,\n        redis,\n        reddit,\n        scheduler,\n        settings,\n        media,\n        assets,\n        realtime,\n        get useForm() {\n            return (useForm ??\n                (() => {\n                    throw new Error('useForm() is unavailable');\n                }));\n        },\n        get cache() {\n            return (cache ??\n                (() => {\n                    throw new Error('cache() is unavailable');\n                }));\n        },\n        get useState() {\n            return (useState ??\n                (() => {\n                    throw new Error('useState() is unavailable');\n                }));\n        },\n        get useInterval() {\n            return (useInterval ??\n                (() => {\n                    throw new Error('useInterval() is unavailable');\n                }));\n        },\n        get useChannel() {\n            return (useChannel ??\n                (() => {\n                    throw new Error('useChannel() is unavailable');\n                }));\n        },\n        get ui() {\n            if (!uiClient) {\n                throw new Error('ui client is not available');\n            }\n            return uiClient;\n        },\n    };\n}\n", "{\n    \"name\": \"@devvit/public-api\",\n    \"version\": \"0.12.12-dev\",\n    \"license\": \"BSD-3-Clause\",\n    \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"https://developers.reddit.com/\"\n    },\n    \"type\": \"module\",\n    \"exports\": {\n        \".\": \"./dist/index.js\",\n        \"./package.json\": \"./package.json\",\n        \"./*\": \"./dist/*\"\n    },\n    \"main\": \"./dist/index.js\",\n    \"files\": [\n        \"dist/**\"\n    ],\n    \"scripts\": {\n        \"build\": \"yarn build:icon-types && yarn build:semantic-colors && tsc && cp -af devvit.tsconfig.json dist/ && yarn build:min\",\n        \"build:icon-types\": \"make-icons src/types/icons.ts\",\n        \"build:min\": \"esbuild --bundle --sourcemap=linked --target=es2020 --format=esm  --metafile=dist/meta.min.json --outfile=dist/public-api.min.js --external:@devvit/protos --minify src/index.ts\",\n        \"build:semantic-colors\": \"node scripts/make-semantic-colors.js\",\n        \"clean\": \"rm -rf .turbo coverage dist src/devvit/internals/semanticColors.ts src/types/icons.ts || :\",\n        \"clobber\": \"yarn clean && rm -rf node_modules\",\n        \"dev:build\": \"chokidar ./src ../shared-types/dist --command 'yarn build' --ignore './src/types/icons.ts' --ignore './src/devvit/internals/semanticColors.ts'\",\n        \"lint\": \"redlint .\",\n        \"lint:fix\": \"yarn lint --fix\",\n        \"prepublishOnly\": \"publish-package-json\",\n        \"test\": \"yarn test:unit && yarn test:types && yarn test:size\",\n        \"test:size\": \"filesize\",\n        \"test:types\": \"tsc --noEmit\",\n        \"test:unit\": \"vitest run\",\n        \"test:unit-with-coverage\": \"vitest run --coverage\"\n    },\n    \"types\": \"./dist/index.d.ts\",\n    \"dependencies\": {\n        \"@devvit/metrics\": \"0.12.12-dev\",\n        \"@devvit/protos\": \"0.12.12-dev\",\n        \"@devvit/shared\": \"0.12.12-dev\",\n        \"@devvit/shared-types\": \"0.12.12-dev\",\n        \"base64-js\": \"1.5.1\",\n        \"clone-deep\": \"4.0.1\",\n        \"moderndash\": \"4.0.0\"\n    },\n    \"devDependencies\": {\n        \"@ampproject/filesize\": \"4.3.0\",\n        \"@devvit/repo-tools\": \"0.12.12-dev\",\n        \"@devvit/tsconfig\": \"0.12.12-dev\",\n        \"@reddit/faceplate-ui\": \"18.2.2\",\n        \"@reddit/rpl-styles\": \"1.0.2\",\n        \"@types/clone-deep\": \"4.0.1\",\n        \"@types/node\": \"20.14.12\",\n        \"chokidar-cli\": \"3.0.0\",\n        \"esbuild\": \"0.25.9\",\n        \"eslint\": \"9.11.1\",\n        \"typescript\": \"5.8.3\",\n        \"vitest\": \"4.0.15\"\n    },\n    \"publishConfig\": {\n        \"directory\": \"dist\"\n    },\n    \"filesize\": {\n        \"dist/public-api.min.js\": {\n            \"gzip\": \"65 KB\",\n            \"none\": \"225 KB\"\n        }\n    },\n    \"source\": \"./src/index.ts\"\n}\n", "import { Header } from '@devvit/shared-types/Header.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport pkg from '../../version.json' with { type: 'json' };\nexport function getContextFromMetadata(metadata, postId, commentId) {\n    const subredditId = metadata[Header.Subreddit]?.values[0];\n    assertNonNull(subredditId, 'subreddit is missing from Context');\n    const subredditName = metadata[Header.SubredditName]?.values[0];\n    // 'devvit-post-data' is a JSON string. If set in the header, parse it as\n    // DevvitPostData.\n    let postData;\n    const postDataJSON = metadata[Header.PostData]?.values[0];\n    if (postDataJSON) {\n        // Hack: assume DevvitPostData is JSON compatible for outdated iOS releases\n        //       around 2025.39.1.616587.\n        postData = JSON.parse(postDataJSON).developerData;\n    }\n    // devvit-app-user is only available in the remote runtime.\n    const appAccountId = metadata[Header.AppUser]?.values[0];\n    const appSlug = metadata[Header.App]?.values[0];\n    const appVersion = metadata[Header.Version]?.values[0];\n    const snoovatar = metadata[Header.UserSnoovatarUrl]?.values[0];\n    const username = metadata[Header.Username]?.values[0];\n    const userId = metadata[Header.User]?.values[0];\n    const debug = parseDebug(metadata);\n    return {\n        get appAccountId() {\n            assertNonNull(appAccountId, 'appAccountId is missing from Context');\n            return appAccountId;\n        },\n        subredditId,\n        subredditName,\n        userId,\n        postId,\n        postData,\n        commentId,\n        appName: appSlug,\n        appSlug,\n        appVersion,\n        snoovatar,\n        username,\n        debug,\n        metadata,\n        toJSON() {\n            return {\n                appAccountId,\n                appName: appSlug,\n                appSlug,\n                appVersion,\n                subredditId,\n                subredditName,\n                userId,\n                postId,\n                postData,\n                commentId,\n                snoovatar,\n                username,\n                debug,\n                metadata,\n            };\n        },\n    };\n}\n/** @internal */\nexport function parseDebug(meta) {\n    // Roughly aligns to initDevvitGlobal() except an empty devvit-debug doesn't\n    // enable all.\n    var _a;\n    // All known AppDebug keys.\n    const keyset = {\n        blocks: undefined,\n        emitSnapshots: undefined,\n        emitState: undefined,\n        realtime: undefined,\n        runtime: undefined,\n        surface: undefined,\n        useAsync: undefined,\n        payments: undefined,\n        bootstrap: undefined,\n        webView: undefined,\n    };\n    // {[key: Lowercase<AppDebug>]: AppDebug}\n    const lowerKeyToKey = {};\n    for (const key in keyset)\n        lowerKeyToKey[key.toLowerCase()] = key;\n    const debug = {};\n    // hack: gRPC-web header values don't split in compute. always join then split\n    //       for parity in both local and remote runtimes.\n    for (const kv of (meta[Header.Debug]?.values ?? []).join().split(',')) {\n        let [k, v] = kv.split('=');\n        if (!k)\n            continue;\n        k = k.trim();\n        v = v?.trim();\n        if (k.toLowerCase() in lowerKeyToKey)\n            k = lowerKeyToKey[k.toLowerCase()];\n        debug[_a = k] ?? (debug[_a] = v || `${true}`);\n    }\n    // @devvit/public-api v1.2.3 emitSnapshots=true foo=bar\n    if (meta[Header.Debug])\n        console.info(`[api] @devvit/public-api v${pkg.version} ${Object.entries(debug)\n            .map(([k, v]) => `${k}=${v}`)\n            .join(' ')}`);\n    return { ...debug, metadata: meta };\n}\n", "import { CustomPostDefinition, RenderPostResponse } from '@devvit/protos';\nimport { Devvit } from '../Devvit.js';\nimport { BlocksReconciler } from './blocks/BlocksReconciler.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nasync function renderPost(req, metadata) {\n    const customPostType = Devvit.customPostType;\n    if (!customPostType) {\n        throw new Error('Custom post type not registered');\n    }\n    const reconciler = new BlocksReconciler((_props, context) => customPostType.render(context), req.blocks, req.state, metadata, req.dimensions);\n    const blocksUI = await reconciler.render();\n    return RenderPostResponse.fromJSON({\n        state: reconciler.state,\n        blocks: {\n            ui: blocksUI,\n        },\n        effects: reconciler.getEffects(),\n    });\n}\nexport function registerCustomPost(config) {\n    config.provides(CustomPostDefinition);\n    extendDevvitPrototype('RenderPost', renderPost);\n}\n", "var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _BlocksReconciler_instances, _BlocksReconciler_reset, _BlocksReconciler_makeContextProps, _BlocksReconciler_flatten, _BlocksReconciler_rerenderAlreadyScheduled;\nimport { BlockRenderEventType, EffectType } from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { makeAPIClients } from '../../../apis/makeAPIClients.js';\nimport { getEffectsFromUIClient } from '../../../apis/ui/helpers/getEffectsFromUIClient.js';\nimport { Devvit } from '../../Devvit.js';\nimport { getContextFromMetadata } from '../context.js';\nimport { makeUniqueIdGenerator } from '../helpers/makeUniqueIdGenerator.js';\nimport { BlocksTransformer } from './BlocksTransformer.js';\nexport function assertNotString(reified) {\n    if (typeof reified === 'string') {\n        throw new Error('Root element cannot be a string');\n    }\n}\n// FIXME: don't build XML with a string concatenation :facepalm:\nconst toXML = (node) => {\n    let xml = '';\n    const attributes = node.props\n        ? Object.keys(node.props)\n            .map((key) => (key === 'onPress' ? '' : `${key}=\"${node.props[key]}\"`))\n            .join(' ')\n        : '';\n    xml += `<${node.type}${attributes ? ' ' + attributes : ''}>`;\n    for (const child of node.children) {\n        if (typeof child === 'string') {\n            xml += child;\n        }\n        else {\n            xml += toXML(child);\n        }\n    }\n    xml += `</${node.type}>`;\n    return xml;\n};\nfunction getIndentation(level) {\n    return '  '.repeat(level);\n}\n// FIXME: don't build XML with a string concatenation :facepalm:\nfunction indentXML(xml) {\n    let formatted = '';\n    let indentLevel = 0;\n    const xmlArr = xml.split(/>\\s*</);\n    for (let i = 0; i < xmlArr.length; i++) {\n        let node = xmlArr[i];\n        if (i === 0) {\n            node = node.trim();\n        }\n        if (i === xmlArr.length - 1) {\n            node = node.trim();\n        }\n        const isClosingTag = node.charAt(0) === '/';\n        if (isClosingTag) {\n            indentLevel--;\n        }\n        formatted += getIndentation(indentLevel);\n        if (i !== 0) {\n            formatted += '<';\n        }\n        formatted += node;\n        if (i !== xmlArr.length - 1) {\n            formatted += '>\\n';\n        }\n        if (!isClosingTag && node.indexOf('</') === -1 && node.charAt(node.length - 1) !== '/') {\n            indentLevel++;\n        }\n    }\n    return formatted;\n}\n/**\n * @experimental Do not use directly, for internal use only.\n * An instance of this class should be instantiated for each OnRender call.\n * This class is responsible for:\n *   - rendering JSX elements into Blocks.\n *   - managing state and hooks for each component.\n *   - drilling the shared clients into function components.\n */\nexport class BlocksReconciler {\n    emitEffect(_dedupeKey, effect) {\n        this.effects.push(effect);\n    }\n    constructor(component, event, state, metadata, dimensions) {\n        _BlocksReconciler_instances.add(this);\n        // hook management\n        this.renderState = {};\n        this.currentComponentKey = [];\n        this.currentHookIndex = 0;\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n        this.actions = new Map();\n        this.forms = new Map();\n        this.realtimeChannels = [];\n        this.realtimeUpdated = false;\n        this.pendingHooks = [];\n        this.isRendering = false;\n        this.transformer = new BlocksTransformer(() => this.assets);\n        this.effects = [];\n        _BlocksReconciler_rerenderAlreadyScheduled.set(this, false);\n        this.component = component;\n        this.event = event;\n        this.state = {\n            __renderState: {},\n            ...state,\n        };\n        this.metadata = metadata;\n        if (this.state.__realtimeChannels) {\n            this.realtimeChannels = this.state.__realtimeChannels;\n        }\n        const apiClients = makeAPIClients({\n            reconciler: this,\n            hooks: true,\n            ui: true,\n            metadata,\n        });\n        this.cache = apiClients.cache;\n        this.reddit = apiClients.reddit;\n        this.kvStore = apiClients.kvStore;\n        this.redis = apiClients.redis;\n        this.settings = apiClients.settings;\n        this.scheduler = apiClients.scheduler;\n        this.media = apiClients.media;\n        this.assets = apiClients.assets;\n        this.realtime = apiClients.realtime;\n        this.dimensions = dimensions;\n        this.ui = apiClients.ui;\n        this.hooks = {\n            useState: apiClients.useState,\n            useInterval: apiClients.useInterval,\n            useForm: apiClients.useForm,\n            useChannel: apiClients.useChannel,\n        };\n    }\n    async render() {\n        await this.reconcile();\n        this.isRendering = true;\n        const results = await this.buildBlocksUI();\n        this.isRendering = false;\n        return results;\n    }\n    makeUniqueActionID(id) {\n        let uniqueId = id;\n        let counter = 1;\n        while (this.actions.has(uniqueId)) {\n            uniqueId = `${id}.${counter++}`;\n        }\n        return uniqueId;\n    }\n    async reconcile() {\n        const ctx = __classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_makeContextProps).call(this);\n        const blockElement = {\n            type: this.component,\n            props: ctx,\n            children: [],\n        };\n        const reified = await this.processBlock(blockElement);\n        assertNotString(reified);\n        this.transformer.createBlocksElementOrThrow(reified);\n        if (this.isUserActionRender && this.blockRenderEventId) {\n            const handler = this.actions.get(this.blockRenderEventId);\n            if (handler) {\n                await handler(this.event.data);\n            }\n        }\n        for (const hook of this.pendingHooks) {\n            await hook();\n        }\n        this.buildNextState();\n        __classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_reset).call(this);\n    }\n    async buildBlocksUI() {\n        const ctx = __classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_makeContextProps).call(this);\n        const rootBlockElement = {\n            type: this.component,\n            props: ctx,\n            children: [],\n        };\n        const block = await this.renderElement(ctx, rootBlockElement);\n        return this.transformer.ensureRootBlock(block);\n    }\n    async renderElement(ctx, element) {\n        const reified = await this.processBlock(element);\n        assertNotString(reified);\n        if (Devvit.debug.emitSnapshots || ctx.debug.emitSnapshots)\n            console.debug(indentXML(toXML(reified)));\n        if (Devvit.debug.emitState || ctx.debug.emitState)\n            console.debug(JSON.stringify(this.state, undefined, 2));\n        return this.transformer.createBlocksElementOrThrow(reified);\n    }\n    async processProps(block) {\n        const props = block.props ?? {};\n        const actionHandlers = ['onPress', 'onMessage'];\n        for (const action of actionHandlers) {\n            if (action in props) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n                const handler = props[action];\n                const name = handler?.name;\n                const id = this.makeUniqueActionID(`${block.type}.${name ?? action}`);\n                this.actions.set(id, handler);\n                props[action] = id;\n            }\n        }\n    }\n    async processBlock(element, idGenerator = makeUniqueIdGenerator(), path = []) {\n        const blockElement = element;\n        // Intrinsic elements\n        if (typeof blockElement.type === 'string') {\n            const childrens = [];\n            /**\n             * Resist the urge to clean this up with flatMap. We need to await each processBlock _in order_.\n             *\n             * Number of times this has caused a major headache: 3\n             *\n             * Please increment the counter above if you had to revert this.\n             */\n            for (let i = 0; i < blockElement.children.length; i++) {\n                const child = blockElement.children[i];\n                if (child === undefined || child === null)\n                    continue;\n                childrens.push(await this.processBlock(child, idGenerator, [\n                    ...path,\n                    `${blockElement.type}.${i}`,\n                ]));\n            }\n            const children = childrens.flat();\n            const collapsedChildren = __classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_flatten).call(this, children);\n            await this.processProps(blockElement);\n            const reified = {\n                type: blockElement.type,\n                props: blockElement.props,\n                children: collapsedChildren,\n            };\n            return reified;\n        }\n        // Function components\n        if (typeof blockElement.type === 'function') {\n            // Create a unique component key to keep track of its state/hooks.\n            const componentKey = idGenerator(`${path.length ? path.join('.') : 'root'}.${blockElement.type.name.length ? blockElement.type.name : 'anonymous'}`);\n            this.currentComponentKey.push(componentKey);\n            if (!this.renderState[componentKey]) {\n                this.renderState[componentKey] = {};\n            }\n            const children = blockElement.children.flatMap((c) => c);\n            const props = {\n                ...__classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_makeContextProps).call(this),\n                ...blockElement.props,\n                children,\n            };\n            let result;\n            while (result === undefined) {\n                try {\n                    result = await blockElement.type(props, __classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_makeContextProps).call(this));\n                }\n                catch (promiseOrError) {\n                    // If the component throws a promise, wait for it to resolve and try again.\n                    // This is for components that have async logic in their hook callbacks.\n                    if (promiseOrError instanceof Promise) {\n                        result = await promiseOrError;\n                    }\n                    else {\n                        throw promiseOrError;\n                    }\n                }\n            }\n            // Ensure that the number of hooks are same from the previous render.\n            if (!this.isInitialRender) {\n                const previousState = this.getPreviousComponentState();\n                /**\n                 * Note: This relies on the magic of {0: \"a\", 1: \"b\"} => [\"a\", \"b\"] and back under many circumstances.\n                 * It is too magic, but as this component is complicated and deprecated, it is not worth fixing.\n                 *\n                 * In fact previousState is an array.  This is confusing.\n                 */\n                const prevHookCount = Object.keys(previousState).length;\n                if (prevHookCount !== this.currentHookIndex) {\n                    throw new Error('Invalid hook call. Hooks can only be called at the top-level of a function component. Make sure that you are not calling hooks inside loops, conditions, or nested functions.');\n                }\n            }\n            // Remember to always reset the current component key and hook index.\n            this.currentComponentKey.pop();\n            this.currentHookIndex = 0;\n            if (typeof result === 'object') {\n                return this.processBlock(result, idGenerator, [...path, blockElement.type.name]);\n            }\n        }\n        // Strings - return as is\n        if (typeof blockElement === 'string') {\n            return blockElement;\n        }\n        // Numbers - transform to string\n        if (typeof blockElement === 'number') {\n            return `${blockElement}`;\n        }\n        let children = [];\n        let pathPrefix = '';\n        if (Array.isArray(blockElement)) {\n            // Array of elements\n            children = blockElement;\n        }\n        else if (typeof blockElement.type === 'undefined' && blockElement.children) {\n            // Fragment\n            children = blockElement.children;\n            pathPrefix = 'fragmentChild.';\n        }\n        return {\n            type: '__fragment',\n            props: undefined,\n            children: await Promise.all(children.flatMap(async (child, i) => await this.processBlock(child, idGenerator, [...path, `${pathPrefix}${i}`]))),\n        };\n    }\n    getCurrentComponentKey() {\n        if (!this.currentComponentKey.at(-1)) {\n            throw new Error('Current component key is missing');\n        }\n        return this.currentComponentKey;\n    }\n    getCurrentComponentState() {\n        const componentKey = this.currentComponentKey.at(-1);\n        if (!componentKey) {\n            throw new Error('Current component key is missing');\n        }\n        return this.renderState[componentKey];\n    }\n    getPreviousComponentState() {\n        const componentKey = this.currentComponentKey.at(-1);\n        if (!componentKey) {\n            throw new Error('Current component key is missing');\n        }\n        if (!this.state.__renderState[componentKey]) {\n            this.state.__renderState[componentKey] = {};\n        }\n        return this.state.__renderState[componentKey];\n    }\n    get isInitialRender() {\n        if (!this.event) {\n            return false;\n        }\n        return this.event.type === BlockRenderEventType.RENDER_INITIAL;\n    }\n    get isUserActionRender() {\n        if (!this.event) {\n            return false;\n        }\n        return this.event.type === BlockRenderEventType.RENDER_USER_ACTION;\n    }\n    get isEffectRender() {\n        if (!this.event) {\n            return false;\n        }\n        return this.event.type === BlockRenderEventType.RENDER_EFFECT_EVENT;\n    }\n    get formSubmittedEvent() {\n        if (!this.event) {\n            return false;\n        }\n        return this.event.formSubmitted;\n    }\n    get blockRenderEventId() {\n        if (!this.event) {\n            return false;\n        }\n        return this.event.id;\n    }\n    get realtimeEvent() {\n        if (!this.event) {\n            return false;\n        }\n        const realtimeEvent = this.event.realtimeEvent;\n        if (!realtimeEvent?.event?.channel) {\n            return false;\n        }\n        return realtimeEvent;\n    }\n    runHook(hook) {\n        this.pendingHooks.push(hook);\n    }\n    rerenderIn(delayMs) {\n        if (__classPrivateFieldGet(this, _BlocksReconciler_rerenderAlreadyScheduled, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _BlocksReconciler_rerenderAlreadyScheduled, true, \"f\");\n        this.effects.push({\n            type: EffectType.EFFECT_RERENDER_UI,\n            rerenderUi: {\n                delaySeconds: delayMs / 1000,\n            },\n        });\n    }\n    addRealtimeChannel(channel) {\n        this.realtimeChannels.push(channel);\n        this.realtimeUpdated = true;\n    }\n    removeRealtimeChannel(channel) {\n        this.realtimeChannels = this.realtimeChannels.filter((c) => c !== channel);\n        this.realtimeUpdated = true;\n    }\n    get realtimeEffect() {\n        if (this.realtimeUpdated && this.realtimeChannels.length > 0) {\n            return [\n                {\n                    type: EffectType.EFFECT_REALTIME_SUB,\n                    realtimeSubscriptions: {\n                        subscriptionIds: this.realtimeChannels,\n                    },\n                },\n            ];\n        }\n        else {\n            return [];\n        }\n    }\n    getEffects() {\n        return [...getEffectsFromUIClient(this.ui), ...this.effects, ...this.realtimeEffect];\n    }\n    buildNextState() {\n        // Flatten the renderStates down to arrays to ensure `undefined` values are maintained through serialization.\n        // Input:\n        // {\"0\": \"one\", \"1\": undefined, \"2\": \"three\"} (length: 3)\n        // Before:\n        // {\"0\": \"one\", \"2\": \"three\"} (length: 2; fails consistency check, see line 251)\n        // After:\n        // [\"one\", undefined, \"three\"] (length: 3)\n        /**\n         * Note: This relies on the magic of {0: \"a\", 1: \"b\"} => [\"a\", \"b\"] and back under many circumstances.\n         * It is too magic, but as this component is complicated and deprecated, it is not worth fixing.\n         */\n        for (const key of Object.keys(this.renderState)) {\n            this.renderState[key] = Object.values(this.renderState[key]);\n        }\n        this.state = {\n            __postData: this.state.__postData,\n            __renderState: this.renderState,\n            __cache: this.state.__cache,\n            ...(this.realtimeChannels.length > 0 ? { __realtimeChannels: this.realtimeChannels } : {}),\n        };\n    }\n}\n_BlocksReconciler_rerenderAlreadyScheduled = new WeakMap(), _BlocksReconciler_instances = new WeakSet(), _BlocksReconciler_reset = function _BlocksReconciler_reset() {\n    this.actions.clear();\n    this.currentComponentKey = [];\n    this.currentHookIndex = 0;\n    this.pendingHooks = [];\n    this.realtimeChannels = [];\n    this.realtimeUpdated = false;\n}, _BlocksReconciler_makeContextProps = function _BlocksReconciler_makeContextProps() {\n    // skip typechecks for useForm which is templatized.\n    const props = {\n        ...getContextFromMetadata(this.metadata, this.state.__postData?.thingId),\n        reddit: this.reddit,\n        cache: this.cache,\n        kvStore: this.kvStore,\n        redis: this.redis,\n        settings: this.settings,\n        scheduler: this.scheduler,\n        media: this.media,\n        assets: this.assets,\n        realtime: this.realtime,\n        ui: this.ui,\n        dimensions: this.dimensions,\n        uiEnvironment: {\n            timezone: this.metadata[Header.Timezone]?.values[0],\n            locale: this.metadata[Header.Language]?.values[0],\n            dimensions: this.dimensions,\n        },\n        ...this.hooks,\n    };\n    props.debug.effects = this;\n    return props;\n}, _BlocksReconciler_flatten = function _BlocksReconciler_flatten(arr) {\n    const out = [];\n    for (const child of arr) {\n        if (typeof child === 'string') {\n            out.push(child);\n        }\n        else if (child.type === '__fragment') {\n            out.push(...__classPrivateFieldGet(this, _BlocksReconciler_instances, \"m\", _BlocksReconciler_flatten).call(this, child.children));\n        }\n        else {\n            out.push(child);\n        }\n    }\n    return out;\n};\n", "/** A simple helper to cast ui into the class instance to get the effects */\nexport function getEffectsFromUIClient(ui) {\n    return ui.__effects;\n}\n", "export function makeUniqueIdGenerator() {\n    const seenActionIds = new Set();\n    return (id) => {\n        let uniqueId = id;\n        let counter = 1;\n        while (seenActionIds.has(uniqueId)) {\n            uniqueId = `${id}.${counter++}`;\n        }\n        seenActionIds.add(uniqueId);\n        return uniqueId;\n    };\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _BlocksTransformer_assetsClient;\nimport { BlockActionType, BlockAvatarBackground, BlockAvatarFacing, BlockAvatarSize, BlockBorderWidth, BlockButtonAppearance, BlockButtonSize, BlockGap, BlockHorizontalAlignment, BlockIconSize, BlockImageResizeMode, BlockPadding, BlockRadius, BlockSpacerShape, BlockSpacerSize, BlockStackDirection, BlockTextOutline, BlockTextOverflow, BlockTextSize, BlockTextStyle, BlockTextWeight, BlockType, BlockVerticalAlignment, } from '@devvit/protos';\nimport { Devvit } from '../../Devvit.js';\nimport { getHexFromNamedHTMLColor, getHexFromRgbaColor, getHexFromRPLColor, isHexColor, isHslColor, isNamedHTMLColor, isRgbaColor, isRPLColor, } from '../helpers/color.js';\nimport { makeStackDimensionsDetails, ROOT_STACK_TRANSFORM_CONTEXT } from './transformContext.js';\nimport { makeBlockSizes } from './transformerUtils.js';\nconst DATA_PREFIX = 'data-';\nconst ACTION_HANDLERS = new Set(['onPress', 'onMessage']);\nconst ACTION_TYPES = new Map([\n    ['onPress', BlockActionType.ACTION_CLICK],\n    ['onMessage', BlockActionType.ACTION_WEBVIEW],\n]);\nexport class BlocksTransformer {\n    constructor(getAssetsClient = () => undefined) {\n        _BlocksTransformer_assetsClient.set(this, void 0);\n        __classPrivateFieldSet(this, _BlocksTransformer_assetsClient, getAssetsClient, \"f\");\n    }\n    createBlocksElementOrThrow({ type, props, children }) {\n        const block = this.createBlocksElement({ type, props, children }, ROOT_STACK_TRANSFORM_CONTEXT);\n        if (!block) {\n            throw new Error(`Could not create block of type ${type}`);\n        }\n        return block;\n    }\n    createBlocksElement({ type, props, children }, transformContext) {\n        switch (type) {\n            case 'blocks':\n                return this.makeRoot(props, ...children);\n            case 'hstack':\n                return this.makeHStack(props, transformContext, ...children);\n            case 'vstack':\n                return this.makeVStack(props, transformContext, ...children);\n            case 'zstack':\n                return this.makeZStack(props, transformContext, ...children);\n            case 'text':\n                return this.makeText(props, transformContext, ...children);\n            case 'button':\n                return this.makeButton(props, transformContext, ...children);\n            case 'image':\n                return this.makeImage(props, transformContext);\n            case 'spacer':\n                return this.makeSpacer(props, transformContext);\n            case 'icon':\n                return this.makeIcon(props, transformContext);\n            case 'avatar':\n                return this.makeAvatar(props, transformContext);\n            case 'webview':\n                return this.makeWebView(props, transformContext);\n            case '__fragment':\n                throw new Error(\"root fragment is not supported - use 'blocks' instead\");\n        }\n        return undefined;\n    }\n    makeRootHeight(height) {\n        switch (height) {\n            case 'regular':\n                return 320;\n            case 'tall':\n                return 512;\n        }\n    }\n    makeBlockPadding(padding) {\n        switch (padding) {\n            case 'none':\n                return BlockPadding.PADDING_NONE;\n            case 'xsmall':\n                return BlockPadding.PADDING_XSMALL;\n            case 'small':\n                return BlockPadding.PADDING_SMALL;\n            case 'medium':\n                return BlockPadding.PADDING_MEDIUM;\n            case 'large':\n                return BlockPadding.PADDING_LARGE;\n        }\n        return undefined;\n    }\n    makeBlockRadius(radius) {\n        switch (radius) {\n            case 'none':\n                return BlockRadius.RADIUS_NONE;\n            case 'small':\n                return BlockRadius.RADIUS_SMALL;\n            case 'medium':\n                return BlockRadius.RADIUS_MEDIUM;\n            case 'large':\n                return BlockRadius.RADIUS_LARGE;\n            case 'full':\n                return BlockRadius.RADIUS_FULL;\n        }\n        return undefined;\n    }\n    makeBlockGap(gap) {\n        switch (gap) {\n            case 'none':\n                return BlockGap.GAP_NONE;\n            case 'small':\n                return BlockGap.GAP_SMALL;\n            case 'medium':\n                return BlockGap.GAP_MEDIUM;\n            case 'large':\n                return BlockGap.GAP_LARGE;\n        }\n        return undefined;\n    }\n    makeBlockAlignment(alignment) {\n        if (alignment === undefined)\n            return undefined;\n        let vertical = undefined;\n        let horizontal = undefined;\n        if (alignment.includes('top')) {\n            vertical = BlockVerticalAlignment.ALIGN_TOP;\n        }\n        else if (alignment.includes('middle')) {\n            vertical = BlockVerticalAlignment.ALIGN_MIDDLE;\n        }\n        else if (alignment.includes('bottom')) {\n            vertical = BlockVerticalAlignment.ALIGN_BOTTOM;\n        }\n        if (alignment.includes('start')) {\n            horizontal = BlockHorizontalAlignment.ALIGN_START;\n        }\n        else if (alignment.includes('center')) {\n            horizontal = BlockHorizontalAlignment.ALIGN_CENTER;\n        }\n        else if (alignment.includes('end')) {\n            horizontal = BlockHorizontalAlignment.ALIGN_END;\n        }\n        if (vertical !== undefined || horizontal !== undefined) {\n            return {\n                vertical,\n                horizontal,\n            };\n        }\n        return undefined;\n    }\n    makeBlockBorder(borderWidth, color, lightColor, darkColor) {\n        if (!borderWidth && !color)\n            return undefined;\n        let width = undefined;\n        switch (borderWidth) {\n            case 'none':\n                width = BlockBorderWidth.BORDER_WIDTH_NONE;\n                break;\n            case 'thin':\n                width = BlockBorderWidth.BORDER_WIDTH_THIN;\n                break;\n            case 'thick':\n                width = BlockBorderWidth.BORDER_WIDTH_THICK;\n                break;\n            default:\n                // Default to a thin border when a color was set, but no borderWidth.\n                width = BlockBorderWidth.BORDER_WIDTH_THIN;\n                break;\n        }\n        // Default to #00000019 when a border was set, but no color.\n        const borderColor = color ?? 'neutral-border-weak';\n        const colors = this.getThemedColors(borderColor, lightColor, darkColor);\n        return {\n            width,\n            color: colors?.light,\n            colors,\n        };\n    }\n    makeBlockTextSize(textSize) {\n        switch (textSize) {\n            case 'xsmall':\n                return BlockTextSize.TEXT_SIZE_XSMALL;\n            case 'small':\n                return BlockTextSize.TEXT_SIZE_SMALL;\n            case 'medium':\n                return BlockTextSize.TEXT_SIZE_MEDIUM;\n            case 'large':\n                return BlockTextSize.TEXT_SIZE_LARGE;\n            case 'xlarge':\n                return BlockTextSize.TEXT_SIZE_XLARGE;\n            case 'xxlarge':\n                return BlockTextSize.TEXT_SIZE_XXLARGE;\n        }\n        return undefined;\n    }\n    makeBlockTextStyle(style) {\n        switch (style) {\n            case 'body':\n                return BlockTextStyle.TEXT_STYLE_BODY;\n            case 'metadata':\n                return BlockTextStyle.TEXT_STYLE_METADATA;\n            case 'heading':\n                return BlockTextStyle.TEXT_STYLE_HEADING;\n        }\n        return undefined;\n    }\n    makeBlockTextOutline(outline) {\n        switch (outline) {\n            case 'none':\n                return BlockTextOutline.TEXT_OUTLINE_NONE;\n            case 'thin':\n                return BlockTextOutline.TEXT_OUTLINE_THIN;\n            case 'thick':\n                return BlockTextOutline.TEXT_OUTLINE_THICK;\n        }\n        return undefined;\n    }\n    makeBlockTextWeight(weight) {\n        switch (weight) {\n            case 'regular':\n                return BlockTextWeight.TEXT_WEIGHT_REGULAR;\n            case 'bold':\n                return BlockTextWeight.TEXT_WEIGHT_BOLD;\n        }\n        return undefined;\n    }\n    makeBlockTextOverflow(overflow) {\n        switch (overflow) {\n            case 'clip':\n                return BlockTextOverflow.TEXT_OVERFLOW_CLIP;\n            case 'ellipsis':\n                return BlockTextOverflow.TEXT_OVERFLOW_ELLIPSE;\n        }\n        return BlockTextOverflow.TEXT_OVERFLOW_ELLIPSE;\n    }\n    makeBlockButtonAppearance(appearance) {\n        switch (appearance) {\n            case 'secondary':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_SECONDARY;\n            case 'primary':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_PRIMARY;\n            case 'plain':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_PLAIN;\n            case 'bordered':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_BORDERED;\n            case 'media':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_MEDIA;\n            case 'destructive':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_DESTRUCTIVE;\n            case 'caution':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_CAUTION;\n            case 'success':\n                return BlockButtonAppearance.BUTTON_APPEARANCE_SUCCESS;\n        }\n        return undefined;\n    }\n    makeBlockButtonSize(size) {\n        switch (size) {\n            case 'small':\n                return BlockButtonSize.BUTTON_SIZE_SMALL;\n            case 'medium':\n                return BlockButtonSize.BUTTON_SIZE_MEDIUM;\n            case 'large':\n                return BlockButtonSize.BUTTON_SIZE_LARGE;\n        }\n        return undefined;\n    }\n    makeBlockImageResizeMode(resize) {\n        switch (resize) {\n            case 'none':\n                return BlockImageResizeMode.IMAGE_RESIZE_NONE;\n            case 'fit':\n                return BlockImageResizeMode.IMAGE_RESIZE_FIT;\n            case 'fill':\n                return BlockImageResizeMode.IMAGE_RESIZE_FILL;\n            case 'cover':\n                return BlockImageResizeMode.IMAGE_RESIZE_COVER;\n            case 'scale-down':\n                return BlockImageResizeMode.IMAGE_RESIZE_SCALE_DOWN;\n        }\n        return undefined;\n    }\n    makeBlockSpacerSize(size) {\n        switch (size) {\n            case 'xsmall':\n                return BlockSpacerSize.SPACER_XSMALL;\n            case 'small':\n                return BlockSpacerSize.SPACER_SMALL;\n            case 'medium':\n                return BlockSpacerSize.SPACER_MEDIUM;\n            case 'large':\n                return BlockSpacerSize.SPACER_LARGE;\n        }\n        return undefined;\n    }\n    makeBlockSpacerShape(size) {\n        switch (size) {\n            case 'invisible':\n                return BlockSpacerShape.SPACER_INVISIBLE;\n            case 'thin':\n                return BlockSpacerShape.SPACER_THIN;\n            case 'square':\n                return BlockSpacerShape.SPACER_SQUARE;\n        }\n        return undefined;\n    }\n    makeBlockIconSize(size) {\n        switch (size) {\n            case 'xsmall':\n                return BlockIconSize.ICON_SIZE_XSMALL;\n            case 'small':\n                return BlockIconSize.ICON_SIZE_SMALL;\n            case 'medium':\n                return BlockIconSize.ICON_SIZE_MEDIUM;\n            case 'large':\n                return BlockIconSize.ICON_SIZE_LARGE;\n        }\n        return undefined;\n    }\n    makeBlockAvatarSize(size) {\n        switch (size) {\n            case 'xxsmall':\n                return BlockAvatarSize.AVATAR_SIZE_XXSMALL;\n            case 'xsmall':\n                return BlockAvatarSize.AVATAR_SIZE_XSMALL;\n            case 'small':\n                return BlockAvatarSize.AVATAR_SIZE_SMALL;\n            case 'medium':\n                return BlockAvatarSize.AVATAR_SIZE_MEDIUM;\n            case 'large':\n                return BlockAvatarSize.AVATAR_SIZE_LARGE;\n            case 'xlarge':\n                return BlockAvatarSize.AVATAR_SIZE_XXLARGE;\n            case 'xxlarge':\n                return BlockAvatarSize.AVATAR_SIZE_XXLARGE;\n            case 'xxxlarge':\n                return BlockAvatarSize.AVATAR_SIZE_XXXLARGE;\n        }\n        return undefined;\n    }\n    makeBlockAvatarFacing(facing) {\n        switch (facing) {\n            case 'left':\n                return BlockAvatarFacing.AVATAR_FACING_LEFT;\n            case 'right':\n                return BlockAvatarFacing.AVATAR_FACING_RIGHT;\n        }\n        return undefined;\n    }\n    makeBlockAvatarBackground(background) {\n        switch (background) {\n            case 'dark':\n                return BlockAvatarBackground.AVATAR_BG_DARK;\n            case 'light':\n                return BlockAvatarBackground.AVATAR_BG_LIGHT;\n        }\n        return undefined;\n    }\n    getDataSet(props) {\n        return Object.keys(props)\n            .filter((key) => key.startsWith(DATA_PREFIX))\n            .reduce((p, c) => {\n            p[c.substring(DATA_PREFIX.length)] = props[c];\n            return p;\n        }, {});\n    }\n    makeActions(_type, props) {\n        const actions = [];\n        const dataSet = this.getDataSet(props);\n        ACTION_HANDLERS.forEach((action) => {\n            if (action in props) {\n                const id = props[action];\n                actions.push({\n                    type: ACTION_TYPES.get(action) ?? BlockActionType.UNRECOGNIZED,\n                    id: id.toString(),\n                    data: dataSet,\n                });\n            }\n        });\n        return actions;\n    }\n    blockColorToHex(color, theme = 'light') {\n        if (!color)\n            return undefined;\n        color = color.toLowerCase();\n        if (isHexColor(color)) {\n            return color;\n        }\n        else if (isRPLColor(color)) {\n            return getHexFromRPLColor(color, theme);\n        }\n        else if (isNamedHTMLColor(color)) {\n            return getHexFromNamedHTMLColor(color);\n        }\n        else if (isRgbaColor(color)) {\n            return getHexFromRgbaColor(color);\n        }\n        else if (isHslColor(color)) {\n            return color;\n        }\n        // Color could not be parsed, return red as fallback.\n        console.warn(`Could not parse color: ${color}.`);\n        return getHexFromNamedHTMLColor('red');\n    }\n    childrenToBlocks(children, transformContext) {\n        return children.flatMap((child) => (typeof child !== 'string'\n            ? this.createBlocksElement(child, transformContext)\n            : undefined) ?? []);\n    }\n    getThemedColors(color, light, dark) {\n        let lightColor = this.blockColorToHex(light, 'light');\n        let darkColor = this.blockColorToHex(dark, 'dark');\n        const tokens = [];\n        // don't spend time parsing color if light/dark are already provided\n        if (color && (!lightColor || !darkColor)) {\n            // split color string, preserving color functions with spaces, such as rgb(r, g, b)\n            // eslint-disable-next-line security/detect-unsafe-regex\n            const matches = Array.from(color?.matchAll(/[\\w#-]+(?:\\([\\w\\t ,.#-]+\\))?/g) ?? []);\n            tokens.push(...matches.map((group) => group[0]));\n        }\n        if (!lightColor) {\n            lightColor = this.blockColorToHex(tokens?.at(0), 'light');\n        }\n        if (!darkColor) {\n            // if only one color was provided, use it for both light and dark colors\n            darkColor = this.blockColorToHex(tokens?.at(1) ?? tokens?.at(0), 'dark');\n        }\n        return lightColor || darkColor\n            ? {\n                light: lightColor,\n                dark: darkColor,\n            }\n            : undefined;\n    }\n    parsePixels(input) {\n        if (typeof input === 'string') {\n            return Number(input.slice(0, -2));\n        }\n        return input;\n    }\n    resolveAssetUrl(url, options) {\n        // try and resolve the URL but allow the client to decide if unknown URLs are allowed\n        return __classPrivateFieldGet(this, _BlocksTransformer_assetsClient, \"f\").call(this)?.getURL(url, options) ?? url;\n    }\n    childrenToString(children) {\n        return children.map((c) => c.toString()).join('');\n    }\n    makeRoot(props, ...children) {\n        return this.wrapRoot(props, this.childrenToBlocks(children, ROOT_STACK_TRANSFORM_CONTEXT));\n    }\n    wrapRoot(props, children) {\n        return this.makeBlock(BlockType.BLOCK_ROOT, {}, {}, {\n            rootConfig: {\n                children: children,\n                height: this.makeRootHeight(Devvit.customPostType?.height ??\n                    props?.height ??\n                    'regular'),\n            },\n        });\n    }\n    makeStackBlock(direction, props, transformContext, children) {\n        const backgroundColors = this.getThemedColors(props?.backgroundColor, props?.lightBackgroundColor, props?.darkBackgroundColor);\n        const alignment = this.makeBlockAlignment(props?.alignment);\n        const blockSizes = makeBlockSizes(props, transformContext);\n        const blockDimensionsDetails = makeStackDimensionsDetails(props, transformContext.stackParentLayout, blockSizes);\n        return this.makeBlock(BlockType.BLOCK_STACK, props, transformContext, {\n            stackConfig: {\n                alignment,\n                backgroundColor: backgroundColors?.light,\n                backgroundColors,\n                border: this.makeBlockBorder(props?.border, props?.borderColor, props?.lightBorderColor, props?.darkBorderColor),\n                children: this.childrenToBlocks(children, {\n                    stackParentLayout: { ...blockDimensionsDetails, direction, alignment },\n                }),\n                cornerRadius: this.makeBlockRadius(props?.cornerRadius),\n                direction: direction,\n                gap: this.makeBlockGap(props?.gap),\n                padding: this.makeBlockPadding(props?.padding),\n                reverse: props?.reverse,\n            },\n        });\n    }\n    makeHStack(props, transformContext, ...children) {\n        return this.makeStackBlock(BlockStackDirection.STACK_HORIZONTAL, props, transformContext, children);\n    }\n    makeVStack(props, transformContext, ...children) {\n        return this.makeStackBlock(BlockStackDirection.STACK_VERTICAL, props, transformContext, children);\n    }\n    makeZStack(props, transformContext, ...children) {\n        return this.makeStackBlock(BlockStackDirection.STACK_DEPTH, props, transformContext, children);\n    }\n    makeText(props, transformContext, ...children) {\n        const colors = this.getThemedColors(props?.color, props?.lightColor, props?.darkColor);\n        return this.makeBlock(BlockType.BLOCK_TEXT, props, transformContext, {\n            textConfig: {\n                alignment: this.makeBlockAlignment(props?.alignment),\n                color: colors?.light,\n                colors,\n                outline: this.makeBlockTextOutline(props?.outline),\n                size: this.makeBlockTextSize(props?.size),\n                style: this.makeBlockTextStyle(props?.style),\n                text: this.childrenToString(children),\n                weight: this.makeBlockTextWeight(props?.weight),\n                selectable: props?.selectable,\n                wrap: props?.wrap,\n                overflow: this.makeBlockTextOverflow(props?.overflow),\n            },\n        });\n    }\n    makeButton(props, transformContext, ...children) {\n        const textColors = this.getThemedColors(props?.textColor, props?.lightTextColor, props?.darkTextColor);\n        return this.makeBlock(BlockType.BLOCK_BUTTON, props, transformContext, {\n            buttonConfig: {\n                buttonAppearance: this.makeBlockButtonAppearance(props?.appearance),\n                // not available in all platforms yet\n                // backgroundColor: props?.backgroundColor,\n                icon: props?.icon,\n                buttonSize: this.makeBlockButtonSize(props?.size),\n                text: this.childrenToString(children),\n                textColor: textColors?.light,\n                textColors,\n                disabled: props?.disabled,\n            },\n        });\n    }\n    makeImage(props, transformContext) {\n        return (props &&\n            this.makeBlock(BlockType.BLOCK_IMAGE, props, transformContext, {\n                imageConfig: {\n                    description: props?.description,\n                    resizeMode: this.makeBlockImageResizeMode(props.resizeMode),\n                    url: this.resolveAssetUrl(props.url),\n                    width: this.parsePixels(props.imageWidth),\n                    height: this.parsePixels(props.imageHeight),\n                },\n            }));\n    }\n    makeSpacer(props, transformContext) {\n        return this.makeBlock(BlockType.BLOCK_SPACER, props, transformContext, {\n            spacerConfig: {\n                size: this.makeBlockSpacerSize(props?.size),\n                shape: this.makeBlockSpacerShape(props?.shape),\n            },\n        });\n    }\n    makeIcon(props, transformContext) {\n        const colors = this.getThemedColors(props?.color, props?.lightColor, props?.darkColor);\n        return (props &&\n            this.makeBlock(BlockType.BLOCK_ICON, props, transformContext, {\n                iconConfig: {\n                    icon: props.name,\n                    color: colors?.light,\n                    colors,\n                    size: this.makeBlockIconSize(props.size),\n                },\n            }));\n    }\n    makeAvatar(props, transformContext) {\n        return (props &&\n            this.makeBlock(BlockType.BLOCK_AVATAR, props, transformContext, {\n                avatarConfig: {\n                    thingId: props.thingId,\n                    size: this.makeBlockAvatarSize(props.size),\n                    facing: this.makeBlockAvatarFacing(props.facing),\n                    background: this.makeBlockAvatarBackground(props.background),\n                },\n            }));\n    }\n    makeWebView(props, transformContext) {\n        return (props &&\n            this.makeBlock(BlockType.BLOCK_WEBVIEW, props, transformContext, {\n                webviewConfig: {\n                    url: this.resolveAssetUrl(props.url, { webView: true }),\n                },\n            }));\n    }\n    makeBlock(type, props, transformContext, config) {\n        return {\n            type,\n            sizes: makeBlockSizes(props, transformContext),\n            config: config,\n            actions: (props && this.makeActions(type, props)) ?? [],\n            id: props?.id,\n            key: props?.key,\n        };\n    }\n    ensureRootBlock(block) {\n        let root;\n        if (block.type === BlockType.BLOCK_ROOT) {\n            if (block.config?.rootConfig && Devvit.customPostType?.height) {\n                block.config.rootConfig.height = this.makeRootHeight(Devvit.customPostType?.height);\n            }\n            root = block;\n        }\n        else {\n            root = this.wrapRoot(undefined, [block]);\n        }\n        if (!root) {\n            throw new Error('Could not create root block');\n        }\n        return root;\n    }\n}\n_BlocksTransformer_assetsClient = new WeakMap();\n", "export const semanticColors = {\n    \"alienblue-100\": \"#DCE2FB\",\n    \"alienblue-200\": \"#B8C5FC\",\n    \"alienblue-25\": \"#F7F8FD\",\n    \"alienblue-300\": \"#90A9FD\",\n    \"alienblue-400\": \"#648EFC\",\n    \"alienblue-50\": \"#EEF0FB\",\n    \"alienblue-500\": \"#1870F4\",\n    \"alienblue-600\": \"#115BCA\",\n    \"alienblue-700\": \"#0A449B\",\n    \"alienblue-75\": \"#E6E9FB\",\n    \"alienblue-800\": \"#0A2F6C\",\n    \"alienblue-900\": \"#0A1A3F\",\n    \"alienblue-950\": \"#07102B\",\n    \"berrypurple-100\": \"#F3DAFB\",\n    \"berrypurple-200\": \"#EAB3FD\",\n    \"berrypurple-25\": \"#FBF6FD\",\n    \"berrypurple-300\": \"#DE8BFF\",\n    \"berrypurple-400\": \"#CF5FFF\",\n    \"berrypurple-50\": \"#F8EDFC\",\n    \"berrypurple-500\": \"#BC0EFF\",\n    \"berrypurple-600\": \"#9B00D4\",\n    \"berrypurple-700\": \"#7600A3\",\n    \"berrypurple-75\": \"#F6E4FB\",\n    \"berrypurple-800\": \"#520472\",\n    \"berrypurple-900\": \"#300643\",\n    \"berrypurple-950\": \"#20042A\",\n    \"black\": \"#000000\",\n    \"black-opacity-0\": \"#00000000\",\n    \"black-opacity-10\": \"#00000019\",\n    \"black-opacity-15\": \"#00000026\",\n    \"black-opacity-20\": \"#00000033\",\n    \"black-opacity-25\": \"#0000003F\",\n    \"black-opacity-33\": \"#00000054\",\n    \"black-opacity-5\": \"#0000000C\",\n    \"black-opacity-50\": \"#0000007F\",\n    \"black-opacity-60\": \"#00000099\",\n    \"black-opacity-67\": \"#000000AA\",\n    \"black-opacity-80\": \"#000000CC\",\n    \"black-opacity-90\": \"#000000E5\",\n    \"brand-secondary-bananayellow_base\": \"#FFBF0B\",\n    \"brand-secondary-bananayellow_highlight\": \"#FFDE55\",\n    \"brand-secondary-bananayellow_shade\": \"#F27300\",\n    \"brand-secondary-bananayellow_tint\": \"#FFF3C0\",\n    \"brand-secondary-guavapink_base\": \"#FF5FC2\",\n    \"brand-secondary-guavapink_highlight\": \"#FF9FDF\",\n    \"brand-secondary-guavapink_shade\": \"#D3168B\",\n    \"brand-secondary-guavapink_tint\": \"#FFE6F9\",\n    \"brand-secondary-juniperblue_base\": \"#00E2B7\",\n    \"brand-secondary-juniperblue_highlight\": \"#92FFEA\",\n    \"brand-secondary-juniperblue_shade\": \"#08A59D\",\n    \"brand-secondary-juniperblue_tint\": \"#E6FFFA\",\n    \"brand-secondary-limegreen_base\": \"#AEEF0F\",\n    \"brand-secondary-limegreen_highlight\": \"#E4FF45\",\n    \"brand-secondary-limegreen_shade\": \"#65B200\",\n    \"brand-secondary-limegreen_tint\": \"#F0FFB3\",\n    \"brand-secondary-orangered_base\": \"#FF4500\",\n    \"brand-secondary-orangered_highlight\": \"#FF8864\",\n    \"brand-secondary-orangered_shade\": \"#D82400\",\n    \"brand-secondary-orangered_tint\": \"#FFDAD7\",\n    \"brown-100\": \"#F1DFCF\",\n    \"brown-200\": \"#E9BE95\",\n    \"brown-25\": \"#FBF7F4\",\n    \"brown-300\": \"#DC9D5D\",\n    \"brown-400\": \"#BA854E\",\n    \"brown-50\": \"#F7EFE9\",\n    \"brown-500\": \"#9A6D3F\",\n    \"brown-600\": \"#7B5631\",\n    \"brown-700\": \"#5D4023\",\n    \"brown-75\": \"#F4E7DC\",\n    \"brown-800\": \"#3F2C19\",\n    \"brown-900\": \"#221A11\",\n    \"brown-950\": \"#15100A\",\n    \"coolgray-100\": \"#DBE4E9\",\n    \"coolgray-150\": \"#C9D7DE\",\n    \"coolgray-200\": \"#B7CAD4\",\n    \"coolgray-25\": \"#F6F8F9\",\n    \"coolgray-250\": \"#A4BDCA\",\n    \"coolgray-300\": \"#97AFBC\",\n    \"coolgray-350\": \"#8BA2AD\",\n    \"coolgray-400\": \"#7F949F\",\n    \"coolgray-450\": \"#748791\",\n    \"coolgray-50\": \"#EEF1F3\",\n    \"coolgray-500\": \"#667780\",\n    \"coolgray-525\": \"#576F76\",\n    \"coolgray-550\": \"#5C6C74\",\n    \"coolgray-600\": \"#536168\",\n    \"coolgray-650\": \"#48545B\",\n    \"coolgray-700\": \"#3D494E\",\n    \"coolgray-75\": \"#E5EBEE\",\n    \"coolgray-750\": \"#333D42\",\n    \"coolgray-800\": \"#2A3236\",\n    \"coolgray-850\": \"#21272A\",\n    \"coolgray-900\": \"#181C1F\",\n    \"coolgray-950\": \"#0E1113\",\n    \"global-black\": {\n        \"light\": \"#000000\",\n        \"dark\": \"#000000\"\n    },\n    \"global-brand-orangered\": {\n        \"light\": \"#FF4500\",\n        \"dark\": \"#FF4500\"\n    },\n    \"global-white\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"kiwigreen-100\": \"#A8F5A0\",\n    \"kiwigreen-200\": \"#58E15B\",\n    \"kiwigreen-25\": \"#EBFDE7\",\n    \"kiwigreen-300\": \"#00C61C\",\n    \"kiwigreen-400\": \"#01A816\",\n    \"kiwigreen-50\": \"#DDF8D7\",\n    \"kiwigreen-500\": \"#008A10\",\n    \"kiwigreen-600\": \"#016E0B\",\n    \"kiwigreen-700\": \"#005306\",\n    \"kiwigreen-75\": \"#CAF5C2\",\n    \"kiwigreen-800\": \"#033902\",\n    \"kiwigreen-900\": \"#0D2005\",\n    \"kiwigreen-950\": \"#081404\",\n    \"lightblue-100\": \"#CAE7FB\",\n    \"lightblue-200\": \"#87D0FD\",\n    \"lightblue-25\": \"#F3F9FD\",\n    \"lightblue-300\": \"#02B9FB\",\n    \"lightblue-400\": \"#029DD5\",\n    \"lightblue-50\": \"#E6F3FC\",\n    \"lightblue-500\": \"#007FAE\",\n    \"lightblue-600\": \"#01668D\",\n    \"lightblue-700\": \"#014D6B\",\n    \"lightblue-75\": \"#D9EDFB\",\n    \"lightblue-800\": \"#03354B\",\n    \"lightblue-900\": \"#051E2B\",\n    \"lightblue-950\": \"#04131A\",\n    \"lime-100\": \"#B7F28E\",\n    \"lime-200\": \"#90DA58\",\n    \"lime-25\": \"#EEFDDC\",\n    \"lime-300\": \"#6DBF01\",\n    \"lime-400\": \"#5BA200\",\n    \"lime-50\": \"#E0F8C8\",\n    \"lime-500\": \"#4A8500\",\n    \"lime-600\": \"#3A6A00\",\n    \"lime-700\": \"#2A5000\",\n    \"lime-75\": \"#CEF5AD\",\n    \"lime-800\": \"#1E3702\",\n    \"lime-900\": \"#151E05\",\n    \"lime-950\": \"#0D1304\",\n    \"mintgreen-100\": \"#9BF5D9\",\n    \"mintgreen-200\": \"#00E2B7\",\n    \"mintgreen-25\": \"#E7FDF5\",\n    \"mintgreen-300\": \"#00C29D\",\n    \"mintgreen-400\": \"#01A484\",\n    \"mintgreen-50\": \"#D7F8EC\",\n    \"mintgreen-500\": \"#01876D\",\n    \"mintgreen-600\": \"#006C56\",\n    \"mintgreen-700\": \"#015140\",\n    \"mintgreen-75\": \"#C0F5E3\",\n    \"mintgreen-800\": \"#00382B\",\n    \"mintgreen-900\": \"#032019\",\n    \"mintgreen-950\": \"#03140F\",\n    \"orangered-100\": \"#FCDBCF\",\n    \"orangered-200\": \"#FDB498\",\n    \"orangered-25\": \"#FDF6F4\",\n    \"orangered-300\": \"#FF895D\",\n    \"orangered-400\": \"#FF4500\",\n    \"orangered-50\": \"#FCEEE8\",\n    \"orangered-500\": \"#D93900\",\n    \"orangered-600\": \"#AE2C00\",\n    \"orangered-700\": \"#842100\",\n    \"orangered-75\": \"#FBE5DC\",\n    \"orangered-800\": \"#591B02\",\n    \"orangered-900\": \"#2F1405\",\n    \"orangered-950\": \"#1C0D04\",\n    \"periwinkle-100\": \"#E6DFFB\",\n    \"periwinkle-200\": \"#CDBEFD\",\n    \"periwinkle-25\": \"#F9F7FD\",\n    \"periwinkle-300\": \"#B29FFF\",\n    \"periwinkle-400\": \"#9580FF\",\n    \"periwinkle-50\": \"#F2EFFC\",\n    \"periwinkle-500\": \"#6A5CFF\",\n    \"periwinkle-600\": \"#523DFF\",\n    \"periwinkle-700\": \"#4001EA\",\n    \"periwinkle-75\": \"#ECE7FB\",\n    \"periwinkle-800\": \"#250AA6\",\n    \"periwinkle-900\": \"#160E5B\",\n    \"periwinkle-950\": \"#0C083F\",\n    \"poopbrown-100\": \"#FEEEDD\",\n    \"poopbrown-200\": \"#F6DDC3\",\n    \"poopbrown-300\": \"#EECCAA\",\n    \"poopbrown-400\": \"#CAA075\",\n    \"poopbrown-50\": \"#FEF7EE\",\n    \"poopbrown-500\": \"#9A6D3F\",\n    \"poopbrown-600\": \"#6E4924\",\n    \"poopbrown-700\": \"#54371A\",\n    \"poopbrown-800\": \"#3B2510\",\n    \"poopbrown-900\": \"#29190A\",\n    \"poopbrown-950\": \"#110B04\",\n    \"puregray-100\": \"#F2F2F2\",\n    \"puregray-150\": \"#EBEBEB\",\n    \"puregray-200\": \"#E4E4E4\",\n    \"puregray-250\": \"#DDDDDD\",\n    \"puregray-300\": \"#D6D6D6\",\n    \"puregray-350\": \"#C3C3C3\",\n    \"puregray-400\": \"#ACACAC\",\n    \"puregray-450\": \"#919191\",\n    \"puregray-50\": \"#F8F8F8\",\n    \"puregray-500\": \"#767676\",\n    \"puregray-550\": \"#5C5C5C\",\n    \"puregray-600\": \"#434343\",\n    \"puregray-650\": \"#393939\",\n    \"puregray-700\": \"#303030\",\n    \"puregray-750\": \"#272727\",\n    \"puregray-800\": \"#1E1E1E\",\n    \"puregray-850\": \"#181818\",\n    \"puregray-900\": \"#131313\",\n    \"puregray-950\": \"#080808\",\n    \"red-100\": \"#FBDBD4\",\n    \"red-200\": \"#FDB3A4\",\n    \"red-25\": \"#FDF6F5\",\n    \"red-300\": \"#FF8773\",\n    \"red-400\": \"#FF4F40\",\n    \"red-50\": \"#FCEEEA\",\n    \"red-500\": \"#EB001F\",\n    \"red-600\": \"#BC0117\",\n    \"red-700\": \"#90000F\",\n    \"red-75\": \"#FBE4DF\",\n    \"red-800\": \"#650405\",\n    \"red-900\": \"#340F05\",\n    \"red-950\": \"#1F0B04\",\n    \"sakurapink-100\": \"#FBD9EB\",\n    \"sakurapink-200\": \"#FDAEDA\",\n    \"sakurapink-25\": \"#FDF6F9\",\n    \"sakurapink-300\": \"#FF7ECA\",\n    \"sakurapink-400\": \"#FF38BB\",\n    \"sakurapink-50\": \"#FCEDF4\",\n    \"sakurapink-500\": \"#DE019F\",\n    \"sakurapink-600\": \"#B2007F\",\n    \"sakurapink-700\": \"#880060\",\n    \"sakurapink-75\": \"#FBE3EF\",\n    \"sakurapink-800\": \"#5F0443\",\n    \"sakurapink-900\": \"#380626\",\n    \"sakurapink-950\": \"#250419\",\n    \"transparent\": \"transparent\",\n    \"white\": \"#ffffff\",\n    \"white-opacity-0\": \"#FFFFFF00\",\n    \"white-opacity-10\": \"#FFFFFF19\",\n    \"white-opacity-15\": \"#FFFFFF26\",\n    \"white-opacity-20\": \"#FFFFFF33\",\n    \"white-opacity-25\": \"#FFFFFF3F\",\n    \"white-opacity-5\": \"#FFFFFF0C\",\n    \"white-opacity-50\": \"#FFFFFF7F\",\n    \"yellow-100\": \"#FFE284\",\n    \"yellow-200\": \"#FFBF0B\",\n    \"yellow-25\": \"#FFF9E0\",\n    \"yellow-300\": \"#D8A100\",\n    \"yellow-400\": \"#B78800\",\n    \"yellow-50\": \"#FFF3C0\",\n    \"yellow-500\": \"#977000\",\n    \"yellow-600\": \"#785800\",\n    \"yellow-700\": \"#5B4200\",\n    \"yellow-75\": \"#FFEAA2\",\n    \"yellow-800\": \"#3F2D00\",\n    \"yellow-900\": \"#231A03\",\n    \"yellow-950\": \"#161003\",\n    \"yelloworange-100\": \"#FCDCC8\",\n    \"yelloworange-200\": \"#FDB586\",\n    \"yelloworange-25\": \"#FDF7F3\",\n    \"yelloworange-300\": \"#FF8A35\",\n    \"yelloworange-400\": \"#E46C00\",\n    \"yelloworange-50\": \"#FCEEE6\",\n    \"yelloworange-500\": \"#BD5800\",\n    \"yelloworange-600\": \"#974500\",\n    \"yelloworange-700\": \"#733300\",\n    \"yelloworange-75\": \"#FBE5D7\",\n    \"yelloworange-800\": \"#4E2402\",\n    \"yelloworange-900\": \"#2A1705\",\n    \"yelloworange-950\": \"#1A0E04\",\n    \"action-downvote\": {\n        \"light\": \"#6A5CFF\",\n        \"dark\": \"#6A5CFF\"\n    },\n    \"action-upvote\": {\n        \"light\": \"#D93900\",\n        \"dark\": \"#D93900\"\n    },\n    \"ai-background-weaker\": {\n        \"light\": \"#E7FDF5\",\n        \"dark\": \"#00382B\"\n    },\n    \"ai-plain\": {\n        \"light\": \"#006C56\",\n        \"dark\": \"#01A484\"\n    },\n    \"ai-plain-hover\": {\n        \"light\": \"#015140\",\n        \"dark\": \"#00C29D\"\n    },\n    \"alert-caution\": {\n        \"light\": \"#977000\",\n        \"dark\": \"#977000\"\n    },\n    \"avatar-gradient\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"avatar-media-gradient\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-background\": {\n        \"light\": \"#D93900\",\n        \"dark\": \"#D93900\"\n    },\n    \"brand-background-hover\": {\n        \"light\": \"#AE2C00\",\n        \"dark\": \"#AE2C00\"\n    },\n    \"brand-gradient-active\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-gradient-active-highlight\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-gradient-default\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-gradient-default-highlight\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-gradient-hover\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-gradient-hover-highlight\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"brand-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"category-live\": {\n        \"light\": \"#D93900\",\n        \"dark\": \"#D93900\"\n    },\n    \"category-nsfw\": {\n        \"light\": \"#DE019F\",\n        \"dark\": \"#DE019F\"\n    },\n    \"category-spoiler\": {\n        \"light\": \"#131313\",\n        \"dark\": \"#F2F2F2\"\n    },\n    \"caution-background\": {\n        \"light\": \"#FFBF0B\",\n        \"dark\": \"#D8A100\"\n    },\n    \"caution-background-hover\": {\n        \"light\": \"#D8A100\",\n        \"dark\": \"#FFBF0B\"\n    },\n    \"caution-onBackground\": {\n        \"light\": \"#000000\",\n        \"dark\": \"#000000\"\n    },\n    \"caution-plain\": {\n        \"light\": \"#785800\",\n        \"dark\": \"#FFBF0B\"\n    },\n    \"caution-plain-hover\": {\n        \"light\": \"#5B4200\",\n        \"dark\": \"#FFE284\"\n    },\n    \"danger-background\": {\n        \"light\": \"#EB001F\",\n        \"dark\": \"#BC0117\"\n    },\n    \"danger-background-disabled\": {\n        \"light\": \"#FDB3A4\",\n        \"dark\": \"#340F05\"\n    },\n    \"danger-background-hover\": {\n        \"light\": \"#BC0117\",\n        \"dark\": \"#EB001F\"\n    },\n    \"danger-background-weaker\": {\n        \"light\": \"#FBDBD4\",\n        \"dark\": \"#650405\"\n    },\n    \"danger-content\": {\n        \"light\": \"#BC0117\",\n        \"dark\": \"#FF4F40\"\n    },\n    \"danger-content-default\": {\n        \"light\": \"#ffffff\",\n        \"dark\": \"#ffffff\"\n    },\n    \"danger-content-hover\": {\n        \"light\": \"#90000F\",\n        \"dark\": \"#FF8773\"\n    },\n    \"danger-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"danger-plain\": {\n        \"light\": \"#BC0117\",\n        \"dark\": \"#FF8773\"\n    },\n    \"danger-plain-hover\": {\n        \"light\": \"#90000F\",\n        \"dark\": \"#FDB3A4\"\n    },\n    \"downvote-background\": {\n        \"light\": \"#6A5CFF\",\n        \"dark\": \"#6A5CFF\"\n    },\n    \"downvote-background-disabled\": {\n        \"light\": \"#6a5cff4d\",\n        \"dark\": \"#6a5cff4d\"\n    },\n    \"downvote-background-hover\": {\n        \"light\": \"#523DFF\",\n        \"dark\": \"#523DFF\"\n    },\n    \"downvote-content\": {\n        \"light\": \"#523DFF\",\n        \"dark\": \"#9580FF\"\n    },\n    \"downvote-content-weak\": {\n        \"light\": \"#6A5CFF\",\n        \"dark\": \"#6A5CFF\"\n    },\n    \"downvote-disabled\": {\n        \"light\": \"#523DFF4c\",\n        \"dark\": \"#9580FF4c\"\n    },\n    \"downvote-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"downvote-onStrongScrim\": {\n        \"light\": \"#B29FFF\",\n        \"dark\": \"#B29FFF\"\n    },\n    \"downvote-onStrongScrim-disabled\": {\n        \"light\": \"#b29fff4d\",\n        \"dark\": \"#b29fff4d\"\n    },\n    \"downvote-onStrongScrim-weaker\": {\n        \"light\": \"#9580FF\",\n        \"dark\": \"#9580FF\"\n    },\n    \"downvote-plain\": {\n        \"light\": \"#523DFF\",\n        \"dark\": \"#9580FF\"\n    },\n    \"downvote-plain-disabled\": {\n        \"light\": \"#523dff4d\",\n        \"dark\": \"#9580ff4d\"\n    },\n    \"downvote-plain-weaker\": {\n        \"light\": \"#6A5CFF\",\n        \"dark\": \"#6A5CFF\"\n    },\n    \"elevation-large1\": {\n        \"light\": \"#0000003F\",\n        \"dark\": \"#0000007F\"\n    },\n    \"elevation-large2\": {\n        \"light\": \"#00000026\",\n        \"dark\": \"#00000033\"\n    },\n    \"elevation-medium1\": {\n        \"light\": \"#0000003F\",\n        \"dark\": \"#0000007F\"\n    },\n    \"elevation-medium2\": {\n        \"light\": \"#00000019\",\n        \"dark\": \"#00000033\"\n    },\n    \"elevation-small\": {\n        \"light\": \"#00000026\",\n        \"dark\": \"#00000054\"\n    },\n    \"elevation-xsmall\": {\n        \"light\": \"#0000003F\",\n        \"dark\": \"#000000AA\"\n    },\n    \"favorite\": {\n        \"light\": \"#977000\",\n        \"dark\": \"#B78800\"\n    },\n    \"global-admin\": {\n        \"light\": \"#D93900\",\n        \"dark\": \"#D93900\"\n    },\n    \"global-alienblue\": {\n        \"light\": \"#1870F4\",\n        \"dark\": \"#1870F4\"\n    },\n    \"global-darkblue\": {\n        \"light\": \"#2A3236\",\n        \"dark\": \"#2A3236\"\n    },\n    \"global-focus\": {\n        \"light\": \"Highlight\",\n        \"dark\": \"Highlight\"\n    },\n    \"global-gold\": {\n        \"light\": \"#B78800\",\n        \"dark\": \"#D8A100\"\n    },\n    \"global-moderator\": {\n        \"light\": \"#008A10\",\n        \"dark\": \"#008A10\"\n    },\n    \"global-nsfw\": {\n        \"light\": \"#DE019F\",\n        \"dark\": \"#DE019F\"\n    },\n    \"global-offline\": {\n        \"light\": \"#667780\",\n        \"dark\": \"#667780\"\n    },\n    \"global-online\": {\n        \"light\": \"#00C61C\",\n        \"dark\": \"#00C61C\"\n    },\n    \"global-orangered\": {\n        \"light\": \"#FF4500\",\n        \"dark\": \"#FF4500\"\n    },\n    \"global-stars\": {\n        \"light\": \"#977000\",\n        \"dark\": \"#D8A100\"\n    },\n    \"gradient-media\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"gradient-media-strong\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"identity-admin\": {\n        \"light\": \"#D93900\",\n        \"dark\": \"#D93900\"\n    },\n    \"identity-coins\": {\n        \"light\": \"#B78800\",\n        \"dark\": \"#B78800\"\n    },\n    \"identity-moderator\": {\n        \"light\": \"#008A10\",\n        \"dark\": \"#008A10\"\n    },\n    \"identity-self\": {\n        \"light\": \"#01876D\",\n        \"dark\": \"#01876D\"\n    },\n    \"interactive-background-disabled\": {\n        \"light\": \"#0000000C\",\n        \"dark\": \"#FFFFFF0C\"\n    },\n    \"interactive-content-disabled\": {\n        \"light\": \"#0000003F\",\n        \"dark\": \"#FFFFFF3F\"\n    },\n    \"interactive-focused\": {\n        \"light\": \"#007FAE\",\n        \"dark\": \"#007FAE\"\n    },\n    \"interactive-pressed\": {\n        \"light\": \"#00000026\",\n        \"dark\": \"#FFFFFF26\"\n    },\n    \"inverted-interactive-background-disabled\": {\n        \"light\": \"#FFFFFF0C\",\n        \"dark\": \"#0000000C\"\n    },\n    \"inverted-interactive-content-disabled\": {\n        \"light\": \"#FFFFFF3F\",\n        \"dark\": \"#0000003F\"\n    },\n    \"inverted-interactive-pressed\": {\n        \"light\": \"#FFFFFF26\",\n        \"dark\": \"#00000026\"\n    },\n    \"inverted-neutral-background\": {\n        \"light\": \"#0E1113\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"inverted-neutral-background-hover\": {\n        \"light\": \"#181C1F\",\n        \"dark\": \"#F6F8F9\"\n    },\n    \"inverted-neutral-border\": {\n        \"light\": \"#FFFFFF33\",\n        \"dark\": \"#00000033\"\n    },\n    \"inverted-neutral-content\": {\n        \"light\": \"#B7CAD4\",\n        \"dark\": \"#333D42\"\n    },\n    \"inverted-neutral-content-strong\": {\n        \"light\": \"#EEF1F3\",\n        \"dark\": \"#181C1F\"\n    },\n    \"inverted-secondary-background\": {\n        \"light\": \"#2A3236\",\n        \"dark\": \"#E5EBEE\"\n    },\n    \"inverted-secondary-background-hover\": {\n        \"light\": \"#333D42\",\n        \"dark\": \"#DBE4E9\"\n    },\n    \"inverted-secondary-background-selected\": {\n        \"light\": \"#3D494E\",\n        \"dark\": \"#C9D7DE\"\n    },\n    \"inverted-secondary-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#000000\"\n    },\n    \"inverted-secondary-plain\": {\n        \"light\": \"#DBE4E9\",\n        \"dark\": \"#181C1F\"\n    },\n    \"inverted-secondary-plain-hover\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#000000\"\n    },\n    \"media-background\": {\n        \"light\": \"#00000099\",\n        \"dark\": \"#00000099\"\n    },\n    \"media-background-hover\": {\n        \"light\": \"#000000cc\",\n        \"dark\": \"#000000cc\"\n    },\n    \"media-background-selected\": {\n        \"light\": \"#000000cc\",\n        \"dark\": \"#000000cc\"\n    },\n    \"media-border-selected\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"media-border-weak\": {\n        \"light\": \"#FFFFFF19\",\n        \"dark\": \"#FFFFFF19\"\n    },\n    \"media-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"media-onBackground-disabled\": {\n        \"light\": \"#FFFFFF3F\",\n        \"dark\": \"#FFFFFF3F\"\n    },\n    \"media-onBackground-weak\": {\n        \"light\": \"#E5EBEE\",\n        \"dark\": \"#E5EBEE\"\n    },\n    \"media-onbackground\": {\n        \"light\": \"#ffffff\",\n        \"dark\": \"#ffffff\"\n    },\n    \"media-onbackground-disabled\": {\n        \"light\": \"#ffffff3f\",\n        \"dark\": \"#ffffff3f\"\n    },\n    \"media-onbackground-weak\": {\n        \"light\": \"#B7CAD4\",\n        \"dark\": \"#B7CAD4\"\n    },\n    \"neutral-background\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#0E1113\"\n    },\n    \"neutral-background-container\": {\n        \"light\": \"#F6F8F9\",\n        \"dark\": \"#181C1F\"\n    },\n    \"neutral-background-container-hover\": {\n        \"light\": \"#EEF1F3\",\n        \"dark\": \"#21272A\"\n    },\n    \"neutral-background-container-strong\": {\n        \"light\": \"#EEF1F3\",\n        \"dark\": \"#21272A\"\n    },\n    \"neutral-background-container-strong-hover\": {\n        \"light\": \"#E5EBEE\",\n        \"dark\": \"#2A3236\"\n    },\n    \"neutral-background-gilded\": {\n        \"light\": \"#FFF9E0\",\n        \"dark\": \"#181C1F\"\n    },\n    \"neutral-background-gilded-hover\": {\n        \"light\": \"#FFF3C0\",\n        \"dark\": \"#21272A\"\n    },\n    \"neutral-background-highlighted\": {\n        \"light\": \"#F6F8F9\",\n        \"dark\": \"#181C1F\"\n    },\n    \"neutral-background-highlighted-strong\": {\n        \"light\": \"#FFF9E0\",\n        \"dark\": \"#2A3236\"\n    },\n    \"neutral-background-hover\": {\n        \"light\": \"#F6F8F9\",\n        \"dark\": \"#181C1F\"\n    },\n    \"neutral-background-medium\": {\n        \"light\": \"#F8F8F8\",\n        \"dark\": \"#131313\"\n    },\n    \"neutral-background-pinned\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#0E1113\"\n    },\n    \"neutral-background-selected\": {\n        \"light\": \"#E5EBEE\",\n        \"dark\": \"#2A3236\"\n    },\n    \"neutral-background-strong\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#181C1F\"\n    },\n    \"neutral-background-strong-hover\": {\n        \"light\": \"#F6F8F9\",\n        \"dark\": \"#21272A\"\n    },\n    \"neutral-background-weak\": {\n        \"light\": \"#F6F8F9\",\n        \"dark\": \"#000000\"\n    },\n    \"neutral-background-weak-hover\": {\n        \"light\": \"#EEF1F3\",\n        \"dark\": \"#0E1113\"\n    },\n    \"neutral-border\": {\n        \"light\": \"#00000033\",\n        \"dark\": \"#FFFFFF33\"\n    },\n    \"neutral-border-medium\": {\n        \"light\": \"#0000007F\",\n        \"dark\": \"#FFFFFF7F\"\n    },\n    \"neutral-border-strong\": {\n        \"light\": \"#181C1F\",\n        \"dark\": \"#F6F8F9\"\n    },\n    \"neutral-border-weak\": {\n        \"light\": \"#00000019\",\n        \"dark\": \"#FFFFFF19\"\n    },\n    \"neutral-content\": {\n        \"light\": \"#333D42\",\n        \"dark\": \"#B7CAD4\"\n    },\n    \"neutral-content-disabled\": {\n        \"light\": \"#D6D6D6\",\n        \"dark\": \"#303030\"\n    },\n    \"neutral-content-strong\": {\n        \"light\": \"#181C1F\",\n        \"dark\": \"#EEF1F3\"\n    },\n    \"neutral-content-weak\": {\n        \"light\": \"#5C6C74\",\n        \"dark\": \"#8BA2AD\"\n    },\n    \"offline\": {\n        \"light\": \"#767676\",\n        \"dark\": \"#767676\"\n    },\n    \"online\": {\n        \"light\": \"#01A816\",\n        \"dark\": \"#01A816\"\n    },\n    \"opacity-08\": {\n        \"light\": \"#13131314\",\n        \"dark\": \"#13131314\"\n    },\n    \"opacity-50\": {\n        \"light\": \"#0000007f\",\n        \"dark\": \"#F2F2F27f\"\n    },\n    \"opacity-highlight\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"pizzaRed\": {\n        \"light\": \"#ef5350\",\n        \"dark\": \"#c62828\"\n    },\n    \"primary\": {\n        \"light\": \"#115BCA\",\n        \"dark\": \"#648EFC\"\n    },\n    \"primary-background\": {\n        \"light\": \"#0A449B\",\n        \"dark\": \"#115BCA\"\n    },\n    \"primary-background-hover\": {\n        \"light\": \"#0A2F6C\",\n        \"dark\": \"#1870F4\"\n    },\n    \"primary-background-selected\": {\n        \"light\": \"#0A1A3F\",\n        \"dark\": \"#648EFC\"\n    },\n    \"primary-border\": {\n        \"light\": \"#0A449B\",\n        \"dark\": \"#648EFC\"\n    },\n    \"primary-border-hover\": {\n        \"light\": \"#0A2F6C\",\n        \"dark\": \"#90A9FD\"\n    },\n    \"primary-hover\": {\n        \"light\": \"#0A449B\",\n        \"dark\": \"#90A9FD\"\n    },\n    \"primary-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"primary-onBackground-selected\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#000000\"\n    },\n    \"primary-plain\": {\n        \"light\": \"#0A449B\",\n        \"dark\": \"#648EFC\"\n    },\n    \"primary-plain-hover\": {\n        \"light\": \"#0A2F6C\",\n        \"dark\": \"#90A9FD\"\n    },\n    \"primary-plain-visited\": {\n        \"light\": \"#7600A3\",\n        \"dark\": \"#CF5FFF\"\n    },\n    \"primary-visited\": {\n        \"light\": \"#9B00D4\",\n        \"dark\": \"#CF5FFF\"\n    },\n    \"scrim\": {\n        \"light\": \"#00000099\",\n        \"dark\": \"#00000099\"\n    },\n    \"scrim-background\": {\n        \"light\": \"#00000099\",\n        \"dark\": \"#00000099\"\n    },\n    \"scrim-background-strong\": {\n        \"light\": \"#000000CC\",\n        \"dark\": \"#000000CC\"\n    },\n    \"scrim-gradient\": {\n        \"light\": \"\",\n        \"dark\": \"\"\n    },\n    \"scrim-strong\": {\n        \"light\": \"#000000cc\",\n        \"dark\": \"#000000cc\"\n    },\n    \"secondary\": {\n        \"light\": \"#21272A\",\n        \"dark\": \"#DBE4E9\"\n    },\n    \"secondary-background\": {\n        \"light\": \"#E5EBEE\",\n        \"dark\": \"#2A3236\"\n    },\n    \"secondary-background-hover\": {\n        \"light\": \"#DBE4E9\",\n        \"dark\": \"#333D42\"\n    },\n    \"secondary-background-selected\": {\n        \"light\": \"#C9D7DE\",\n        \"dark\": \"#3D494E\"\n    },\n    \"secondary-hover\": {\n        \"light\": \"#000000\",\n        \"dark\": \"#ffffff\"\n    },\n    \"secondary-onBackground\": {\n        \"light\": \"#000000\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"secondary-plain\": {\n        \"light\": \"#181C1F\",\n        \"dark\": \"#DBE4E9\"\n    },\n    \"secondary-plain-hover\": {\n        \"light\": \"#000000\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"secondary-plain-weak\": {\n        \"light\": \"#5C6C74\",\n        \"dark\": \"#8BA2AD\"\n    },\n    \"secondary-weak\": {\n        \"light\": \"#576F76\",\n        \"dark\": \"#748791\"\n    },\n    \"success-background\": {\n        \"light\": \"#008A10\",\n        \"dark\": \"#016E0B\"\n    },\n    \"success-background-hover\": {\n        \"light\": \"#016E0B\",\n        \"dark\": \"#008A10\"\n    },\n    \"success-content\": {\n        \"light\": \"#016E0B\",\n        \"dark\": \"#01A816\"\n    },\n    \"success-hover\": {\n        \"light\": \"#005306\",\n        \"dark\": \"#00C61C\"\n    },\n    \"success-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"success-plain\": {\n        \"light\": \"#016E0B\",\n        \"dark\": \"#00C61C\"\n    },\n    \"success-plain-hover\": {\n        \"light\": \"#005306\",\n        \"dark\": \"#58E15B\"\n    },\n    \"tone-1\": {\n        \"light\": \"#131313\",\n        \"dark\": \"#F2F2F2\"\n    },\n    \"tone-2\": {\n        \"light\": \"#434343\",\n        \"dark\": \"#ACACAC\"\n    },\n    \"tone-3\": {\n        \"light\": \"#ACACAC\",\n        \"dark\": \"#434343\"\n    },\n    \"tone-4\": {\n        \"light\": \"#E4E4E4\",\n        \"dark\": \"#303030\"\n    },\n    \"tone-5\": {\n        \"light\": \"#F2F2F2\",\n        \"dark\": \"#1E1E1E\"\n    },\n    \"tone-6\": {\n        \"light\": \"#F8F8F8\",\n        \"dark\": \"#131313\"\n    },\n    \"tone-7\": {\n        \"light\": \"#ffffff\",\n        \"dark\": \"#080808\"\n    },\n    \"transparent-background-hover\": {\n        \"light\": \"#74879119\",\n        \"dark\": \"#66778019\"\n    },\n    \"ui-canvas\": {\n        \"light\": \"#F2F2F2\",\n        \"dark\": \"#080808\"\n    },\n    \"ui-modalbackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#181C1F\"\n    },\n    \"upvote-background\": {\n        \"light\": \"#D93900\",\n        \"dark\": \"#D93900\"\n    },\n    \"upvote-background-disabled\": {\n        \"light\": \"#d939004d\",\n        \"dark\": \"#d939004d\"\n    },\n    \"upvote-background-hover\": {\n        \"light\": \"#AE2C00\",\n        \"dark\": \"#AE2C00\"\n    },\n    \"upvote-content\": {\n        \"light\": \"#AE2C00\",\n        \"dark\": \"#FF4500\"\n    },\n    \"upvote-content-weak\": {\n        \"light\": \"#FF4500\",\n        \"dark\": \"#FF4500\"\n    },\n    \"upvote-disabled\": {\n        \"light\": \"#AE2C004c\",\n        \"dark\": \"#FF45004c\"\n    },\n    \"upvote-onBackground\": {\n        \"light\": \"#FFFFFF\",\n        \"dark\": \"#FFFFFF\"\n    },\n    \"upvote-onStrongScrim\": {\n        \"light\": \"#FF895D\",\n        \"dark\": \"#FF895D\"\n    },\n    \"upvote-onStrongScrim-disabled\": {\n        \"light\": \"#ff895d4d\",\n        \"dark\": \"#ff895d4d\"\n    },\n    \"upvote-onStrongScrim-weaker\": {\n        \"light\": \"#FF4500\",\n        \"dark\": \"#FF4500\"\n    },\n    \"upvote-plain\": {\n        \"light\": \"#AE2C00\",\n        \"dark\": \"#FF895D\"\n    },\n    \"upvote-plain-disabled\": {\n        \"light\": \"#ae2c004d\",\n        \"dark\": \"#ff895d4d\"\n    },\n    \"upvote-plain-weaker\": {\n        \"light\": \"#FF4500\",\n        \"dark\": \"#FF4500\"\n    },\n    \"warning-background\": {\n        \"light\": \"#B78800\",\n        \"dark\": \"#B78800\"\n    },\n    \"warning-background-hover\": {\n        \"light\": \"#977000\",\n        \"dark\": \"#D8A100\"\n    },\n    \"warning-content\": {\n        \"light\": \"#785800\",\n        \"dark\": \"#B78800\"\n    },\n    \"warning-content-hover\": {\n        \"light\": \"#5B4200\",\n        \"dark\": \"#D8A100\"\n    },\n    \"warning-onBackground\": {\n        \"light\": \"#000000\",\n        \"dark\": \"#000000\"\n    }\n};\n", "import { semanticColors } from '../semanticColors.js';\nexport const namedHTMLColorToHex = {\n    aliceblue: '#f0f8ff',\n    antiquewhite: '#faebd7',\n    aqua: '#00ffff',\n    aquamarine: '#7fffd4',\n    azure: '#f0ffff',\n    beige: '#f5f5dc',\n    bisque: '#ffe4c4',\n    black: '#000000',\n    blanchedalmond: '#ffebcd',\n    blue: '#0000ff',\n    blueviolet: '#8a2be2',\n    brown: '#a52a2a',\n    burlywood: '#deb887',\n    cadetblue: '#5f9ea0',\n    chartreuse: '#7fff00',\n    chocolate: '#d2691e',\n    coral: '#ff7f50',\n    cornflowerblue: '#6495ed',\n    cornsilk: '#fff8dc',\n    crimson: '#dc143c',\n    cyan: '#00ffff',\n    darkblue: '#00008b',\n    darkcyan: '#008b8b',\n    darkgoldenrod: '#b8860b',\n    darkgray: '#a9a9a9',\n    darkgreen: '#006400',\n    darkgrey: '#a9a9a9',\n    darkkhaki: '#bdb76b',\n    darkmagenta: '#8b008b',\n    darkolivegreen: '#556b2f',\n    darkorange: '#ff8c00',\n    darkorchid: '#9932cc',\n    darkred: '#8b0000',\n    darksalmon: '#e9967a',\n    darkseagreen: '#8fbc8f',\n    darkslateblue: '#483d8b',\n    darkslategray: '#2f4f4f',\n    darkslategrey: '#2f4f4f',\n    darkturquoise: '#00ced1',\n    darkviolet: '#9400d3',\n    deeppink: '#ff1493',\n    deepskyblue: '#00bfff',\n    dimgray: '#696969',\n    dimgrey: '#696969',\n    dodgerblue: '#1e90ff',\n    firebrick: '#b22222',\n    floralwhite: '#fffaf0',\n    forestgreen: '#228b22',\n    fuchsia: '#ff00ff',\n    gainsboro: '#dcdcdc',\n    ghostwhite: '#f8f8ff',\n    gold: '#ffd700',\n    goldenrod: '#daa520',\n    gray: '#808080',\n    green: '#008000',\n    greenyellow: '#adff2f',\n    grey: '#808080',\n    honeydew: '#f0fff0',\n    hotpink: '#ff69b4',\n    indianred: '#cd5c5c',\n    indigo: '#4b0082',\n    ivory: '#fffff0',\n    khaki: '#f0e68c',\n    lavender: '#e6e6fa',\n    lavenderblush: '#fff0f5',\n    lawngreen: '#7cfc00',\n    lemonchiffon: '#fffacd',\n    lightblue: '#add8e6',\n    lightcoral: '#f08080',\n    lightcyan: '#e0ffff',\n    lightgoldenrodyellow: '#fafad2',\n    lightgray: '#d3d3d3',\n    lightgreen: '#90ee90',\n    lightgrey: '#d3d3d3',\n    lightpink: '#ffb6c1',\n    lightsalmon: '#ffa07a',\n    lightseagreen: '#20b2aa',\n    lightskyblue: '#87cefa',\n    lightslategray: '#778899',\n    lightslategrey: '#778899',\n    lightsteelblue: '#b0c4de',\n    lightyellow: '#ffffe0',\n    lime: '#00ff00',\n    limegreen: '#32cd32',\n    linen: '#faf0e6',\n    magenta: '#ff00ff',\n    maroon: '#800000',\n    mediumaquamarine: '#66cdaa',\n    mediumblue: '#0000cd',\n    mediumorchid: '#ba55d3',\n    mediumpurple: '#9370db',\n    mediumseagreen: '#3cb371',\n    mediumslateblue: '#7b68ee',\n    mediumspringgreen: '#00fa9a',\n    mediumturquoise: '#48d1cc',\n    mediumvioletred: '#c71585',\n    midnightblue: '#191970',\n    mintcream: '#f5fffa',\n    mistyrose: '#ffe4e1',\n    moccasin: '#ffe4b5',\n    navajowhite: '#ffdead',\n    navy: '#000080',\n    oldlace: '#fdf5e6',\n    olive: '#808000',\n    olivedrab: '#6b8e23',\n    orange: '#ffa500',\n    orangered: '#ff4500',\n    orchid: '#da70d6',\n    palegoldenrod: '#eee8aa',\n    palegreen: '#98fb98',\n    paleturquoise: '#afeeee',\n    palevioletred: '#db7093',\n    papayawhip: '#ffefd5',\n    peachpuff: '#ffdab9',\n    peru: '#cd853f',\n    pink: '#ffc0cb',\n    plum: '#dda0dd',\n    powderblue: '#b0e0e6',\n    purple: '#800080',\n    rebeccapurple: '#663399',\n    red: '#ff0000',\n    rosybrown: '#bc8f8f',\n    royalblue: '#4169e1',\n    saddlebrown: '#8b4513',\n    salmon: '#fa8072',\n    sandybrown: '#f4a460',\n    seagreen: '#2e8b57',\n    seashell: '#fff5ee',\n    sienna: '#a0522d',\n    silver: '#c0c0c0',\n    skyblue: '#87ceeb',\n    slateblue: '#6a5acd',\n    slategray: '#708090',\n    slategrey: '#708090',\n    snow: '#fffafa',\n    springgreen: '#00ff7f',\n    steelblue: '#4682b4',\n    tan: '#d2b48c',\n    teal: '#008080',\n    thistle: '#d8bfd8',\n    tomato: '#ff6347',\n    turquoise: '#40e0d0',\n    transparent: '#FFFFFF00',\n    violet: '#ee82ee',\n    wheat: '#f5deb3',\n    white: '#ffffff',\n    whitesmoke: '#f5f5f5',\n    yellow: '#ffff00',\n    yellowgreen: '#9acd32',\n};\nexport const isHexColor = (color) => Boolean(color.match(/^(#[0-9a-fA-F]{3,8}).*/));\nexport const isRPLColor = (color) => color in semanticColors;\nexport const isNamedHTMLColor = (color) => color in namedHTMLColorToHex;\n// Matches on rgb or rgba colors\nexport const isRgbaColor = (color) => Boolean(color.match(/^rgba?\\(.*/));\nexport const isHslColor = (color) => Boolean(color.match(/^hsla?\\(.*/));\nexport const getHexFromRPLColor = (color, theme = 'light') => {\n    // Prefer named HTML colors\n    if (isNamedHTMLColor(color)) {\n        return getHexFromNamedHTMLColor(color);\n    }\n    const colors = semanticColors;\n    const finalColor = colors[color];\n    return typeof finalColor === 'string' ? finalColor : finalColor[theme];\n};\nexport const getHexFromNamedHTMLColor = (color) => namedHTMLColorToHex[color] ?? color;\nexport const getHexFromRgbaColor = (color) => {\n    // Works for rgb or rgba colors\n    const [r, g, b, a] = color.replace(/^rgba?\\(|\\s+|\\)$/g, '').split(',');\n    // Not valid rgb\n    if (!r || !g || !b)\n        return color;\n    const rgbfloatValues = [r, g, b].map((val) => parseFloat(val));\n    const convertedValues = [...rgbfloatValues];\n    if (a) {\n        const aFloat = parseFloat(a);\n        const alphaNumberValue = Math.round(aFloat * 255);\n        convertedValues.push(alphaNumberValue);\n    }\n    const finalHexValues = convertedValues\n        .map((number) => number.toString(16).padStart(2, '0'))\n        .join('');\n    return `#${finalHexValues}`;\n};\n", "import { BlockStackDirection } from '@devvit/protos';\nexport const ROOT_STACK_TRANSFORM_CONTEXT = {\n    stackParentLayout: {\n        hasHeight: true,\n        hasWidth: true,\n        direction: BlockStackDirection.UNRECOGNIZED,\n        alignment: undefined,\n    },\n};\nvar ExpandDirection;\n(function (ExpandDirection) {\n    ExpandDirection[ExpandDirection[\"NONE\"] = 0] = \"NONE\";\n    ExpandDirection[ExpandDirection[\"HORIZONTAL\"] = 1] = \"HORIZONTAL\";\n    ExpandDirection[ExpandDirection[\"VERTICAL\"] = 2] = \"VERTICAL\";\n})(ExpandDirection || (ExpandDirection = {}));\n/*\n  Determine if a block has height and/or width based on its sizing, and its parent grow/stretch direction.\n*/\nexport function makeStackDimensionsDetails(props, stackParentLayout, blockSizes) {\n    if (!stackParentLayout)\n        return { hasHeight: false, hasWidth: false };\n    const { growDirection, stretchDirection } = makeBlockGrowStretchDetails(props?.grow, stackParentLayout.direction, stackParentLayout.alignment);\n    const hasHeight = blockSizes?.height?.value?.value ||\n        blockSizes?.height?.min?.value ||\n        isExpandingOnConstrainedRespectiveAxis(ExpandDirection.VERTICAL, growDirection, stretchDirection, stackParentLayout.hasHeight);\n    const hasWidth = blockSizes?.width?.value?.value ||\n        blockSizes?.width?.min?.value ||\n        isExpandingOnConstrainedRespectiveAxis(ExpandDirection.HORIZONTAL, growDirection, stretchDirection, stackParentLayout.hasWidth);\n    return {\n        hasHeight: Boolean(hasHeight),\n        hasWidth: Boolean(hasWidth),\n    };\n}\n/*\n  Determine if the parent is growing or stretching on the defined axis.\n  If true, tells us that the child may have height/width, even if its parent is not explicitly set.\n*/\nfunction isExpandingOnConstrainedRespectiveAxis(axis, growDirection, stretchDirection, parentHasDimensionSet) {\n    return ((growDirection === axis && parentHasDimensionSet) ||\n        (stretchDirection === axis && parentHasDimensionSet));\n}\n/*\n  Determine the grow/stretch direction of a block based on its parent stack direction and alignment.\n*/\nfunction makeBlockGrowStretchDetails(isGrowing, parentStackDirection, parentAlignment) {\n    const parentIsVerticalOrRoot = parentStackDirection === BlockStackDirection.STACK_VERTICAL ||\n        parentStackDirection === BlockStackDirection.UNRECOGNIZED;\n    const parentIsHoritzontal = parentStackDirection === BlockStackDirection.STACK_HORIZONTAL;\n    let growDirection = ExpandDirection.NONE;\n    if (parentIsHoritzontal && isGrowing) {\n        growDirection = ExpandDirection.HORIZONTAL;\n    }\n    else if (parentIsVerticalOrRoot && isGrowing) {\n        growDirection = ExpandDirection.VERTICAL;\n    }\n    const hnone = parentAlignment === undefined || parentAlignment.horizontal === undefined;\n    const vnone = parentAlignment === undefined || parentAlignment.vertical === undefined;\n    const isStretching = parentIsHoritzontal\n        ? Boolean(vnone)\n        : parentIsVerticalOrRoot\n            ? Boolean(hnone)\n            : false;\n    let stretchDirection = ExpandDirection.NONE;\n    if (parentIsHoritzontal && isStretching) {\n        stretchDirection = ExpandDirection.VERTICAL;\n    }\n    else if (parentIsVerticalOrRoot && isStretching) {\n        stretchDirection = ExpandDirection.HORIZONTAL;\n    }\n    return {\n        growDirection,\n        stretchDirection,\n    };\n}\n", "import { BlockSizeUnit, BlockStackDirection } from '@devvit/protos';\nexport function parseSize(size) {\n    if (size == null)\n        return undefined;\n    if (typeof size === 'number') {\n        return { value: size, unit: BlockSizeUnit.SIZE_UNIT_PERCENT };\n    }\n    // Regex:\n    // Group 1: Digits with optional decimal trailer\n    // Group 2: Optional suffix: 'px' or '%' (defaults to %)\n    // eslint-disable-next-line security/detect-unsafe-regex\n    const parts = size.match(/^(\\d+(?:\\.\\d+)?)(px|%)?$/);\n    if (parts == null) {\n        return undefined;\n    }\n    let unit = BlockSizeUnit.SIZE_UNIT_PERCENT;\n    if (parts.at(2) === 'px') {\n        unit = BlockSizeUnit.SIZE_UNIT_PIXELS;\n    }\n    const value = Number.parseFloat(parts[1]);\n    return { value, unit };\n}\n/**\n * If a child has a relative size along its parent's main axis, but that parent's axis is not set, omit the dimension.\n * This is done to enforce consistency between web and Yoga (the layout engine used by mobile).\n * */\nexport function omitRelativeSizes(blockSizes, stackParentLayout) {\n    if (blockSizes.width?.value?.unit === BlockSizeUnit.SIZE_UNIT_PERCENT ||\n        blockSizes.width?.min?.unit === BlockSizeUnit.SIZE_UNIT_PERCENT) {\n        if (stackParentLayout.direction === BlockStackDirection.STACK_HORIZONTAL ||\n            stackParentLayout.direction === BlockStackDirection.STACK_DEPTH) {\n            if (!stackParentLayout.hasWidth) {\n                blockSizes.width = undefined;\n            }\n        }\n    }\n    if (blockSizes.height?.value?.unit === BlockSizeUnit.SIZE_UNIT_PERCENT ||\n        blockSizes.height?.min?.unit === BlockSizeUnit.SIZE_UNIT_PERCENT) {\n        if (stackParentLayout.direction === BlockStackDirection.STACK_VERTICAL ||\n            stackParentLayout.direction === BlockStackDirection.STACK_DEPTH) {\n            if (!stackParentLayout.hasHeight) {\n                blockSizes.height = undefined;\n            }\n        }\n    }\n    return blockSizes;\n}\nexport function makeBlockSizes(props, transformContext) {\n    if (props) {\n        const hasWidth = props.width != null || props.minWidth != null || props.maxWidth != null;\n        const hasHeight = props.height != null || props.minHeight != null || props.maxHeight != null;\n        if (hasWidth || hasHeight || props.grow != null) {\n            let blockSizes = {\n                width: hasWidth\n                    ? {\n                        value: parseSize(props.width),\n                        min: parseSize(props.minWidth),\n                        max: parseSize(props.maxWidth),\n                    }\n                    : undefined,\n                height: hasHeight\n                    ? {\n                        value: parseSize(props.height),\n                        min: parseSize(props.minHeight),\n                        max: parseSize(props.maxHeight),\n                    }\n                    : undefined,\n                grow: props.grow,\n            };\n            if (transformContext.stackParentLayout) {\n                blockSizes = omitRelativeSizes(blockSizes, transformContext.stackParentLayout);\n            }\n            return blockSizes;\n        }\n    }\n    return undefined;\n}\n", "import { GetFieldsResponse, InstallationSettingsDefinition } from '@devvit/protos';\nimport { transformFormFields } from '../../apis/ui/helpers/transformForm.js';\nimport { Devvit } from '../Devvit.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nimport { onValidateFormHelper } from './helpers/settingsUtils.js';\nasync function onGetSettingsFields() {\n    return GetFieldsResponse.fromJSON({\n        fields: {\n            fields: transformFormFields(Devvit.installationSettings ?? []),\n        },\n    });\n}\nasync function onValidateForm(req, metadata) {\n    return onValidateFormHelper(req, Devvit.installationSettings, metadata);\n}\nexport function registerInstallationSettings(config) {\n    config.provides(InstallationSettingsDefinition);\n    extendDevvitPrototype('GetSettingsFields', onGetSettingsFields);\n    extendDevvitPrototype('ValidateForm', onValidateForm);\n}\n", "import { ContextActionDefinition, ContextActionList, ContextActionResponse } from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { makeAPIClients } from '../../apis/makeAPIClients.js';\nimport { getEffectsFromUIClient } from '../../apis/ui/helpers/getEffectsFromUIClient.js';\nimport { Devvit } from '../Devvit.js';\nimport { getContextFromMetadata } from './context.js';\nimport { addCSRFTokenToContext } from './csrf.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nconst getActionId = (index) => {\n    return `menuItem.${index}`;\n};\nexport function getMenuItemById(id) {\n    return Devvit.menuItems.find((_, index) => getActionId(index) === id);\n}\nexport function menuItemPertainsToLocation(menuItem, location) {\n    if (!menuItem) {\n        return false;\n    }\n    if (Array.isArray(menuItem.location)) {\n        return menuItem.location.includes(location);\n    }\n    return menuItem.location === location;\n}\nasync function getActions(_, _metadata) {\n    const menuItems = Devvit.menuItems;\n    const actions = menuItems.map((item, index) => {\n        return {\n            actionId: getActionId(index),\n            name: item.label,\n            description: item.description,\n            contexts: {\n                subreddit: item.location.includes('subreddit'),\n                post: item.location.includes('post'),\n                comment: item.location.includes('comment'),\n            },\n            users: {\n                loggedOut: item.forUserType?.includes('loggedOut'),\n                moderator: item.forUserType?.includes('moderator'),\n            },\n            postFilters: item.postFilter === 'currentApp' ? { currentApp: true } : undefined,\n        };\n    });\n    return ContextActionList.fromJSON({ actions });\n}\nasync function onAction(req, metadata) {\n    const menuItem = getMenuItemById(req.actionId);\n    if (!menuItem) {\n        throw new Error(`MenuItem ${req.actionId} not found`);\n    }\n    const commentId = req.comment?.id && `t1_${req.comment.id}`;\n    const postId = req.post?.id && `t3_${req.post.id}`;\n    const subredditId = req.subreddit?.id && `t5_${req.subreddit.id}`;\n    const targetId = commentId || postId || subredditId;\n    assertNonNull(targetId, 'targetId is missing from ContextActionRequest');\n    const event = {\n        targetId,\n        location: req.comment ? 'comment' : req.post ? 'post' : 'subreddit',\n    };\n    const context = Object.assign(makeAPIClients({\n        ui: true,\n        metadata,\n    }), getContextFromMetadata(metadata, postId, commentId), {\n        uiEnvironment: {\n            timezone: metadata[Header.Timezone]?.values[0],\n            locale: metadata[Header.Language]?.values[0],\n        },\n    });\n    await addCSRFTokenToContext(context, req);\n    await menuItem.onPress(event, context);\n    return ContextActionResponse.fromJSON({\n        effects: getEffectsFromUIClient(context.ui),\n    });\n}\nexport function registerMenuItems(config) {\n    config.provides(ContextActionDefinition);\n    extendDevvitPrototype('GetActions', getActions);\n    extendDevvitPrototype('OnAction', onAction);\n}\n", "import { Header } from '@devvit/shared-types/Header.js';\nimport { getMenuItemById } from './menu-items.js';\nfunction getUserHeader(context) {\n    const userHeader = context.metadata[Header.User].values[0];\n    if (!userHeader) {\n        throw new Error('User missing from context');\n    }\n    return userHeader;\n}\nfunction getSubredditHeader(context) {\n    const subredditHeader = context.metadata[Header.Subreddit].values[0];\n    if (!subredditHeader) {\n        throw new Error('Subreddit missing from context');\n    }\n    return subredditHeader;\n}\nexport async function addCSRFTokenToContext(context, req) {\n    /**\n     * These headers represent the canonical user and subreddit for the current context.  The user is validated by gateway against\n     * the edge context, so we trust it.\n     */\n    const userHeader = getUserHeader(context);\n    const subredditHeader = getSubredditHeader(context);\n    if (!userHeader || !subredditHeader) {\n        throw new Error('User or subreddit missing from context');\n    }\n    /**\n     * These are the target ids for the action.  They are provided by the user, but we need to validate them.\n     */\n    const commentId = req.comment?.id && `t1_${req.comment.id}`;\n    const postId = req.post?.id && `t3_${req.post.id}`;\n    const subredditId = req.subreddit?.id && `t5_${req.subreddit.id}`;\n    const targetId = commentId || postId || subredditId;\n    if (!targetId) {\n        throw new Error('targetId is missing from ContextActionRequest');\n    }\n    /**\n     * Validate user-provided commentId\n     */\n    if (commentId) {\n        const comment = await context.reddit.getCommentById(commentId);\n        if (!comment) {\n            throw new Error(`Comment ${commentId} not found`);\n        }\n        if (comment.subredditId !== subredditHeader) {\n            throw new Error(`Comment does not belong to the subreddit`);\n        }\n    }\n    /**\n     * Validate user-provided postId\n     */\n    if (postId) {\n        const post = await context.reddit.getPostById(postId);\n        if (!post) {\n            throw new Error(`Post ${postId} not found`);\n        }\n        if (post.subredditId !== subredditHeader) {\n            throw new Error(`Post does not belong to the subreddit`);\n        }\n    }\n    /**\n     * Validate user-provided subredditId\n     */\n    if (subredditId && subredditId !== subredditHeader) {\n        throw new Error(`Subreddit ${subredditId} ${subredditHeader} not found`);\n    }\n    /**\n     * Validate moderator status if needed\n     */\n    const thisItem = getMenuItemById(req.actionId);\n    if (!thisItem) {\n        throw new Error('Action not found');\n    }\n    const needsModCheck = !!thisItem.forUserType?.includes('moderator');\n    if (needsModCheck && !isModerator(context)) {\n        throw new Error('User is not a moderator');\n    }\n    const val = {\n        needsModCheck,\n    };\n    /**\n     * Store a CSRF token in redis for this action.  There's no way to pass this along, so we need to store it in redis.\n     */\n    await context.redis.set(`${userHeader}${subredditHeader}${targetId}${req.actionId}`, JSON.stringify(val));\n    await context.redis.expire(`${userHeader}${subredditHeader}${targetId}${req.actionId}`, 600);\n}\nasync function isModerator(context) {\n    const userHeader = getUserHeader(context);\n    const subredditHeader = getSubredditHeader(context);\n    const subreddit = await context.reddit.getSubredditInfoById(subredditHeader);\n    const mods = await context.reddit.getModerators({ subredditName: subreddit.name }).all();\n    return !!mods.find((mod) => mod.id === userHeader);\n}\nexport async function validateCSRFToken(context, req) {\n    const userHeader = getUserHeader(context);\n    const subredditHeader = getSubredditHeader(context);\n    const { actionId, thingId } = req.state?.__contextAction ?? {};\n    const csrfData = await context.redis.get(`${userHeader}${subredditHeader}${thingId}${actionId}`);\n    if (!csrfData) {\n        throw new Error('CSRF token not found');\n    }\n    const csrf = JSON.parse(csrfData);\n    if (csrf.needsModCheck && !(await isModerator(context))) {\n        throw new Error('User is not a moderator: ' + userHeader + '; ' + subredditHeader);\n    }\n}\n", "export function pluginIsEnabled(settings) {\n    if (!settings) {\n        return false;\n    }\n    if (settings === true) {\n        return true;\n    }\n    return settings.enabled;\n}\n", "import { SchedulerHandlerDefinition } from '@devvit/protos';\nimport { makeAPIClients } from '../../apis/makeAPIClients.js';\nimport { Devvit } from '../Devvit.js';\nimport { getContextFromMetadata } from './context.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nasync function handleScheduledAction(args, metadata) {\n    const jobName = args.type;\n    const scheduledJobHandler = Devvit.scheduledJobHandlers?.get(jobName);\n    if (!scheduledJobHandler) {\n        throw new Error(`Job ${jobName} not found`);\n    }\n    const event = {\n        name: jobName,\n        data: args.data,\n    };\n    const context = Object.assign(makeAPIClients({\n        metadata,\n    }), getContextFromMetadata(metadata));\n    await scheduledJobHandler(event, context);\n    return {};\n}\nexport function registerScheduler(config) {\n    config.provides(SchedulerHandlerDefinition);\n    extendDevvitPrototype('HandleScheduledAction', handleScheduledAction);\n}\n", "import { HandlerResult, OnAppInstallDefinition, OnAppUpgradeDefinition, OnAutomoderatorFilterCommentDefinition, OnAutomoderatorFilterPostDefinition, OnCommentCreateDefinition, OnCommentDeleteDefinition, OnCommentReportDefinition, OnCommentSubmitDefinition, OnCommentUpdateDefinition, OnModActionDefinition, OnModMailDefinition, OnPostCreateDefinition, OnPostDeleteDefinition, OnPostFlairUpdateDefinition, OnPostNsfwUpdateDefinition, OnPostReportDefinition, OnPostSpoilerUpdateDefinition, OnPostSubmitDefinition, OnPostUpdateDefinition, } from '@devvit/protos';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { StringUtil } from '@devvit/shared-types/StringUtil.js';\nimport { makeAPIClients } from '../../apis/makeAPIClients.js';\nimport { Devvit } from '../Devvit.js';\nimport { getContextFromMetadata } from './context.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nfunction createCombinedHandler(eventType, handlers) {\n    assertNonNull(handlers);\n    return async (arg, metadata) => {\n        const event = {\n            ...arg,\n            type: eventType,\n        };\n        const context = Object.assign(makeAPIClients({\n            metadata,\n        }), getContextFromMetadata(metadata));\n        // Users can set multiple triggers for a single event. An error in one\n        // shouldn't technically impact another but there's no actual guarantees\n        // made around this.\n        const results = await Promise.allSettled(handlers.map((fn) => fn(event, context)));\n        // Throw any failed promises so that the EnvelopeClient will surface them to\n        // the user.\n        const errResult = joinSettledErrors(results);\n        if (errResult)\n            throw errResult.err;\n        return {};\n    };\n}\nexport function registerTriggers(config) {\n    for (const event of Devvit.triggerOnEventHandlers.keys()) {\n        switch (event) {\n            case 'PostSubmit':\n                config.provides(OnPostSubmitDefinition);\n                extendDevvitPrototype('OnPostSubmit', createCombinedHandler('PostSubmit', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostCreate':\n                config.provides(OnPostCreateDefinition);\n                extendDevvitPrototype('OnPostCreate', createCombinedHandler('PostCreate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostUpdate':\n                config.provides(OnPostUpdateDefinition);\n                extendDevvitPrototype('OnPostUpdate', createCombinedHandler('PostUpdate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostReport':\n                config.provides(OnPostReportDefinition);\n                extendDevvitPrototype('OnPostReport', createCombinedHandler('PostReport', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostDelete':\n                config.provides(OnPostDeleteDefinition);\n                extendDevvitPrototype('OnPostDelete', createCombinedHandler('PostDelete', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostFlairUpdate':\n                config.provides(OnPostFlairUpdateDefinition);\n                extendDevvitPrototype('OnPostFlairUpdate', createCombinedHandler('PostFlairUpdate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'CommentSubmit':\n                config.provides(OnCommentSubmitDefinition);\n                extendDevvitPrototype('OnCommentSubmit', createCombinedHandler('CommentSubmit', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'CommentCreate':\n                config.provides(OnCommentCreateDefinition);\n                extendDevvitPrototype('OnCommentCreate', createCombinedHandler('CommentCreate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'CommentUpdate':\n                config.provides(OnCommentUpdateDefinition);\n                extendDevvitPrototype('OnCommentUpdate', createCombinedHandler('CommentUpdate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'CommentReport':\n                config.provides(OnCommentReportDefinition);\n                extendDevvitPrototype('OnCommentReport', createCombinedHandler('CommentReport', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'CommentDelete':\n                config.provides(OnCommentDeleteDefinition);\n                extendDevvitPrototype('OnCommentDelete', createCombinedHandler('CommentDelete', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'AppInstall':\n                config.provides(OnAppInstallDefinition);\n                extendDevvitPrototype('OnAppInstall', createCombinedHandler('AppInstall', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'AppUpgrade':\n                config.provides(OnAppUpgradeDefinition);\n                extendDevvitPrototype('OnAppUpgrade', createCombinedHandler('AppUpgrade', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'ModAction':\n                config.provides(OnModActionDefinition);\n                extendDevvitPrototype('OnModAction', createCombinedHandler('ModAction', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'ModMail':\n                config.provides(OnModMailDefinition);\n                extendDevvitPrototype('OnModMail', createCombinedHandler('ModMail', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostNsfwUpdate':\n                config.provides(OnPostNsfwUpdateDefinition);\n                extendDevvitPrototype('OnPostNsfwUpdate', createCombinedHandler('PostNsfwUpdate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'PostSpoilerUpdate':\n                config.provides(OnPostSpoilerUpdateDefinition);\n                extendDevvitPrototype('OnPostSpoilerUpdate', createCombinedHandler('PostSpoilerUpdate', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'AutomoderatorFilterPost':\n                config.provides(OnAutomoderatorFilterPostDefinition);\n                extendDevvitPrototype('OnAutomoderatorFilterPost', createCombinedHandler('AutomoderatorFilterPost', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            case 'AutomoderatorFilterComment':\n                config.provides(OnAutomoderatorFilterCommentDefinition);\n                extendDevvitPrototype('OnAutomoderatorFilterComment', createCombinedHandler('AutomoderatorFilterComment', Devvit.triggerOnEventHandlers.get(event)));\n                break;\n            default:\n                throw new Error(`Unknown trigger event: ${event}`);\n        }\n    }\n}\nfunction joinSettledErrors(results) {\n    const errs = results.reduce((sum, result) => (result.status === 'rejected' ? [...sum, result.reason] : sum), []);\n    if (errs.length === 0)\n        return;\n    if (errs.length === 1)\n        return { err: errs[0] }; // Return original error.\n    // The return type is a wrapper just to prevent ambiguity over nullish\n    // rejections which some parts of our code have mistakenly done historically.\n    return { err: new Error(errs.map((err) => StringUtil.caughtToString(err)).join('\\n')) };\n}\n", "export var StringUtil;\n(function (StringUtil) {\n    /**\n     * Returns a string, truncated as needed, of length limit or less. When\n     * truncated, appends \"\u2026\".\n     */\n    function ellipsize(str, limit) {\n        return str.length <= limit ? str : `${str.slice(0, limit - 1)}\u2026`;\n    }\n    StringUtil.ellipsize = ellipsize;\n    /** Converts the first character of str to uppercase. */\n    function capitalize(str) {\n        if (str[0] == null)\n            return str;\n        return `${str[0].toLocaleUpperCase()}${str.slice(1)}`;\n    }\n    StringUtil.capitalize = capitalize;\n    /** Returns true if string is nullish, empty, or whitespace-only. */\n    function isBlank(str) {\n        return str == null || /^\\s*$/.test(str);\n    }\n    StringUtil.isBlank = isBlank;\n    /**\n     * Converts an unknown type to a verbose stacktrace if an error or string form\n     * otherwise.\n     */\n    function caughtToString(val, preferredErrorProperty = 'stack') {\n        return val instanceof Error\n            ? `${val[preferredErrorProperty] || val.stack || val.message || val.name}`\n            : String(val);\n    }\n    StringUtil.caughtToString = caughtToString;\n    /**\n     * Converts an unknown type to a verbose stacktrace if an error or string form\n     * otherwise. Prefer caughtToString where possible for typing reasons.\n     */\n    function caughtToStringUntyped(val, preferredErrorProperty = 'stack') {\n        return val instanceof Error\n            ? // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                `${val[preferredErrorProperty] || val.stack || val.message || val.name}`\n            : String(val);\n    }\n    StringUtil.caughtToStringUntyped = caughtToStringUntyped;\n})(StringUtil || (StringUtil = {}));\n", "import { EffectType, HandleUIEventResponse, UIEventHandlerDefinition } from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport cloneDeep from 'clone-deep';\nimport { isEqual } from 'moderndash';\nimport { makeAPIClients } from '../../apis/makeAPIClients.js';\nimport { getEffectsFromUIClient } from '../../apis/ui/helpers/getEffectsFromUIClient.js';\nimport { getFormValues } from '../../apis/ui/helpers/getFormValues.js';\nimport { Devvit } from '../Devvit.js';\nimport { BlocksReconciler } from './blocks/BlocksReconciler.js';\nimport { getContextFromMetadata } from './context.js';\nimport { validateCSRFToken } from './csrf.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nimport { getMenuItemById, menuItemPertainsToLocation } from './menu-items.js';\nasync function handleUIEvent(req, metadata) {\n    // Keep track of the original state so we can check if it was updated.\n    const originalState = req.state ?? {};\n    const state = cloneDeep(originalState);\n    const apiClients = makeAPIClients({\n        ui: true,\n        metadata,\n    });\n    if (req.event?.formSubmitted && req.event.formSubmitted.formId) {\n        const formKey = req.event.formSubmitted.formId;\n        if (formKey.includes('form.hook.')) {\n            if (Devvit.customPostType) {\n                const blocksReconciler = new BlocksReconciler((_props, context) => Devvit.customPostType?.render(context) ?? null, req.event, req.state, metadata, undefined);\n                await blocksReconciler.reconcile();\n                return HandleUIEventResponse.fromJSON({\n                    state: blocksReconciler.state,\n                    effects: blocksReconciler.getEffects(),\n                });\n            }\n        }\n        const formDefinition = Devvit.formDefinitions?.get(formKey);\n        if (!formDefinition) {\n            throw new Error(`Form with key ${formKey} not found`);\n        }\n        let postId;\n        let commentId;\n        if (state.__contextAction) {\n            const { actionId, thingId } = state.__contextAction;\n            const menuItem = getMenuItemById(actionId);\n            if (menuItemPertainsToLocation(menuItem, 'post')) {\n                postId = thingId;\n            }\n            else if (menuItemPertainsToLocation(menuItem, 'comment')) {\n                commentId = thingId;\n            }\n        }\n        const context = Object.assign(apiClients, getContextFromMetadata(metadata, postId, commentId), {\n            uiEnvironment: {\n                timezone: metadata[Header.Timezone]?.values[0],\n                locale: metadata[Header.Language]?.values[0],\n            },\n        });\n        await validateCSRFToken(context, req);\n        await formDefinition.onSubmit({\n            values: getFormValues(req.event.formSubmitted.results),\n        }, context);\n    }\n    else if (req.event?.realtimeEvent) {\n        if (Devvit.customPostType) {\n            const blocksReconciler = new BlocksReconciler((_props, context) => Devvit.customPostType?.render(context) ?? null, req.event, req.state, metadata, undefined);\n            await blocksReconciler.reconcile();\n            return HandleUIEventResponse.fromJSON({\n                state: blocksReconciler.state,\n                effects: blocksReconciler.getEffects(),\n            });\n        }\n    }\n    else if (req.event?.toastAction) {\n        throw new Error('Toast actions not yet implemented');\n    }\n    // Check if the state was updated to determine if we need to rerender.\n    const stateWasUpdated = !isEqual(originalState, state);\n    const uiEffects = getEffectsFromUIClient(apiClients.ui);\n    const effects = stateWasUpdated\n        ? [\n            ...uiEffects,\n            {\n                type: EffectType.EFFECT_RERENDER_UI,\n                rerenderUi: {\n                    delaySeconds: 0,\n                },\n            },\n        ]\n        : uiEffects;\n    return HandleUIEventResponse.fromJSON({\n        state,\n        effects,\n    });\n}\nexport function registerUIEventHandler(config) {\n    config.provides(UIEventHandlerDefinition);\n    extendDevvitPrototype('HandleUIEvent', handleUIEvent);\n}\n", "/**\n * Creates an array of elements split into groups the length of size. If array can't be split evenly, the final chunk will be the remaining elements.\n *\n * @example\n * chunk(['a', 'b', 'c', 'd'], 2)\n * // => [['a', 'b'], ['c', 'd']]\n *\n * chunk(['a', 'b', 'c', 'd'], 3)\n * // => [['a', 'b', 'c'], ['d']]\n * @param chunkSize The length of each chunk\n * @param array The array to chunk\n * @template TElem The type of the array elements\n * @returns Returns the new array of chunks\n */\n\nexport function chunk<TElem>(array: readonly TElem[], chunkSize: number): TElem[][] {\n    const intSize = Math.trunc(chunkSize);\n\n    if (array.length === 0 || intSize < 1)\n        return [];\n      \n    let index = 0;\n    let resultIndex = 0;\n    const result = new Array(Math.ceil(array.length / intSize)) as TElem[][];\n\n    while (index < array.length) {\n        result[resultIndex++] = array.slice(index, (index += intSize));\n    }\n\n    return result;\n}", "/**\n * Creates an object with counts of occurrences of items in the array.\n *\n * @example\n * const users = [\n *   { 'user': 'barney', 'active': true, age: 36 },\n *   { 'user': 'betty', 'active': false, age: 36 },\n *   { 'user': 'fred', 'active': true, age: 40 }\n * ]\n *\n * count(users, value => value.active ? 'active' : 'inactive');\n * // => { 'active': 2, 'inactive': 1 }\n *\n * count(users, value => value.age);\n * // => { 36: 2, 40: 1 }\n *\n * @param criteria The criteria to count by\n * @param array The array or record to iterate over\n * @template TElem The type of the array elements\n * @returns Returns the composed aggregate object\n */\n\nexport function count<TElem, TKey extends PropertyKey>(array: readonly TElem[], criteria: (value: TElem) => TKey): Record<TKey, number> {\n    const result = {} as Record<TKey, number>;\n    for (const value of array) {\n        const key = criteria(value);\n\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        result[key] = (result[key] ?? 0) + 1;\n    }\n    return result;\n}", "// native Array.flat is much slower than this - node 19\nexport function fastArrayFlat<TElem>(arrays: (readonly TElem[])[]): readonly TElem[] {\n    let result = arrays.shift() ?? [];\n\n    for (const array of arrays) {\n        result = [...result, ...array];\n    }\n\n    return result;\n}", "import type { CompareFunction } from \"@helpers/ArrayTypeUtils.js\";\nimport type { ArrayMinLength } from \"@type/ArrayMinLength.js\";\n\nimport { fastArrayFlat } from \"@helpers/fastArrayFlat.js\";\n\n/**\n * Create a new array with values from the first array that are not present in the other arrays.\n * Optionally, use a compare function to determine the comparison of elements (default is `===`).\n * \n * **Consider using the native [Set.prototype.difference()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/difference) function instead.**\n * \n * @example\n * difference([2, 1], [2, 3], [6])\n * // => [1]\n *\n * // ---- Custom compare function ----\n * const compareByFloor = (a, b) => Math.floor(a) === Math.floor(b);\n * difference([1.2, 3.1], [1.3, 2.4], compareByFloor)\n * // => [3.1]\n *\n * // ---- Only compare by id ----\n * const arr1 = [{ id: 1, name: 'Yeet' }, { id: 3, name: 'John' }];\n * const arr2 = [{ id: 3, name: 'Carl' }, { id: 4, name: 'Max' }];\n *\n * difference(arr1, arr2, (a, b) => a.id === b.id)\n * // => [{ id: 1, name: 'Yeet' }]\n * \n * @param arraysOrCompareFn Two or more arrays with an optional compare function at the end\n * @template TElem The type of the array elements\n * @template TArrays The type of the arrays provided\n * @returns Returns a new array of filtered values\n */\nexport function difference<TElem>(...arraysOrCompareFn: ArrayMinLength<TElem[], 2>): TElem[];\nexport function difference<TArrays extends ArrayMinLength<unknown[], 2>>(...arraysOrCompareFn: [...TArrays, CompareFunction<TArrays>]): TArrays[0];\nexport function difference<TArrays extends ArrayMinLength<unknown[], 2>, TElem>(...arraysOrCompareFn: ArrayMinLength<TElem[], 2> | [...TArrays, CompareFunction<TArrays>]): TArrays[0] {\n    const compareFnProvided = typeof arraysOrCompareFn.at(-1) === \"function\";\n    const compareFunction = compareFnProvided && arraysOrCompareFn.pop() as CompareFunction<TArrays>;\n\n    const arrays = arraysOrCompareFn as TArrays;\n    const firstArray = arrays.shift()!;\n    const combinedRestArray = fastArrayFlat(arrays);\n\n    if (!compareFunction) {\n        const restSet = new Set(combinedRestArray);\n        return firstArray.filter(element => !restSet.has(element));\n    }\n\n    const difference: TArrays[0] = [];\n    for (const element of firstArray) {\n        if (combinedRestArray.every(item => !compareFunction(element, item))) {\n            difference.push(element);\n        }\n    }\n\n    return difference;\n}\n", "/**\n * Creates a slice of `array` excluding elements dropped from the end.  \n * Elements are dropped until `predicate` returns falsy.\n *\n * @example\n * const users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': true },\n *   { 'user': 'pebbles', 'active': true }\n * ]\n *\n * dropRightWhile(users, user => user.active)\n * // => objects for ['barney']\n * @param predicate The function invoked per iteration\n * @param array The array to query\n * @template TElem The type of the array elements\n * @returns Returns the slice of `array`\n */\n\nexport function dropRightWhile<TElem>(array: readonly TElem[], predicate: (value: TElem) => boolean) {\n    let i = array.length;\n    while (i > 0 && predicate(array[i - 1])) {\n        i--;\n    }\n    return array.slice(0, i);\n}\n", "/**\n * Creates a slice of `array` excluding elements dropped from the beginning.  \n * Elements are dropped until `predicate` returns falsy.\n *\n * @example\n * const users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': true },\n *   { 'user': 'pebbles', 'active': false }\n * ]\n *\n * dropWhile(users, user => user.active)\n * // => objects for ['pebbles']\n * @param predicate The function invoked per iteration\n * @param array The array to query\n * @template TElem The type of the array elements\n * @returns Returns the slice of `array`\n */\n\nexport function dropWhile<TElem>(array: readonly TElem[], predicate: (value: TElem) => boolean): TElem[] {\n    const index = array.findIndex(x => !predicate(x));\n    return array.slice(index === -1 ? array.length : index);\n}\n", "/**\n * Creates an object with grouped items in the array.\n * \n * @deprecated\n * **Deprecated: Use the native \"Object.groupBy()\" function instead.**\n * \n * @example\n * group([6.1, 4.2, 6.3], Math.floor)\n * // => { 4: [4.2], 6: [6.1, 6.3] }\n *\n * group([6.1, 4.2, 6.3], value => value > 5 ? '>5' : '<=5')\n * // => { '<=5': [4.2], '>5': [6.1, 6.3] }\n * \n * @param collection The array or object to iterate over\n * @param getGroupKey A function that returns the group id for each item\n * @template TElem The type of the array elements\n * @returns An object with grouped items\n */\n\nexport function group<TElem, TKey extends PropertyKey>(array: readonly TElem[], getGroupKey: (elem: TElem) => TKey): Record<TKey, TElem[]> {\n    const result = {} as Record<TKey, TElem[]>;\n    for (const elem of array) {\n        const key = getGroupKey(elem);\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        (result[key] ??= []).push(elem);\n    }\n    return result;\n}", "/**\n * Creates unique array retaining first occurrence of elements.\n *\n * A compare function is optional (default is `===`).\n * \n * @example\n * unique([2, 1, 2])\n * // => [2, 1]\n * \n * // compare by object values\n * const users = [\n *   { id: 1, name: 'john' },\n *   { id: 2, name: 'john' },\n *   { id: 2, name: 'john' },\n * ]\n * \n * unique(users, isEqual)\n * // => [{ id: 1, name: 'john' }, { id: 2, name: 'john' }]\n * \n * // compare by id\n * unique(users, (a, b) => a.name === b.name)\n * // => [{ id: 1, name: 'john' }]\n *\n * @param array Array to inspect\n * @param iteratee Iteratee invoked per element\n * @template TElem Type of the array elements\n * @returns A new unique array\n */\n\nexport function unique<TElem>(array: readonly TElem[], compareFn?: (a: TElem, b: TElem) => boolean): TElem[] {\n    if (!compareFn)\n        return [...new Set(array)];\n\n    // Custom compare function can't be optimized with Set\n    const uniqueArray: TElem[] = [];\n\n    for (const value of array) {\n        if (!uniqueArray.some(uniqueValue => compareFn(value, uniqueValue)))\n            uniqueArray.push(value);\n    }\n  \n    return uniqueArray;\n}\n", "import type { CompareFunction } from \"@helpers/ArrayTypeUtils.js\";\nimport type { ArrayMinLength } from \"@type/ArrayMinLength.js\";\n\nimport { fastArrayFlat } from \"@helpers/fastArrayFlat.js\";\n\nimport { unique } from \"./unique.js\";\n\n/**\n * Create an array with unique values that are present in all arrays.  \n * The order of the values is based on the first array. \n * \n * Optionally, use a compare function for element comparison (default is `===`).\n * \n * **Consider using the native [Set.prototype.intersection()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set/intersection) function instead.**\n * \n * @example\n * intersection([2, 1], [2, 3], [6, 2])\n * // => [2]\n *\n * // ---- Custom compare function ----\n * const compareFn = (a, b) => Math.floor(a) === Math.floor(b);\n * \n * intersection([1.2, 1.1], [1.3, 2.4], compareFn)\n * // => [1.2]\n *\n * // ---- Only compare by id ----\n * const arr1 = [{ id: 1, name: 'Yeet' }, { id: 3, name: 'John' }];\n * const arr2 = [{ id: 3, name: 'Carl' }, { id: 4, name: 'Max' }];\n *\n * intersection(arr1, arr2, (a, b) => a.id === b.id)\n * // => [{ id: 3, name: 'John' }]\n * \n * @param arraysOrCompareFn Two or more arrays with an optional compare function at the end\n * @template TElem Type of the array elements\n * @template TArrays Type of the arrays provided\n * @returns New array of intersecting values\n */\n\nexport function intersection<TElem>(...arraysOrCompareFn: ArrayMinLength<TElem[], 2>): TElem[];\nexport function intersection<TArrays extends ArrayMinLength<unknown[], 2>>(...arraysOrCompareFn: [...TArrays, CompareFunction<TArrays>]): TArrays[0];\nexport function intersection<TArrays extends ArrayMinLength<unknown[], 2>, TElem>(...arraysOrCompareFn: ArrayMinLength<TElem[], 2> | [...TArrays, CompareFunction<TArrays>]): TArrays[0] {\n    const compareFnProvided = typeof arraysOrCompareFn.at(-1) === \"function\";\n    const compareFunction = compareFnProvided && arraysOrCompareFn.pop() as CompareFunction<TArrays>;\n\n    const arrays = arraysOrCompareFn as TArrays;\n    const firstArray = unique(arrays.shift()!);\n    const combinedRestArray = fastArrayFlat(arrays);\n\n    if (!compareFunction) {\n        const restSet = new Set(combinedRestArray);\n        return firstArray.filter(element => restSet.has(element));\n    }\n    \n    const intersection: TArrays[0] = [];\n\n    for (const element of firstArray) {\n        if (combinedRestArray.some(item => compareFunction(element, item))) {\n            intersection.push(element);\n        }\n    }\n\n    return intersection;\n}\n", "/**\n * Moves an element within an array.\n * \n * @example\n * ```typescript\n * move([1, 2, 3, 4, 5], 0, 2);\n * // => [2, 3, 1, 4, 5]\n * ```\n * \n * @param array The input array\n * @param fromIndex Index of the element to move\n * @param toIndex Target index for the element\n * @throws If index is out of bounds\n * @template TArr Type of the array elements\n * @returns The modified array with the moved element\n */\nexport function move<TArr>(array: TArr[], fromIndex: number, toIndex: number): TArr[] {\n    if (fromIndex < 0 || fromIndex >= array.length)\n        throw new Error(`Invalid 'fromIndex': ${fromIndex}. Must be between 0 and ${array.length - 1}.`);\n\n    if (toIndex < 0 || toIndex >= array.length)\n        throw new Error(`Invalid 'toIndex': ${toIndex}. Must be between 0 and ${array.length - 1}.`);\n\n    if (fromIndex === toIndex)\n        return array;\n\n    const item = array[fromIndex];\n\n    if (fromIndex < toIndex)\n        for (let index = fromIndex; index < toIndex; index++)\n            array[index] = array[index + 1];\n    else\n        for (let index = fromIndex; index > toIndex; index--)\n            array[index] = array[index - 1];\n\n    array[toIndex] = item;\n\n    return array;\n}", "/**\n * Creates an array from start to end (inclusive), stepping by step.  \n * If start is larger than end, the array is generated in reverse\n *\n * @example\n * for (const num of range(1, 5)) {\n *   console.log(num);\n * }\n * // => 1 2 3 4 5\n * \n * // Array of even numbers between 0 and 10:\n * range(0, 10, 2);\n * // => [0, 2, 4, 6, 8, 10]\n * \n * // Descending range:\n * range(5, 0, 2);\n * // => [5, 3, 1]\n * \n * @param start Start number of sequence\n * @param end End number of sequence\n * @param step Step between numbers, default: 1\n * @throws If range is negative or step is 0\n * @returns An array of numbers\n */\nexport function range(start: number, end: number, step = 1): number[] {\n    if (step <= 0)\n        throw new Error(\"The step must be greater than 0.\");\n\n    step = start > end ? -step : step;\n    const length = Math.floor(Math.abs((end - start) / step)) + 1;\n\n    const result = new Array(length) as number[];\n    \n    for (let i = 0; i < length; i++) {\n        result[i] = start + (i * step);\n    }\n\n    return result;\n}", "/**\n * Creates a new array of shuffled values, using the Fisher-Yates-Durstenfeld Shuffle algorithm.\n *\n * @example\n * shuffle([1, 2, 3, 4])\n * // => [4, 1, 3, 2]\n * @param array Array to shuffle\n * @template TElem The type of the array elements\n * @returns A new shuffled array\n */\n\nexport function shuffle<TElem>(array: readonly TElem[]): TElem[] {\n    const shuffledArray = [...array];\n  \n    for (let index = shuffledArray.length - 1; index > 0; index--) {\n        const randomIndex = Math.floor(Math.random() * (index + 1));\n        [shuffledArray[index], shuffledArray[randomIndex]] = [shuffledArray[randomIndex], shuffledArray[index]];\n    }\n  \n    return shuffledArray;\n}", "\n/**\n * Creates new array sorted in ascending/descending order with single or multiple criteria.\n * \n * @example\n * sort([1, 2, 3, 4], { order: 'desc' })\n * // => [4, 3, 2, 1]\n * \n * // --- Sorting by multiple properties ---\n * const array = [{ a: 2, b: 1 }, { a: 1, b: 2 }, { a: 1, b: 1 }];\n * \n * sort(array,\n *   { order: 'asc', by: item => item.a },\n *   { order: 'desc', by: item => item.b }\n * )\n * // => [{ a: 1, b: 2 }, { a: 1, b: 1 }, { a: 2, b: 1 }]\n * \n * @param array Array to sort\n * @param criteria Criteria to sort by\n * @param criteria.order Order to sort in, either 'asc' or 'desc'\n * @param criteria.by Iteratee function to sort based on a specific property\n * @template TElem Type of the array elements\n * @returns New sorted array\n*/\nexport function sort<TElem>(array: readonly TElem[], ...criteria: { order?: \"asc\" | \"desc\", by?: (item: TElem) => number | bigint | Date | string }[]): TElem[] {\n    return [...array].sort((a, b) => {\n        for (const { order = \"asc\", by = (item: TElem) => item } of criteria) {\n            const aValue = by(a);\n            const bValue = by(b);\n            if (aValue !== bValue) {\n                const compare = aValue < bValue ? -1 : 1;\n                return order === \"asc\" ? compare : -compare;\n            }\n        }\n        return 0;\n    });\n}\n", "/**\n * Creates a slice of `array` with elements taken from the end.  \n * Elements are taken until `predicate` returns falsy.\n * \n * @example\n * const users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': true },\n *   { 'user': 'pebbles', 'active': true }\n * ]\n *\n * takeRightWhile(users, user => user.active)\n * // => objects for ['fred', 'pebbles']\n * @param predicate The function invoked per iteration.\n * @param array The array to query.\n * @template TElem The type of the array elements.\n * @returns Returns the slice of `array`.\n */\n\nexport function takeRightWhile<TElem>(array: readonly TElem[], predicate: (elem: TElem) => boolean): TElem[] {\n    const result: TElem[] = [];\n\n    for (let i = array.length - 1; i >= 0; i--) {\n        if (predicate(array[i])) {\n            result.unshift(array[i]);\n        } else {\n            break;\n        }\n    }\n\n    return result;\n}\n", "/**\n * Creates a slice of `array` with elements taken from the beginning.  \n * Elements are taken until `predicate` returns falsy.\n *\n * @example\n * const users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': true },\n *   { 'user': 'pebbles', 'active': false }\n * ]\n *\n * takeWhile(users, user => user.active)\n * // => objects for ['barney', 'fred']\n * @param predicate The function invoked per iteration.\n * @param array The array to query.\n * @template TElem The type of the array elements.\n * @returns A new array of taken elements.\n */\n\nexport function takeWhile<TElem>(array: readonly TElem[], predicate: (elem: TElem) => boolean): TElem[] {\n    const result: TElem[] = [];\n\n    for (const element of array) {\n        if (predicate(element)) {\n            result.push(element);\n        } else {\n            break;\n        }\n    }\n\n    return result;\n}\n", "import type { Jsonifiable } from \"@type/Jsonifiable.js\";\n\ntype SupportedAlgorithms = \"SHA-256\" | \"SHA-384\" | \"SHA-512\";\n\nlet textEncoder: TextEncoder | undefined;\n\n/**\n * Generates a hash of the given data using the specified algorithm.\n *\n * It uses the Web Crypto API to generate the hash.\n * \n * *Note: If you need a secure hash use a specialized library like [crypto-js](https://www.npmjs.com/package/crypto-js) instead.*\n * \n * @example\n * // Hash a string using the default algorithm (SHA-256)\n * await hash('hello world'); \n * // => \"b94d27b9934d3e08a52e52d7da7dabfac484efe37a53...\"\n *\n * // Hash an object using the SHA-512 algorithm\n * await hash({ foo: 'bar', baz: 123 }, 'SHA-512');\n * // => \"d8f3c752c6820e580977099368083f4266b569660558...\"\n * \n * @param data The data to hash, either as a string or a JSON-serializable object.\n * @param algorithm The hashing algorithm to use. Defaults to 'SHA-256'.\n * @returns A Promise that resolves to the hexadecimal representation of the hash.\n *\n * @throws {DOMException} If the specified algorithm is not supported by the Web Crypto API.\n */\n\nexport async function hash(data: Jsonifiable, algorithm: SupportedAlgorithms = \"SHA-256\"): Promise<string> {\n    textEncoder ??= new TextEncoder();\n\n    const dataBuffer = typeof data === \"string\"\n        ? textEncoder.encode(data) \n        : textEncoder.encode(JSON.stringify(data));\n    \n    const hashBuffer = await crypto.subtle.digest(algorithm, dataBuffer);\n    const hashArray = [...new Uint8Array(hashBuffer)];\n    const hexValues = hashArray.map(b => b.toString(16).padStart(2, \"0\"));\n    return hexValues.join(\"\");\n}\n", "\n/**\n * Generates a random integer between two given numbers, including those numbers.\n * \n * It uses `crypto.getRandomValues` to generate the random number.\n * @example\n * randomInt(1, 10) \n * // => 5\n * \n * @param min The smallest integer that can be generated.\n * @param max The largest integer that can be generated.\n * \n * @returns A random integer between `min` and `max`, including `min` and `max`.\n */\n\nexport function randomInt(min: number, max: number): number {\n    // Taken from https://stackoverflow.com/a/41452318\n    if (!Number.isInteger(min) || !Number.isInteger(max))\n        throw new TypeError(\"min and max must be integers\");\n\n    if (min >= max) \n        throw new Error(\"max must be greater than min\");\n\n    const range = max - min + 1;\n    const randomBytes = Math.ceil(Math.log2(range) / 8);\n    const maxRandNumber = Math.pow(256, randomBytes);\n    const randomBuffer = new Uint8Array(randomBytes);\n\n    let randomValue: number;\n    do {\n        crypto.getRandomValues(randomBuffer);\n        randomValue = 0;\n        for (let index = 0; index < randomBytes; index++) {\n            // eslint-disable-next-line no-bitwise\n            randomValue = (randomValue << 8) + randomBuffer[index];\n        }\n        // rerun if randomValue is bigger than range\n    } while (randomValue >= maxRandNumber - (maxRandNumber % range));\n\n    return min + (randomValue % range);\n}\n", "import { randomInt } from \"./randomInt.js\";\n\n/**\n * Gets a random element an array. A single element is returned by default.  \n * Specify the `multi` parameter to get an array of multiple random elements.\n *\n * If the array is empty, `undefined` is returned.  \n * If `multi` is defined it returns an empty array.\n * \n * It uses `crypto.getRandomValues` to get the random element.\n * @example\n * randomElem([1, 2, 3, 4])\n * // => 2\n *\n * randomElem([1, 2, 3, 4], 2)\n * // => [3, 1]\n * @param array The array to sample.\n * @returns Returns the random element.\n */\n\nexport function randomElem<TArr>(array: TArr[]): TArr | undefined;\nexport function randomElem<TArr>(array: TArr[], multi: number): TArr[];\nexport function randomElem<TArr>(array: TArr[], multi?: number): TArr | undefined | TArr[] {\n    if (multi === undefined) {\n        if (array.length === 0) return undefined;\n        return getSingleElement(array);\n    }\n\n    if (multi && array.length === 0) return [];\n\n    // Multiple samples\n    const result = new Array<TArr>(multi);\n    for (let i = 0; i < multi; i++) {\n        result[i] = getSingleElement(array);\n    }\n    return result;\n}\n\nfunction getSingleElement<TArr>(array: TArr[]): TArr {\n    const randomIndex = randomInt(0, array.length - 1);\n    return array[randomIndex];\n}", "/* eslint-disable no-bitwise */\n\n/**\n * Generates a random float between two given numbers, including those numbers.\n * \n * It uses `crypto.getRandomValues` to generate the random number.\n * @example\n * randomFloat(1, 10) \n * // => 1.123456789\n * \n * @param min The smallest float that can be generated.\n * @param max The largest float that can be generated.\n * \n * @returns A random float between `min` and `max`, including `min` and `max`.\n */\nexport function randomFloat(min: number, max: number): number {\n    if (min >= max) \n        throw new Error(\"max must be greater than min\");\n\n    // TODO: Switch to UInt64Array when safari support is better (https://caniuse.com/mdn-javascript_builtins_bigint64array)\n    const randomBuffer = new Uint32Array(2);\n    crypto.getRandomValues(randomBuffer);\n\n    // keep all 32 bits of the the first, top 21 of the second for 53 random bits\n    const randomBigInt = (BigInt(randomBuffer[0]) << 21n) | (BigInt(randomBuffer[1]) >> 11n);\n    \n    // fraction between 0 and 1 with full 53bit precision\n    const fraction = Number(randomBigInt) / Number.MAX_SAFE_INTEGER; // (2 ** 53)\n    return min + (fraction * (max - min));\n}\n", "import { randomInt } from \"./randomInt.js\";\n\nconst DEFAULT_CHARSET = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n\n/**\n * Generates a random string of the specified length.\n * The default charset is alphanumeric characters.\n * \n * It uses `crypto.getRandomValues` to generate the random string.\n * \n * @example\n * randomString(8);\n * // => \"JWw1p6rD\"\n *\n * randomString(16, 'abc');\n * // => \"cbaacbabcabccabc\"\n * @param length The length of the string to generate.\n * @param charSet The set of characters to use when generating the string. Defaults to alphanumeric characters.\n * @returns A random string of the specified length.\n */\n\nexport function randomString(length: number, charSet = DEFAULT_CHARSET): string {\n    if (charSet.length <= 0) return \"\";\n\n    let result = \"\";\n    for (let index = 0; index < length; index++) {\n        const randomIndex = randomInt(0, charSet.length - 1);\n        result += charSet[randomIndex];\n    }\n\n    return result;\n}", "import type { GenericFunction } from \"@type/GenericFunction.js\";\n\ntype Tail<T extends unknown[]> = T extends [infer _Head, ...infer Tail] ? Tail : never;\n\n/**\n * Transforms a function into a decorator function.\n * \n * @example\n * ```typescript\n * function log(func: Function, message: string) {\n *   return function (...args: unknown[]) {\n *     console.log(message);\n *     return func(...args);\n *   };\n * }\n * \n * const logger = toDecorator(log);\n * \n * class TestClass {\n *   @logger(\"Hello world!\")\n *   testMethod() {\n *     return 1;  \n *   }\n * }\n *  \n * const instance = new TestClass();\n * instance.testMethod(); \n * // => Log \"Hello World\" and return 1\n * ```\n * @param func The function to transform.\n * @returns A decorator function that can be used to decorate a method.\n */\n// waiting for https://github.com/evanw/esbuild/issues/104\nexport function toDecorator<TFunc extends GenericFunction<TFunc>>(func: TFunc) {\n    return function (...args: Tail<Parameters<TFunc>>) {\n        return function (originalMethod: unknown, _context: ClassMethodDecoratorContext) {\n            const funcArgs = [originalMethod, ...args] as Parameters<TFunc>;\n            return func(...funcArgs);\n        };\n    };\n}", "import type { GenericFunction } from \"@type/GenericFunction.js\";\n\n/**\n * Creates a debounced version of a function. Only calling it after a specified amount of time has passed without any new calls.\n * \n * **Methods:**  \n * - `cancel()` will cancel the next invocation of the debounced function.  \n * - `flush()` will immediately invoke the debounced function and cancel any pending invocations.\n * - `pending()` returns true if the debounced function is set to invoke.\n * \n * This function can be used as a decorator with {@link decDebounce}.\n * \n * @example\n * const sayHello = (name: string) => console.log(`Hello, ${name}!`);\n * const debouncedSayHello = debounce(sayHello, 200);\n * \n * debouncedSayHello(\"John\");\n * debouncedSayHello(\"Jane\");\n * // => Only the second invocation of `debouncedSayHello` is executed, after a delay of 200ms.\n * @param func The function to debounce.\n * @param wait The number of milliseconds to wait before invoking `func`.\n * @returns A debounced version of `func` with `cancel` and `flush` methods.\n */\n\nexport function debounce<TFunc extends GenericFunction<TFunc>>(func: TFunc, wait: number): TFunc & {\n    cancel: () => void;\n    flush: () => void;\n    pending: () => boolean;\n} {\n    let timeoutId: NodeJS.Timeout | undefined;\n    const debounced = function (this: unknown, ...args: Parameters<TFunc>) {\n        clearTimeout(timeoutId);\n        timeoutId = setTimeout(() => {\n            func.apply(this, args);\n            timeoutId = undefined;\n        }, wait);\n    };\n\n    debounced.cancel = function () {\n        clearTimeout(timeoutId);\n        timeoutId = undefined;\n    };\n\n    debounced.flush = function (this: unknown, ...args: Parameters<TFunc>) {\n        debounced.cancel();\n        func.apply(this, args);\n    };\n\n    debounced.pending = function () {\n        return timeoutId !== undefined;\n    };\n\n    return debounced as TFunc & { cancel: () => void; flush: () => void; pending: () => boolean };\n}\n", "import { toDecorator } from \"@decorator/toDecorator.js\";\nimport { debounce } from \"@function/debounce.js\";\n\n/**\n * Debounces the decorated function. Only calling it after a specified amount of time has passed without any new calls.\n * \n * Look at {@link debounce} for the non-decorator version.\n * \n * @example\n * ```typescript\n * class TestClass {\n *   @decDebounce(100)\n *   testMethod(str: string) {\n *     console.log(\"Debounced:\", str);\n *   }\n * }\n * \n * const instance = new TestClass();\n * instance.testMethod(\"Hello\");\n * instance.testMethod(\"World\");\n * // => Only the second invocation of `debouncedSayHello` is executed, after a delay of 1000ms.\n * ```\n * @param wait Milliseconds to wait before invoking the decorated function after the last invocation.\n */\n\nexport function decDebounce(wait: number) {\n    return toDecorator(debounce)(wait);\n}\n", "import type { GenericFunction } from \"@type/GenericFunction.js\";\n\n/**\n * Creates a function that invokes the given function as long as it's called `<= n` times.\n *  \n * Subsequent calls to the created function return the result of the last `func` invocation.\n *\n * This function can be used as a decorator with {@link decMaxCalls}.\n * @example\n * let count = 0;\n * const addCount = () => ++count;\n *\n * // Allow addCount to be invoked twice.\n * const limitAddCount = maxCalls(addCount, 2)\n *\n * limitAddCount() // => 1\n * limitAddCount() // => 2\n * limitAddCount() // => 2\n * // => `limitAddCount` is invoked twice and the result is cached.\n * @param n The number of calls before the cached result is returned.\n * @param func The function to restrict.\n * @returns Returns the new restricted function.\n */\n\nexport function maxCalls<TFunc extends GenericFunction<TFunc>>(func: TFunc, n: number): TFunc {\n    let count = 0;\n    let result: ReturnType<TFunc>;\n    return function (this: unknown, ...args: Parameters<TFunc>): ReturnType<TFunc> {\n        if (count < n) {\n            count += 1;\n            result = func.apply(this, args);\n        }\n        return result;\n    } as TFunc;\n}\n", "import { toDecorator } from \"@decorator/toDecorator.js\";\nimport { maxCalls } from \"@function/maxCalls.js\";\n\n/**\n * Only invokes the decorated function as long as it's called `<= n` times.  \n * Subsequent calls to the decorated function return the result of the last invocation.\n * \n * Look at {@link maxCalls} for the non-decorator version.\n * \n * @example\n * ```typescript\n * class TestClass {\n *  private count = 0;\n *  @decMaxCalls(2)\n *  testMethod() {\n *    return ++this.count;\n *  }\n * }\n * const instance = new TestClass();\n * instance.testMethod(); // => 1 \n * instance.testMethod(); // => 2\n * instance.testMethod(); // => 2\n * ```\n * @param n The number of calls before the cached result is returned.\n */\n\nexport function decMaxCalls(n: number) {\n    return toDecorator(maxCalls)(n);\n}", "import type { GenericFunction } from \"@type/GenericFunction.js\";\n\nconst defaultResolver = (...args: unknown[]) => JSON.stringify(args);\n\n/**\n * Creates a function that memoizes the result of a given function.\n * \n * The cache key is determined by the `resolver` or by the arguments from the function call.\n *\n * **Options:**\n * - `resolver` A function that determines the cache key based on the arguments provided.\n * - `ttl` the time to live for the cache entries in milliseconds.\n * \n * **Properties:**\n * - `cache` The cache is an instance of `Map` and can be used to clear or inspect the cache. \n * It can be replaced by a custom cache that matches the `Map` interface.\n * \n * \n * This function can be used as a decorator with {@link decMemoize}.\n * \n * @example\n * ```typescript\n * function fibonacci(n: number) {\n *   if (n <= 1) return n;\n *   return fibonacci(n - 1) + fibonacci(n - 2);\n * }\n *\n * const memoizedFib = memoize(fibonacci, { ttl: 1000 })\n * \n * memoizedFib(40) // => 102334155\n * memoizedFib(40) // => 102334155 (cache hit)\n * setTimeout(() => memoizedFib(40), 1000) // => 102334155 (cache miss)\n * \n * // Cached values are exposed as the `cache` property.\n * memoizedFib.cache.get(\"40\") // => [value, timestamp]\n * memoizedFib.cache.set(\"40\", [1234, Date.now()])\n * memoizedFib.cache.clear()\n * \n * // This is the default way to create cache keys.\n * const defaultResolver = (...args: unknown[]) => JSON.stringify(args)\n * ```\n * @param func The function to have its output memoized.\n * @param options The options object with optional `resolver` and `ttl` parameters.\n * @param options.resolver - A function that determines the cache key for storing the result based on the arguments provided.\n * @param options.ttl - The time to live for the cache in milliseconds.\n * @template TFunc The type of the function to memoize.\n * @template Cache The type of the cache storage.\n * @returns Returns the new memoized function.\n */\n\nexport function memoize<TFunc extends GenericFunction<TFunc>, Cache extends Map<string, [ReturnType<TFunc>, number]>>(\n    func: TFunc, options: { resolver?: (...args: Parameters<TFunc>) => string, ttl?: number; } = {}\n): TFunc & { cache: Cache } {\n    const resolver = options.resolver ?? defaultResolver;\n    const ttl = options.ttl;\n    const cache = new Map() as Cache;\n\n    const memoizedFunc = function (this: unknown, ...args: Parameters<TFunc>): ReturnType<TFunc> {\n        const key = resolver(...args);\n        if (cache.has(key)) {\n            const [cacheResult, cacheTime] = cache.get(key)!;\n            if (ttl === undefined || (Date.now() - cacheTime < ttl)) {\n                return cacheResult;\n            }\n        }\n        const result = func.apply(this, args);\n        cache.set(key, [result, Date.now()]);\n        return result;\n    };\n\n    memoizedFunc.cache = cache;\n    return memoizedFunc as TFunc & { cache: Cache };\n} ", "import { toDecorator } from \"@decorator/toDecorator.js\";\nimport { memoize } from \"@function/memoize.js\";\n\n/**\n * Memoizes the decorated function.  \n * The cache key is either determined by the provided resolver or by the arguments used in the memoized function.\n * \n * **Options:**\n * - `resolver` A function that determines the cache key for storing the result based on the arguments provided.\n * - `ttl` sets the time to live for the cache in milliseconds. After `ttl` milliseconds, the next call to the memoized function will result in a cache miss.\n * \n * Look at {@link memoize} for the non-decorator version.\n * \n * @example\n * ```typescript\n * class TestClass {\n *   @decMemoize({ ttl: 1000 })\n *   testMethod(a: number, b: number) {\n *     return a + b;\n *   }\n * }\n * const instance = new TestClass();\n * instance.testMethod(1, 2); // => 3\n * instance.testMethod(1, 2); // => 3 (cached)\n * \n * // After 1 second:\n * instance.testMethod(1, 2); // => 3 (cache miss)\n * ```\n * @param options The options object.\n * @param options.resolver - A function that determines the cache key for storing the result based on the arguments provided.\n * @param options.ttl - The time to live for the cache in milliseconds.\n */\n\nexport function decMemoize(options: Parameters<typeof memoize>[1] = {}) {\n    return toDecorator(memoize)(options);\n}", "import type { GenericFunction } from \"@type/GenericFunction.js\";\n\n/**\n * Creates a function that invokes the given function once it's called more than `n` times.  \n * Returns undefined until the minimum call count is reached.\n * \n * This function can be used as a decorator with {@link decMinCalls}.\n * @example\n * const caution = () => console.log(\"Caution!\");\n * const limitedCaution = minCalls(caution, 2);\n *\n * limitedCaution()\n * limitedCaution()\n * limitedCaution()\n * // => `caution` is invoked on the third call.\n * @param n The number of calls before the given function is invoked.\n * @param func The function to restrict.\n * @returns Returns the new restricted function.\n */\n\nexport function minCalls<TFunc extends GenericFunction<TFunc>>(func: TFunc, n: number) {\n    let count = 1;\n    return function (this: unknown, ...args: Parameters<TFunc>): ReturnType<TFunc> | undefined {\n        if (count > n) {\n            return func.apply(this, args);\n        }\n        count += 1;\n    };\n}", "import { toDecorator } from \"@decorator/toDecorator.js\";\nimport { minCalls } from \"@function/minCalls.js\";\n\n/** \n * Only invokes the decorated function after it's called more than `n` times.\n * \n * Look at {@link minCalls} for the non-decorator version.\n * \n * @example\n * ```typescript\n * class TestClass {\n *   @decMinCalls(2)\n *   testMethod() {\n *     return 1;\n *   }\n * }\n * const instance = new TestClass();\n * instance.testMethod(); // => undefined\n * instance.testMethod(); // => undefined\n * instance.testMethod(); // => 1\n * ```\n * @param n The number of calls before the decorated function is invoked.\n */\n\nexport function decMinCalls(n: number) {\n    return toDecorator(minCalls)(n);\n}", "import type { GenericFunction } from \"@type/GenericFunction.js\";\n\n/**\n * Generates a function that invokes the given function `func` at most once per every `wait` milliseconds.  \n * The throttled function always returns the result of the last `func` invocation.\n * \n * This function can be used as a decorator with {@link decThrottle}.\n * @example\n * const throttled = throttle(() => console.log(\"Throttled!\"), 1000);\n * \n * throttled();\n * throttled();\n * // => \"Throttled!\" is logged once per second.\n * @param func The function to throttle.\n * @param wait The number of milliseconds to throttle invocations to.\n * @returns Returns the new throttled function.\n */\n\nexport function throttle<TFunc extends GenericFunction<TFunc>>(func: TFunc, wait: number): TFunc {\n    let inThrottle = false;\n    let lastResult: ReturnType<TFunc>;\n    return function (this: unknown, ...args: Parameters<TFunc>) {\n        if (!inThrottle) {\n            lastResult = func.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => (inThrottle = false), wait);\n        }\n\n        return lastResult;\n    } as TFunc;\n}\n  \n", "import { toDecorator } from \"@decorator/toDecorator.js\";\nimport { throttle } from \"@function/throttle.js\";\n\n/**\n * The decorated function is invoked at most once per every `wait` milliseconds.\n * \n * Look at {@link throttle} for the non-decorator version.\n * \n * @example\n * ```typescript\n * class TestClass {\n *   @decThrottle(1000)\n *   testMethod() {\n *     console.log(\"Throttled!\");\n *   }\n * }\n * \n * const instance = new TestClass();\n * instance.testMethod(); // => \"Throttled!\" is logged once per second.\n * instance.testMethod(); // nothing happens\n * ```\n * @param wait The number of milliseconds to wait between invocations.\n */\n\nexport function decThrottle(wait: number) {\n    return toDecorator(throttle)(wait);\n}", "/**\n * Invokes a function `n` times, returning an array of the results of\n * each invocation.\n * \n * @example\n * times(index => console.log(\"Run\", index), 3)\n * // => \"Run 0\" | \"Run 1\" | \"Run 2\"\n * times(Math.random, 3)\n * // => [0.123, 0.456, 0.789]\n * times(() => 0, 4)\n * // => [0, 0, 0, 0]\n * @param n The number of times to invoke `func`.\n * @param func The function invoked per iteration.\n * @returns Returns an array of results.\n */\n\nexport function times<TInput>(func: (index: number) => TInput, n: number): TInput[] {\n    const result: TInput[] = [];\n    for (let i = 0; i < n; i++) {\n        result.push(func(i));\n    }\n    return result;\n}", "\n/**\n * Calculates the sum of an array of numbers.\n * \n * Returns `NaN` if the input array is empty.\n * @example\n * sum([1, 2, 3, 4, 5]) // => 15\n * \n * @param numbers The input array of numbers\n * @returns The sum of the input array \n */\n\nexport function sum(numbers: readonly number[]): number {\n    if (numbers.length === 0)\n        return NaN;\n    return numbers.reduce((total, current) => total + current, 0);\n}", "import { sum } from \"@number/sum.js\";\n\n/**\n * Calculates the average of an array of numbers\n * \n * Returns `NaN` if the input array is empty.\n * @example\n * average([1, 2, 3, 4, 5]) // => 3\n * \n * @param numbers The input array of numbers\n * @returns The average of the input array, or NaN if the input array is empty\n */\n\nexport function average(numbers: readonly number[]): number {\n    if (numbers.length === 0)\n        return NaN;\n    return sum(numbers) / numbers.length;\n}", "/**\n * Calculates the median of an array of numbers\n * \n * Returns `NaN` if the input array is empty.\n * @example\n * median([1, 2, 3, 4, 5]) // => 3\n * median([1, 2, 3, 4, 5, 6]) // => 3.5\n * \n * @param numbers The input array of numbers\n * @returns The median of the input array\n */\n\nexport function median(numbers: readonly number[]): number {\n    if (numbers.length === 0)\n        return NaN;\n    const sortedArray = [...numbers].sort((a, b) => a - b);\n    const mid = Math.floor(sortedArray.length / 2);\n    return sortedArray.length % 2 === 0 ? ((sortedArray[mid - 1] + sortedArray[mid]) / 2) : sortedArray[mid];\n}", "/**\n * Rounds a number to the given precision.\n *\n * @example\n * round(1.23456, 2); // => 1.23\n * round(1.235, 1); // => 1.2\n * round(1234.56); // => 1234.56\n * \n * @param number The number to be rounded.\n * @param precision The number of decimal places to round to. Defaults to 2.\n * @returns The rounded number.\n */\n\nexport function round(number: number, precision = 2): number {\n    const factor = Math.pow(10, precision);\n    return Math.round((number + Number.EPSILON) * factor) / factor;\n}", "import type { PlainObject } from \"@type/PlainObject.js\";\n\n/**\n * Checks if the value is a plain object.\n * \n * Refers to the {@link PlainObject} type.\n * @example\n * isPlainObject({}) // => true\n * isPlainObject({ a: 1 }) // => true\n * isPlainObject(null) // => false\n * isPlainObject('1') // => false\n * isPlainObject([]) // => false\n * isPlainObject(new Function()) // => false\n * isPlainObject(new Date()) // => false\n * @param value The value to check\n * @returns Boolean indicating if the value is a plain object\n */\n\nexport function isPlainObject(value: unknown): value is PlainObject {\n    return value?.constructor === Object;\n}", "import type { GenericObject } from \"@type/GenericObject\";\nimport type { Paths } from \"type-fest\";\n\nimport { isPlainObject } from \"@validate/isPlainObject.js\";\n\ntype StringIfNever<Type> = [Type] extends [never] ? string : Type;\ntype PathOrString<TObj> = StringIfNever<Paths<TObj, { bracketNotation: true, maxRecursionDepth: 20 }>>;\n\n/**\n * Flattens an object into a single level object.\n * \n * @example\n * const obj = { a: { b: 2, c: [{ d: 3 }, { d: 4 }] } };\n * flatKeys(obj);\n * // => { 'a.b': 2, 'a.c[0].d': 3, 'a.c[1].d': 4 }\n * \n * @param obj The object to flatten.\n * @template TObj The type of the object to flatten.\n * @returns A new object with flattened keys.\n */\n\nexport function flatKeys<TObj extends GenericObject>(obj: TObj): Record<PathOrString<TObj>, unknown> {\n    const flatObject: Record<string, unknown> = {};\n  \n    for (const [key, value] of Object.entries(obj)) {\n        addToResult(key, value, flatObject);\n    }\n  \n    return flatObject;\n}\n\nfunction addToResult(prefix: string, value: unknown, flatObject: Record<string, unknown>) {\n    if (isPlainObject(value)) {\n        const flatObj = flatKeys(value);\n        for (const [flatKey, flatValue] of Object.entries(flatObj)) {\n            flatObject[`${prefix}.${flatKey}`] = flatValue;\n        }\n    } else if (Array.isArray(value)) {\n        for (const [index, element] of value.entries()) {\n            addToResult(`${prefix}[${index}]`, element, flatObject);\n        }\n\n    } else {\n        flatObject[prefix] = value;\n    }\n}", "import type { ArrayMinLength } from \"@type/ArrayMinLength.js\";\nimport type { GenericObject } from \"@type/GenericObject\";\nimport type { PlainObject } from \"@type/PlainObject.js\";\n\nimport { isPlainObject } from \"@validate/isPlainObject.js\";\n\n/**\n * This function combines two or more objects into a single new object. Arrays and other types are overwritten.\n * \n * @example\n * // ---- Nested objects are merged ----\n * merge({ a: 1 }, { b: 2 }, { c: 3, d: { e: 4 } }) \n * // => { a: 1, b: 2, c: 3, d: { e: 4 } }\n *\n * // ---- Other types are overwritten ----\n * merge({ a: [1, 2] }, { a: [3, 4] })\n * // => { a: [3, 4] }\n * \n * merge({ a: 1 }, { a: \"Yes\" })\n * // => { a: \"Yes\" }\n * @param target The target object\n * @param sources The source objects\n * @template TTarget The type of the target object\n * @template TSources The type of the source objects\n * @returns A new merged object\n */\n\nexport function merge<TTarget extends GenericObject, TSources extends ArrayMinLength<GenericObject, 1>>(target: TTarget, ...sources: TSources): MergeDeepObjects<[TTarget, ...TSources]> {\n    const targetCopy = { ...target };\n    for (const source of sources) {\n        for (const [key, value] of Object.entries(source)) {\n            (targetCopy as PlainObject)[key] = isPlainObject(value) && isPlainObject(targetCopy[key]) \n                ? merge(targetCopy[key], value) \n                : value;\n        }\n    }\n    return targetCopy as MergeDeepObjects<[TTarget, ...TSources]>;  \n}\n\ntype OptionalPropertyNames<T> =\n  { [K in keyof T]-?: (PlainObject extends { [P in K]: T[K] } ? K : never) }[keyof T];\n\ntype SpreadProperties<L, R, K extends keyof L & keyof R> =\n  { [P in K]: L[P] | Exclude<R[P], undefined> };\n\ntype Id<T> = T extends infer U ? { [K in keyof U]: U[K] } : never;\n\ntype SpreadTwo<L, R> = Id<\n& Pick<L, Exclude<keyof L, keyof R>>\n& Pick<R, Exclude<keyof R, OptionalPropertyNames<R>>>\n& Pick<R, Exclude<OptionalPropertyNames<R>, keyof L>>\n& SpreadProperties<L, R, OptionalPropertyNames<R> & keyof L>\n>;\n\ntype MergeDeepObjects<A extends readonly [...unknown[]]> = A extends [infer L, ...infer R] ?\n    SpreadTwo<L, MergeDeepObjects<R>> : unknown;\n", "import type { GenericObject } from \"@type/GenericObject\";\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @example\n * const object = { 'a': 1, 'b': '2', 'c': 3 }\n *\n * pick(object, ['a', 'c'])\n * // => { 'a': 1, 'c': 3 }\n * @param object The source object.\n * @param keysToPick The property paths to pick.\n * @template TObj The type of the object.\n * @returns Returns the new object.\n */\n\nexport function pick<TObj extends GenericObject, Key extends keyof TObj>(object: TObj, keysToPick: Key[]): Pick<TObj, Key> {\n    const result = {} as Pick<TObj, Key>;\n    for (const key of keysToPick) {\n        result[key] = object[key];\n    }\n    return result;\n}\n", "import type { GenericObject } from \"@type/GenericObject\";\n\nimport { difference } from \"@array/difference.js\";\nimport { pick } from \"@object/pick.js\";\n\n/**\n * Omit specified keys from an object\n *\n * @example\n * const obj = {a: 1, b: 2, c: 3};\n * omit(obj, ['a', 'b']);\n * // => {c: 3}\n *\n * @param object The object to filter\n * @param keysToOmit The keys to exclude from the returned object\n * @template TObj The type of the object\n * @returns - An object without the specified keys\n */\n\nexport function omit<TObj extends GenericObject, Key extends keyof TObj>(object: TObj, keysToOmit: Key[]): Omit<TObj, Key> {\n    const allKeys = Object.keys(object);\n    const filteredKeys = difference(allKeys, keysToOmit as string[]) as Exclude<keyof TObj, Key>[];\n\n    return pick(object, filteredKeys);\n}", "import type { GenericObject } from \"@type/GenericObject\";\nimport type { PlainObject } from \"@type/PlainObject.js\";\nimport type { Call, Objects } from \"hotscript\";\n\nimport { isPlainObject } from \"@validate/isPlainObject.js\";\n\nconst validPathRegex = /^[^.[\\]]+(?:\\.[^.[\\]]+)*(?:\\[\\d+])*(?:\\.[^.[\\]]+(?:\\[\\d+])*)*$/;\nconst pathSplitRegex = /\\.|(?=\\[)/g;\nconst matchBracketsRegex = /[[\\]]/g;\n\n// eslint-disable-next-line @typescript-eslint/ban-types\ntype Paths<TObj> = Call<Objects.AllPaths, TObj> | string & {};\ntype UpdateObj<TObj extends PlainObject, TPath extends string, TVal> = Call<Objects.Update<TPath, TVal>, TObj>;\n\n/**\n * Sets the value at path of object. If a portion of path doesnt exist, its created.\n * \n * @example\n * const obj = { a: { b: 2 } };\n * set(obj, 'a.c', 1);\n * // => { a: { b: 2, c: 1 } }\n * \n * // `[number]` can be used to access array elements\n * set(obj, 'a.c[0]', 'hello');\n * // => { a: { b: 2, c: ['hello'] } }\n * \n * // numbers with dots are treated as keys\n * set(obj, 'a.c.0.d', 'world');\n * // => { a: { b: 2, c: { 0: { d: 'world' } } }\n * \n * // supports numbers in keys\n * set(obj, 'a.e0.a', 1);\n * // => { a: { e0: { a: 1 } } }\n * \n * @param obj The object to modify.\n * @param path The path of the property to set.\n * @param value The value to set.\n * @template TObj The type of the object.\n * @template TPath The type of the object path.\n * @template TVal The type of the value to set.\n * @returns The modified object.\n */\n\nexport function set<TObj extends GenericObject, TPath extends Paths<TObj>, TVal>(obj: TObj, path: TPath, value: TVal): UpdateObj<TObj, TPath, TVal> {\n    if (!validPathRegex.test(path))\n        throw new Error(\"Invalid path, look at the examples for the correct format.\");\n\n    const pathParts = (path as string).split(pathSplitRegex);\n    let currentObj: PlainObject = obj;\n\n    for (let index = 0; index < pathParts.length; index++) {\n        const key = pathParts[index].replace(matchBracketsRegex, \"\");\n\n        if (index === pathParts.length - 1) {\n            currentObj[key] = value;\n            break;\n        }\n\n        const nextElementInArray = pathParts[index + 1].startsWith(\"[\");\n        const nextElementInObject = !nextElementInArray;\n\n        if (nextElementInArray && !Array.isArray(currentObj[key])) {\n            currentObj[key] = [];\n        }\n\n        if (nextElementInObject && !isPlainObject(currentObj[key])) {\n            currentObj[key] = {};\n        }\n        \n        currentObj = currentObj[key] as PlainObject;\n    }\n\n    return obj as UpdateObj<TObj, TPath, TVal>;\n}", "/**\n * A class managing an async function queue with limited concurrency (e.g., 10 functions with 3 running at a time).\n * \n * **Methods:**\n * - `add` - Adds an async function or array of functions to the queue. Returns a promise that resolves or rejects when the added function(s) finish.\n * - `clear` - Clears the queue.\n * - `pause` - Pauses the queue.\n * - `resume` - Resumes the queue. \n * - `getQueue` - Returns the current queue.\n * - `isPaused` - Returns whether the queue is paused.\n * - `done` - Returns a promise resolving when all added tasks are finished. Individual rejections don't affect the done() promise.\n * \n * @example\n * // Create a queue that can run 3 tasks concurrently\n * const queue = new Queue(3);\n * \n * queue.add(() => fetch('https://example.com'));\n * \n * queue.add(async () => {\n *   const response = await fetch('https://example.com');\n *   return response.json();\n * });\n * \n * await queue.done();\n * console.log(\"All tasks finished\");\n * \n * // Add an array of tasks to the queue and wait for them to resolve\n * await queue.add([\n *   () => fetch('https://apple.com'),\n *   () => fetch('https://microsoft.com')\n * ]);\n * // => [Response, Response]\n */\n\nexport class Queue {\n    private running = 0;\n    private maxConcurrent: number;\n    private paused = false;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private queue: { asyncFn: () => Promise<any>, resolve: (value: any) => void, reject: (reason?: any) => void }[] = [];\n    private finishedPromise: Promise<boolean> | undefined;\n    private finishedResolver: (() => void) | undefined;\n\n    /**\n     * @constructor\n     * @param maxConcurrent The maximum number of async functions to run concurrently.\n     */\n    constructor(maxConcurrent: number) {\n        this.maxConcurrent = maxConcurrent;\n    }\n\n    /**\n     * Add async functions or an array of async functions to the queue.\n     * \n     * @param asyncFn The async function(s) to add to the queue.\n     * @returns A promise that resolves when the added function(s) finishes.\n     */\n    add<TProm, TAsyncFn extends () => Promise<TProm>>(asyncFn: TAsyncFn): Promise<TProm>;\n    add<TProm, TAsyncFn extends () => Promise<TProm>>(asyncFn: TAsyncFn[]): Promise<TProm[]>;\n    add<TProm, TAsyncFn extends () => Promise<TProm>>(asyncFn: TAsyncFn | TAsyncFn[]): Promise<TProm> | Promise<TProm[]> {\n        if (Array.isArray(asyncFn)) {\n            const promises = asyncFn.map((fn) => this.buildWaitingPromise(fn));\n            return Promise.all(promises);\n        } else {\n            return this.buildWaitingPromise(asyncFn);\n        } \n    }\n\n    private buildWaitingPromise<TProm>(asyncFn: () => Promise<TProm>): Promise<TProm> {\n        return new Promise((resolve, reject) => {\n            this.queue.push({ asyncFn, resolve, reject });\n            this.run();\n        });\n    }   \n\n    private run() {\n        while (this.queue.length > 0 && this.running < this.maxConcurrent && !this.paused) {\n            this.running++;\n            const queueElement = this.queue.shift()!;\n            void queueElement.asyncFn()\n                .then((result) => {\n                    queueElement.resolve(result);\n                }).catch((error) => {\n                    queueElement.reject(error);\n                }).finally(() => {\n                    this.running--;\n                    this.run();\n                });\n        }\n\n        this.checkIfDone();\n    }\n\n    /** Removes all the tasks from the queue */\n    clear() {\n        for (const queueElement of this.queue) {\n            queueElement.reject(new Error(\"Queue cleared\"));\n        }\n        this.queue = [];\n    }\n\n    /** Pauses the execution of the queue */\n    pause() {\n        this.paused = true;\n    }\n\n    /** Resumes the execution of the tasks in the queue */\n    resume() {\n        this.paused = false;\n        this.run();\n    }\n\n    /** Return the tasks added to the queue */\n    getQueue() {\n        return this.queue.map((queueElement) => queueElement.asyncFn);\n    }\n\n    /** Returns whether the queue is paused */\n    isPaused() {\n        return this.paused;\n    }\n\n    /** Returns a shared promise that resolves when the queue is empty and all tasks have finished executing. */\n    done() {\n        if (this.queue.length === 0 && this.running === 0)\n            return Promise.resolve(true);\n        \n        this.finishedPromise ??= new Promise(resolve => this.finishedResolver = () => resolve(true));\n        return this.finishedPromise;\n    }\n\n    private checkIfDone() {\n        if (this.queue.length === 0 && this.running === 0 && this.finishedResolver) {\n            this.finishedResolver();\n            this.finishedPromise = undefined;\n            this.finishedResolver = undefined;\n        }\n    }\n}\n", "/**\n * Similar to [Promise.race](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/race?retiredLocale=de) \n * but allows to specify how many promises to wait for.\n *\n * @example\n * const prom1 = Promise.resolve(1);\n * const prom2 = new Promise(resolve => setTimeout(resolve, 100, 2));\n * const prom3 = Promise.resolve(3);\n * \n * const firstTwo = await races(2, prom1, prom2, prom3);\n * // => [1, 3]\n * \n * @template TRes The type of the result of the promises.\n * @param waitFor The number of promises to wait for.\n * @param promises The promises to wait for.\n * @returns A promise that resolves an array of the results of the first n promises.\n */\n\nexport function races<TRes>(waitFor: number, ...promises: Promise<TRes>[]): Promise<TRes[]> {\n    return new Promise((resolve, reject) => {\n        if (promises.length < waitFor)\n            waitFor = promises.length;\n\n        const results: TRes[] = [];\n        let resolved = 0;\n        for (const promise of promises) {\n            promise.then((value) => {\n                results.push(value);\n                resolved++;\n                if (resolved >= waitFor) {\n                    resolve(results);\n                }\n            }).catch((error) => {\n                reject(error);\n            });\n        }\n    });\n}", "/**\n * Sleeps for the given amount of time.\n *\n * @example\n * await sleep(1000);\n * // => Waits for 1 second.\n * @param ms  Amount of time to sleep in milliseconds.\n * @returns A promise that resolves after the given amount of time.\n */\nexport function sleep(ms: number) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n}", "/* eslint-disable no-await-in-loop */\nimport { sleep } from \"@promise/sleep.js\";\n\n/**\n * Retry a function until it succeeds or the maximum number of retries is reached.\n * \n * Default maxRetries: `5`.  \n * Default backoff: `2^retries * 100ms` (100, 200, 400, 800, 1600, 3200, ...)\n *\n * @example\n * await retry(() => fetch('https://example.com'));\n * \n * // ---- Advanced example ----\n * const fetchSite = async () => {\n *   const response = await fetch('https://example.com');\n *   if(!response.ok)\n *     throw new Error('Failed to fetch');\n * }\n * \n * const logger = (error: unknown, retry?: number) => console.log(\"Retrying\", retry, error);\n * \n * await retry(fetchSite, { maxRetries: 3, backoff: retries => retries * 1000, onRetry: logger });\n * // => Will retry 3 times with a 1 second delay between each retry.\n * // => Will log the error and retry number.\n * \n * @param func The function to retry.\n * @param options The options for the retry.\n * @param options.maxRetries The maximum number of retries. Defaults to `5`.\n * @param options.backoff The backoff function to use. Defaults to `2^retries * 100`.\n * @param options.onRetry The function to call when a retry is attempted. It will be called with the error and the attempt number.\n * @template TRes The type of the result of the function.\n * @returns A promise that resolves when the function succeeds.\n */\n\nexport async function retry<TRes>(\n    func: () => Promise<TRes>, \n    options?: { \n        maxRetries?: number,\n        backoff?: ((retries: number) => number),\n        onRetry?: (error?: unknown, attempted?: number) => void\n    }\n): Promise<TRes> {\n    const backOffFn = options?.backoff ?? (retries => (2 ** retries) * 100);\n    const maxRetries = options?.maxRetries ?? 5;\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    const onRetry = options?.onRetry ?? (() => {});\n    let retries = 0;\n    let lastError: unknown;\n\n    while (retries <= maxRetries) {\n        try {\n            if (retries > 0)\n                onRetry(lastError, retries);\n            return await func();\n        } catch (error) {\n            lastError = error;\n            retries++;\n            if (retries > maxRetries) {\n                throw error;\n            }\n            await sleep(backOffFn(retries));\n        }\n    /* c8 ignore next 3 */\n    }\n    throw new Error(\"Retry terminated without success, this should never happen\");\n}", "/**\n * Returns a new promise that will reject with an error after a specified timeout.  \n *\n * @example\n * try {\n *   await timeout(fetch('https://example.com'), 1000);\n * } catch (error) {\n *   console.log(error.message);\n *   // => 'Promise timed out after 1000ms'\n * }\n * @template TRes - The type of the resolved value.\n * @param promise The promise to wrap.\n * @param timeout The timeout in milliseconds.\n * \n * @returns A new promise that will reject with an error after the specified timeout.\n */\nexport function timeout<TRes>(promise: Promise<TRes>, timeout: number): Promise<TRes> {\n    return new Promise((resolve, reject) => {\n        const timeoutId = setTimeout(() => {\n            reject(new Error(`Promise timed out after ${timeout}ms`));\n        }, timeout);\n  \n        promise.then(\n            (result) => {\n                clearTimeout(timeoutId);\n                resolve(result);\n            },\n            (error) => {\n                clearTimeout(timeoutId);\n                reject(error);\n            }\n        );\n    });\n}", "/**\n * Attempts to execute a promise and returns an array with the result or error.\n * \n * This is useful for handling errors in async functions without try/catch blocks.\n * \n * @example\n * ```typescript\n * const [data, error] = await tryCatch(fetch('https://example.com/api'));\n * if (error)\n *   console.error(`Error: ${error.message}`);\n * ```\n * @param promise A Promise to be executed.\n * @returns A Promise that resolves to an array containing the result or error.  \n * If the Promise executes successfully, the array contains the result and a null error.  \n * If the Promise throws an error, the array contains undefined for the result and the error object.\n *\n * @template TRes The type of the result.\n */\n\nexport async function tryCatch<TRes>(promise: Promise<TRes>): Promise<[TRes, undefined] | [undefined, Error]> {\n    try {\n        const data = await promise;\n        return [data, undefined];\n    } catch (error) {\n        if (error instanceof Error)\n            return [undefined, error];\n\n        throw error;\n    }\n}", "const wordsRegex = /(?:\\d*[a-z]+)|(?:[A-Z][a-z]+)|(?:\\d*[A-Z]+(?=[^a-z]|$))|\\d+/g;\n\n/**\n * Split a string into words. Can deal with camelCase, PascalCase & snake_case.\n * \n * @example\n * splitWords('camelCase')\n * // => ['camel', 'Case']\n * \n * splitWords('PascalCase')\n * // => ['Pascal', 'Case']\n * \n * splitWords('hello_world-123')\n * // => ['hello', 'world', '123']\n * \n * @param str The string to split into words.\n * @returns An array of words.\n */\n\nexport function splitWords(str: string): string[] {\n    return str.match(wordsRegex) ?? [];\n}", "/**\n * Converts the first character of a string to upper case and the remaining to lower case.\n *\n * @example\n * capitalize('FRED')\n * // => 'Fred'\n * @param str The string to capitalize.\n * @returns Returns the capitalized string.\n */\n\nexport function capitalize(str: string): string {\n    if (str === \"\") return \"\";\n    return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n}\n", "const accentControlRegex = /[\\u0300-\\u036F]/g;\n\n/**\n * Deburrs a string by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @example\n * deburr('dj vu')\n * // => 'deja vu'\n * @param str The string to deburr.\n * @returns Returns the deburred string.\n */\n\nexport function deburr(str: string): string {\n    return str.normalize(\"NFD\").replace(accentControlRegex, \"\");\n}\n", "import { splitWords } from \"@string/splitWords\";\n\nimport { capitalize } from \"./capitalize.js\";\nimport { deburr } from \"./deburr.js\";\n\n/**\n * Converts `string` to camelCase.\n *\n * @example\n * camelCase('Foo Bar')\n * // => 'fooBar'\n * camelCase('--foo-bar--')\n * // => 'fooBar'\n * camelCase('__FOO_BAR__')\n * // => 'fooBar'\n * @param str The string to convert.\n * @returns Returns the camel cased string.\n */\n\nexport function camelCase(str: string): string {\n    if (str === \"\") return \"\";\n\n    str = deburr(str);\n    const words = splitWords(str);\n\n    if (words.length === 0) return \"\";\n    let camelCase = words[0].toLowerCase();\n\n    // Start the loop from the second word\n    for (let index = 1; index < words.length; index++) {\n        const word = words[index];\n        camelCase += capitalize(word);\n    }\n\n    return camelCase;\n}", "const charRegex = /[\"&'<>]/g;\nconst escapeChars = new Map([\n    [\"&\", \"&amp;\"],\n    [\"<\", \"&lt;\"],\n    [\">\", \"&gt;\"],\n    [\"'\", \"&#39;\"],\n    ['\"', \"&quot;\"]\n]);\n\n/**\n * Converts the characters `&`, `<`, `>`, `\"` and `'` in a string to their corresponding HTML entities.\n *\n * @example\n * escapeHtml('fred, barney, & pebbles')\n * // => 'fred, barney, &amp; pebbles'\n * @param str The string to escape.\n * @returns Returns the escaped string.\n */\n\nexport function escapeHtml(str: string): string {\n    return str.replace(charRegex, char => escapeChars.get(char)!);\n}\n", "const escapeCharsRegex = /[$()*+.?[\\\\\\]^{|}]/g;\n\n/**\n * Escapes the `RegExp` special characters `^`, `$`, `\\`, `.`, `*`, `+`,\n * `?`, `(`, `)`, `[`, `]`, `{`, `}`, and `|` in a string.\n *\n * @example\n * escapeRegExp('[moderndash](https://moderndash.io/)')\n * // => '\\[moderndash\\]\\(https://moderndash\\.io/\\)'\n * @param str The string to escape.\n * @returns Returns the escaped string.\n */\n\nexport function escapeRegExp(str: string): string {\n    return str.replace(escapeCharsRegex, \"\\\\$&\");\n}\n", "import { splitWords } from \"@string/splitWords\";\n\nimport { deburr } from \"./deburr.js\";\n\n/**\n * Converts a string to kebab-case.\n *\n * @example\n * kebabCase('Foo Bar')\n * // => 'foo-bar'\n * kebabCase('fooBar')\n * // => 'foo-bar'\n * kebabCase('__FOO_BAR__')\n * // => 'foo-bar'\n * \n * @param str The string to convert.\n * @returns Returns the kebab cased string.\n */\n\nexport function kebabCase(str: string): string {\n    if (str === \"\") return \"\";\n    \n    str = deburr(str);\n    const words = splitWords(str);\n    let kebabCase = \"\";\n    for (const word of words) {\n        kebabCase += word.toLowerCase() + \"-\";\n    }\n    return kebabCase.slice(0, -1);\n}\n", "import { splitWords } from \"@string/splitWords\";\n\nimport { capitalize } from \"./capitalize.js\";\nimport { deburr } from \"./deburr.js\";\n\n\n/**\n * Converts a string to PascalCase.\n *\n * @example\n * pascalCase('Foo Bar')\n * // => 'FooBar'\n * pascalCase('fooBar')\n * // => 'FooBar'\n * pascalCase('__FOO_BAR__')\n * // => 'FooBar'\n * \n * @param str The string to convert.\n * @returns Returns the pascal cased string.\n */\n\nexport function pascalCase(str: string): string {\n    if (str === \"\") return \"\";\n    \n    str = deburr(str);\n    const words = splitWords(str);\n    let pascalCase = \"\";\n    for (const word of words) {\n        pascalCase += capitalize(word);\n    }\n    return pascalCase;\n}\n", "/**\n * Replaces the last occurrence of a string.\n * \n * @example\n * ```typescript\n * replaceLast(\"Foo Bar Bar\", \"Bar\", \"Boo\"); \n * // => \"Foo Bar Boo\"\n * ```\n * \n * @param str The string to replace in.\n * @param searchFor The string to search for.\n * @param replaceWith The string to replace with.\n * @returns The replaced string.\n */\n\nexport function replaceLast(str: string, searchFor: string, replaceWith: string): string {\n    const index = str.lastIndexOf(searchFor);\n\n    if (index === -1)\n        return str;\n\n    return str.slice(0, index) + replaceWith + str.slice(index + searchFor.length);\n}", "import { splitWords } from \"@string/splitWords\";\n\nimport { deburr } from \"./deburr.js\";\n\n/**\n * Converts a string to snake_case.\n *\n * @example\n * snakeCase('Foo Bar')\n * // => 'foo_bar'\n * snakeCase('fooBar')\n * // => 'foo_bar'\n * snakeCase('--FOO-BAR--')\n * // => 'foo_bar'\n * snakeCase('foo2bar')\n * // => 'foo_2_bar'\n * \n * @param str The string to convert.\n * @returns Returns the snake cased string.\n */\n\nexport function snakeCase(str: string): string {\n    if (str === \"\") return \"\";\n    \n    str = deburr(str);\n    const words = splitWords(str);\n    let snakeCase = \"\";\n    for (const word of words) {\n        if (snakeCase.length > 0) {\n            snakeCase += \"_\";\n        }\n        snakeCase += word.toLowerCase();\n    }\n    return snakeCase;\n}\n", "import { splitWords } from \"@string/splitWords\";\n\nimport { capitalize } from \"./capitalize.js\";\nimport { deburr } from \"./deburr.js\";\n\n/**\n * Converts a string to Title Case.\n *\n * @example\n * titleCase('--foo-bar--')\n * // => 'Foo Bar'\n * titleCase('fooBar')\n * // => 'Foo Bar'\n * titleCase('__FOO_BAR__')\n * // => 'Foo Bar'\n * titleCase('HlloWorld')\n * // => 'Hello World'\n * @param str The string to convert.\n * @returns Returns the title cased string.\n */\n\nexport function titleCase(str: string): string {\n    if (str === \"\") return \"\";\n\n    str = deburr(str);\n    const words = splitWords(str);\n    let titleCase = \"\";\n    for (const word of words) {\n        titleCase += capitalize(word) + \" \";\n    }\n    return titleCase.trimEnd();\n}\n", "/**\n * Trim the string from the left and right by the given characters\n * \n * *Use the native [trim](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim) method if you want to trim whitespace.*\n * @example\n * ```ts\n * trim('$$abc$', '$') // => 'abc'\n * trim('!!abc_!', '_!') // => 'abc'\n * ```\n * @param str The string to trim\n * @param chars The characters to trim\n * @returns The trimmed string\n */\n\nexport function trim(str: string, chars: string): string {\n    let startIndex = 0;\n    while (startIndex < str.length && chars.includes(str[startIndex])) {\n        startIndex++;\n    }\n  \n    let endIndex = str.length - 1;\n    while (endIndex >= startIndex && chars.includes(str[endIndex])) {\n        endIndex--;\n    }\n  \n    return str.slice(startIndex, endIndex + 1);\n}", "/**\n * Trims the specified characters from the end of the string.\n * \n * *Use the native [trimEnd](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimEnd) method if you want to trim whitespace.*\n * @example\n * ```ts\n * trimEnd('abc$$$', '$') // => 'abc'\n * trimEnd('abc_!!_', '_!') // => 'abc'\n * ```\n * @param str The string to trim\n * @param chars The characters to trim\n * @returns The trimmed string\n */\n\nexport function trimEnd(str: string, chars: string): string {\n    let lastIndex = str.length - 1;\n    while (lastIndex >= 0 && chars.includes(str[lastIndex])) {\n        lastIndex--;\n    }\n    return str.slice(0, lastIndex + 1);\n\n}", "/**\n * Trims specified characters from the start of the string.\n * \n * *Use the native [trimStart](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trimStart) method if you want to trim whitespace.*\n * @example\n * ```ts\n * trimStart('$$$abc', '$') // => 'abc'\n * trimStart('_!!_abc', '_!') // => 'abc'\n * ```\n * @param str The string to trim\n * @param chars The characters to trim\n * @returns The trimmed string\n */\n\nexport function trimStart(str: string, chars: string): string {\n    let startIndex = 0;\n    while (startIndex < str.length && chars.includes(str[startIndex])) {\n        startIndex++;\n    }\n    return str.slice(startIndex);\n}", "/**\n * Truncates a string if it's longer than the given maximum length.\n * The last characters of the truncated string are replaced with the ellipsis\n * string which defaults to \"...\".\n *\n * @example\n * truncate(\"Hello, world!\", { length: 5 })\n * // => \"Hello...\"\n * \n * truncate(\"Hello, world!\", { length: 5, ellipsis: \" [...]\" })\n * // => \"Hello [...]\"\n * \n * truncate(\"Hello, world!\", { length: 5, separator: \" \" })\n * // => \"Hello, ...\"\n * \n * @param str The string to truncate\n * @param options The options object\n * @param options.length The maximum string length (default: 30)\n * @param options.ellipsis The string to indicate text is omitted (default: \"...\")\n * @param options.separator The separator pattern to truncate to (default: none)\n * @returns The truncated string\n */\n\nexport function truncate(str: string, options?: { length?: number; ellipsis?: string; separator?: string }): string {\n    const { length = 30, ellipsis = \"...\", separator } = options ?? {};\n    if (str.length <= length) return str;\n\n    const end = length - ellipsis.length;\n\n    if (end < 1) \n        return ellipsis;\n\n    // Actually long enough to truncate the string\n    let truncated = str.slice(0, end);\n\n    if (separator) {\n        const sepIndex = truncated.lastIndexOf(separator);\n        if (sepIndex > -1) {\n            truncated = truncated.slice(0, sepIndex);\n        }\n    }\n\n    return truncated + ellipsis;\n}\n", "const htmlEntitiesRegex = /&(?:amp|lt|gt|quot|#39);/g;\nconst entityMap = new Map([\n    [\"&amp;\", \"&\"],\n    [\"&lt;\", \"<\"],\n    [\"&gt;\", \">\"],\n    [\"&quot;\", '\"'],\n    [\"&#39;\", \"'\"]\n]);\n\n/**\n * Converts the HTML entities `&amp;`, `&lt;`, `&gt;`, `&quot;` and `&#39;`\n * in a string to their corresponding characters.\n *\n * @example\n * unescapeHtml('fred, barney, &amp; pebbles')\n * // => 'fred, barney, & pebbles'\n * @param str The string to unescape.\n * @returns Returns the unescaped string.\n */\n\nexport function unescapeHtml(str: string): string {\n    return str.replace(htmlEntitiesRegex, (entity: string) => entityMap.get(entity)!);\n}\n", "\n/**\n * Checks if a value is empty.\n * \n * Supports: strings, arrays, objects, maps, sets, typed arrays.\n * @example\n * isEmpty(null)\n * // => true\n *\n * isEmpty({})\n * // => true\n *\n * isEmpty(\"\")\n * // => true\n *\n * isEmpty([1, 2, 3])\n * // => false\n *\n * isEmpty('abc')\n * // => false\n *\n * isEmpty({ 'a': 1 })\n * // => false\n * @param value The value to check.\n * @returns Returns `true` if `value` is empty, else `false`.\n */\n\nexport function isEmpty(value: string | object | null | undefined): boolean {\n    if (value === null || value === undefined)\n        return true;\n\n    if (typeof value === \"string\" || Array.isArray(value))\n        return value.length === 0;\n\n    if (value instanceof Map || value instanceof Set)\n        return value.size === 0;\n\n    if (ArrayBuffer.isView(value))\n        return value.byteLength === 0;\n\n    if (typeof value === \"object\")\n        return Object.keys(value).length === 0;\n\n    return false;\n}\n", "/* eslint-disable complexity */\nimport type { PlainObject } from \"@type/PlainObject.js\";\n\nimport { isPlainObject } from \"./isPlainObject.js\";\n\ntype TypedArray = Int8Array | Uint8Array | Uint8ClampedArray | Int16Array | Uint16Array | Int32Array | Uint32Array | Float32Array | Float64Array;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n * \n * Supports: primitives, arrays, objects, dates, regexes, maps, sets, buffers, typed arrays\n * \n * @example\n * const object = { a: { b: 2 } };\n * const other = { a: { b: 2 } };\n *\n * isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n * @param a The value to compare.\n * @param b The other value to compare.\n * @returns Returns `true` if the values are equivalent, else `false`.\n */\n\nexport function isEqual(a: unknown, b: unknown): boolean {\n    if (Object.is(a, b)) return true;\n    \n    if (typeof a !== typeof b) return false;\n\n    if (Array.isArray(a) && Array.isArray(b))\n        return isSameArray(a, b);\n\n    if (a instanceof Date && b instanceof Date)\n        return a.getTime() === b.getTime();\n\n    if (a instanceof RegExp && b instanceof RegExp)\n        return a.toString() === b.toString();\n\n    if (isPlainObject(a) && isPlainObject(b))\n        return isSameObject(a, b);\n\n    if (a instanceof ArrayBuffer && b instanceof ArrayBuffer)\n        return dataViewsAreEqual(new DataView(a), new DataView(b));\n\n    if (a instanceof DataView && b instanceof DataView)\n        return dataViewsAreEqual(a, b);\n\n    if (isTypedArray(a) && isTypedArray(b)) {\n        if (a.byteLength !== b.byteLength) return false;\n        return isSameArray(a, b);\n    }\n\n    return false;\n}\n\nfunction isSameObject(a: PlainObject, b: PlainObject) {\n    // check if the objects have the same keys\n    const keys1 = Object.keys(a);\n    const keys2 = Object.keys(b);\n    if (!isEqual(keys1, keys2)) return false;\n\n    // check if the values of each key in the objects are equal\n    for (const key of keys1) {\n        if (!isEqual(a[key], b[key])) return false;\n    }\n\n    // the objects are deeply equal\n    return true;\n}\n\nfunction isSameArray(a: unknown[] | TypedArray, b: unknown[] | TypedArray) {\n    if (a.length !== b.length) return false;\n    return a.every((element, index) => isEqual(element, b[index]));\n}\n\nfunction dataViewsAreEqual(a: DataView, b: DataView) {\n    if (a.byteLength !== b.byteLength) return false;\n    for (let offset = 0; offset < a.byteLength; offset++) {\n        if (a.getUint8(offset) !== b.getUint8(offset)) return false;\n    }\n    return true;\n}\n\nfunction isTypedArray(value: unknown): value is TypedArray {\n    return ArrayBuffer.isView(value) && !(value instanceof DataView);\n}", "/**\n * Checks if given string is a valid URL\n * \n * @deprecated \n * **Deprecated: Use the native \"URL.canParse\" method instead.**\n * \n * @example\n * isUrl('https://google.com')\n * // => true\n * isUrl('google.com')\n * // => false\n * @param str The string to check.\n * @returns Returns `true` if given string is a valid URL, else `false`.\n */\n\nexport function isUrl(str: string): boolean {\n    try {\n        new URL(str);\n        return true;\n    } catch {\n        return false;\n    }\n}", "import { CustomPostDefinition, UIResponse } from '@devvit/protos';\nimport { Devvit } from '../Devvit.js';\nimport { BlocksHandler } from './blocks/handler/BlocksHandler.js';\nimport { extendDevvitPrototype } from './helpers/extendDevvitPrototype.js';\nimport { makeUpgradeAppComponent, parseDevvitUserAgent, shouldShowUpgradeAppScreen, } from './upgrade-app-shim.js';\nconst FeatureUnavailable = () => (Devvit.createElement(\"vstack\", { alignment: \"center middle\", width: \"100%\", height: \"100%\" },\n    Devvit.createElement(\"text\", null, \"This feature is not available yet\")));\n/**\n * Extend me to add new surfaces to Devvit.\n */\nconst UIComponentBindings = [\n    [\n        CustomPostDefinition,\n        CustomPostDefinition.methods['renderPostContent'],\n        (_props, context) => Devvit.customPostType?.render(context) ?? null,\n    ],\n    [\n        CustomPostDefinition,\n        CustomPostDefinition.methods['renderPostComposer'],\n        (_props, _context) => Devvit.createElement(FeatureUnavailable, null),\n    ],\n];\nexport function makeHandler(component) {\n    return async (req, metadata) => {\n        const parsedUserAgent = parseDevvitUserAgent(metadata['devvit-user-agent']?.values?.[0] ?? '');\n        if (parsedUserAgent && shouldShowUpgradeAppScreen(parsedUserAgent)) {\n            const handler = new BlocksHandler(makeUpgradeAppComponent(parsedUserAgent.platform));\n            return UIResponse.fromJSON(await handler.handle(req, metadata));\n        }\n        const handler = new BlocksHandler(component);\n        return UIResponse.fromJSON(await handler.handle(req, metadata));\n    };\n}\nexport function registerUIRequestHandlers(config) {\n    for (const [definition, method, component] of UIComponentBindings) {\n        config.provides(definition);\n        extendDevvitPrototype(method.name, makeHandler(component));\n    }\n}\n", "var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _BlocksHandler_instances, _BlocksHandler_root, _BlocksHandler_contextBuilder, _BlocksHandler_blocksTransformer, _BlocksHandler_debug_get, _BlocksHandler_loadHooks, _BlocksHandler_handleAsyncQueues, _BlocksHandler_attemptHook, _BlocksHandler_handleMainQueue, _BlocksHandler_renderRoot, _BlocksHandler_render, _BlocksHandler_renderList, _BlocksHandler_renderElement, _BlocksHandler_reifyProps;\nimport { UIEventScope, } from '@devvit/protos';\nimport { isCircuitBreaker } from '@devvit/shared-types/CircuitBreaker.js';\nimport { BlocksTransformer } from '../BlocksTransformer.js';\nimport { ContextBuilder } from './ContextBuilder.js';\nimport { _isTombstone, RenderContext } from './RenderContext.js';\nimport { RenderInterruptError } from './types.js';\n/**\n * This can be a global/singleton because render is synchronous.\n *\n * If you want to use this from somewhere else, please consider using one of the\n * functions like isRendering or registerHook, and then try to add additional\n * functions here if needed.  Don't use this directly.\n */\nexport let _activeRenderContext = null;\nexport function useEffectEmitter() {\n    if (!_activeRenderContext) {\n        throw new Error('Hooks can only be declared at the top of a component.');\n    }\n    return _activeRenderContext;\n}\nexport function isRendering() {\n    return _activeRenderContext !== null;\n}\nfunction _structuredClone(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\n/**\n * See [HookSegment](./types.ts) for more information.\n */\nexport function assertValidNamespace(input) {\n    const regex = /[-.]/;\n    const valid = input !== '' && !regex.test(input);\n    if (!valid) {\n        throw new Error(`Hook with namespace '${input}' is invalid. Hook namespaces cannot be empty string or contain dashes/dots because they are used as delimiters internally. Please update the hook namespace and try again.`);\n    }\n}\n/**\n * This can get called multiple times in a given render. Initialize is only called once!\n *\n * This is the recommended low-level interface for creating hooks like useState or useAsync.\n *\n * Practically, this initializes your hook if it doesn't already exist, and makes sure\n * that its state gets all sync'd up.\n *\n * @param HookSegment -- A name for this hook.  This is used to dedupe hooks.\n * @param initializer\n *    factory for building this hook\n * @returns\n */\nexport function registerHook({ initializer, ...hookSegment }) {\n    if (!_activeRenderContext) {\n        throw new Error(\"Hooks can only be declared at the top of a component.  You cannot declare hooks outside of components or inside of event handlers.  It's almost always a mistake to declare hooks inside of loops or conditionals.\");\n    }\n    assertValidNamespace(hookSegment.namespace);\n    const hookId = _activeRenderContext.nextHookId(hookSegment);\n    const context = _activeRenderContext;\n    const params = {\n        hookId,\n        invalidate: () => {\n            context._changed[hookId] = true;\n            context._state[hookId] = context?._hooks[hookId]?.state;\n        },\n        context: _activeRenderContext,\n    };\n    const fromNull = _activeRenderContext._state[hookId] === undefined ||\n        _isTombstone(_activeRenderContext._state[hookId]);\n    _activeRenderContext._hooks[hookId] = _activeRenderContext._hooks[hookId] ?? initializer(params);\n    const hook = _activeRenderContext._hooks[hookId];\n    if (!fromNull) {\n        hook.state = _activeRenderContext._state[hookId];\n    }\n    hook.onStateLoaded?.();\n    if (fromNull && hook.state !== undefined && hook.state !== null) {\n        params.invalidate();\n    }\n    return hook;\n}\nexport let _latestBlocksHandler = null;\n/**\n * Limit the number of render cycles to prevent infinite loops.\n */\nconst MaxIterations = 128;\n/**\n * Replacing BlocksReconciler, the model is now less of a \"reconciliation\", and more\n * of a handling a request/response lifecycle.\n *\n */\nexport class BlocksHandler {\n    constructor(root) {\n        _BlocksHandler_instances.add(this);\n        _BlocksHandler_root.set(this, void 0);\n        _BlocksHandler_contextBuilder.set(this, new ContextBuilder());\n        _BlocksHandler_blocksTransformer.set(this, new BlocksTransformer(() => this._latestRenderContext?.devvitContext?.assets));\n        this._latestRenderContext = null;\n        if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n            console.debug('[blocks] BlocksHandler v1');\n        __classPrivateFieldSet(this, _BlocksHandler_root, root, \"f\");\n        _latestBlocksHandler = this;\n    }\n    async handle(request, metadata) {\n        const context = new RenderContext(request, metadata);\n        const devvitContext = __classPrivateFieldGet(this, _BlocksHandler_contextBuilder, \"f\").buildContext(context, request, metadata);\n        context.devvitContext = devvitContext;\n        let blocks;\n        /**\n         * Events on the main queue must be handled in order, so that state is updated in the correct order.  Events\n         * on other queues can be handled in parallel, because they only emit effects.\n         *\n         * There is an optimization here to process SendEventEffects locally, instead of letting them bubble up to the\n         * platform.  This prevents a round trip to the platform for every event.\n         *\n         * This also means we need to respect execution queues here, and not just in the platform.\n         */\n        const drop = request.events.length - MaxIterations;\n        let eventsToProcess = request.events;\n        if (drop > 0) {\n            eventsToProcess = [];\n            // Filter out old realtime messages until drop is met.\n            {\n                let dropped = 0;\n                for (const ev of request.events) {\n                    if (dropped < drop && ev.realtimeEvent)\n                        dropped++;\n                    else\n                        eventsToProcess.push(ev);\n                }\n            }\n            // Filter out _any_ old remaining messages until drop is met.\n            while (eventsToProcess.length > MaxIterations)\n                eventsToProcess.shift();\n            console.warn(`dropped ${drop} events`);\n        }\n        const noEvents = !eventsToProcess.length;\n        const isMainQueue = noEvents || eventsToProcess.some((e) => !e.async);\n        const isBlockingSSR = eventsToProcess.some((e) => e.blocking);\n        let changed;\n        let progress;\n        let remaining = [...eventsToProcess];\n        /**\n         * When purely rendering, we now add one synthetic event.  This enables us to loop over the events that an initial render may generate\n         * in an async world.  This is a bit of a hack, but it's the simplest way to handle this.\n         */\n        if (eventsToProcess.length === 0) {\n            eventsToProcess.push({\n                scope: UIEventScope.ALL,\n            });\n        }\n        if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n            console.debug('[blocks] starting processing events');\n        let iterations = 0;\n        while (eventsToProcess.length > 0) {\n            if (iterations++ > MaxIterations) {\n                throw new Error(`Exceeded maximum iterations of ${MaxIterations}`);\n            }\n            if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n                console.debug('[blocks] processing events loop iteration', eventsToProcess.length);\n            /**\n             * A concurrently executable batch is a set of events that can be executed in parallel.  This either one main queue event,\n             * or any number of other queue events.\n             */\n            const batch = [];\n            if (!eventsToProcess[0].async) {\n                batch.push(eventsToProcess.shift());\n            }\n            else {\n                while (eventsToProcess[0]?.async) {\n                    batch.push(eventsToProcess.shift());\n                }\n            }\n            if (!batch.length)\n                throw Error('batch must have at least one event');\n            try {\n                if (batch[0].async) {\n                    const stateCopy = _structuredClone(context._state);\n                    await __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_handleAsyncQueues).call(this, context, ...batch);\n                    // enforce that state updates are only allowed on the main queue.\n                    context._state = stateCopy;\n                }\n                else {\n                    await __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_handleMainQueue).call(this, context, ...batch);\n                }\n            }\n            catch (e) {\n                /**\n                 * Guard clause, retries are only applicable for circuit breakers.  If we're not a circuit breaker, we need to throw the error.\n                 */\n                if (!isCircuitBreaker(e)) {\n                    throw e;\n                }\n                if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n                    console.debug('[blocks] caught in handler', e);\n                context._latestRenderContent = undefined;\n                /**\n                 * If we have a progress, we can recover from an error by rolling back to the last progress, and then letting the\n                 * remaining events be reprocessed.\n                 */\n                if (progress) {\n                    context._state = progress._state;\n                    context._changed = changed;\n                    context._effects = progress._effects;\n                    const requeueable = remaining.map((e) => {\n                        const requeueEvent = { ...e };\n                        requeueEvent.retry = true;\n                        return requeueEvent;\n                    });\n                    context.addToRequeueEvents(...requeueable);\n                    break;\n                }\n                else {\n                    if (!isCircuitBreaker(e)) {\n                        console.error('[blocks] unhandled error in handler', e);\n                    }\n                    throw e;\n                }\n            }\n            if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n                console.debug('[blocks] remaining events', context._requeueEvents);\n            const remainingRequeueEvents = [];\n            for (const event of context._requeueEvents) {\n                if (!isMainQueue && !event.async) {\n                    if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n                        console.debug('[blocks] NOT reprocessing event in BlocksHandler, sync mismatch A', event);\n                    // We're async, this is a main queue event.  We need to send it back to the platform to let\n                    // the platform synchronize it.\n                    remainingRequeueEvents.push(event);\n                    continue;\n                }\n                if (isMainQueue && event.async && !isBlockingSSR) {\n                    if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n                        console.debug('[blocks] NOT reprocessing event in BlocksHandler, sync mismatch B', event);\n                    // We're main queue, and this is an async event.  We're not in SSR mode, so let's prioritize\n                    // returning control quickly to the platform so we don't block event loops.\n                    remainingRequeueEvents.push(event);\n                    continue;\n                }\n                if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n                    console.debug('[blocks] reprocessing event in BlocksHandler', event);\n                eventsToProcess.push(event);\n            }\n            context._requeueEvents = remainingRequeueEvents; //\n            /**\n             * If we're going back through this again, we need to capture the progress, and the remaining events.\n             */\n            if (eventsToProcess.length > 0) {\n                changed = { ...context._changed };\n                progress = {\n                    _state: _structuredClone(context._state),\n                    _effects: { ...context._effects },\n                };\n                remaining = [...eventsToProcess];\n            }\n        } // End of while loop\n        // Rendering only happens on the main queue.\n        if (isMainQueue) {\n            if (!context._latestRenderContent) {\n                context._latestRenderContent = __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderRoot).call(this, __classPrivateFieldGet(this, _BlocksHandler_root, \"f\"), context.request.props ?? {}, context);\n            }\n            const tags = context._latestRenderContent;\n            if (tags) {\n                blocks = __classPrivateFieldGet(this, _BlocksHandler_blocksTransformer, \"f\").createBlocksElementOrThrow(tags);\n                blocks = __classPrivateFieldGet(this, _BlocksHandler_blocksTransformer, \"f\").ensureRootBlock(blocks);\n            }\n        }\n        return {\n            state: context._changedState,\n            effects: context.effects,\n            blocks: blocks,\n            events: context._requeueEvents,\n        };\n    }\n}\n_BlocksHandler_root = new WeakMap(), _BlocksHandler_contextBuilder = new WeakMap(), _BlocksHandler_blocksTransformer = new WeakMap(), _BlocksHandler_instances = new WeakSet(), _BlocksHandler_debug_get = function _BlocksHandler_debug_get() {\n    return !!this._latestRenderContext?.devvitContext.debug.blocks;\n}, _BlocksHandler_loadHooks = function _BlocksHandler_loadHooks(context, ..._events) {\n    context._hooks = {};\n    __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderRoot).call(this, __classPrivateFieldGet(this, _BlocksHandler_root, \"f\"), context.request.props ?? {}, context);\n}, _BlocksHandler_handleAsyncQueues = \n/**\n * These can all run in parallel, because they only emit effects\n */\nasync function _BlocksHandler_handleAsyncQueues(context, ...batch) {\n    __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_loadHooks).call(this, context, ...batch);\n    await Promise.all(batch.map(async (event) => {\n        if (!event.async) {\n            throw new Error(\"You can't mix main and other queues in one batch.  This is likely a platform bug.  Please file an issue in the Discord for someone to help! https://discord.com/channels/1050224141732687912/1115441897079574620\");\n        }\n        await __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_attemptHook).call(this, context, event);\n    }));\n}, _BlocksHandler_attemptHook = async function _BlocksHandler_attemptHook(context, event) {\n    const hook = context._hooks[event.hook];\n    if (hook?.onUIEvent) {\n        try {\n            await hook.onUIEvent(event, context);\n        }\n        catch (e) {\n            if (isCircuitBreaker(e)) {\n                if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get)) {\n                    console.error('Server call required', e);\n                }\n            }\n            else {\n                console.error('Error in event handler', e);\n            }\n            throw e;\n        }\n    }\n    else {\n        await context.handleUndeliveredEvent(event);\n    }\n}, _BlocksHandler_handleMainQueue = async function _BlocksHandler_handleMainQueue(context, ...batch) {\n    // We need to handle events in order, so that the state is updated in the correct order.\n    for (const event of batch) {\n        if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n            console.log('[blocks] handling main queue event', event);\n        if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n            console.log('[blocks] before', context._state);\n        __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_loadHooks).call(this, context, event);\n        await __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_attemptHook).call(this, context, event);\n        if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n            console.log('[blocks] after', context._state);\n    }\n    // We need this to process possible unmounts given the most recent event\n    __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_loadHooks).call(this, context);\n}, _BlocksHandler_renderRoot = function _BlocksHandler_renderRoot(component, props, context) {\n    if (__classPrivateFieldGet(this, _BlocksHandler_instances, \"a\", _BlocksHandler_debug_get))\n        console.debug('[blocks] renderRoot');\n    context._generated = {};\n    _activeRenderContext = context;\n    this._latestRenderContext = context;\n    try {\n        const roots = __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_render).call(this, component, props, context);\n        if (roots.length !== 1) {\n            throw new Error(`There can only be one root element, received: ${roots.length}. Please wrap these elements in a <vstack></vstack> or <hstack></hstack> to continue. Fragments cannot be used as a root element.`);\n        }\n        const root = roots[0];\n        // By the time it gets to this point the promise has been serialized.\n        // That's why the check is not root instanceof Promise\n        if (root === '[object Promise]') {\n            throw new Error(`Root elements cannot be async. To use data from an async endpoint, please use \"const [data] = useState(async () => {/** your async code */})\".`);\n        }\n        if (typeof root === 'string') {\n            throw new Error(`The root element must return a valid block, not a string. Try wrapping the element in a <text>your content</text> tag to continue.`);\n        }\n        context._latestRenderContent = root;\n        return root;\n    }\n    catch (e) {\n        if (e instanceof RenderInterruptError) {\n            return undefined;\n        }\n        else {\n            throw e;\n        }\n    }\n    finally {\n        _activeRenderContext = null;\n    }\n}, _BlocksHandler_render = function _BlocksHandler_render(component, props, context) {\n    // Anonymous functions don't have a name\n    // use || instead of ?? due to empty string\n    context.push({ namespace: component.name || 'anonymous', ...props });\n    try {\n        const element = component(props, context.devvitContext);\n        if (element instanceof Promise) {\n            throw new Error(`Components (found: ${component.name ?? 'unknown component'}) cannot be async. To use data from an async endpoint, please use \"const [data] = useState(async () => {/** your async code */})\".`);\n        }\n        return __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderElement).call(this, element, context);\n    }\n    finally {\n        context.pop();\n    }\n}, _BlocksHandler_renderList = function _BlocksHandler_renderList(list, context) {\n    list = list.flat(Infinity);\n    return list.flatMap((e, i) => {\n        if (e && typeof e === 'object' && 'props' in e) {\n            if (!e.props?.key) {\n                e.props = e.props ?? {};\n                e.props.key = `${i}`;\n            }\n        }\n        return __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderElement).call(this, e, context);\n    });\n}, _BlocksHandler_renderElement = function _BlocksHandler_renderElement(element, context) {\n    if (Array.isArray(element)) {\n        return __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderList).call(this, element, context);\n    }\n    else if (isBlockElement(element)) {\n        // This means the element is a fragment\n        if (element.type === undefined) {\n            try {\n                context.push({ namespace: 'fragment', ...element.props });\n                // Since it's a fragment, don't reifyProps because you can't have props on a fragment\n                return __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderList).call(this, element.children, context);\n            }\n            finally {\n                context.pop();\n            }\n        }\n        else if (typeof element.type === 'function') {\n            const propsWithChildren = { ...element.props, children: element.children.flat(Infinity) };\n            return __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_render).call(this, element.type, propsWithChildren, context);\n        }\n        else {\n            try {\n                context.push({ namespace: element.type, ...element.props });\n                const reifiedChildren = __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_renderList).call(this, element.children, context);\n                const reifiedProps = __classPrivateFieldGet(this, _BlocksHandler_instances, \"m\", _BlocksHandler_reifyProps).call(this, element.props ?? {});\n                return [{ type: element.type, children: reifiedChildren, props: reifiedProps }];\n            }\n            finally {\n                context.pop();\n            }\n        }\n    }\n    else {\n        return [(element ?? '').toString()];\n    }\n}, _BlocksHandler_reifyProps = function _BlocksHandler_reifyProps(props) {\n    const reifiedProps = {};\n    for (const key in props) {\n        if (typeof props[key] === 'undefined') {\n            // skip\n        }\n        else if (typeof props[key] === 'function') {\n            const hook = registerHook({\n                namespace: key,\n                key: false,\n                initializer: ({ hookId }) => ({\n                    hookId,\n                    state: null,\n                    onUIEvent: (event) => {\n                        if (event.userAction) {\n                            return props[key](event.userAction.data);\n                        }\n                        else if (event.webView?.postMessage) {\n                            // Fallback to deprecated message field for mobile client backwards compatibility\n                            const message = event.webView.postMessage.jsonString\n                                ? JSON.parse(event.webView.postMessage.jsonString)\n                                : event.webView.postMessage.message;\n                            return props[key](message);\n                        }\n                    },\n                }),\n            });\n            reifiedProps[key] = hook.hookId;\n            if ('captureHookRef' in props[key]) {\n                props[key].captureHookRef();\n            }\n        }\n        else {\n            // push value through the JSON parser to filter incompatible types\n            const value = JSON.parse(JSON.stringify(props[key]));\n            if (value !== undefined && value !== null) {\n                reifiedProps[key] = value;\n            }\n        }\n    }\n    return reifiedProps;\n};\nfunction isBlockElement(e) {\n    return typeof e === 'object' && e != null && 'type' in e;\n}\n", "// This message is referenced in LocalRuntimeJSEngine.kt.\nexport const CIRCUIT_BREAKER_MSG = 'ServerCallRequired';\n// to-do: use TypeScript to reference this function in SandboxedRuntimeLite.\n/** @arg method API method called for debugging. Eg, UserDataByAccountIds. */\nexport function CircuitBreak(method) {\n    // Warning: this function is serialized by SandboxRuntimeLite. Don't use\n    // import dependencies.\n    // Error must be postable.\n    const err = Error('ServerCallRequired');\n    err.cause = { method, stack: err.stack };\n    return err;\n}\nexport class CircuitBreakerResponse extends Error {\n    constructor(response, cause) {\n        super(CIRCUIT_BREAKER_MSG);\n        this.response = response;\n        this.cause = cause;\n        this.name = 'CircuitBreakerResponse';\n    }\n}\nexport function isCircuitBreaker(err) {\n    return err?.message === CIRCUIT_BREAKER_MSG;\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PromiseCache_instances, _PromiseCache_redis, _PromiseCache_localCache, _PromiseCache_clock, _PromiseCache_state, _PromiseCache_localCachedAnswer, _PromiseCache_maybeRefreshCache, _PromiseCache_refreshCache, _PromiseCache_pollForCache, _PromiseCache_updateCache, _PromiseCache_calculateRamp, _PromiseCache_redisEntry, _PromiseCache_enforceTTL;\nexport const SystemClock = {\n    now() {\n        return new Date();\n    },\n};\nexport function _namespaced(key) {\n    return `__autocache__${key}`;\n}\nexport function _lock(key) {\n    return `__lock__${key}`;\n}\nconst pollEvery = 300; // milli\nconst maxPollingTimeout = 1000; // milli\nconst minTtlValue = 5000;\nexport const retryLimit = 3;\nconst errorRetryProbability = 0.1;\nexport const clientRetryDelay = 1000;\nexport const allowStaleFor = 30000;\nfunction _unwrap(entry) {\n    if (entry.error) {\n        throw new Error(entry.error);\n    }\n    return entry.value;\n}\n/**\n * Refactored out into a class to allow for easier testing and clarity of purpose.\n *\n * This class is responsible for managing the caching of promises. It is a layered cache, meaning it will first check\n * the local cache, then the redis cache, and finally the source of truth. It will also handle refreshing the cache according\n * to the TTL and error handling.\n *\n * Please note that in order to prevent a stampede of requests to the source of truth, we use a lock in redis to ensure only one\n * request is made to the source of truth at a time.  If the lock is obtained, the cache will be updated and the lock will be released.\n *\n * Additionally, we use a polling mechanism to fetch the cache if the lock is not obtained.  This is to prevent unnecessary errors.\n *\n * Finally, we also want to prevent stampedes against redis for the lock election and the retries.  We use a ramping probability to ease in the\n * attempts to get the lock, and not every error will trigger a retry.\n *\n * This means that the cache will be eventually consistent, but will not be immediately consistent. This is a tradeoff we are willing to make.\n * Additionally, this means that the TTL is not precice.  The cache may be updated a bit more often than the TTL, but it will not be updated less often.\n *\n */\nexport class PromiseCache {\n    constructor(redis, state, clock = SystemClock) {\n        _PromiseCache_instances.add(this);\n        _PromiseCache_redis.set(this, void 0);\n        /**\n         * LocalCache is just an aliased reference to this.#state. Mutations to\n         * this object will also mutate this.#state\n         */\n        _PromiseCache_localCache.set(this, {});\n        _PromiseCache_clock.set(this, void 0);\n        _PromiseCache_state.set(this, void 0);\n        __classPrivateFieldSet(this, _PromiseCache_redis, redis, \"f\");\n        __classPrivateFieldSet(this, _PromiseCache_state, state, \"f\");\n        __classPrivateFieldSet(this, _PromiseCache_clock, clock, \"f\");\n    }\n    /**\n     * This is the public API for the cache.  Call this method to cache a promise.\n     *\n     * @param closure\n     * @param options\n     * @returns\n     */\n    async cache(closure, options) {\n        var _a;\n        (_a = __classPrivateFieldGet(this, _PromiseCache_state, \"f\")).__cache ?? (_a.__cache = {});\n        __classPrivateFieldSet(this, _PromiseCache_localCache, __classPrivateFieldGet(this, _PromiseCache_state, \"f\").__cache, \"f\");\n        __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_enforceTTL).call(this, options);\n        const localCachedAnswer = __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_localCachedAnswer).call(this, options.key);\n        if (localCachedAnswer !== undefined) {\n            return localCachedAnswer;\n        }\n        const existing = await __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_redisEntry).call(this, options.key);\n        const entry = await __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_maybeRefreshCache).call(this, options, existing, closure);\n        return _unwrap(entry);\n    }\n}\n_PromiseCache_redis = new WeakMap(), _PromiseCache_localCache = new WeakMap(), _PromiseCache_clock = new WeakMap(), _PromiseCache_state = new WeakMap(), _PromiseCache_instances = new WeakSet(), _PromiseCache_localCachedAnswer = function _PromiseCache_localCachedAnswer(key) {\n    const val = __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key];\n    if (val) {\n        const now = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n        const hasRetryableError = val?.error &&\n            val?.errorTime &&\n            val.errorCount < retryLimit &&\n            Math.random() < errorRetryProbability &&\n            val.errorTime + clientRetryDelay < now;\n        const expired = val?.expires && val.expires < now && val.checkedAt + clientRetryDelay < now;\n        if (expired || hasRetryableError) {\n            delete __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key];\n            return undefined;\n        }\n        else {\n            return _unwrap(val);\n        }\n    }\n    return undefined;\n}, _PromiseCache_maybeRefreshCache = \n/**\n * If we've bothered to check redis, we're already on the backend.  Let's see if the cache either (1) contains an error, (2)\n * is expired, (3) is missing, or (4) is about to expire.  If any of these are true, we'll refresh the cache based on heuristics.\n *\n * We'll always refresh if missing or expired, but its probabilistic if we'll refresh if about to expire or if we have an error.\n */\nasync function _PromiseCache_maybeRefreshCache(options, entry, closure) {\n    const expires = entry?.expires;\n    const rampProbability = expires ? __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_calculateRamp).call(this, expires) : 1;\n    if (!entry ||\n        (entry?.error && entry.errorCount < retryLimit && errorRetryProbability > Math.random()) ||\n        rampProbability > Math.random()) {\n        return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_refreshCache).call(this, options, entry, closure);\n    }\n    else {\n        return entry;\n    }\n}, _PromiseCache_refreshCache = \n/**\n * The conditions for refreshing the cache are handled in the calling method, which should be\n * #maybeRefreshCache.\n *\n * If you don't win the lock, you'll poll for the cache.  If you don't get the cache within maxPollingTimeout, you'll throw an error.\n */\nasync function _PromiseCache_refreshCache(options, entry, closure) {\n    const lockKey = _lock(options.key);\n    const now = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n    /**\n     * The write lock should last for a while, but not the full TTL.  Hopefully write attempts settle down after a while.\n     */\n    const lockExpiration = new Date(now + options.ttl / 2);\n    const lockObtained = await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").set(lockKey, '1', {\n        expiration: lockExpiration,\n        nx: true,\n    });\n    if (lockObtained) {\n        return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_updateCache).call(this, options.key, entry, closure, options.ttl);\n    }\n    else if (entry) {\n        // This entry is still valid, return it\n        return entry;\n    }\n    else {\n        const start = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now();\n        return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_pollForCache).call(this, start, options.key, options.ttl);\n    }\n}, _PromiseCache_pollForCache = async function _PromiseCache_pollForCache(start, key, ttl) {\n    const pollingTimeout = Math.min(ttl, maxPollingTimeout);\n    const existing = await __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_redisEntry).call(this, key);\n    if (existing) {\n        return existing;\n    }\n    if (__classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime() - start.getTime() >= pollingTimeout) {\n        throw new Error(`Cache request timed out trying to get data at key: ${key}`);\n    }\n    await new Promise((resolve) => setTimeout(resolve, pollEvery));\n    return __classPrivateFieldGet(this, _PromiseCache_instances, \"m\", _PromiseCache_pollForCache).call(this, start, key, ttl);\n}, _PromiseCache_updateCache = \n/**\n * Actually update the cache.  This is the method that will be called if we have the lock.\n */\nasync function _PromiseCache_updateCache(key, entry, closure, ttl) {\n    const expires = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime() + ttl;\n    entry = entry ?? {\n        value: null,\n        expires,\n        errorCount: 0,\n        error: null,\n        errorTime: null,\n        checkedAt: 0,\n    };\n    try {\n        entry.value = await closure();\n        entry.error = null;\n        entry.errorCount = 0;\n        entry.errorTime = null;\n    }\n    catch (e) {\n        entry.value = null;\n        entry.error = e.message ?? 'Unknown error';\n        entry.errorTime = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n        entry.errorCount++;\n    }\n    __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key] = entry;\n    await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").set(_namespaced(key), JSON.stringify(entry), {\n        expiration: new Date(expires + allowStaleFor),\n    });\n    /**\n     * Unlocking will allow retries to happen if there was an error.  Otherwise we don't unlock, because the lock\n     * will expire on its own.\n     */\n    if (entry.error && entry.errorCount < retryLimit) {\n        await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").del(_lock(key));\n    }\n    return entry;\n}, _PromiseCache_calculateRamp = function _PromiseCache_calculateRamp(expiry) {\n    const now = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n    const remaining = expiry - now;\n    if (remaining < 0) {\n        return 1;\n    }\n    else if (remaining < 1000) {\n        return 0.1;\n    }\n    else if (remaining < 2000) {\n        return 0.01;\n    }\n    else if (remaining < 3000) {\n        return 0.001;\n    }\n    else {\n        return 0;\n    }\n}, _PromiseCache_redisEntry = async function _PromiseCache_redisEntry(key) {\n    const val = await __classPrivateFieldGet(this, _PromiseCache_redis, \"f\").get(_namespaced(key));\n    if (val) {\n        const entry = JSON.parse(val);\n        entry.checkedAt = __classPrivateFieldGet(this, _PromiseCache_clock, \"f\").now().getTime();\n        __classPrivateFieldGet(this, _PromiseCache_localCache, \"f\")[key] = entry;\n        return entry;\n    }\n    return undefined;\n}, _PromiseCache_enforceTTL = function _PromiseCache_enforceTTL(options) {\n    if (options.ttl < minTtlValue) {\n        console.warn(`Cache TTL cannot be less than ${minTtlValue} milliseconds! Updating ttl value of ${options.ttl} to ${minTtlValue}.`);\n        options.ttl = minTtlValue;\n    }\n};\n", "import { PromiseCache, SystemClock } from './promise_cache.js';\nexport function makeCache(redis, state, clock = SystemClock) {\n    const pc = new PromiseCache(redis, state, clock);\n    return pc.cache.bind(pc);\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _UIClient_renderContext, _UIClient_webViewMessageCount, _UIClient_webViewClient, _UIClient_webViewPostMessage;\nimport { EffectType, Form as FormProto, ToastAppearance, } from '@devvit/protos';\nimport { assertValidFormFields } from '../../../../apis/ui/helpers/assertValidFormFields.js';\nimport { transformFormFields } from '../../../../apis/ui/helpers/transformForm.js';\nimport { _activeRenderContext } from './BlocksHandler.js';\nimport { getFormDefinition } from './useForm.js';\nexport function useUI() {\n    const renderContext = _activeRenderContext;\n    if (!renderContext) {\n        throw new Error('useUI can only be called from within the top level of a component.');\n    }\n    return new UIClient(renderContext);\n}\nexport class UIClient {\n    constructor(renderContext) {\n        _UIClient_renderContext.set(this, void 0);\n        // Auto-incrementing count of the number of WebviewMessage effects called this frame.\n        // Used as part of the dedup key for emitEvent to prevent messages from being dedup'd.\n        _UIClient_webViewMessageCount.set(this, 0);\n        _UIClient_webViewClient.set(this, void 0);\n        _UIClient_webViewPostMessage.set(this, (webViewIdOrMessage, message) => {\n            var _a, _b;\n            const webViewId = message !== undefined ? webViewIdOrMessage : '';\n            const msg = message !== undefined ? message : webViewIdOrMessage;\n            __classPrivateFieldGet(this, _UIClient_renderContext, \"f\").emitEffect(`postMessage${__classPrivateFieldSet(this, _UIClient_webViewMessageCount, (_b = __classPrivateFieldGet(this, _UIClient_webViewMessageCount, \"f\"), _a = _b++, _b), \"f\"), _a}`, {\n                type: EffectType.EFFECT_WEB_VIEW,\n                webView: {\n                    postMessage: {\n                        webViewId,\n                        app: {\n                            message: msg, // This is deprecated, but populated for backwards compatibility\n                            jsonString: JSON.stringify(msg), // Encode as JSON for consistency with the mobile clients\n                        },\n                    },\n                },\n            });\n        });\n        __classPrivateFieldSet(this, _UIClient_renderContext, renderContext, \"f\");\n        __classPrivateFieldSet(this, _UIClient_webViewClient, {\n            postMessage: __classPrivateFieldGet(this, _UIClient_webViewPostMessage, \"f\"),\n        }, \"f\");\n    }\n    get webView() {\n        return __classPrivateFieldGet(this, _UIClient_webViewClient, \"f\");\n    }\n    showForm(formKey, data) {\n        return this.showFormInternal(formKey, data);\n    }\n    showFormInternal(formKey, data, formInternalOverride) {\n        const formDefinition = getFormDefinition(__classPrivateFieldGet(this, _UIClient_renderContext, \"f\"), formKey);\n        if (!formDefinition) {\n            throw new Error('Form does not exist. Make sure you have added it using useForm.');\n        }\n        const formData = formInternalOverride ??\n            (formDefinition.form instanceof Function\n                ? formDefinition.form(data ?? {})\n                : formDefinition.form);\n        const form = {\n            fields: [],\n            id: formKey,\n            title: formData.title,\n            acceptLabel: formData.acceptLabel,\n            cancelLabel: formData.cancelLabel,\n            shortDescription: formData.description,\n        };\n        assertValidFormFields(formData.fields);\n        form.fields = transformFormFields(formData.fields);\n        __classPrivateFieldGet(this, _UIClient_renderContext, \"f\").emitEffect(formKey, {\n            type: EffectType.EFFECT_SHOW_FORM,\n            showForm: {\n                form,\n            },\n        });\n    }\n    showToast(textOrToast) {\n        let toast;\n        if (textOrToast instanceof Object) {\n            toast = {\n                text: textOrToast.text,\n                appearance: textOrToast.appearance === 'success' ? ToastAppearance.SUCCESS : ToastAppearance.NEUTRAL,\n            };\n        }\n        else {\n            toast = {\n                text: textOrToast,\n            };\n        }\n        __classPrivateFieldGet(this, _UIClient_renderContext, \"f\").emitEffect(textOrToast.toString(), {\n            type: EffectType.EFFECT_SHOW_TOAST,\n            showToast: {\n                toast,\n            },\n        });\n    }\n    navigateTo(thingOrUrl) {\n        const inputUrl = typeof thingOrUrl === 'string' ? thingOrUrl : thingOrUrl.url;\n        if (!URL.canParse(inputUrl)) {\n            throw new TypeError(`Invalid URL: ${inputUrl}`);\n        }\n        const normalizedUrl = new URL(inputUrl).toString();\n        __classPrivateFieldGet(this, _UIClient_renderContext, \"f\").emitEffect(normalizedUrl, {\n            type: EffectType.EFFECT_NAVIGATE_TO_URL,\n            navigateToUrl: {\n                url: normalizedUrl,\n            },\n        });\n    }\n}\n_UIClient_renderContext = new WeakMap(), _UIClient_webViewMessageCount = new WeakMap(), _UIClient_webViewClient = new WeakMap(), _UIClient_webViewPostMessage = new WeakMap();\n", "export function formKeyToHookId(formKey) {\n    // extract the hook id from the form key with a regex\n    const match = formKey.match(/form\\.hook\\.(.+)\\.0/);\n    /**\n     * It's tempting to throw here, but it will be RenderPost. All events for RenderPost flow to RenderPostContent\n     * lands in `Devvit.ts`. That means form ids flow through here and in the new world we've changed what a hook ID looks\n     * like. For now, we warn until the migration is complete and can later on turn this into a throw.\n     */\n    if (!match?.[1]) {\n        // This shows on every form submit in RenderPost so just going to leave it out\n        // console.warn(\n        //   `Could not parse a hook ref from form key '${formKey}'. Please make sure you are passing in a string that starts with 'form.hook.' and ends with '0'. If you are seeing this warning using RenderPost, it is safe to ignore.`\n        // );\n        return;\n    }\n    return match[1];\n}\n", "import { formKeyToHookId } from '@devvit/shared-types/useForm.js';\nimport { getFormValues } from '../../../../apis/ui/helpers/getFormValues.js';\nimport { registerHook } from './BlocksHandler.js';\nclass UseFormHook {\n    constructor(params, form, onSubmit) {\n        this.state = null;\n        this.hookId = params.hookId;\n        this.form = form;\n        this.onSubmit = onSubmit;\n        this.onUIEvent = async (event) => {\n            if (event.formSubmitted) {\n                await onSubmit(getFormValues(event.formSubmitted.results));\n            }\n        };\n    }\n}\nexport function useForm(form, onSubmit) {\n    const hook = registerHook({\n        namespace: 'useForm',\n        initializer: (params) => new UseFormHook(params, form, onSubmit),\n    });\n    return hookRefToFormKey({ id: hook.hookId });\n}\nexport function hookRefToFormKey(hookRef) {\n    return `form.hook.${hookRef.id}.0`;\n}\nexport function getFormDefinition(renderContext, formKey) {\n    const hookId = formKeyToHookId(formKey);\n    return renderContext.getHook({ id: hookId });\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ChannelHook_instances, _a, _ChannelHook_context, _ChannelHook_debug, _ChannelHook_invalidate, _ChannelHook_opts, _ChannelHook_emitSubscribed;\nimport { EffectType, RealtimeSubscriptionStatus } from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { ChannelStatus } from '../../../../types/realtime.js';\nimport { registerHook } from './BlocksHandler.js';\nclass ChannelHook {\n    constructor(opts, params) {\n        _ChannelHook_instances.add(this);\n        _ChannelHook_context.set(this, void 0);\n        _ChannelHook_debug.set(this, void 0);\n        /** Record state in BlocksHandler. */\n        _ChannelHook_invalidate.set(this, void 0);\n        _ChannelHook_opts.set(this, void 0);\n        __classPrivateFieldSet(this, _ChannelHook_context, params.context, \"f\");\n        __classPrivateFieldSet(this, _ChannelHook_debug, !!params.context._devvitContext?.debug.realtime, \"f\");\n        __classPrivateFieldSet(this, _ChannelHook_opts, opts, \"f\");\n        __classPrivateFieldSet(this, _ChannelHook_invalidate, params.invalidate, \"f\");\n        const appID = params.context.meta[Header.App]?.values[0];\n        if (!appID)\n            throw Error('useChannel missing app ID metadata');\n        const installID = params.context.meta[Header.Installation]?.values[0];\n        if (!installID)\n            throw Error('useChannel missing install ID from metadata');\n        const channel = `${appID}:${installID}:${opts.name}`;\n        const duplicate = Object.values(__classPrivateFieldGet(this, _ChannelHook_context, \"f\")._hooks)\n            .filter((hook) => hook instanceof _a)\n            .some((hook) => hook.state.channel === channel);\n        if (duplicate)\n            throw Error(`useChannel channel names must be unique; \"${channel}\" duplicated`);\n        this.state = {\n            channel,\n            connected: false,\n            subscribed: false,\n        };\n    }\n    async onUIEvent(ev) {\n        const realtime = ev.realtimeEvent;\n        if (!realtime || !this.state.subscribed)\n            return;\n        switch (realtime.status) {\n            case RealtimeSubscriptionStatus.REALTIME_SUBSCRIBED:\n                if (__classPrivateFieldGet(this, _ChannelHook_debug, \"f\"))\n                    console.debug(`[realtime] \"${this.state.channel}\" connected`);\n                this.state.connected = true;\n                __classPrivateFieldGet(this, _ChannelHook_invalidate, \"f\").call(this);\n                await __classPrivateFieldGet(this, _ChannelHook_opts, \"f\").onSubscribed?.();\n                break;\n            case RealtimeSubscriptionStatus.REALTIME_UNSUBSCRIBED:\n                if (__classPrivateFieldGet(this, _ChannelHook_debug, \"f\"))\n                    console.debug(`[realtime] \"${this.state.channel}\" disconnected`);\n                this.state.connected = false;\n                __classPrivateFieldGet(this, _ChannelHook_invalidate, \"f\").call(this);\n                await __classPrivateFieldGet(this, _ChannelHook_opts, \"f\").onUnsubscribed?.();\n                break;\n            default:\n                if (__classPrivateFieldGet(this, _ChannelHook_debug, \"f\"))\n                    console.debug(`[realtime] \"${this.state.channel}\" received message: ${JSON.stringify(ev, undefined, 2)}`);\n                // to-do: define a RealtimeSubscriptionStatus.MESSAGE. this could have\n                //        been a oneOf but the current approach allows for status + data\n                //        and this default case will break if another new type is added.\n                // expect msg. this must align to RealtimeClient.send().\n                __classPrivateFieldGet(this, _ChannelHook_opts, \"f\").onMessage(realtime.event?.data?.msg);\n                break;\n        }\n    }\n    async send(msg) {\n        if (__classPrivateFieldGet(this, _ChannelHook_debug, \"f\"))\n            console.debug(`[realtime] \"${this.state.channel}\" send message: ${JSON.stringify(msg, undefined, 2)}`);\n        if (!this.state.subscribed || !this.state.connected) {\n            console.debug(`[realtime] \"${this.state.channel}\" send failed; channel not connected`);\n            throw Error(`useChannel send failed; \"${this.state.channel}\" channel not connected`);\n        }\n        await __classPrivateFieldGet(this, _ChannelHook_context, \"f\").devvitContext.realtime.send(this.state.channel, msg);\n    }\n    get status() {\n        if (this.state.subscribed && this.state.connected)\n            return ChannelStatus.Connected;\n        else if (this.state.subscribed && !this.state.connected)\n            return ChannelStatus.Connecting;\n        else if (!this.state.subscribed && this.state.connected)\n            return ChannelStatus.Disconnecting;\n        return ChannelStatus.Disconnected;\n    }\n    subscribe() {\n        if (this.state.subscribed)\n            return;\n        if (__classPrivateFieldGet(this, _ChannelHook_debug, \"f\"))\n            console.debug(`[realtime] \"${this.state.channel}\" subscribed`);\n        this.state.subscribed = true;\n        __classPrivateFieldGet(this, _ChannelHook_invalidate, \"f\").call(this);\n        __classPrivateFieldGet(this, _ChannelHook_instances, \"m\", _ChannelHook_emitSubscribed).call(this);\n    }\n    unsubscribe() {\n        if (!this.state.subscribed)\n            return;\n        if (__classPrivateFieldGet(this, _ChannelHook_debug, \"f\"))\n            console.debug(`[realtime] \"${this.state.channel}\" unsubscribed`);\n        this.state.subscribed = false;\n        __classPrivateFieldGet(this, _ChannelHook_invalidate, \"f\").call(this);\n        __classPrivateFieldGet(this, _ChannelHook_instances, \"m\", _ChannelHook_emitSubscribed).call(this);\n    }\n}\n_a = ChannelHook, _ChannelHook_context = new WeakMap(), _ChannelHook_debug = new WeakMap(), _ChannelHook_invalidate = new WeakMap(), _ChannelHook_opts = new WeakMap(), _ChannelHook_instances = new WeakSet(), _ChannelHook_emitSubscribed = function _ChannelHook_emitSubscribed() {\n    const channels = Object.values(__classPrivateFieldGet(this, _ChannelHook_context, \"f\")._hooks)\n        .filter((hook) => hook instanceof _a && hook.state.subscribed)\n        .map((hook) => hook.state.channel);\n    __classPrivateFieldGet(this, _ChannelHook_context, \"f\").emitEffect(this.state.channel, {\n        type: EffectType.EFFECT_REALTIME_SUB,\n        realtimeSubscriptions: { subscriptionIds: channels },\n    });\n};\nexport function useChannel(opts) {\n    if (!opts.name || /[^a-zA-Z0-9_]/.test(opts.name))\n        throw Error(`useChannel error: The name \"${opts.name}\" you provided for the hook is invalid. Valid names can only contain letters, numbers, and underscores (_).`);\n    // allow RealtimeEffectHandler to compute hook ID. maintain compatibility with\n    // realtimeChannelToHookID().\n    const id = `useChannel:${opts.name}`;\n    return registerHook({\n        id,\n        namespace: id,\n        initializer: (params) => new ChannelHook(opts, params),\n    });\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _IntervalHook_hookId, _IntervalHook_invalidate, _IntervalHook_callback, _IntervalHook_context;\nimport { EffectType } from '@devvit/protos';\nimport { registerHook } from './BlocksHandler.js';\nimport { RenderContext } from './RenderContext.js';\n/**\n * Keeps track of all the intervals that are currently running in a convenient global.\n */\nconst intervals = {};\nRenderContext.addGlobalUndeliveredEventHandler('intervals', async (event, context) => {\n    if (event.timer && event.hook) {\n        delete intervals[event.hook];\n        context.emitEffect('timers', {\n            type: EffectType.EFFECT_SET_INTERVALS,\n            interval: { intervals },\n        });\n    }\n});\nclass IntervalHook {\n    constructor(callback, requestedDelayMs, params) {\n        _IntervalHook_hookId.set(this, void 0);\n        _IntervalHook_invalidate.set(this, void 0);\n        _IntervalHook_callback.set(this, void 0);\n        _IntervalHook_context.set(this, void 0);\n        this.state = { duration: { seconds: 0, nanos: 0 }, running: false };\n        __classPrivateFieldSet(this, _IntervalHook_invalidate, params.invalidate, \"f\");\n        __classPrivateFieldSet(this, _IntervalHook_hookId, params.hookId, \"f\");\n        __classPrivateFieldSet(this, _IntervalHook_callback, callback, \"f\");\n        __classPrivateFieldSet(this, _IntervalHook_context, params.context, \"f\");\n        const seconds = Math.floor(requestedDelayMs / 1000);\n        const nanos = (requestedDelayMs % 1000) * 1000000;\n        this.state.duration = { seconds, nanos };\n    }\n    onStateLoaded() {\n        if (this.state.running) {\n            intervals[__classPrivateFieldGet(this, _IntervalHook_hookId, \"f\")] = { duration: this.state.duration };\n        }\n        else {\n            delete intervals[__classPrivateFieldGet(this, _IntervalHook_hookId, \"f\")];\n        }\n    }\n    async onUIEvent(_event) {\n        await __classPrivateFieldGet(this, _IntervalHook_callback, \"f\").call(this);\n    }\n    start() {\n        intervals[__classPrivateFieldGet(this, _IntervalHook_hookId, \"f\")] = { duration: this.state.duration };\n        this.state.running = true;\n        __classPrivateFieldGet(this, _IntervalHook_invalidate, \"f\").call(this);\n        __classPrivateFieldGet(this, _IntervalHook_context, \"f\").emitEffect('timers', {\n            type: EffectType.EFFECT_SET_INTERVALS,\n            interval: { intervals },\n        });\n    }\n    stop() {\n        delete intervals[__classPrivateFieldGet(this, _IntervalHook_hookId, \"f\")];\n        this.state.running = false;\n        __classPrivateFieldGet(this, _IntervalHook_invalidate, \"f\").call(this);\n        __classPrivateFieldGet(this, _IntervalHook_context, \"f\").emitEffect('timers', {\n            type: EffectType.EFFECT_SET_INTERVALS,\n            interval: { intervals },\n        });\n    }\n}\n_IntervalHook_hookId = new WeakMap(), _IntervalHook_invalidate = new WeakMap(), _IntervalHook_callback = new WeakMap(), _IntervalHook_context = new WeakMap();\nexport function useInterval(callback, requestedDelayMs) {\n    const hook = registerHook({\n        namespace: 'useInterval',\n        initializer: (params) => {\n            return new IntervalHook(callback, requestedDelayMs, params);\n        },\n    });\n    return {\n        start: () => hook.start(),\n        stop: () => hook.stop(),\n    };\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RenderContext_state, _RenderContext_hooks;\n/** @internal */\nexport function _isTombstone(value) {\n    return typeof value === 'object' && value !== null && '__deleted' in value;\n}\n/**\n * The RenderContext is a class that holds the state of the rendering process.\n *\n * There are many properties that start with an underscore, which is a convention we use to\n * indicate that they are private and should not be accessed directly.  They are used internally\n * in tests and in the implementation of the BlocksHandler.\n *\n * DO your best to avoid adding new properties to this class to support new features.  It will be tempting\n * to add special cases for new features, but we should strive to work within the existing framework.\n */\nexport class RenderContext {\n    get devvitContext() {\n        if (!this._devvitContext) {\n            throw new Error('Devvit context not available');\n        }\n        return this._devvitContext;\n    }\n    set devvitContext(context) {\n        this._devvitContext = context;\n    }\n    constructor(request, meta) {\n        _RenderContext_state.set(this, void 0);\n        this._segments = [];\n        _RenderContext_hooks.set(this, {});\n        this._prevHooks = {};\n        this._prevHookId = '';\n        this._effects = {};\n        /**\n         * Has this state been mutated since initially loaded?\n         *\n         * _changed is used to determine the state deltas to report in the response\n         * of the handle function inside of BlocksHandler. It's very important\n         * that this list contains a comprehensive list of all hooks that have\n         * changed during the entire invocation of BlocksHandler.handle.\n         *\n         * It may be tempting to clear the state deltas on every iteration via the\n         * loop, but in doing so you'll create many roundtrips from the client to\n         * the runtime resulting in the UI flickering.\n         */\n        this._changed = {};\n        /** Does this hook still exist in the most recent render? */\n        this._touched = {};\n        /** Events that will re-enter the dispatcher queue */\n        this._requeueEvents = [];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this._rootProps = {};\n        this._generated = {};\n        this._undeliveredHandlers = {};\n        this.request = request;\n        this.meta = meta;\n        __classPrivateFieldSet(this, _RenderContext_state, request.state ?? {\n            __cache: {},\n        }, \"f\");\n        this._rootProps = request.props ?? {};\n    }\n    /** The state delta new to this render. */\n    get _changedState() {\n        const changed = {\n            __cache: __classPrivateFieldGet(this, _RenderContext_state, \"f\").__cache ?? {},\n        };\n        for (const key in this._changed)\n            changed[key] = this._state[key];\n        const unmounted = new Set(Object.keys(this._state));\n        Object.keys(__classPrivateFieldGet(this, _RenderContext_hooks, \"f\")).forEach((key) => {\n            if (key === '__cache') {\n                return;\n            }\n            unmounted.delete(key);\n        });\n        unmounted.forEach((key) => {\n            if (key === '__cache') {\n                return;\n            }\n            const t = { __deleted: true };\n            this._state[key] = changed[key] = t;\n        });\n        return changed;\n    }\n    get _hooks() {\n        return __classPrivateFieldGet(this, _RenderContext_hooks, \"f\");\n    }\n    set _hooks(hooks) {\n        this._prevHooks = __classPrivateFieldGet(this, _RenderContext_hooks, \"f\");\n        __classPrivateFieldSet(this, _RenderContext_hooks, hooks, \"f\");\n    }\n    /** The complete render state. */\n    get _state() {\n        return __classPrivateFieldGet(this, _RenderContext_state, \"f\");\n    }\n    /** Replacing state resets the delta for the next render. */\n    set _state(state) {\n        // You may be tempted to put `this._changed = {}` here, please DON'T!\n        // There are many times we may choose to reset the state while processing\n        // events. Remember that the BlocksHandler can do N number of passes before\n        // it determines it is time to send a response back to the client. _changed\n        // needs to encompass all of those changes.\n        // You may also be tempted to put `this._hooks = {}` here, please DON'T!\n        // Some hooks (useState) may rely on values held on the previous hook. If you\n        // set this._hooks = {} and then call #loadHooks from BlocksHandler, you will\n        // accidentally remove all state held in prevHooks since the first step of\n        // #loadHooks is to set hooks values to {}. Setting hooks to {} is a concern that\n        // should live outside of RenderContext and inside of BlocksHandler on a case\n        // by case basis.\n        __classPrivateFieldSet(this, _RenderContext_state, state, \"f\");\n    }\n    push(options) {\n        this._segments.push({ ...options, next: 0 });\n    }\n    pop() {\n        this._segments.pop();\n    }\n    addUndeliveredEventHandler(id, handler) {\n        this._undeliveredHandlers[id] = handler;\n    }\n    addGlobalUndeliveredEventHandler(id, handler) {\n        RenderContext.addGlobalUndeliveredEventHandler(id, handler);\n    }\n    getHook(ref) {\n        return __classPrivateFieldGet(this, _RenderContext_hooks, \"f\")[ref.id];\n    }\n    /** Catches events with no active handler and routes to the corresponding hook to detach/unsubscribe/etc **/\n    static addGlobalUndeliveredEventHandler(id, handler) {\n        RenderContext._staticUndeliveredHandlers[id] = handler;\n    }\n    async handleUndeliveredEvent(ev) {\n        const allHandlers = {\n            ...RenderContext._staticUndeliveredHandlers,\n            ...this._undeliveredHandlers,\n        };\n        for (const [_, handler] of Object.entries(allHandlers)) {\n            await handler(ev, this);\n        }\n    }\n    emitEffect(dedupeKey, effect) {\n        this._effects[dedupeKey] = effect;\n    }\n    /**\n     * Adds event that will re-enter the dispatcher queue.\n     */\n    addToRequeueEvents(...events) {\n        if (this._devvitContext?.debug.blocks)\n            console.debug('[blocks] requeueing events', events);\n        const grouped = events.reduce((acc, event) => {\n            if (event.retry) {\n                acc.retry.push(event);\n            }\n            else {\n                acc.normal.push(event);\n            }\n            return acc;\n        }, { retry: [], normal: [] });\n        // We need to maintain the order of the events, so we need to add the retry events first\n        this._requeueEvents = [...grouped.retry, ...this._requeueEvents, ...grouped.normal];\n    }\n    get effects() {\n        return Object.values(this._effects);\n    }\n    nextHookId(options) {\n        if (options.key === undefined) {\n            options.key = this._segments[this._segments.length - 1].next++ + '';\n        }\n        this.push(options);\n        try {\n            const builder = [];\n            /**\n             * We need to build the hook id from the segments in reverse order, because an explicit id\n             * overrides parent path info.\n             */\n            for (let i = this._segments.length - 1; i >= 0; i--) {\n                const segment = this._segments[i];\n                if (segment.id) {\n                    builder.unshift(segment.id);\n                    break;\n                }\n                const tag = [];\n                if (segment.namespace) {\n                    tag.push(segment.namespace);\n                }\n                if (segment.key !== undefined && segment.key !== false) {\n                    tag.push(segment.key);\n                }\n                builder.unshift(tag.join('-'));\n            }\n            const id = builder.join('.');\n            if (this._generated[id] && !options.shared) {\n                throw new Error(`Hook id ${id} already used, cannot register another hook with the same id`);\n            }\n            this._generated[id] = true;\n            this._prevHookId = id;\n            return id;\n        }\n        finally {\n            this.pop();\n        }\n    }\n}\n_RenderContext_state = new WeakMap(), _RenderContext_hooks = new WeakMap();\nRenderContext._staticUndeliveredHandlers = {};\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _UseStateHook_changed, _UseStateHook_ctx, _UseStateHook_initializer, _UseStateHook_hookId;\nimport { UIEventScope } from '@devvit/protos';\nimport { registerHook } from './BlocksHandler.js';\nimport { RenderInterruptError } from './types.js';\nimport { toSerializableErrorOrCircuitBreak } from './useAsync.js';\n/**\n * Implementation of the useState hook.\n */\nclass UseStateHook {\n    constructor(initializer, params) {\n        this.state = { value: null, load_state: 'initial', error: null };\n        _UseStateHook_changed.set(this, void 0);\n        _UseStateHook_ctx.set(this, void 0);\n        _UseStateHook_initializer.set(this, void 0);\n        _UseStateHook_hookId.set(this, void 0);\n        __classPrivateFieldSet(this, _UseStateHook_initializer, initializer, \"f\");\n        __classPrivateFieldSet(this, _UseStateHook_hookId, params.hookId, \"f\");\n        __classPrivateFieldSet(this, _UseStateHook_changed, params.invalidate, \"f\");\n        __classPrivateFieldSet(this, _UseStateHook_ctx, params.context, \"f\");\n    }\n    /**\n     * For state initialized with a promise, this function is called when the promise resolves.  This should\n     * happen inside the same event loop as the original call to useState, assuming circuit-breaking didn't happen.\n     *\n     * If circuit-breaking did happen, this function will be called on the server and the state will propagate to\n     * the client.\n     *\n     * This is intended to be synchronous in the event loop, so will block and waterfall.  useAsync is the non-waterfalling\n     * version, but this version is provided for backwards compatibility.\n     */\n    async onUIEvent() {\n        if (this.state.load_state === 'loading' && this._promise) {\n            try {\n                this.state.value = await this._promise;\n                this.state.load_state = 'loaded';\n            }\n            catch (e) {\n                this.state.load_state = 'error';\n                this.state.error = toSerializableErrorOrCircuitBreak(e);\n            }\n            __classPrivateFieldGet(this, _UseStateHook_changed, \"f\").call(this);\n        }\n        else {\n            /**\n             * This would probably be some sort of concurrent access bug.  It's not clear what would put us\n             * in this state, but it's worth logging so we can investigate.\n             */\n            console.warn(`Invalid state for hook (${__classPrivateFieldGet(this, _UseStateHook_hookId, \"f\")}):`, this.state.load_state, this._promise);\n        }\n    }\n    setter(action) {\n        this.state.value = action instanceof Function ? action(this.state.value) : action;\n        this.state.load_state = 'loaded';\n        __classPrivateFieldGet(this, _UseStateHook_changed, \"f\").call(this);\n    }\n    /**\n     * After the existing state is loaded, we need to run the initializer if there was no state found.\n     */\n    onStateLoaded() {\n        this._promise = __classPrivateFieldGet(this, _UseStateHook_ctx, \"f\")._prevHooks[__classPrivateFieldGet(this, _UseStateHook_hookId, \"f\")]?._promise;\n        /**\n         * If the state is still loading, we need to throw an error to prevent using the null state.\n         */\n        if (this.state.load_state === 'loading') {\n            throw new RenderInterruptError();\n        }\n        if (this.state.load_state === 'error') {\n            throw new Error(this.state.error?.message ?? 'Unknown error');\n        }\n        if (this.state.load_state === 'initial') {\n            let initialValue;\n            try {\n                initialValue =\n                    __classPrivateFieldGet(this, _UseStateHook_initializer, \"f\") instanceof Function ? __classPrivateFieldGet(this, _UseStateHook_initializer, \"f\").call(this) : __classPrivateFieldGet(this, _UseStateHook_initializer, \"f\");\n            }\n            catch (e) {\n                console.log('error in loading async', e);\n                this.state.load_state = 'error';\n                __classPrivateFieldGet(this, _UseStateHook_changed, \"f\").call(this);\n                return;\n            }\n            if (initialValue instanceof Promise) {\n                this._promise = initialValue;\n                this.state.load_state = 'loading';\n                const requeueEvent = {\n                    scope: UIEventScope.ALL,\n                    asyncRequest: { requestId: __classPrivateFieldGet(this, _UseStateHook_hookId, \"f\") },\n                    hook: __classPrivateFieldGet(this, _UseStateHook_hookId, \"f\"),\n                };\n                __classPrivateFieldGet(this, _UseStateHook_ctx, \"f\").addToRequeueEvents(requeueEvent);\n                __classPrivateFieldGet(this, _UseStateHook_changed, \"f\").call(this);\n                throw new RenderInterruptError();\n            }\n            else {\n                this.state.value = initialValue;\n                this.state.load_state = 'loaded';\n            }\n            __classPrivateFieldGet(this, _UseStateHook_changed, \"f\").call(this);\n        }\n    }\n}\n_UseStateHook_changed = new WeakMap(), _UseStateHook_ctx = new WeakMap(), _UseStateHook_initializer = new WeakMap(), _UseStateHook_hookId = new WeakMap();\nexport function useState(initialState) {\n    const hook = registerHook({\n        namespace: 'useState',\n        initializer: (params) => new UseStateHook(initialState, params),\n    });\n    return [hook.state.value, hook.setter.bind(hook)];\n}\n", "/**\n * Circuit-breaking triggers a {scope=REMOTE, async=false, retry=true} event.\n * This triggers a {scope=ALL, async=true, retry=false} event. In\n * practice, that has some slight implications for how it flows through the\n * event loop. If we wanted to, we could change this out, if we fully understand\n * the semantics. This aligns more with useAsync than circuit-breaking today,\n * though either is likely just fine.\n */\nexport class RenderInterruptError extends Error {\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _AsyncHook_debug, _AsyncHook_hookId, _AsyncHook_invalidate, _AsyncHook_ctx, _AsyncHook_options;\nimport { UIEventScope } from '@devvit/protos';\nimport { CIRCUIT_BREAKER_MSG } from '@devvit/shared-types/CircuitBreaker.js';\nimport { StringUtil } from '@devvit/shared-types/StringUtil.js';\nimport { isEqual } from 'moderndash';\nimport { registerHook } from './BlocksHandler.js';\n/**\n * This tries to save an error into the state.  If the error is a circuit breaker, it will throw the error instead,\n * as those errors are not meant to be saved in state.\n *\n * @param e  -- an original error type\n * @returns A JSONValue that can be saved in states\n */\nexport function toSerializableErrorOrCircuitBreak(e) {\n    // This is a little side-effecty, so open to suggestions on how to improve.\n    if (e instanceof Error) {\n        if (e.message === CIRCUIT_BREAKER_MSG) {\n            throw e;\n        }\n        console.error(e);\n        return { message: e.message, details: e.stack ?? '' };\n    }\n    else {\n        console.error(e);\n        return { message: 'Unknown error', details: StringUtil.caughtToString(e) };\n    }\n}\nclass AsyncHook {\n    constructor(initializer, options, params) {\n        _AsyncHook_debug.set(this, void 0);\n        _AsyncHook_hookId.set(this, void 0);\n        _AsyncHook_invalidate.set(this, void 0);\n        _AsyncHook_ctx.set(this, void 0);\n        _AsyncHook_options.set(this, void 0);\n        __classPrivateFieldSet(this, _AsyncHook_debug, !!params.context.devvitContext.debug.useAsync, \"f\");\n        if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n            console.debug('[useAsync] v1', options);\n        this.state = { data: null, load_state: 'initial', error: null, depends: null };\n        __classPrivateFieldSet(this, _AsyncHook_hookId, params.hookId, \"f\");\n        this.initializer = initializer;\n        __classPrivateFieldSet(this, _AsyncHook_invalidate, params.invalidate, \"f\");\n        __classPrivateFieldSet(this, _AsyncHook_ctx, params.context, \"f\");\n        this.localDepends = options.depends ?? null;\n        __classPrivateFieldSet(this, _AsyncHook_options, options, \"f\");\n    }\n    /**\n     * After we look at our state, we need to decide if we need to dispatch a request to load the data.\n     */\n    onStateLoaded() {\n        if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n            console.debug('[useAsync] async onLoad ', __classPrivateFieldGet(this, _AsyncHook_hookId, \"f\"), this.state);\n        if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n            console.debug('[useAsync] async onLoad have ', this.localDepends, 'and', this.state.depends);\n        if (!isEqual(this.localDepends, this.state.depends) || this.state.load_state === 'initial') {\n            if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n                console.debug(`[useAsync] attempting to resolve for hookId`, __classPrivateFieldGet(this, _AsyncHook_hookId, \"f\"));\n            this.state.load_state = 'loading';\n            this.state.depends = this.localDepends;\n            __classPrivateFieldGet(this, _AsyncHook_invalidate, \"f\").call(this);\n            const requeueEvent = {\n                scope: UIEventScope.ALL,\n                hook: __classPrivateFieldGet(this, _AsyncHook_hookId, \"f\"),\n                async: true,\n                asyncRequest: {\n                    requestId: __classPrivateFieldGet(this, _AsyncHook_hookId, \"f\") + '-' + JSON.stringify(this.state.depends),\n                },\n            };\n            if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n                console.debug('[useAsync] onLoad requeue');\n            __classPrivateFieldGet(this, _AsyncHook_ctx, \"f\").addToRequeueEvents(requeueEvent);\n        }\n    }\n    async onUIEvent(event, context) {\n        /**\n         * Requests and responses are both handled here. If we have a request, we need to load the data\n         * and then send a response.  If we have a response, we need to update our state and re-render.\n         *\n         * This is a very event-driven way to handle state, but it's the only way to handle async state.\n         */\n        if (event.asyncRequest) {\n            const asyncResponse = { requestId: event.asyncRequest.requestId };\n            try {\n                asyncResponse.data = {\n                    value: await this.initializer(),\n                };\n            }\n            catch (e) {\n                asyncResponse.error = toSerializableErrorOrCircuitBreak(e);\n            }\n            const requeueEvent = {\n                scope: UIEventScope.ALL,\n                asyncResponse: asyncResponse,\n                hook: __classPrivateFieldGet(this, _AsyncHook_hookId, \"f\"),\n            };\n            if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n                console.debug('[useAsync] onReq requeue');\n            context.addToRequeueEvents(requeueEvent);\n        }\n        else if (event.asyncResponse) {\n            const anticipatedRequestId = __classPrivateFieldGet(this, _AsyncHook_hookId, \"f\") + '-' + JSON.stringify(this.state.depends);\n            if (event.asyncResponse.requestId === anticipatedRequestId) {\n                this.state = {\n                    ...this.state,\n                    data: event.asyncResponse.data?.value ?? null,\n                    error: event.asyncResponse.error ?? null,\n                    load_state: event.asyncResponse.error ? 'error' : 'loaded',\n                };\n                if (__classPrivateFieldGet(this, _AsyncHook_options, \"f\").finally) {\n                    await __classPrivateFieldGet(this, _AsyncHook_options, \"f\").finally(this.state.data, this.state.error ? new Error(this.state.error?.message ?? 'Unknown error') : null);\n                }\n                __classPrivateFieldGet(this, _AsyncHook_invalidate, \"f\").call(this);\n            }\n            else {\n                if (__classPrivateFieldGet(this, _AsyncHook_debug, \"f\"))\n                    console.debug('[useAsync] onResp skip, stale event', event.asyncResponse.requestId, ' !== ', anticipatedRequestId);\n            }\n        }\n        else {\n            throw new Error('Unknown event type');\n        }\n    }\n}\n_AsyncHook_debug = new WeakMap(), _AsyncHook_hookId = new WeakMap(), _AsyncHook_invalidate = new WeakMap(), _AsyncHook_ctx = new WeakMap(), _AsyncHook_options = new WeakMap();\n/**\n * This is the preferred way to handle async state in Devvit.\n *\n * @param initializer -- any async function that returns a JSONValue\n * @returns UseAsyncResult<S>\n */\nexport function useAsync(initializer, options = {}) {\n    const hook = registerHook({\n        namespace: 'useAsync',\n        initializer: (params) => {\n            return new AsyncHook(initializer, options, params);\n        },\n    });\n    return {\n        data: hook.state.data,\n        error: hook.state.error,\n        loading: hook.state.load_state === 'loading',\n    };\n}\n", "import { Header } from '@devvit/shared-types/Header.js';\nimport { AssetsClient } from '../../../../apis/AssetsClient/AssetsClient.js';\nimport { KeyValueStorage } from '../../../../apis/key-value-storage/KeyValueStorage.js';\nimport { MediaClient } from '../../../../apis/media/MediaClient.js';\nimport { RealtimeClient } from '../../../../apis/realtime/RealtimeClient.js';\nimport { RedditAPIClient } from '../../../../apis/reddit/RedditAPIClient.js';\nimport { RedisClient } from '../../../../apis/redis/RedisClient.js';\nimport { SchedulerClient } from '../../../../apis/scheduler/SchedulerClient.js';\nimport { SettingsClient } from '../../../../apis/settings/SettingsClient.js';\nimport { getContextFromMetadata } from '../../context.js';\nimport { makeCache } from './cache.js';\nimport { UIClient } from './UIClient.js';\nimport { useChannel } from './useChannel.js';\nimport { useForm } from './useForm.js';\nimport { useInterval } from './useInterval.js';\nimport { useState } from './useState.js';\nexport class ContextBuilder {\n    buildContext(renderContext, request, metadata) {\n        const kvStore = new KeyValueStorage(metadata);\n        const redis = new RedisClient(metadata);\n        const reddit = new RedditAPIClient(metadata);\n        const scheduler = new SchedulerClient(metadata);\n        const settings = new SettingsClient(metadata);\n        const ui = new UIClient(renderContext);\n        const media = new MediaClient(metadata);\n        const assets = new AssetsClient();\n        const realtime = new RealtimeClient(metadata);\n        const cache = makeCache(redis, renderContext._state);\n        const apiClients = {\n            kvStore,\n            redis,\n            reddit,\n            scheduler,\n            settings,\n            media,\n            assets,\n            realtime,\n            ui,\n            useState,\n            useChannel,\n            useInterval,\n            useForm: useForm,\n            cache,\n            dimensions: request.env?.dimensions,\n            uiEnvironment: {\n                timezone: metadata[Header.Timezone]?.values[0],\n                locale: metadata[Header.Language]?.values[0],\n                dimensions: request.env?.dimensions,\n                colorScheme: request.env?.colorScheme,\n            },\n        };\n        // TODO: Would commentId ever be needed for the blocks handler context?\n        // You'd want something like....\n        // const baseContext = getContextFromMetadata(metadata, request.props?.postId, request.props?.commentId);\n        const baseContext = getContextFromMetadata(metadata, request.props?.postId);\n        baseContext.debug.effects = renderContext;\n        return { ...baseContext, ...apiClients };\n    }\n}\n", "/** @jsx Devvit.createElement */\n/** @jsxFrag Devvit.Fragment */\nimport { Devvit } from '../Devvit.js';\nconst getVersionNumberFromRawVersion = (rawVersion) => {\n    const versionNumber = Number(rawVersion.trim().split('.').pop());\n    return isNaN(versionNumber) ? undefined : versionNumber;\n};\nexport const parseDevvitUserAgent = (input) => {\n    const [company, platform, rawVersion] = input.trim().split(';');\n    if (!company || !platform || !rawVersion) {\n        console.warn(`Received a malformed devvit-user-agent! Received: '${input}'`);\n        return;\n    }\n    if (company !== 'Reddit') {\n        console.warn(`Received unknown company name in user agent! Received: '${input}'`);\n        return;\n    }\n    if (platform === 'iOS') {\n        const versionNumber = getVersionNumberFromRawVersion(rawVersion);\n        if (versionNumber === undefined) {\n            console.warn(`Could not parse version number from user agent! Received: '${input}'`);\n            return;\n        }\n        return {\n            company: 'Reddit',\n            platform: 'iOS',\n            rawVersion,\n            versionNumber,\n        };\n    }\n    if (platform === 'Android') {\n        const versionNumber = getVersionNumberFromRawVersion(rawVersion);\n        if (versionNumber === undefined) {\n            console.warn(`Could not parse version number from user agent! Received: '${input}'`);\n            return;\n        }\n        return {\n            company: 'Reddit',\n            platform: 'Android',\n            rawVersion,\n            versionNumber,\n        };\n    }\n    if (platform === 'Shreddit') {\n        return {\n            company: 'Reddit',\n            platform: 'Shreddit',\n            rawVersion,\n        };\n    }\n    console.warn(`Received unknown platform:`, platform);\n};\nexport const shouldShowUpgradeAppScreen = (parsedDevvitUserAgent) => {\n    // If we couldn't parse, default to trying to render the app\n    if (!parsedDevvitUserAgent) {\n        console.warn(`Could not parse devvit-user-agent! Received: '${JSON.stringify(parsedDevvitUserAgent)}'`);\n        return false;\n    }\n    if (parsedDevvitUserAgent.platform === 'Android') {\n        return parsedDevvitUserAgent.versionNumber < 1875012;\n    }\n    if (parsedDevvitUserAgent.platform === 'iOS') {\n        return parsedDevvitUserAgent.versionNumber < 614973;\n    }\n    // Default to trying to render since we couldn't explicitly get the version number\n    return false;\n};\nconst getUpgradeLinkForPlatform = (platform) => {\n    switch (platform) {\n        case 'Android':\n            return 'https://play.google.com/store/apps/details?id=com.reddit.frontpage';\n        case 'iOS':\n            return 'https://apps.apple.com/us/app/reddit/id1064216828';\n        case 'Shreddit':\n            break;\n        default:\n            console.error(`No upgrade link for platform: ${platform}`);\n    }\n};\nexport const UpgradeAppComponent = ({ platform }, context) => {\n    return (Devvit.createElement(\"blocks\", null,\n        Devvit.createElement(\"vstack\", { alignment: \"middle center\", height: 100, width: 100 },\n            Devvit.createElement(\"vstack\", { maxWidth: '300px', gap: \"large\", alignment: \"middle center\" },\n                Devvit.createElement(\"vstack\", { gap: \"medium\", alignment: \"middle center\" },\n                    Devvit.createElement(\"image\", { imageHeight: 100, imageWidth: 100, url: \"https://i.redd.it/p1vmc5ulmpib1.png\" }),\n                    Devvit.createElement(\"text\", { size: \"large\", weight: \"bold\", wrap: true, alignment: \"center\" }, \"Uh oh, the app you're trying to use requires the latest version of Reddit. Please upgrade your app to continue.\")),\n                Devvit.createElement(\"hstack\", { alignment: \"middle center\" },\n                    Devvit.createElement(\"button\", { onPress: () => {\n                            const upgradeLink = getUpgradeLinkForPlatform(platform);\n                            if (upgradeLink) {\n                                context.ui.navigateTo(upgradeLink);\n                            }\n                            else {\n                                console.warn(`No upgrade link found for platform:`, platform);\n                            }\n                        } }, \"Upgrade\"))))));\n};\n// A builder to make a component so that we don't have to rename `ui-request.handler.ts` to `.tsx`\n// Not that there's really anything wrong with that, but I like the separation of concerns since\n// we also has to set the pragma at the top of files that use Devvit-y stuff\nexport const makeUpgradeAppComponent = (platform) => () => (Devvit.createElement(UpgradeAppComponent, { platform: platform }));\n", "export function makeGettersEnumerable(obj) {\n    // Get a list of all the properties on this class's constructor.\n    const descriptors = Object.getOwnPropertyDescriptors(obj.constructor.prototype);\n    // For each property on the constructor...\n    for (const [key, descriptor] of Object.entries(descriptors)) {\n        // If it's a getter...\n        if (descriptor.get) {\n            // Create a property **on this object directly** that mirrors the one on the prototype, except it's\n            // enumerable. It has to be on the object directly for things like Object.keys() to find it. For details,\n            // see the MSDN documentation on how this works:\n            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Enumerability_and_ownership_of_properties#traversing_object_properties\n            // This feels silly to me, but it's the only way that actually works.\n            Object.defineProperty(obj, key, {\n                ...descriptor,\n                enumerable: true,\n            });\n        }\n    }\n}\n", "// Rich-Text-JSON\n//\n// Rich-Text-JSON or (RTF|J) for short, is a declarative JSON format that encodes\n// Reddit content. You can think of it as AST designed for rendering content.\n// Historically, Reddit has encoded all of its content as Markdown. With RTF,\n// clients will submit and receive content in a JSON tree instead. This\n// removes the burden of parsing from clients, while providing a data-structure\n// that's more suited to rendering interactive content. e.g. media galleries,\n// sortable tables, etc\n//\n// The high level idea of the format, is that every part of the \"document\"\n// can be represented by element nodes. Each node is a plain old JS Object.\n// To differentiate each object, nodes specify their element kind. Some example\n// element kinds are `par` for paragraphs, `h` for headers, `link` for links,\n// `table` for tables, etc. Note: not all elements are allowable at the top-level,\n//  some are used to differentiate nested data inside more complicated\n// constructs, such as tables, or nested lists.\n//\n// Since payload size is a concern, all of the keys are shortened to be\n// one character in length. There's some common conventions that will make\n// it easier to grok an element's json.\n//\n// e - `Element`, the element type of a node. Should always be a string.\n// t - `text content`, the text content of a node.\n// f - `formatting`, the formatting, or text styles, applied to the node\n// c - `content`, the content of the element. In most cases this will be an array\n//     other objects. e.g. a paragraph's content (`c`) is a list of `Text` nodes\n//     and `Link` nodes (simplified).\nexport var FormattingFlag;\n(function (FormattingFlag) {\n    FormattingFlag[FormattingFlag[\"bold\"] = 1] = \"bold\";\n    FormattingFlag[FormattingFlag[\"italic\"] = 2] = \"italic\";\n    FormattingFlag[FormattingFlag[\"underline\"] = 4] = \"underline\";\n    FormattingFlag[FormattingFlag[\"strikethrough\"] = 8] = \"strikethrough\";\n    FormattingFlag[FormattingFlag[\"subscript\"] = 16] = \"subscript\";\n    FormattingFlag[FormattingFlag[\"superscript\"] = 32] = \"superscript\";\n    FormattingFlag[FormattingFlag[\"monospace\"] = 64] = \"monospace\";\n})(FormattingFlag || (FormattingFlag = {}));\nexport const TEXT_ELEMENT = 'text';\nexport const RAW_TEXT_ELEMENT = 'raw';\nexport const LINEBREAK_ELEMENT = 'br';\n// Links -----------------------------------------------------------------------\nexport const LINK_ELEMENT = 'link';\n// Reddit Links ----------------------------------------------------------------\nexport const COMMENT_LINK_ELEMENT = 'c/';\nexport const POST_LINK_ELEMENT = 'p/';\nexport const SUBREDDIT_LINK_ELEMENT = 'r/';\nexport const USER_LINK_ELEMENT = 'u/';\nexport const USER_MENTION_ELEMENT = '@';\nexport const SPOILER_TEXT_ELEMENT = 'spoilertext';\nexport const PARAGRAPH_ELEMENT = 'par';\nexport const HEADING_ELEMENT = 'h';\nexport const HORIZONTAL_RULE_ELEMENT = 'hr';\nexport const BLOCK_QUOTE_ELEMENT = 'blockquote';\nexport const CODE_BLOCK_ELEMENT = 'code';\n// Lists -----------------------------------------------------------------------\n// lists are stored as flat list of list items.\nexport const LIST_ITEM_ELEMENT = 'li';\nexport const LIST_ELEMENT = 'list';\nexport const COLUMN_ALIGN_LEFT = 'L';\nexport const COLUMN_ALIGN_RIGHT = 'R';\nexport const COLUMN_ALIGN_CENTER = 'C';\nexport const TABLE_ELEMENT = 'table';\n// Embeds ----------------------------------------------------------------------\n// embeds are essentially a nested iframe embed that previews a link.\nexport const EMBED_ELEMENT = 'embed';\nexport const IMAGE_ELEMENT = 'img';\n// Animated images, gifs, or html5 videos are similar to images, they just have\n// slightly different descriptos given the different urls required to render them.\n// Having a separate node type lets clients know what component should be\n// used to render\nexport const ANIMATED_IMAGE_ELEMENT = 'gif';\n// Videos are rendered via dynamic streaming. so instead of having different urls\n// for each size we just store two urls for different streaming formats.\n// Additionally, we store an array of placeholder image previews .\nexport const VIDEO_ELEMENT = 'video';\n", "import { mixinBlockQuoteContext, mixinCodeBlockContext, mixinHeadingContext, mixinHorizontalRuleContext, mixinImageContext, mixinLineBreakContext, mixinLinkContext, mixinListContext, mixinListItemContext, mixinParagraphContext, mixinRawTextContext, mixinSpoilerContext, mixinTableContentContext, mixinTableContext, mixinTableRowContext, mixinTextContext, } from './mixins.js';\nimport { ANIMATED_IMAGE_ELEMENT, BLOCK_QUOTE_ELEMENT, CODE_BLOCK_ELEMENT, COLUMN_ALIGN_CENTER, COLUMN_ALIGN_LEFT, COLUMN_ALIGN_RIGHT, COMMENT_LINK_ELEMENT, EMBED_ELEMENT, FormattingFlag, HEADING_ELEMENT, HORIZONTAL_RULE_ELEMENT, IMAGE_ELEMENT, LINEBREAK_ELEMENT, LINK_ELEMENT, LIST_ELEMENT, LIST_ITEM_ELEMENT, PARAGRAPH_ELEMENT, POST_LINK_ELEMENT, RAW_TEXT_ELEMENT, SPOILER_TEXT_ELEMENT, SUBREDDIT_LINK_ELEMENT, TABLE_ELEMENT, TEXT_ELEMENT, USER_LINK_ELEMENT, USER_MENTION_ELEMENT, VIDEO_ELEMENT, } from './types.js';\n/**\n *\n * @param opts {@link ImageOptions}\n * @returns AnimatedImage\n */\nexport function makeAnimatedImage(opts) {\n    return {\n        e: ANIMATED_IMAGE_ELEMENT,\n        id: opts.mediaId,\n        ...(opts.caption && { c: opts.caption }),\n        ...(opts.blur && { o: opts.blur }),\n    };\n}\nexport function makeBlockQuote(opts, cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinBlockQuoteContext(context, content), mixinCodeBlockContext(context, content), mixinHeadingContext(context, content), mixinListContext(context, content), mixinParagraphContext(context, content), mixinTableContext(context, content));\n    cb(context);\n    return {\n        e: BLOCK_QUOTE_ELEMENT,\n        c: content,\n        ...(opts.author && { a: opts.author }),\n    };\n}\nexport function makeCodeBlock(opts, cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinRawTextContext(context, content));\n    cb(context);\n    return {\n        e: CODE_BLOCK_ELEMENT,\n        c: content,\n        ...(opts.language && { l: opts.language }),\n    };\n}\nexport function makeCommentLink(opts) {\n    return {\n        e: COMMENT_LINK_ELEMENT,\n        t: opts.permalink,\n    };\n}\nexport function makeHeadingContext(opts, cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinRawTextContext(context, content), mixinLinkContext(context, content));\n    cb(context);\n    return {\n        e: HEADING_ELEMENT,\n        l: opts.level,\n        c: content,\n    };\n}\nexport function makeEmbed(opts) {\n    return {\n        e: EMBED_ELEMENT,\n        u: opts.sourceUrl,\n        c: opts.contentUrl,\n        x: opts.width,\n        y: opts.height,\n    };\n}\nexport function makeFormatting(opts) {\n    let spec = 0;\n    if (opts.bold) {\n        spec |= FormattingFlag.bold;\n    }\n    if (opts.italic) {\n        spec |= FormattingFlag.italic;\n    }\n    if (opts.underline) {\n        spec |= FormattingFlag.underline;\n    }\n    if (opts.strikethrough) {\n        spec |= FormattingFlag.strikethrough;\n    }\n    if (opts.subscript) {\n        spec |= FormattingFlag.subscript;\n    }\n    if (opts.superscript) {\n        spec |= FormattingFlag.superscript;\n    }\n    if (opts.monospace) {\n        spec |= FormattingFlag.monospace;\n    }\n    return [spec, opts.startIndex, opts.length];\n}\nexport function makeHorizontalRule() {\n    return { e: HORIZONTAL_RULE_ELEMENT };\n}\nexport function makeImage(opts) {\n    return {\n        e: IMAGE_ELEMENT,\n        id: opts.mediaId,\n        ...(opts.caption && { c: opts.caption }),\n        ...(opts.blur && { o: opts.blur }),\n    };\n}\nexport function makeLineBreak() {\n    return {\n        e: LINEBREAK_ELEMENT,\n    };\n}\nexport function makeLink(opts) {\n    return {\n        e: LINK_ELEMENT,\n        t: opts.text,\n        u: opts.url,\n        ...(opts.formatting && { f: opts.formatting }),\n        ...(opts.tooltip && { a: opts.tooltip }),\n    };\n}\nexport function makeList(opts, cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinListItemContext(context, content));\n    cb(context);\n    return {\n        e: LIST_ELEMENT,\n        o: opts.ordered,\n        c: content,\n    };\n}\nexport function makeListItem(cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinBlockQuoteContext(context, content), mixinCodeBlockContext(context, content), mixinHeadingContext(context, content), mixinHorizontalRuleContext(context, content), mixinListContext(context, content), mixinParagraphContext(context, content), mixinTableContext(context, content));\n    cb(context);\n    return {\n        e: LIST_ITEM_ELEMENT,\n        c: content,\n    };\n}\nexport function makeParagraph(cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinTextContext(context, content), mixinLinkContext(context, content), mixinLineBreakContext(context, content), mixinSpoilerContext(context, content), mixinImageContext(context, content));\n    cb(context);\n    return {\n        e: PARAGRAPH_ELEMENT,\n        c: content,\n    };\n}\nexport function makePostLink(opts) {\n    return {\n        e: POST_LINK_ELEMENT,\n        t: opts.permalink,\n    };\n}\nexport function makeRawText(text) {\n    return {\n        e: RAW_TEXT_ELEMENT,\n        t: text,\n    };\n}\nexport function makeSpoilerText(cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinTextContext(context, content), mixinLinkContext(context, content), mixinLineBreakContext(context, content));\n    cb(context);\n    return {\n        e: SPOILER_TEXT_ELEMENT,\n        c: content,\n    };\n}\nexport function makeSubredditLink(opts) {\n    return {\n        e: SUBREDDIT_LINK_ELEMENT,\n        t: opts.subredditName,\n        l: opts.showPrefix,\n    };\n}\nexport function makeTable(cb) {\n    const context = {};\n    const headerContent = [];\n    const rowContent = [];\n    Object.assign(context, mixinTableContentContext(context, headerContent, rowContent));\n    cb(context);\n    return {\n        e: TABLE_ELEMENT,\n        h: headerContent,\n        c: rowContent,\n    };\n}\nexport function makeTableCell(cb) {\n    const [context, content] = tableCellTextContext();\n    cb(context);\n    return {\n        c: content,\n    };\n}\nexport function makeTableHeaderCell(opts, cb) {\n    const [context, content] = tableCellTextContext();\n    cb(context);\n    let alignment;\n    switch (opts.columnAlignment) {\n        case 'left':\n            alignment = COLUMN_ALIGN_LEFT;\n            break;\n        case 'right':\n            alignment = COLUMN_ALIGN_RIGHT;\n            break;\n        case 'center':\n            alignment = COLUMN_ALIGN_CENTER;\n            break;\n    }\n    return {\n        ...(alignment && { a: alignment }),\n        ...(content && { c: content }),\n    };\n}\nexport function makeTableRow(cb) {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinTableRowContext(context, content));\n    cb(context);\n    return content;\n}\nexport function makeText(opts) {\n    return {\n        e: TEXT_ELEMENT,\n        t: opts.text,\n        ...(opts.formatting && { f: opts.formatting }),\n    };\n}\nexport function makeUserLink(opts) {\n    return {\n        e: USER_LINK_ELEMENT,\n        t: opts.username,\n        l: opts.showPrefix,\n    };\n}\nexport function makeUserMention(opts) {\n    return {\n        e: USER_MENTION_ELEMENT,\n        t: opts.username,\n        l: opts.showPrefix,\n    };\n}\nexport function makeVideo(opts) {\n    return {\n        e: VIDEO_ELEMENT,\n        id: opts.mediaId,\n        ...(opts.caption && { c: opts.caption }),\n        ...(opts.blur && { o: opts.blur }),\n        ...(opts.thumbnail && { p: opts.thumbnail }),\n        ...(opts.convertToGif && { gifify: opts.convertToGif }),\n    };\n}\nfunction tableCellTextContext() {\n    const context = {};\n    const content = [];\n    Object.assign(context, mixinTextContext(context, content), mixinLinkContext(context, content), mixinSpoilerContext(context, content), mixinImageContext(context, content));\n    return [context, content];\n}\n", "import { makeAnimatedImage, makeBlockQuote, makeCodeBlock, makeCommentLink, makeEmbed, makeHeadingContext, makeHorizontalRule, makeImage, makeLineBreak, makeLink, makeList, makeListItem, makeParagraph, makePostLink, makeRawText, makeSpoilerText, makeSubredditLink, makeTable, makeTableCell, makeTableHeaderCell, makeTableRow, makeText, makeUserLink, makeUserMention, makeVideo, } from './elements.js';\nexport function mixinBlockQuoteContext(ctx, c) {\n    return {\n        blockQuote(opts, cb) {\n            c.push(makeBlockQuote(opts, cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinCodeBlockContext(ctx, c) {\n    return {\n        codeBlock(opts, cb) {\n            c.push(makeCodeBlock(opts, cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinEmbedContext(ctx, c) {\n    return {\n        embed(opts) {\n            c.push(makeEmbed(opts));\n            return ctx;\n        },\n    };\n}\nexport function mixinHeadingContext(ctx, c) {\n    return {\n        heading(opts, cb) {\n            c.push(makeHeadingContext(opts, cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinHorizontalRuleContext(ctx, c) {\n    return {\n        horizontalRule() {\n            c.push(makeHorizontalRule());\n            return ctx;\n        },\n    };\n}\nexport function mixinImageContext(ctx, c) {\n    return {\n        image(opts) {\n            c.push(makeImage(opts));\n            return ctx;\n        },\n        animatedImage(opts) {\n            c.push(makeAnimatedImage(opts));\n            return ctx;\n        },\n    };\n}\nexport function mixinLineBreakContext(ctx, c) {\n    return {\n        linebreak() {\n            c.push(makeLineBreak());\n            return ctx;\n        },\n    };\n}\nexport function mixinLinkContext(ctx, c) {\n    return {\n        link(opts) {\n            c.push(makeLink(opts));\n            return ctx;\n        },\n        commentLink(opts) {\n            c.push(makeCommentLink(opts));\n            return ctx;\n        },\n        postLink(opts) {\n            c.push(makePostLink(opts));\n            return ctx;\n        },\n        subredditLink(opts) {\n            c.push(makeSubredditLink(opts));\n            return ctx;\n        },\n        userLink(opts) {\n            c.push(makeUserLink(opts));\n            return ctx;\n        },\n        userMention(opts) {\n            c.push(makeUserMention(opts));\n            return ctx;\n        },\n    };\n}\nexport function mixinListContext(ctx, c) {\n    return {\n        list(opts, cb) {\n            c.push(makeList(opts, cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinListItemContext(ctx, c) {\n    return {\n        item(cb) {\n            c.push(makeListItem(cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinParagraphContext(ctx, c) {\n    return {\n        paragraph(cb) {\n            c.push(makeParagraph(cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinRawTextContext(ctx, c) {\n    return {\n        rawText(text) {\n            c.push(makeRawText(text));\n            return ctx;\n        },\n    };\n}\nexport function mixinSpoilerContext(ctx, c) {\n    return {\n        spoiler(cb) {\n            c.push(makeSpoilerText(cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinTableContentContext(ctx, h, c) {\n    return {\n        headerCell(opts, cb) {\n            h.push(makeTableHeaderCell(opts, cb));\n            return ctx;\n        },\n        row(cb) {\n            c.push(makeTableRow(cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinTableContext(ctx, c) {\n    return {\n        table(cb) {\n            c.push(makeTable(cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinTableRowContext(ctx, c) {\n    return {\n        cell(cb) {\n            c.push(makeTableCell(cb));\n            return ctx;\n        },\n    };\n}\nexport function mixinTextContext(ctx, c) {\n    return {\n        text(opts) {\n            const lines = opts.text.split(/\\r?\\n/);\n            for (const [index, line] of lines.entries()) {\n                if (line.length > 0)\n                    c.push(makeText({ ...opts, text: line }));\n                if (index < lines.length - 1)\n                    c.push(makeLineBreak());\n            }\n            return ctx;\n        },\n    };\n}\nexport function mixinVideoContext(ctx, c) {\n    return {\n        video(opts) {\n            c.push(makeVideo(opts));\n            return ctx;\n        },\n    };\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RichTextBuilder_content;\nimport { mixinBlockQuoteContext, mixinCodeBlockContext, mixinEmbedContext, mixinHeadingContext, mixinHorizontalRuleContext, mixinImageContext, mixinListContext, mixinParagraphContext, mixinTableContext, mixinVideoContext, } from './mixins.js';\n/**\n * @mixes ParagraphContainer\n * @mixes HeadingContainer\n * @mixes HorizontalRuleContainer\n * @mixes BlockQuoteContainer\n * @mixes CodeBlockContainer\n * @mixes EmbedContainer\n * @mixes ListContainer\n * @mixes TableContainer\n * @mixes ImageContainer\n * @mixes VideoContainer\n */\nexport class RichTextBuilder {\n    constructor() {\n        _RichTextBuilder_content.set(this, void 0);\n        const content = [];\n        Object.assign(this, mixinParagraphContext(this, content), mixinHeadingContext(this, content), mixinHorizontalRuleContext(this, content), mixinBlockQuoteContext(this, content), mixinCodeBlockContext(this, content), mixinEmbedContext(this, content), mixinListContext(this, content), mixinTableContext(this, content), mixinImageContext(this, content), mixinVideoContext(this, content));\n        __classPrivateFieldSet(this, _RichTextBuilder_content, {\n            document: content,\n        }, \"f\");\n    }\n    /**\n     * Serializes the document to a JSON string\n     */\n    build() {\n        return JSON.stringify(__classPrivateFieldGet(this, _RichTextBuilder_content, \"f\"));\n    }\n    // #region Empty interface methods\n    /* These are here to satisfy the interfaces but are overwritten by the mixins in the constructor */\n    paragraph(_cb) {\n        return this;\n    }\n    heading(_opts, _cb) {\n        return this;\n    }\n    horizontalRule() {\n        return this;\n    }\n    blockQuote(_opts, _cb) {\n        return this;\n    }\n    codeBlock(_opts, _cb) {\n        return this;\n    }\n    embed(_opts) {\n        return this;\n    }\n    list(_opts, _cb) {\n        return this;\n    }\n    table(_cb) {\n        return this;\n    }\n    image(_opts) {\n        return this;\n    }\n    animatedImage(_opts) {\n        return this;\n    }\n    video(_opts) {\n        return this;\n    }\n}\n_RichTextBuilder_content = new WeakMap();\n", "import { RichTextBuilder } from '@devvit/shared-types/richtext/RichTextBuilder.js';\nexport function richtextToString(richtext) {\n    let richtextString;\n    if (richtext instanceof RichTextBuilder) {\n        richtextString = richtext.build();\n    }\n    else if (typeof richtext === 'object') {\n        richtextString = JSON.stringify(richtext);\n    }\n    else {\n        richtextString = richtext;\n    }\n    return richtextString;\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _a, _FlairTemplate_id, _FlairTemplate_subredditName, _FlairTemplate_text, _FlairTemplate_textColor, _FlairTemplate_backgroundColor, _FlairTemplate_allowableContent, _FlairTemplate_modOnly, _FlairTemplate_maxEmojis, _FlairTemplate_allowUserEdits, _FlairTemplate_metadata, _FlairTemplate_createOrUpdateFlairTemplate, _b, _Flair_setFlair, _Flair_setUserFlairBatch, _Flair_removeFlair;\nimport {} from '@devvit/protos';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT3ID } from '../../../types/tid.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nexport var FlairType;\n(function (FlairType) {\n    FlairType[\"User\"] = \"USER_FLAIR\";\n    FlairType[\"Post\"] = \"LINK_FLAIR\";\n})(FlairType || (FlairType = {}));\nexport class FlairTemplate {\n    /**\n     * @internal\n     */\n    constructor(data, subredditName, metadata) {\n        _FlairTemplate_id.set(this, void 0);\n        _FlairTemplate_subredditName.set(this, void 0);\n        _FlairTemplate_text.set(this, void 0);\n        _FlairTemplate_textColor.set(this, void 0);\n        _FlairTemplate_backgroundColor.set(this, void 0);\n        _FlairTemplate_allowableContent.set(this, void 0);\n        _FlairTemplate_modOnly.set(this, void 0);\n        _FlairTemplate_maxEmojis.set(this, void 0);\n        _FlairTemplate_allowUserEdits.set(this, void 0);\n        _FlairTemplate_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        assertNonNull(data.id);\n        assertNonNull(data.text);\n        __classPrivateFieldSet(this, _FlairTemplate_id, data.id, \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_subredditName, subredditName, \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_text, data.text, \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_textColor, asFlairTextColor(data.textColor), \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_backgroundColor, asFlairBackgroundColor(data.backgroundColor), \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_allowableContent, asAllowableContent(data.allowableContent), \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_modOnly, data.modOnly, \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_maxEmojis, data.maxEmojis, \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_allowUserEdits, data.textEditable, \"f\");\n        __classPrivateFieldSet(this, _FlairTemplate_metadata, metadata, \"f\");\n    }\n    /** The flair template's ID */\n    get id() {\n        return __classPrivateFieldGet(this, _FlairTemplate_id, \"f\");\n    }\n    /** The flair template's text */\n    get text() {\n        return __classPrivateFieldGet(this, _FlairTemplate_text, \"f\");\n    }\n    /** The flair template's text color. Either 'dark' or 'light'. */\n    get textColor() {\n        return __classPrivateFieldGet(this, _FlairTemplate_textColor, \"f\");\n    }\n    /** The flair template's background color. Either 'transparent' or a hex color code. e.g. #FFC0CB */\n    get backgroundColor() {\n        return __classPrivateFieldGet(this, _FlairTemplate_backgroundColor, \"f\");\n    }\n    /** The flair template's allowable content. Either 'all', 'emoji', or 'text'. */\n    get allowableContent() {\n        return __classPrivateFieldGet(this, _FlairTemplate_allowableContent, \"f\");\n    }\n    /** Is the flair template only available to moderators? */\n    get modOnly() {\n        return __classPrivateFieldGet(this, _FlairTemplate_modOnly, \"f\");\n    }\n    /** The flair template's maximum number of emojis. */\n    get maxEmojis() {\n        return __classPrivateFieldGet(this, _FlairTemplate_maxEmojis, \"f\");\n    }\n    /** Does the flair template allow users to edit their flair? */\n    get allowUserEdits() {\n        return __classPrivateFieldGet(this, _FlairTemplate_allowUserEdits, \"f\");\n    }\n    /** Delete this flair template */\n    async delete() {\n        return _a.deleteFlairTemplate(__classPrivateFieldGet(this, _FlairTemplate_id, \"f\"), __classPrivateFieldGet(this, _FlairTemplate_subredditName, \"f\"), __classPrivateFieldGet(this, _FlairTemplate_metadata, \"f\"));\n    }\n    /** Edit this flair template */\n    async edit(options) {\n        return _a.editFlairTemplate({\n            id: __classPrivateFieldGet(this, _FlairTemplate_id, \"f\"),\n            subredditName: __classPrivateFieldGet(this, _FlairTemplate_subredditName, \"f\"),\n            text: options.text ?? __classPrivateFieldGet(this, _FlairTemplate_text, \"f\"),\n            allowableContent: options.allowableContent ?? __classPrivateFieldGet(this, _FlairTemplate_allowableContent, \"f\"),\n            backgroundColor: options.backgroundColor ?? __classPrivateFieldGet(this, _FlairTemplate_backgroundColor, \"f\"),\n            maxEmojis: options.maxEmojis ?? __classPrivateFieldGet(this, _FlairTemplate_maxEmojis, \"f\"),\n            modOnly: options.modOnly ?? __classPrivateFieldGet(this, _FlairTemplate_modOnly, \"f\"),\n            textColor: options.textColor ?? __classPrivateFieldGet(this, _FlairTemplate_textColor, \"f\"),\n            allowUserEdits: options.allowUserEdits ?? __classPrivateFieldGet(this, _FlairTemplate_allowUserEdits, \"f\"),\n        }, __classPrivateFieldGet(this, _FlairTemplate_metadata, \"f\"));\n    }\n    /** @internal */\n    static async createPostFlairTemplate(options, metadata) {\n        return __classPrivateFieldGet(_a, _a, \"m\", _FlairTemplate_createOrUpdateFlairTemplate).call(_a, { ...options, flairType: FlairType.Post }, metadata);\n    }\n    /** @internal */\n    static async createUserFlairTemplate(options, metadata) {\n        return __classPrivateFieldGet(_a, _a, \"m\", _FlairTemplate_createOrUpdateFlairTemplate).call(_a, { ...options, flairType: FlairType.User }, metadata);\n    }\n    /** @internal */\n    static async editFlairTemplate(editOptions, metadata) {\n        return __classPrivateFieldGet(_a, _a, \"m\", _FlairTemplate_createOrUpdateFlairTemplate).call(_a, editOptions, metadata);\n    }\n    /** @internal */\n    static async getPostFlairTemplates(subredditName, metadata) {\n        const client = Devvit.redditAPIPlugins.Flair;\n        const response = await client.LinkFlair({\n            subreddit: subredditName,\n        }, metadata);\n        return response.flair?.map((flair) => new _a(flair, subredditName, metadata)) || [];\n    }\n    /** @internal */\n    static async getUserFlairTemplates(subredditName, metadata) {\n        const client = Devvit.redditAPIPlugins.Flair;\n        const response = await client.UserFlair({\n            subreddit: subredditName,\n        }, metadata);\n        return response.flair?.map((flair) => new _a(flair, subredditName, metadata)) || [];\n    }\n    /** @internal */\n    static async deleteFlairTemplate(subredditName, flairTemplateId, metadata) {\n        const client = Devvit.redditAPIPlugins.Flair;\n        await client.DeleteFlairTemplate({\n            subreddit: subredditName,\n            flairTemplateId,\n        }, metadata);\n    }\n}\n_a = FlairTemplate, _FlairTemplate_id = new WeakMap(), _FlairTemplate_subredditName = new WeakMap(), _FlairTemplate_text = new WeakMap(), _FlairTemplate_textColor = new WeakMap(), _FlairTemplate_backgroundColor = new WeakMap(), _FlairTemplate_allowableContent = new WeakMap(), _FlairTemplate_modOnly = new WeakMap(), _FlairTemplate_maxEmojis = new WeakMap(), _FlairTemplate_allowUserEdits = new WeakMap(), _FlairTemplate_metadata = new WeakMap(), _FlairTemplate_createOrUpdateFlairTemplate = async function _FlairTemplate_createOrUpdateFlairTemplate(options, metadata) {\n    const { subredditName: subreddit, allowableContent = 'all', backgroundColor = 'transparent', flairType = '', maxEmojis = 10, modOnly = false, text, textColor = 'dark', allowUserEdits: textEditable = false, id: flairTemplateId = '', } = options;\n    if (modOnly && textEditable) {\n        throw new Error('Cannot have a mod only flair that is editable by users');\n    }\n    const client = Devvit.redditAPIPlugins.Flair;\n    const response = await client.FlairTemplate({\n        subreddit,\n        allowableContent,\n        backgroundColor,\n        flairType,\n        maxEmojis,\n        modOnly,\n        text,\n        textColor,\n        textEditable,\n        flairTemplateId,\n        cssClass: '',\n        overrideCss: false,\n    }, metadata);\n    return new _a(response, subreddit, metadata);\n};\n/** @internal */\nexport function convertProtosFlairToCommonFlair(data) {\n    // Only one of these four has to be defined and non-empty for a valid flair to be set.\n    if (data.flairText || data.flairCssClass || data.flairTemplateId || data.flairRichtext?.length) {\n        return {\n            backgroundColor: data.flairBackgroundColor,\n            cssClass: data.flairCssClass,\n            text: data.flairText,\n            type: data.flairType,\n            templateId: data.flairTemplateId,\n            // Map flairRichtext[] into the objects with more user-friendly property names\n            richtext: (data.flairRichtext ?? []).map(({ e, t, a, u }) => ({\n                elementType: e,\n                text: t,\n                emojiRef: a,\n                url: u,\n            })),\n            textColor: data.flairTextColor,\n        };\n    }\n}\n/** @internal */\nexport function convertUserFlairProtoToAPI(userFlair) {\n    return {\n        flairCssClass: userFlair.flairCssClass,\n        user: userFlair.user,\n        flairText: userFlair.flairText,\n    };\n}\nexport class Flair {\n    /**\n     * Exposes the ListFlair API. This method will return the list of user flair for the subreddit. If name\n     * is specified then it will return the user flair for the given user.\n     *\n     * @param { GetUserFlairBySubredditOptions } options See the interface\n     * @param { Metadata | undefined } metadata See the interface\n     *\n     * @returns { Promise<GetUserFlairBySubredditResponse> }\n     *\n     * @example\n     * ```ts\n     * const response = await reddit.flair.getUserFlairBySubreddit({\n     *      subreddit: \"EyeBleach\",\n     *      name: \"badapple\"\n     *   },\n     *   metadata\n     * );\n     * ```\n     * @internal\n     */\n    static async getUserFlairBySubreddit(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Flair;\n        return client.FlairList(options, metadata);\n    }\n    /** @internal */\n    static setUserFlair(options, metadata) {\n        return __classPrivateFieldGet(_b, _b, \"m\", _Flair_setFlair).call(_b, options, metadata);\n    }\n    /** @internal */\n    static setUserFlairBatch(subredditName, flairs, metadata) {\n        return __classPrivateFieldGet(_b, _b, \"m\", _Flair_setUserFlairBatch).call(_b, subredditName, flairs, metadata);\n    }\n    /** @internal */\n    static setPostFlair(options, metadata) {\n        return __classPrivateFieldGet(_b, _b, \"m\", _Flair_setFlair).call(_b, {\n            ...options,\n            postId: asT3ID(options.postId),\n        }, metadata);\n    }\n    /** @internal */\n    static async removePostFlair(subredditName, postId, metadata) {\n        return __classPrivateFieldGet(_b, _b, \"m\", _Flair_removeFlair).call(_b, subredditName, postId, undefined, metadata);\n    }\n    /** @internal */\n    static async removeUserFlair(subredditName, username, metadata) {\n        return __classPrivateFieldGet(_b, _b, \"m\", _Flair_removeFlair).call(_b, subredditName, undefined, username, metadata);\n    }\n}\n_b = Flair, _Flair_setFlair = async function _Flair_setFlair(options, metadata) {\n    const client = Devvit.redditAPIPlugins.Flair;\n    await client.SelectFlair({\n        subreddit: options.subredditName,\n        flairTemplateId: options.flairTemplateId ?? '',\n        text: options.text ?? '',\n        name: options.username ?? '',\n        link: options.postId ?? '',\n        backgroundColor: options.backgroundColor ?? '',\n        textColor: options.textColor ?? 'dark',\n        cssClass: options.cssClass ?? '',\n        returnRtjson: 'none',\n    }, metadata);\n}, _Flair_setUserFlairBatch = async function _Flair_setUserFlairBatch(subredditName, flairs, metadata) {\n    if (!flairs.length) {\n        return [];\n    }\n    const maxFlairsPerRequest = 100;\n    if (flairs.length > maxFlairsPerRequest) {\n        throw new Error('Unexpected input: flairs array cannot be longer than 100 entries.');\n    }\n    const csvDelimiter = ',';\n    const flairCsv = flairs\n        .map((userConfig) => {\n        for (const propertyName in userConfig) {\n            if (userConfig[propertyName]?.includes(csvDelimiter)) {\n                throw new Error(`Unexpected input: ${propertyName} cannot contain the \",\" character`);\n            }\n        }\n        return [userConfig.username, userConfig.text || '', userConfig.cssClass || ''].join(csvDelimiter);\n    })\n        .join('\\n');\n    const client = Devvit.redditAPIPlugins.Flair;\n    const response = await client.FlairCsv({\n        subreddit: subredditName,\n        flairCsv,\n    }, metadata);\n    return response.result;\n}, _Flair_removeFlair = async function _Flair_removeFlair(subredditName, postId, username, metadata) {\n    const client = Devvit.redditAPIPlugins.Flair;\n    await client.SelectFlair({\n        subreddit: subredditName,\n        name: username ?? '',\n        link: postId ?? '',\n        flairTemplateId: '',\n        backgroundColor: '',\n        text: '',\n        textColor: '',\n        cssClass: '',\n        returnRtjson: 'none',\n    }, metadata);\n};\nfunction asFlairTextColor(color) {\n    assertNonNull(color, 'Flair text color is required');\n    if (color === 'light' || color === 'dark') {\n        return color;\n    }\n    throw new Error(`Invalid flair text color: ${color}`);\n}\nfunction asFlairBackgroundColor(color) {\n    if (!color || color.length === 0 || color === 'transparent') {\n        return 'transparent';\n    }\n    if (/^#([A-Fa-f0-9]{6})$/.test(color)) {\n        return color;\n    }\n    throw new Error(`Invalid flair background color: ${color}`);\n}\nfunction asAllowableContent(allowableContent) {\n    if (allowableContent === 'all' || allowableContent === 'text' || allowableContent === 'emoji') {\n        return allowableContent;\n    }\n    throw new Error(`Invalid allowable content: ${allowableContent}`);\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Listing_instances, _Listing_before, _Listing_after, _Listing_more, _Listing_started, _Listing_next;\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nconst DEFAULT_PAGE_SIZE = 100;\nconst DEFAULT_LIMIT = Infinity;\nexport class Listing {\n    /**\n     * @internal\n     */\n    constructor(options) {\n        _Listing_instances.add(this);\n        _Listing_before.set(this, void 0);\n        _Listing_after.set(this, void 0);\n        _Listing_more.set(this, void 0);\n        _Listing_started.set(this, false);\n        this.pageSize = DEFAULT_PAGE_SIZE;\n        this.limit = DEFAULT_LIMIT;\n        this.children = [];\n        makeGettersEnumerable(this);\n        this._fetch = options.fetch;\n        this.pageSize = options.pageSize ?? DEFAULT_PAGE_SIZE;\n        this.limit = options.limit ?? DEFAULT_LIMIT;\n        __classPrivateFieldSet(this, _Listing_after, options.after, \"f\");\n        __classPrivateFieldSet(this, _Listing_before, options.before, \"f\");\n        __classPrivateFieldSet(this, _Listing_more, options.more, \"f\");\n        if (options.children) {\n            this.children = options.children;\n        }\n    }\n    get hasMore() {\n        return !__classPrivateFieldGet(this, _Listing_started, \"f\") || Boolean(__classPrivateFieldGet(this, _Listing_after, \"f\") || __classPrivateFieldGet(this, _Listing_before, \"f\") || __classPrivateFieldGet(this, _Listing_more, \"f\"));\n    }\n    async *[(_Listing_before = new WeakMap(), _Listing_after = new WeakMap(), _Listing_more = new WeakMap(), _Listing_started = new WeakMap(), _Listing_instances = new WeakSet(), Symbol.asyncIterator)]() {\n        let currentIndex = 0;\n        while (true) {\n            if (currentIndex === this.children.length) {\n                if (this.hasMore) {\n                    const nextPage = await __classPrivateFieldGet(this, _Listing_instances, \"m\", _Listing_next).call(this);\n                    // r2 api sometimes returns an empty page\n                    if (nextPage.length === 0) {\n                        break;\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            yield this.children[currentIndex];\n            currentIndex++;\n            if (currentIndex === this.limit) {\n                break;\n            }\n        }\n    }\n    setMore(more) {\n        __classPrivateFieldSet(this, _Listing_more, more, \"f\");\n    }\n    preventInitialFetch() {\n        __classPrivateFieldSet(this, _Listing_started, true, \"f\");\n    }\n    async all() {\n        while (this.hasMore && this.children.length < this.limit) {\n            await __classPrivateFieldGet(this, _Listing_instances, \"m\", _Listing_next).call(this);\n        }\n        return this.children.slice(0, this.limit);\n    }\n    async get(count) {\n        const limit = count <= this.limit ? count : this.limit;\n        while (this.hasMore && this.children.length < limit) {\n            await __classPrivateFieldGet(this, _Listing_instances, \"m\", _Listing_next).call(this);\n        }\n        return this.children.slice(0, limit);\n    }\n}\n_Listing_next = async function _Listing_next() {\n    if (!this.hasMore) {\n        throw new Error('This listing does not have any more items to load.');\n    }\n    const { children, before, after, more } = await this._fetch({\n        before: __classPrivateFieldGet(this, _Listing_before, \"f\"),\n        after: __classPrivateFieldGet(this, _Listing_after, \"f\"),\n        limit: this.pageSize,\n        more: __classPrivateFieldGet(this, _Listing_more, \"f\"),\n    });\n    this.children.push(...children);\n    __classPrivateFieldSet(this, _Listing_before, before, \"f\");\n    __classPrivateFieldSet(this, _Listing_after, after, \"f\");\n    __classPrivateFieldSet(this, _Listing_more, more, \"f\");\n    __classPrivateFieldSet(this, _Listing_started, true, \"f\");\n    return children;\n};\n", "var __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _a, _ModNote_fromProto;\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT2ID, asT5ID, asTID } from '../../../types/tid.js';\nimport { Listing } from './Listing.js';\nexport class ModNote {\n    /**\n     * @internal\n     */\n    constructor() { }\n    /** @internal */\n    static get(options, metadata) {\n        const client = Devvit.redditAPIPlugins.ModNote;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            limit: options.limit,\n            pageSize: options.limit,\n            fetch: async (fetchOptions) => {\n                const protoRes = await client.GetNotes({\n                    subreddit: options.subreddit,\n                    user: options.user,\n                    filter: options.filter,\n                    before: fetchOptions.before,\n                    limit: fetchOptions.limit,\n                }, metadata);\n                return {\n                    children: protoRes.modNotes?.map((protoModNote) => __classPrivateFieldGet(this, _a, \"m\", _ModNote_fromProto).call(this, protoModNote)) || [],\n                    // if the response says that there are no more pages, then we should set before to undefined\n                    // to prevent more requests from being made\n                    before: protoRes.hasNextPage ? protoRes.endCursor : undefined,\n                    hasMore: protoRes.hasNextPage,\n                };\n            },\n        });\n    }\n    /** @internal */\n    static async delete(options, metadata) {\n        const client = Devvit.redditAPIPlugins.ModNote;\n        const { deleted } = await client.DeleteNotes(options, metadata);\n        return !!deleted;\n    }\n    /** @internal */\n    static async add(options, metadata) {\n        const client = Devvit.redditAPIPlugins.ModNote;\n        const res = await client.PostNotes(options, metadata);\n        if (!res?.created) {\n            throw new Error('Failed to create mod note');\n        }\n        return __classPrivateFieldGet(this, _a, \"m\", _ModNote_fromProto).call(this, res.created);\n    }\n    /** @internal */\n    static async addRemovalNote(options, metadata) {\n        const client = Devvit.redditAPIPlugins.ModNote;\n        await client.PostRemovalNote(options, metadata);\n    }\n}\n_a = ModNote, _ModNote_fromProto = function _ModNote_fromProto(protoModNote) {\n    // check that all required fields of protoModNote needed to create a ModNote are present\n    assertNonNull(protoModNote.id, 'Mod note ID is null or undefined');\n    assertNonNull(protoModNote.createdAt, 'Mod note createdAt is null or undefined');\n    assertNonNull(protoModNote.type, 'Mod note type is null or undefined');\n    assertNonNull(protoModNote.subreddit, 'Mod note subreddit is null or undefined');\n    assertNonNull(protoModNote.subredditId, 'Mod note subredditId is null or undefined');\n    assertNonNull(protoModNote.operator, 'Mod note operator is null or undefined');\n    assertNonNull(protoModNote.operatorId, 'Mod note operatorId is null or undefined');\n    assertNonNull(protoModNote.user, 'Mod note user is null or undefined');\n    assertNonNull(protoModNote.userId, 'Mod note userId is null or undefined');\n    assertNonNull(protoModNote.userNoteData, 'Mod note userNote is null or undefined');\n    assertNonNull(protoModNote.modActionData, 'Mod note modAction is null or undefined');\n    return {\n        id: protoModNote.id,\n        user: {\n            id: asT2ID(protoModNote.userId ?? ''),\n            name: protoModNote.user,\n        },\n        subreddit: {\n            id: asT5ID(protoModNote.subredditId ?? ''),\n            name: protoModNote.subreddit,\n        },\n        operator: {\n            id: asT2ID(protoModNote.operatorId ?? ''),\n            name: protoModNote.operator,\n        },\n        createdAt: new Date(protoModNote.createdAt * 1000), // convert to ms\n        userNote: {\n            note: protoModNote.userNoteData?.note,\n            redditId: protoModNote.userNoteData?.redditId\n                ? asTID(protoModNote.userNoteData?.redditId)\n                : undefined,\n            label: protoModNote.userNoteData?.label,\n        },\n        type: protoModNote.type,\n    };\n};\n", "import { Devvit } from '../../../devvit/Devvit.js';\nexport class GraphQL {\n    /** @internal */\n    static queryWithQueryString(q, metadata) {\n        return Devvit.redditAPIPlugins.GraphQL.Query({\n            query: q,\n        }, metadata);\n    }\n    /** @internal */\n    static query(operationName, id, variables, metadata) {\n        return Devvit.redditAPIPlugins.GraphQL.PersistedQuery({\n            operationName,\n            id,\n            variables,\n        }, metadata);\n    }\n}\n", "export const MODERATOR_PERMISSIONS = [\n    'all',\n    'wiki',\n    'posts',\n    'access',\n    'mail',\n    'config',\n    'flair',\n    'channels',\n    'chat_config',\n    'chat_operator',\n    'community_chat',\n];\nexport function formatPermissions(permissions, allPermissions) {\n    return allPermissions\n        .map((permission) => (permissions.includes(permission) ? '+' : '-') + permission)\n        .join(',');\n}\nexport function formatModeratorPermissions(permissions) {\n    return formatPermissions(permissions, MODERATOR_PERMISSIONS);\n}\nexport function validModPermissions(permissions) {\n    return permissions.filter((permission) => MODERATOR_PERMISSIONS.includes(permission));\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Post_id, _Post_authorId, _Post_authorName, _Post_createdAt, _Post_subredditId, _Post_subredditName, _Post_permalink, _Post_title, _Post_body, _Post_bodyHtml, _Post_url, _Post_score, _Post_numberOfComments, _Post_numberOfReports, _Post_thumbnail, _Post_approved, _Post_approvedAtUtc, _Post_bannedAtUtc, _Post_spam, _Post_stickied, _Post_removed, _Post_removedBy, _Post_removedByCategory, _Post_archived, _Post_edited, _Post_locked, _Post_nsfw, _Post_quarantined, _Post_spoiler, _Post_hidden, _Post_ignoringReports, _Post_distinguishedBy, _Post_flair, _Post_authorFlair, _Post_secureMedia, _Post_modReportReasons, _Post_userReportReasons, _Post_gallery, _Post_metadata;\nimport { Block, UIResponse } from '@devvit/protos';\nimport { Scope } from '@devvit/protos/json/reddit/devvit/app_permission/v1/app_permission.js';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { decodeProtoErrors } from '@devvit/shared-types/helpers/protoErrorDecoder.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { RichTextBuilder } from '@devvit/shared-types/richtext/RichTextBuilder.js';\nimport { fromByteArray } from 'base64-js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { BlocksReconciler } from '../../../devvit/internals/blocks/BlocksReconciler.js';\nimport { BlocksHandler } from '../../../devvit/internals/blocks/handler/BlocksHandler.js';\nimport { asT2ID, asT3ID, asT5ID, isT3ID } from '../../../types/tid.js';\nimport { RunAs } from '../common.js';\nimport { GraphQL } from '../graphql/GraphQL.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nimport { richtextToString } from '../helpers/richtextToString.js';\nimport { getCustomPostRichTextFallback } from '../helpers/textFallbackToRichtext.js';\nimport { Comment } from './Comment.js';\nimport { convertProtosFlairToCommonFlair } from './Flair.js';\nimport { Listing } from './Listing.js';\nimport { ModNote } from './ModNote.js';\nimport { User } from './User.js';\nconst SetCustomPostPreviewRequestBodyType = {\n    NONE: 0,\n    BLOCKS: 1,\n    UNRECOGNIZED: -1,\n};\nexport const GalleryMediaStatus = {\n    UNKNOWN: 0,\n    VALID: 1,\n    FAILED: 2,\n};\nexport class Post {\n    /**\n     * @internal\n     */\n    constructor(data, metadata) {\n        _Post_id.set(this, void 0);\n        _Post_authorId.set(this, void 0);\n        _Post_authorName.set(this, void 0);\n        _Post_createdAt.set(this, void 0);\n        _Post_subredditId.set(this, void 0);\n        _Post_subredditName.set(this, void 0);\n        _Post_permalink.set(this, void 0);\n        _Post_title.set(this, void 0);\n        _Post_body.set(this, void 0);\n        _Post_bodyHtml.set(this, void 0);\n        _Post_url.set(this, void 0);\n        _Post_score.set(this, void 0);\n        _Post_numberOfComments.set(this, void 0);\n        _Post_numberOfReports.set(this, void 0);\n        _Post_thumbnail.set(this, void 0);\n        _Post_approved.set(this, void 0);\n        _Post_approvedAtUtc.set(this, void 0);\n        _Post_bannedAtUtc.set(this, void 0);\n        _Post_spam.set(this, void 0);\n        _Post_stickied.set(this, void 0);\n        _Post_removed.set(this, void 0);\n        _Post_removedBy.set(this, void 0);\n        _Post_removedByCategory.set(this, void 0);\n        _Post_archived.set(this, void 0);\n        _Post_edited.set(this, void 0);\n        _Post_locked.set(this, void 0);\n        _Post_nsfw.set(this, void 0);\n        _Post_quarantined.set(this, void 0);\n        _Post_spoiler.set(this, void 0);\n        _Post_hidden.set(this, void 0);\n        _Post_ignoringReports.set(this, void 0);\n        _Post_distinguishedBy.set(this, void 0);\n        _Post_flair.set(this, void 0);\n        _Post_authorFlair.set(this, void 0);\n        _Post_secureMedia.set(this, void 0);\n        _Post_modReportReasons.set(this, void 0);\n        _Post_userReportReasons.set(this, void 0);\n        _Post_gallery.set(this, void 0);\n        _Post_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        assertNonNull(data.id, 'Post is missing id');\n        assertNonNull(data.title, 'Post is missing title');\n        assertNonNull(data.createdUtc, 'Post is missing created date');\n        assertNonNull(data.author, 'Post is missing author name');\n        assertNonNull(data.subreddit, 'Post is missing subreddit name');\n        assertNonNull(data.subredditId, 'Post is missing subreddit id');\n        assertNonNull(data.url, 'Post is missing url');\n        assertNonNull(data.permalink, 'Post is missing permalink');\n        __classPrivateFieldSet(this, _Post_id, asT3ID(`t3_${data.id}`), \"f\");\n        __classPrivateFieldSet(this, _Post_authorName, data.author, \"f\");\n        __classPrivateFieldSet(this, _Post_authorId, data.authorFullname ? asT2ID(data.authorFullname) : undefined, \"f\");\n        __classPrivateFieldSet(this, _Post_subredditId, asT5ID(data.subredditId), \"f\");\n        __classPrivateFieldSet(this, _Post_subredditName, data.subreddit, \"f\");\n        __classPrivateFieldSet(this, _Post_score, data.score ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Post_numberOfComments, data.numComments ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Post_numberOfReports, data.numReports ?? 0, \"f\");\n        const createdAt = new Date(0);\n        createdAt.setUTCSeconds(data.createdUtc);\n        __classPrivateFieldSet(this, _Post_createdAt, createdAt, \"f\");\n        __classPrivateFieldSet(this, _Post_title, data.title, \"f\");\n        __classPrivateFieldSet(this, _Post_body, data.selftext, \"f\");\n        __classPrivateFieldSet(this, _Post_bodyHtml, data.selftextHtml, \"f\");\n        __classPrivateFieldSet(this, _Post_url, data.url, \"f\");\n        __classPrivateFieldSet(this, _Post_permalink, data.permalink, \"f\");\n        if (data.thumbnail &&\n            data.thumbnail !== 'self' &&\n            data.thumbnail !== 'nsfw' &&\n            data.thumbnailHeight != null &&\n            data.thumbnailWidth != null) {\n            __classPrivateFieldSet(this, _Post_thumbnail, {\n                url: data.thumbnail,\n                height: data.thumbnailHeight,\n                width: data.thumbnailWidth,\n            }, \"f\");\n        }\n        __classPrivateFieldSet(this, _Post_approved, data.approved ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_approvedAtUtc, data.approvedAtUtc ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Post_bannedAtUtc, data.bannedAtUtc ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Post_removed, data.removed ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_removedBy, data.removedBy, \"f\");\n        __classPrivateFieldSet(this, _Post_removedByCategory, data.removedByCategory, \"f\");\n        __classPrivateFieldSet(this, _Post_spam, data.spam ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_stickied, data.stickied ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_archived, data.archived ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_edited, data.edited ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_locked, data.locked ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_nsfw, data.over18 ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_quarantined, data.quarantine ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_spoiler, data.spoiler, \"f\");\n        __classPrivateFieldSet(this, _Post_hidden, data.hidden ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_ignoringReports, data.ignoreReports ?? false, \"f\");\n        __classPrivateFieldSet(this, _Post_distinguishedBy, data.distinguished, \"f\");\n        __classPrivateFieldSet(this, _Post_secureMedia, data.secureMedia, \"f\");\n        __classPrivateFieldSet(this, _Post_modReportReasons, (data.modReports ?? []).map(([reason]) => reason), \"f\");\n        __classPrivateFieldSet(this, _Post_userReportReasons, (data.userReports ?? []).map(([reason]) => reason), \"f\");\n        __classPrivateFieldSet(this, _Post_metadata, metadata, \"f\");\n        __classPrivateFieldSet(this, _Post_flair, convertProtosFlairToCommonFlair({\n            flairBackgroundColor: data.linkFlairBackgroundColor,\n            flairCssClass: data.linkFlairCssClass,\n            flairText: data.linkFlairText,\n            flairType: data.linkFlairType,\n            flairTemplateId: data.linkFlairTemplateId,\n            flairRichtext: data.linkFlairRichtext,\n            flairTextColor: data.linkFlairTextColor,\n        }), \"f\");\n        __classPrivateFieldSet(this, _Post_authorFlair, convertProtosFlairToCommonFlair({\n            flairBackgroundColor: data.authorFlairBackgroundColor,\n            flairCssClass: data.authorFlairCssClass,\n            flairText: data.authorFlairText,\n            flairType: data.authorFlairType,\n            flairTemplateId: data.authorFlairTemplateId,\n            flairRichtext: data.authorFlairRichtext,\n            flairTextColor: data.authorFlairTextColor,\n        }), \"f\");\n        if (data.gallery) {\n            __classPrivateFieldSet(this, _Post_gallery, data.gallery.map((item) => ({\n                status: item.status,\n                url: item.url,\n                height: item.height,\n                width: item.width,\n            })), \"f\");\n        }\n        else {\n            __classPrivateFieldSet(this, _Post_gallery, [], \"f\");\n        }\n    }\n    get id() {\n        return __classPrivateFieldGet(this, _Post_id, \"f\");\n    }\n    get authorId() {\n        return __classPrivateFieldGet(this, _Post_authorId, \"f\");\n    }\n    get authorName() {\n        return __classPrivateFieldGet(this, _Post_authorName, \"f\");\n    }\n    get subredditId() {\n        return __classPrivateFieldGet(this, _Post_subredditId, \"f\");\n    }\n    get subredditName() {\n        return __classPrivateFieldGet(this, _Post_subredditName, \"f\");\n    }\n    get permalink() {\n        return __classPrivateFieldGet(this, _Post_permalink, \"f\");\n    }\n    get title() {\n        return __classPrivateFieldGet(this, _Post_title, \"f\");\n    }\n    get body() {\n        return __classPrivateFieldGet(this, _Post_body, \"f\");\n    }\n    get bodyHtml() {\n        return __classPrivateFieldGet(this, _Post_bodyHtml, \"f\");\n    }\n    get url() {\n        return __classPrivateFieldGet(this, _Post_url, \"f\");\n    }\n    get thumbnail() {\n        return __classPrivateFieldGet(this, _Post_thumbnail, \"f\");\n    }\n    get createdAt() {\n        return __classPrivateFieldGet(this, _Post_createdAt, \"f\");\n    }\n    get score() {\n        return __classPrivateFieldGet(this, _Post_score, \"f\");\n    }\n    get numberOfComments() {\n        return __classPrivateFieldGet(this, _Post_numberOfComments, \"f\");\n    }\n    get numberOfReports() {\n        return __classPrivateFieldGet(this, _Post_numberOfReports, \"f\");\n    }\n    get approved() {\n        return __classPrivateFieldGet(this, _Post_approved, \"f\");\n    }\n    get approvedAtUtc() {\n        return __classPrivateFieldGet(this, _Post_approvedAtUtc, \"f\");\n    }\n    get bannedAtUtc() {\n        return __classPrivateFieldGet(this, _Post_bannedAtUtc, \"f\");\n    }\n    get spam() {\n        return __classPrivateFieldGet(this, _Post_spam, \"f\");\n    }\n    get stickied() {\n        return __classPrivateFieldGet(this, _Post_stickied, \"f\");\n    }\n    get removed() {\n        return __classPrivateFieldGet(this, _Post_removed, \"f\");\n    }\n    /**\n     * Who removed this object (username)\n     */\n    get removedBy() {\n        return __classPrivateFieldGet(this, _Post_removedBy, \"f\");\n    }\n    /**\n     * who/what removed this object. It will return one of the following:\n     * - \"anti_evil_ops\": object is removed by a aeops member\n     * - \"author\": object is removed by author of the post\n     * - \"automod_filtered\": object is filtered by automod\n     * - \"community_ops\": object is removed by a community team member\n     * - \"content_takedown\": object is removed due to content violation\n     * - \"copyright_takedown\": object is removed due to copyright violation\n     * - \"deleted\": object is deleted\n     * - \"moderator\": object is removed by a mod of the sub\n     * - \"reddit\": object is removed by anyone else\n     * - undefined: object is not removed\n     */\n    get removedByCategory() {\n        return __classPrivateFieldGet(this, _Post_removedByCategory, \"f\");\n    }\n    get archived() {\n        return __classPrivateFieldGet(this, _Post_archived, \"f\");\n    }\n    get edited() {\n        return __classPrivateFieldGet(this, _Post_edited, \"f\");\n    }\n    get locked() {\n        return __classPrivateFieldGet(this, _Post_locked, \"f\");\n    }\n    get nsfw() {\n        return __classPrivateFieldGet(this, _Post_nsfw, \"f\");\n    }\n    get quarantined() {\n        return __classPrivateFieldGet(this, _Post_quarantined, \"f\");\n    }\n    get spoiler() {\n        return __classPrivateFieldGet(this, _Post_spoiler, \"f\");\n    }\n    get hidden() {\n        return __classPrivateFieldGet(this, _Post_hidden, \"f\");\n    }\n    get ignoringReports() {\n        return __classPrivateFieldGet(this, _Post_ignoringReports, \"f\");\n    }\n    get distinguishedBy() {\n        return __classPrivateFieldGet(this, _Post_distinguishedBy, \"f\");\n    }\n    get comments() {\n        return Comment.getComments({\n            postId: this.id,\n        }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    get flair() {\n        return __classPrivateFieldGet(this, _Post_flair, \"f\");\n    }\n    get authorFlair() {\n        return __classPrivateFieldGet(this, _Post_authorFlair, \"f\");\n    }\n    get secureMedia() {\n        return __classPrivateFieldGet(this, _Post_secureMedia, \"f\");\n    }\n    get userReportReasons() {\n        return __classPrivateFieldGet(this, _Post_userReportReasons, \"f\");\n    }\n    get modReportReasons() {\n        return __classPrivateFieldGet(this, _Post_modReportReasons, \"f\");\n    }\n    /**\n     * Get the media in the post. Empty if the post doesn't have any media.\n     */\n    get gallery() {\n        return __classPrivateFieldGet(this, _Post_gallery, \"f\");\n    }\n    toJSON() {\n        return {\n            id: this.id,\n            authorId: this.authorId,\n            authorName: this.authorName,\n            subredditId: this.subredditId,\n            subredditName: this.subredditName,\n            permalink: this.permalink,\n            title: this.title,\n            body: this.body,\n            bodyHtml: this.bodyHtml,\n            url: this.url,\n            thumbnail: this.thumbnail,\n            score: this.score,\n            numberOfComments: this.numberOfComments,\n            numberOfReports: this.numberOfReports,\n            createdAt: this.createdAt,\n            approved: this.approved,\n            spam: this.spam,\n            stickied: this.stickied,\n            removed: this.removed,\n            removedBy: __classPrivateFieldGet(this, _Post_removedBy, \"f\"),\n            removedByCategory: __classPrivateFieldGet(this, _Post_removedByCategory, \"f\"),\n            archived: this.archived,\n            edited: this.edited,\n            locked: this.locked,\n            nsfw: this.nsfw,\n            quarantined: this.quarantined,\n            spoiler: this.spoiler,\n            hidden: this.hidden,\n            ignoringReports: this.ignoringReports,\n            distinguishedBy: this.distinguishedBy,\n            flair: this.flair,\n            authorFlair: this.authorFlair,\n            secureMedia: this.secureMedia,\n            modReportReasons: __classPrivateFieldGet(this, _Post_modReportReasons, \"f\"),\n            userReportReasons: __classPrivateFieldGet(this, _Post_userReportReasons, \"f\"),\n        };\n    }\n    isApproved() {\n        return __classPrivateFieldGet(this, _Post_approved, \"f\");\n    }\n    isSpam() {\n        return __classPrivateFieldGet(this, _Post_spam, \"f\");\n    }\n    isStickied() {\n        return __classPrivateFieldGet(this, _Post_stickied, \"f\");\n    }\n    isRemoved() {\n        return __classPrivateFieldGet(this, _Post_removed, \"f\");\n    }\n    isArchived() {\n        return __classPrivateFieldGet(this, _Post_archived, \"f\");\n    }\n    isEdited() {\n        return __classPrivateFieldGet(this, _Post_edited, \"f\");\n    }\n    isLocked() {\n        return __classPrivateFieldGet(this, _Post_locked, \"f\");\n    }\n    isNsfw() {\n        return __classPrivateFieldGet(this, _Post_nsfw, \"f\");\n    }\n    isQuarantined() {\n        return __classPrivateFieldGet(this, _Post_quarantined, \"f\");\n    }\n    isSpoiler() {\n        return __classPrivateFieldGet(this, _Post_spoiler, \"f\");\n    }\n    isHidden() {\n        return __classPrivateFieldGet(this, _Post_hidden, \"f\");\n    }\n    isIgnoringReports() {\n        return __classPrivateFieldGet(this, _Post_ignoringReports, \"f\");\n    }\n    isDistinguishedBy() {\n        return __classPrivateFieldGet(this, _Post_distinguishedBy, \"f\");\n    }\n    async edit(options) {\n        const newPost = await Post.edit({\n            id: this.id,\n            ...options,\n        }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_body, newPost.body, \"f\");\n        __classPrivateFieldSet(this, _Post_edited, newPost.edited, \"f\");\n    }\n    /**\n     * Set the suggested sort for comments on a Post.\n     *\n     * @throws {Error} Throws an error if the suggested sort could not be set.\n     * @example\n     * ```ts\n     * const post = await reddit.getPostById(context.postId);\n     * await post.setSuggestedCommentSort(\"NEW\");\n     * ```\n     */\n    async setSuggestedCommentSort(suggestedSort) {\n        await Post.setSuggestedCommentSort({ id: this.id, subredditId: __classPrivateFieldGet(this, _Post_subredditId, \"f\"), suggestedSort }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    /**\n     * Get the postData for the post.\n     *\n     * @example\n     * ```ts\n     * const post = await context.reddit.getPostById(context.postId);\n     * const postData = await post.getPostData();\n     * ```\n     */\n    async getPostData() {\n        const devvitPostData = await Post.getDevvitPostData(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        return devvitPostData?.developerData;\n    }\n    /**\n     * Set the postData on a custom post.\n     *\n     * @param {PostData} postData - Represents the postData to be set, eg: { currentScore: 55, secretWord: 'barbeque' }\n     * @throws {Error} Throws an error if the postData could not be set.\n     * @example\n     * ```ts\n     * const post = await reddit.getPostById(context.postId);\n     * await post.setPostData({\n     *   currentScore: 55,\n     *   secretWord: 'barbeque',\n     * });\n     * ```\n     */\n    async setPostData(postData) {\n        const prev = await Post.getDevvitPostData(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        await Post.setPostData({ postId: this.id, postData: { ...prev, developerData: postData } }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    /**\n     * Set a lightweight UI that shows while the custom post renders\n     *\n     * @param {JSX.ComponentFunction} ui - A JSX component function that returns a simple ui to be rendered.\n     * @throws {Error} Throws an error if the preview could not be set.\n     * @example\n     * ```ts\n     * const preview = (\n     *   <vstack height=\"100%\" width=\"100%\" alignment=\"middle center\">\n     *     <text size=\"large\">An updated preview!</text>\n     *   </vstack>\n     * );\n     * const post = await reddit.getPostById(context.postId);\n     * await post.setCustomPostPreview(() => preview);\n     * ```\n     */\n    async setCustomPostPreview(ui) {\n        await Post.setCustomPostPreview({\n            id: this.id,\n            ui,\n        }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    /**\n     * Set a text fallback for the custom post\n     *\n     * @param {CustomPostTextFallbackOptions} options - A text or a richtext to render in a fallback\n     * @throws {Error} Throws an error if the fallback could not be set.\n     * @example\n     * ```ts\n     * // from a menu action, form, scheduler, trigger, custom post click event, etc\n     * const newTextFallback = { text: 'This is an updated text fallback' };\n     * const post = await context.reddit.getPostById(context.postId);\n     * await post.setTextFallback(newTextFallback);\n     * ```\n     */\n    async setTextFallback(options) {\n        const newPost = await Post.setTextFallback(options, this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_body, newPost.body, \"f\");\n        __classPrivateFieldSet(this, _Post_edited, newPost.edited, \"f\");\n    }\n    async addComment(options) {\n        return Comment.submit({\n            id: this.id,\n            ...options,\n        }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    async delete() {\n        assertNonNull(__classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        const appUsername = __classPrivateFieldGet(this, _Post_metadata, \"f\")?.[Header.App]?.values[0];\n        if (appUsername !== __classPrivateFieldGet(this, _Post_authorName, \"f\")) {\n            throw new Error(`App '${appUsername}' is not the author of Post ${this.id}, delete not allowed.`);\n        }\n        return Post.delete(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    async approve() {\n        await Post.approve(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_approved, true, \"f\");\n        __classPrivateFieldSet(this, _Post_removed, false, \"f\");\n    }\n    async remove(isSpam = false) {\n        await Post.remove(this.id, isSpam, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_removed, true, \"f\");\n        __classPrivateFieldSet(this, _Post_spam, isSpam, \"f\");\n        __classPrivateFieldSet(this, _Post_approved, false, \"f\");\n    }\n    async lock() {\n        await Post.lock(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_locked, true, \"f\");\n    }\n    async unlock() {\n        await Post.unlock(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_locked, false, \"f\");\n    }\n    async hide() {\n        await Post.hide(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_hidden, true, \"f\");\n    }\n    async unhide() {\n        await Post.unhide(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_hidden, false, \"f\");\n    }\n    async markAsNsfw() {\n        await Post.markAsNsfw(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_nsfw, true, \"f\");\n    }\n    async unmarkAsNsfw() {\n        await Post.unmarkAsNsfw(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_nsfw, false, \"f\");\n    }\n    async markAsSpoiler() {\n        await Post.markAsSpoiler(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_spoiler, true, \"f\");\n    }\n    async unmarkAsSpoiler() {\n        await Post.unmarkAsSpoiler(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_spoiler, false, \"f\");\n    }\n    async sticky(position) {\n        await Post.sticky(this.id, position, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    async unsticky() {\n        await Post.unsticky(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    async distinguish() {\n        const { distinguishedBy } = await Post.distinguish(this.id, false, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_distinguishedBy, distinguishedBy, \"f\");\n    }\n    async distinguishAsAdmin() {\n        const { distinguishedBy } = await Post.distinguish(this.id, true, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_distinguishedBy, distinguishedBy, \"f\");\n    }\n    async undistinguish() {\n        const { distinguishedBy } = await Post.undistinguish(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_distinguishedBy, distinguishedBy, \"f\");\n    }\n    async ignoreReports() {\n        await Post.ignoreReports(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_ignoringReports, true, \"f\");\n    }\n    async unignoreReports() {\n        await Post.unignoreReports(this.id, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n        __classPrivateFieldSet(this, _Post_ignoringReports, false, \"f\");\n    }\n    async getAuthor() {\n        return User.getByUsername(__classPrivateFieldGet(this, _Post_authorName, \"f\"), __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    async crosspost(options) {\n        return Post.crosspost({\n            ...options,\n            postId: this.id,\n        }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    /**\n     * Add a mod note for why the post was removed\n     *\n     * @param options.reasonId id of a Removal Reason - you can leave this as an empty string if you don't have one\n     * @param options.modNote the reason for removal (maximum 100 characters) (optional)\n     * @returns\n     */\n    addRemovalNote(options) {\n        return ModNote.addRemovalNote({ itemIds: [__classPrivateFieldGet(this, _Post_id, \"f\")], ...options }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    /**\n     * Get a thumbnail that contains a preview image and also contains a blurred preview for\n     * NSFW images. The thumbnail returned has higher resolution than Post.thumbnail.\n     * Returns undefined if the post doesn't have a thumbnail\n     *\n     * @returns {EnrichedThumbnail | undefined}\n     * @throws {Error} Throws an error if the thumbnail could not be fetched\n     * @example\n     * ```ts\n     * // from a menu action, form, scheduler, trigger, custom post click event, etc\n     * const post = await context.reddit.getPostById(context.postId);\n     * const enrichedThumbnail = await post.getEnrichedThumbnail();\n     * ```\n     */\n    async getEnrichedThumbnail() {\n        return getThumbnailV2({ id: this.id }, __classPrivateFieldGet(this, _Post_metadata, \"f\"));\n    }\n    // TODO: flair methods\n    /** @internal */\n    static async getById(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        const postId = isT3ID(id) ? id : `t3_${id}`;\n        const response = await client.Info({\n            subreddits: [],\n            thingIds: [postId],\n        }, metadata);\n        if (!response.data?.children?.length) {\n            throw new Error('could not find post');\n        }\n        const postData = response.data.children[0];\n        if (!postData?.data) {\n            throw new Error('could not find post');\n        }\n        return new Post(postData.data, metadata);\n    }\n    /** @internal */\n    static async submit(options, metadata) {\n        const { runAs = 'APP' } = options;\n        const runAsType = RunAs[runAs];\n        const client = runAsType === RunAs.USER\n            ? Devvit.userActionsPlugin\n            : Devvit.redditAPIPlugins.LinksAndComments;\n        if (runAsType === RunAs.USER) {\n            Devvit.assertUserScope(Scope.SUBMIT_POST);\n        }\n        let response;\n        if ('preview' in options) {\n            assertNonNull(metadata, 'Missing metadata in `SubmitPostOptions`');\n            if (runAsType === RunAs.USER) {\n                assertNonNull(options.userGeneratedContent, 'userGeneratedContent must be set in `SubmitPostOptions` when RunAs=USER for experience posts');\n            }\n            const reconciler = new BlocksReconciler(() => options.preview, undefined, {}, metadata, undefined);\n            const previewBlock = await reconciler.buildBlocksUI();\n            const encodedCached = Block.encode(previewBlock).finish();\n            const { textFallback, ...sanitizedOptions } = options;\n            const richtextFallback = textFallback ? getCustomPostRichTextFallback(textFallback) : '';\n            const userGeneratedContent = options.userGeneratedContent\n                ? {\n                    text: options.userGeneratedContent.text ?? '',\n                    imageUrls: options.userGeneratedContent.imageUrls ?? [],\n                }\n                : undefined;\n            const devvitPostData = options.postData\n                ? {\n                    developerData: options.postData,\n                }\n                : undefined;\n            const submitRequest = {\n                kind: 'custom',\n                sr: options.subredditName,\n                richtextJson: fromByteArray(encodedCached),\n                richtextFallback,\n                ...sanitizedOptions,\n                userGeneratedContent,\n                runAs: runAsType,\n                postData: devvitPostData,\n            };\n            response = await client.SubmitCustomPost(submitRequest, metadata);\n        }\n        else {\n            response = await client.Submit({\n                kind: 'kind' in options ? options.kind : 'url' in options ? 'link' : 'self',\n                sr: options.subredditName,\n                richtextJson: 'richtext' in options ? richtextToString(options.richtext) : undefined,\n                ...options,\n                runAs: runAsType,\n            }, metadata);\n        }\n        // Post Id might not be present as image/video post creation can happen asynchronously\n        const isAllowedMediaType = 'kind' in options && ['image', 'video', 'videogif'].includes(options.kind);\n        if (isAllowedMediaType && !response.json?.data?.id) {\n            if (options.kind === 'image' && 'imageUrls' in options) {\n                throw new Error(`Image post type with ${options.imageUrls} is being created asynchronously and should be updated in the subreddit soon.`);\n            }\n            else if ('videoPosterUrl' in options) {\n                throw new Error(`Post of ${options.kind} type with ${options.videoPosterUrl} is being created asynchronously and should be updated in the subreddit soon.`);\n            }\n        }\n        if (response.json?.errors?.length) {\n            const errorMessages = decodeProtoErrors(response.json.errors);\n            const postIdText = response.json?.data?.id ? ` ${response.json.data.id}` : '';\n            throw new Error(`failed to submit post${postIdText} - errors: ${errorMessages.join(', ')}`);\n        }\n        else if (!response.json?.data?.id) {\n            throw new Error(`failed to submit post - no post ID returned but no error details found`);\n        }\n        return Post.getById(`t3_${response.json.data.id}`, metadata);\n    }\n    /** @internal */\n    static async crosspost(options, metadata) {\n        const { runAs = 'APP' } = options;\n        const runAsType = RunAs[runAs];\n        const client = runAsType === RunAs.USER\n            ? Devvit.userActionsPlugin\n            : Devvit.redditAPIPlugins.LinksAndComments;\n        const { postId, subredditName, ...rest } = options;\n        if (runAsType === RunAs.USER) {\n            Devvit.assertUserScope(Scope.SUBMIT_POST);\n        }\n        const response = await client.Submit({\n            kind: 'crosspost',\n            sr: subredditName,\n            crosspostFullname: asT3ID(postId),\n            ...rest,\n            runAs: runAsType,\n        }, metadata);\n        if (!response.json?.data?.id || response.json?.errors?.length) {\n            const errorMessages = response.json?.errors ? decodeProtoErrors(response.json.errors) : [];\n            throw new Error(`failed to crosspost post: ${errorMessages.join(', ')}`);\n        }\n        return Post.getById(`t3_${response.json.data.id}`, metadata);\n    }\n    /** @internal */\n    static async edit(options, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        const { id } = options;\n        let richtextString;\n        if ('richtext' in options) {\n            richtextString = richtextToString(options.richtext);\n        }\n        const response = await client.EditUserText({\n            thingId: id,\n            text: 'text' in options ? options.text : '',\n            richtextJson: richtextString,\n            runAs: RunAs.APP,\n        }, metadata);\n        if (response.json?.errors?.length) {\n            throw new Error('Failed to edit post');\n        }\n        // The LinksAndComments.EditUserText response is wrong and assumes that\n        // the API is only used to for comments so we fetch the new post here.\n        return Post.getById(id, metadata);\n    }\n    /** @internal */\n    static async setSuggestedCommentSort(options, metadata) {\n        const operationName = 'SetSuggestedSort';\n        const persistedQueryHash = 'cf6052acc7fefaa65b710625b81dba8041f258313aafe9730e2a3dc855e5d10d';\n        // Legacy GQL query. Do not copy this pattern.\n        // eslint-disable-next-line no-restricted-properties\n        const response = await GraphQL.query(operationName, persistedQueryHash, {\n            input: {\n                subredditId: options.subredditId,\n                postId: options.id,\n                sort: options.suggestedSort,\n            },\n        }, metadata);\n        if (!response.data?.setSuggestedSort?.ok) {\n            throw new Error('Failed to set suggested sort');\n        }\n    }\n    /** @internal */\n    static async getDevvitPostData(id, metadata) {\n        const operationName = 'GetDevvitPostData';\n        const persistedQueryHash = 'd349c9bee385336e44837c4a041d4b366fa32f16121cef7f12e1e3f230340696';\n        // Legacy GQL query. Do not copy this pattern.\n        // eslint-disable-next-line no-restricted-properties\n        const response = await GraphQL.query(operationName, persistedQueryHash, {\n            id,\n        }, metadata);\n        if (response.data?.postInfoById?.errors) {\n            throw new Error(`Failed to get devvit post data due to errors: ${response.data?.postInfoById?.errors.join(', ')}`);\n        }\n        // GQL returns postData as a JSON string\n        const devvitPostData = response.data?.postInfoById?.devvit?.postData;\n        if (!devvitPostData) {\n            return undefined;\n        }\n        return JSON.parse(devvitPostData);\n    }\n    /** @internal */\n    static async setPostData(options, metadata) {\n        const res = await Devvit.redditAPIPlugins.LinksAndComments.EditCustomPost({\n            thingId: options.postId,\n            postData: options.postData,\n        }, metadata);\n        if (res.json?.errors?.length) {\n            const errorMessages = decodeProtoErrors(res.json.errors);\n            throw new Error(`Failed to set post data, errors: ${errorMessages.join(', ')}`);\n        }\n    }\n    /** @internal */\n    static async setCustomPostPreview(options, metadata) {\n        if (!metadata) {\n            throw new Error('Failed to set custom post preview. Metadata not found');\n        }\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        const handler = new BlocksHandler(options.ui);\n        const handlerResponse = UIResponse.fromJSON(await handler.handle({ events: [] }, metadata));\n        const block = handlerResponse.blocks;\n        const blocksRenderContent = fromByteArray(Block.encode(block).finish());\n        await client.SetCustomPostPreview({\n            thingId: options.id,\n            bodyType: SetCustomPostPreviewRequestBodyType.BLOCKS,\n            blocksRenderContent,\n        }, metadata);\n    }\n    /** @internal */\n    static async setTextFallback(options, postId, metadata) {\n        if (!('text' in options) && !('richtext' in options)) {\n            throw new Error(`No text fallback provided for post ${postId}.`);\n        }\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        const richtextFallback = getCustomPostRichTextFallback(options);\n        const response = await client.EditCustomPost({\n            thingId: postId,\n            richtextFallback,\n        }, metadata);\n        if (response.json?.errors?.length) {\n            const errorMessages = decodeProtoErrors(response.json.errors);\n            throw Error(`set post ${postId} text fallback failed: ${errorMessages.join(', ')}`);\n        }\n        return Post.getById(postId, metadata);\n    }\n    /** @internal */\n    static async delete(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Del({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async approve(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.Approve({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async remove(id, isSpam = false, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.Remove({\n            id,\n            spam: isSpam,\n        }, metadata);\n    }\n    /** @internal */\n    static async hide(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Hide({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unhide(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Unhide({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async markAsNsfw(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.MarkNSFW({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unmarkAsNsfw(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.UnmarkNSFW({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async markAsSpoiler(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Spoiler({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unmarkAsSpoiler(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Unspoiler({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async sticky(id, position, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.SetSubredditSticky({\n            id,\n            state: true,\n            num: position,\n        }, metadata);\n    }\n    /** @internal */\n    static async unsticky(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.SetSubredditSticky({\n            id,\n            state: false,\n        }, metadata);\n    }\n    /** @internal */\n    static async lock(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Lock({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unlock(id, metadata) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        await client.Unlock({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async distinguish(id, asAdmin, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        const response = await client.Distinguish({\n            id,\n            how: asAdmin ? 'admin' : 'yes',\n            sticky: false,\n        }, metadata);\n        const post = response.json?.data?.things?.[0]?.data;\n        assertNonNull(post);\n        return {\n            distinguishedBy: post.distinguished,\n        };\n    }\n    /** @internal */\n    static async undistinguish(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        const response = await client.Distinguish({\n            id,\n            how: 'no',\n            sticky: false,\n        }, metadata);\n        const post = response.json?.data?.things?.[0]?.data;\n        assertNonNull(post);\n        return {\n            distinguishedBy: post.distinguished,\n        };\n    }\n    /** @internal */\n    static async ignoreReports(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.IgnoreReports({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async unignoreReports(id, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        await client.UnignoreReports({\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static getControversialPosts(options = {}, metadata) {\n        return this.getSortedPosts({\n            ...options,\n            sort: 'controversial',\n        }, metadata);\n    }\n    /** @internal */\n    static getTopPosts(options = {}, metadata) {\n        return this.getSortedPosts({\n            ...options,\n            sort: 'top',\n        }, metadata);\n    }\n    /** @internal */\n    static getSortedPosts(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Listings;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            fetch: async (fetchOptions) => {\n                const response = await client.Sort({\n                    show: 'all',\n                    sort: options.sort,\n                    t: options.timeframe,\n                    subreddit: options.subredditName,\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToPosts(response, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static getHotPosts(options = {\n        location: 'GLOBAL',\n    }, metadata) {\n        const client = Devvit.redditAPIPlugins.Listings;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            fetch: async (fetchOptions) => {\n                const response = await client.Hot({\n                    g: options.location,\n                    show: 'all',\n                    subreddit: options.subredditName,\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToPosts(response, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static getNewPosts(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Listings;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            fetch: async (fetchOptions) => {\n                const response = await client.New({\n                    show: 'all',\n                    subreddit: options.subredditName,\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToPosts(response, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static getRisingPosts(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Listings;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            fetch: async (fetchOptions) => {\n                const response = await client.Rising({\n                    show: 'all',\n                    subreddit: options.subredditName,\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToPosts(response, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static getPostsByUser(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            async fetch(fetchOptions) {\n                const response = await client.UserWhere({\n                    username: options.username,\n                    where: 'submitted',\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToPosts(response, metadata);\n            },\n        });\n    }\n}\n_Post_id = new WeakMap(), _Post_authorId = new WeakMap(), _Post_authorName = new WeakMap(), _Post_createdAt = new WeakMap(), _Post_subredditId = new WeakMap(), _Post_subredditName = new WeakMap(), _Post_permalink = new WeakMap(), _Post_title = new WeakMap(), _Post_body = new WeakMap(), _Post_bodyHtml = new WeakMap(), _Post_url = new WeakMap(), _Post_score = new WeakMap(), _Post_numberOfComments = new WeakMap(), _Post_numberOfReports = new WeakMap(), _Post_thumbnail = new WeakMap(), _Post_approved = new WeakMap(), _Post_approvedAtUtc = new WeakMap(), _Post_bannedAtUtc = new WeakMap(), _Post_spam = new WeakMap(), _Post_stickied = new WeakMap(), _Post_removed = new WeakMap(), _Post_removedBy = new WeakMap(), _Post_removedByCategory = new WeakMap(), _Post_archived = new WeakMap(), _Post_edited = new WeakMap(), _Post_locked = new WeakMap(), _Post_nsfw = new WeakMap(), _Post_quarantined = new WeakMap(), _Post_spoiler = new WeakMap(), _Post_hidden = new WeakMap(), _Post_ignoringReports = new WeakMap(), _Post_distinguishedBy = new WeakMap(), _Post_flair = new WeakMap(), _Post_authorFlair = new WeakMap(), _Post_secureMedia = new WeakMap(), _Post_modReportReasons = new WeakMap(), _Post_userReportReasons = new WeakMap(), _Post_gallery = new WeakMap(), _Post_metadata = new WeakMap();\nfunction listingProtosToPosts(listingProto, metadata) {\n    if (!listingProto.data?.children) {\n        throw new Error('Listing response is missing children');\n    }\n    const children = listingProto.data.children.map((child) => new Post(child.data, metadata));\n    return {\n        children,\n        before: listingProto.data.before,\n        after: listingProto.data.after,\n    };\n}\n/** @internal */\nasync function getThumbnailV2(options, metadata) {\n    const operationName = 'GetThumbnailV2';\n    const persistedQueryHash = '81580ce4e23d748c5a59a1618489b559bf4518b6a73af41f345d8d074c8b2ce9';\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, persistedQueryHash, {\n        id: options.id,\n    }, metadata);\n    const thumbnail = response.data?.postInfoById?.thumbnailV2;\n    if (!thumbnail) {\n        throw new Error('Failed to get thumbnail');\n    }\n    else if (!thumbnail.image) {\n        return undefined;\n    }\n    return {\n        attribution: thumbnail.attribution,\n        image: {\n            url: thumbnail.image.url,\n            width: thumbnail.image.dimensions.width,\n            height: thumbnail.image.dimensions.height,\n        },\n        isObfuscatedDefault: thumbnail.isObfuscatedDefault,\n        ...(thumbnail.obfuscatedImage && {\n            obfuscatedImage: {\n                url: thumbnail.obfuscatedImage.url,\n                width: thumbnail.obfuscatedImage.dimensions.width,\n                height: thumbnail.obfuscatedImage.dimensions.height,\n            },\n        }),\n    };\n}\n", "// eslint-disable-next-line no-restricted-imports\nimport { Any } from '@devvit/protos/types/google/protobuf/any.js';\n// eslint-disable-next-line no-restricted-imports\nimport { StringValue } from '@devvit/protos/types/google/protobuf/wrappers.js';\n/**\n * Decodes error messages from protobuf Any types wrapping StringValue.\n */\nexport function decodeProtoErrors(errors) {\n    return errors.map((err) => {\n        try {\n            const decoded = StringValue.decode(err.value);\n            return decoded.value;\n        }\n        catch {\n            // Fallback to stringify if decoding fails\n        }\n        return JSON.stringify(err);\n    });\n}\n", "import { RichTextBuilder } from '@devvit/shared-types/richtext/RichTextBuilder.js';\n/** @internal */\nexport const getCustomPostRichTextFallback = (textFallbackOptions) => 'text' in textFallbackOptions\n    ? textFallbackOptions.text\n    : richTextToTextFallbackString(textFallbackOptions.richtext);\nconst richTextToTextFallbackString = (textFallback) => {\n    if (textFallback instanceof RichTextBuilder) {\n        return textFallback.build();\n    }\n    else if (typeof textFallback === 'object') {\n        return JSON.stringify(textFallback);\n    }\n    return textFallback;\n};\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _User_id, _User_username, _User_createdAt, _User_linkKarma, _User_commentKarma, _User_nsfw, _User_isAdmin, _User_modPermissionsBySubreddit, _User_url, _User_permalink, _User_hasVerifiedEmail, _User_displayName, _User_about, _User_metadata;\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT2ID, isT2ID } from '../../../types/tid.js';\nimport { GraphQL } from '../graphql/GraphQL.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nimport { formatModeratorPermissions, validModPermissions } from '../helpers/permissions.js';\nimport { Comment } from './Comment.js';\nimport { convertUserFlairProtoToAPI, Flair } from './Flair.js';\nimport { Listing } from './Listing.js';\nimport { Post } from './Post.js';\nexport var SocialLinkType;\n(function (SocialLinkType) {\n    SocialLinkType[\"Custom\"] = \"CUSTOM\";\n    SocialLinkType[\"Reddit\"] = \"REDDIT\";\n    SocialLinkType[\"Instagram\"] = \"INSTAGRAM\";\n    SocialLinkType[\"Twitter\"] = \"TWITTER\";\n    SocialLinkType[\"Tiktok\"] = \"TIKTOK\";\n    SocialLinkType[\"Twitch\"] = \"TWITCH\";\n    SocialLinkType[\"Facebook\"] = \"FACEBOOK\";\n    SocialLinkType[\"Youtube\"] = \"YOUTUBE\";\n    SocialLinkType[\"Tumblr\"] = \"TUMBLR\";\n    SocialLinkType[\"Spotify\"] = \"SPOTIFY\";\n    SocialLinkType[\"Soundcloud\"] = \"SOUNDCLOUD\";\n    SocialLinkType[\"Beacons\"] = \"BEACONS\";\n    SocialLinkType[\"Linktree\"] = \"LINKTREE\";\n    SocialLinkType[\"Discord\"] = \"DISCORD\";\n    SocialLinkType[\"Venmo\"] = \"VENMO\";\n    SocialLinkType[\"CashApp\"] = \"CASH_APP\";\n    SocialLinkType[\"Patreon\"] = \"PATREON\";\n    SocialLinkType[\"Kofi\"] = \"KOFI\";\n    SocialLinkType[\"Paypal\"] = \"PAYPAL\";\n    SocialLinkType[\"Cameo\"] = \"CAMEO\";\n    SocialLinkType[\"Onlyfans\"] = \"ONLYFANS\";\n    SocialLinkType[\"Substack\"] = \"SUBSTACK\";\n    SocialLinkType[\"Kickstarter\"] = \"KICKSTARTER\";\n    SocialLinkType[\"Indiegogo\"] = \"INDIEGOGO\";\n    SocialLinkType[\"BuyMeACoffee\"] = \"BUY_ME_A_COFFEE\";\n    SocialLinkType[\"Shopify\"] = \"SHOPIFY\";\n})(SocialLinkType || (SocialLinkType = {}));\n/**\n * A class representing a user.\n */\nexport class User {\n    /**\n     * @internal\n     */\n    constructor(data, metadata) {\n        _User_id.set(this, void 0);\n        _User_username.set(this, void 0);\n        _User_createdAt.set(this, void 0);\n        _User_linkKarma.set(this, void 0);\n        _User_commentKarma.set(this, void 0);\n        _User_nsfw.set(this, void 0);\n        _User_isAdmin.set(this, void 0);\n        _User_modPermissionsBySubreddit.set(this, new Map());\n        // R2 bug: user.url is a permalink path\n        _User_url.set(this, void 0);\n        // R2 bug: user object does not contain a permalink field\n        _User_permalink.set(this, void 0);\n        _User_hasVerifiedEmail.set(this, void 0);\n        _User_displayName.set(this, void 0);\n        _User_about.set(this, void 0);\n        _User_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        assertNonNull(data.id, 'User ID is missing or undefined');\n        assertNonNull(data.name, 'Username is missing or undefined');\n        assertNonNull(data.createdUtc, 'User is missing created date');\n        // UserDataByAccountIds returns the ID without the t2_ prefix\n        __classPrivateFieldSet(this, _User_id, asT2ID(isT2ID(data.id) ? data.id : `t2_${data.id}`), \"f\");\n        __classPrivateFieldSet(this, _User_username, data.name, \"f\");\n        __classPrivateFieldSet(this, _User_nsfw, data.over18 ?? false, \"f\");\n        __classPrivateFieldSet(this, _User_isAdmin, data.isEmployee ?? false, \"f\");\n        const createdAt = new Date(0);\n        createdAt.setUTCSeconds(data.createdUtc);\n        __classPrivateFieldSet(this, _User_createdAt, createdAt, \"f\");\n        __classPrivateFieldSet(this, _User_linkKarma, data.linkKarma ?? 0, \"f\");\n        __classPrivateFieldSet(this, _User_commentKarma, data.commentKarma ?? 0, \"f\");\n        if (data.modPermissions) {\n            for (const [subredditName, permissions] of Object.entries(data.modPermissions)) {\n                __classPrivateFieldGet(this, _User_modPermissionsBySubreddit, \"f\").set(subredditName, validModPermissions(permissions));\n            }\n        }\n        __classPrivateFieldSet(this, _User_url, new URL(data.subreddit?.url ?? '', 'https://www.reddit.com').toString(), \"f\");\n        __classPrivateFieldSet(this, _User_permalink, data.subreddit?.url ?? '', \"f\");\n        __classPrivateFieldSet(this, _User_hasVerifiedEmail, data.hasVerifiedEmail ?? false, \"f\");\n        __classPrivateFieldSet(this, _User_displayName, data.subreddit?.title ?? __classPrivateFieldGet(this, _User_username, \"f\"), \"f\");\n        __classPrivateFieldSet(this, _User_about, data.subreddit?.publicDescription ?? '', \"f\");\n        __classPrivateFieldSet(this, _User_metadata, metadata, \"f\");\n    }\n    /**\n     * The ID (starting with t2_) of the user to retrieve.\n     * @example 't2_1w72'\n     */\n    get id() {\n        return __classPrivateFieldGet(this, _User_id, \"f\");\n    }\n    /**\n     * The username of the user omitting the u/.\n     * @example 'spez'\n     */\n    get username() {\n        return __classPrivateFieldGet(this, _User_username, \"f\");\n    }\n    /**\n     * The date the user was created.\n     */\n    get createdAt() {\n        return __classPrivateFieldGet(this, _User_createdAt, \"f\");\n    }\n    /**\n     * The amount of link karma the user has.\n     */\n    get linkKarma() {\n        return __classPrivateFieldGet(this, _User_linkKarma, \"f\");\n    }\n    /**\n     * The amount of comment karma the user has.\n     */\n    get commentKarma() {\n        return __classPrivateFieldGet(this, _User_commentKarma, \"f\");\n    }\n    /**\n     * Whether the user's profile is marked as NSFW (Not Safe For Work).\n     */\n    get nsfw() {\n        return __classPrivateFieldGet(this, _User_nsfw, \"f\");\n    }\n    /**\n     * Whether the user is admin.\n     */\n    get isAdmin() {\n        return __classPrivateFieldGet(this, _User_isAdmin, \"f\");\n    }\n    /**\n     * The permissions the user has on the subreddit.\n     */\n    get modPermissions() {\n        return __classPrivateFieldGet(this, _User_modPermissionsBySubreddit, \"f\");\n    }\n    /**\n     * Returns the HTTP URL for the user\n     */\n    get url() {\n        return __classPrivateFieldGet(this, _User_url, \"f\");\n    }\n    /**\n     * Returns a permalink path relative to https://www.reddit.com\n     */\n    get permalink() {\n        return __classPrivateFieldGet(this, _User_permalink, \"f\");\n    }\n    /**\n     * Indicates whether or not the user has verified their email address.\n     */\n    get hasVerifiedEmail() {\n        return __classPrivateFieldGet(this, _User_hasVerifiedEmail, \"f\");\n    }\n    /**\n     * The display name of the user. May be different from their username.\n     */\n    get displayName() {\n        return __classPrivateFieldGet(this, _User_displayName, \"f\");\n    }\n    /**\n     * The user's public description about themselves. May be empty.\n     */\n    get about() {\n        return __classPrivateFieldGet(this, _User_about, \"f\");\n    }\n    toJSON() {\n        return {\n            id: this.id,\n            username: this.username,\n            createdAt: this.createdAt,\n            linkKarma: this.linkKarma,\n            commentKarma: this.commentKarma,\n            nsfw: this.nsfw,\n            modPermissionsBySubreddit: Object.fromEntries(this.modPermissions),\n        };\n    }\n    /**\n     * Get the mod permissions the user has on the subreddit if they are a moderator.\n     *\n     * @param subredditName - name of the subreddit\n     * @returns the moderator permissions the user has on the subreddit\n     */\n    async getModPermissionsForSubreddit(subredditName) {\n        if (__classPrivateFieldGet(this, _User_modPermissionsBySubreddit, \"f\").has(subredditName)) {\n            return __classPrivateFieldGet(this, _User_modPermissionsBySubreddit, \"f\").get(subredditName);\n        }\n        const mods = await User.getSubredditUsersByType({\n            subredditName,\n            type: 'moderators',\n            username: this.username,\n        }, __classPrivateFieldGet(this, _User_metadata, \"f\")).all();\n        if (mods.length === 0) {\n            return [];\n        }\n        const permissions = mods[0].modPermissions.get(subredditName) ?? [];\n        if (permissions.length > 0) {\n            __classPrivateFieldGet(this, _User_modPermissionsBySubreddit, \"f\").set(subredditName, permissions);\n        }\n        return permissions;\n    }\n    /**\n     * Get the user's comments.\n     *\n     * @param options - Options for the request\n     * @param options.sort - The sort order of the comments. e.g. 'new'\n     * @param options.timeframe - The timeframe of the comments. e.g. 'all'\n     * @param options.limit - The maximum number of comments to return. e.g. 1000\n     * @param options.pageSize - The number of comments to return per request. e.g. 100\n     * @returns A Listing of Comment objects.\n     */\n    getComments(options) {\n        return Comment.getCommentsByUser({\n            username: this.username,\n            ...options,\n        }, __classPrivateFieldGet(this, _User_metadata, \"f\"));\n    }\n    /**\n     * Get the user's posts.\n     *\n     * @param options - Options for the request\n     * @param options.sort - The sort order of the posts. e.g. 'new'\n     * @param options.timeframe - The timeframe of the posts. e.g. 'all'\n     * @param options.limit - The maximum number of posts to return. e.g. 1000\n     * @param options.pageSize - The number of posts to return per request. e.g. 100\n     * @returns A Listing of Post objects.\n     */\n    getPosts(options) {\n        return Post.getPostsByUser({\n            username: this.username,\n            ...options,\n        }, __classPrivateFieldGet(this, _User_metadata, \"f\"));\n    }\n    /**\n     * Retrieve the user's flair for the subreddit.\n     *\n     * @param subreddit - The name of the subreddit associated with the user's flair.\n     *\n     * @example\n     * ```ts\n     * const username = \"badapple\"\n     * const subredditName = \"mysubreddit\"\n     * const user = await reddit.getUserByUsername(username);\n     * const userFlair = await user.getUserFlairBySubreddit(subredditName);\n     * ```\n     */\n    async getUserFlairBySubreddit(subreddit) {\n        const userFlairs = await Flair.getUserFlairBySubreddit({\n            subreddit,\n            name: __classPrivateFieldGet(this, _User_username, \"f\"),\n        }, __classPrivateFieldGet(this, _User_metadata, \"f\"));\n        return userFlairs.users[0] ? convertUserFlairProtoToAPI(userFlairs.users[0]) : undefined;\n    }\n    getSnoovatarUrl() {\n        return User.getSnoovatarUrl(this.username, __classPrivateFieldGet(this, _User_metadata, \"f\"));\n    }\n    /**\n     * Gets social links of the user\n     *\n     * @returns A Promise that resolves an Array of UserSocialLink objects\n     * @example\n     * ```ts\n     * const socialLinks = await user.getSocialLinks();\n     * ```\n     */\n    async getSocialLinks() {\n        const operationName = 'GetUserSocialLinks';\n        const persistedQueryHash = '2aca18ef5f4fc75fb91cdaace3e9aeeae2cb3843b5c26ad511e6f01b8521593a';\n        // Legacy GQL query. Do not copy this pattern.\n        // eslint-disable-next-line no-restricted-properties\n        const response = await GraphQL.query(operationName, persistedQueryHash, { name: this.username }, __classPrivateFieldGet(this, _User_metadata, \"f\"));\n        if (!response.data?.user?.profile?.socialLinks) {\n            return [];\n        }\n        return response.data.user.profile.socialLinks.map((link) => ({\n            ...link,\n            handle: link.handle ?? undefined,\n        }));\n    }\n    /**\n     * Returns the karma for this User in the current subreddit.\n     * The user making the request must be a moderator of the subreddit to read another user's karma in the subreddit.\n     * An exception is if the specified user is the same as the user making the request.\n     *\n     * @returns The GetUserKarmaForSubredditResponse, containing the user's karma for comments and posts in the subreddit.\n     */\n    async getUserKarmaFromCurrentSubreddit() {\n        return await User.getUserKarmaFromCurrentSubreddit(this.username, __classPrivateFieldGet(this, _User_metadata, \"f\"));\n    }\n    /** @internal */\n    static async getById(id, metadata) {\n        const username = await getUsernameById(id, metadata);\n        return username == null ? undefined : User.getByUsername(username, metadata);\n    }\n    /** @internal */\n    static async getByUsername(username, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        try {\n            const response = await client.UserAbout({ username }, metadata);\n            // suspended accounts 404.\n            if (response.data?.id)\n                return new User(response.data, metadata);\n        }\n        catch (error) {\n            if (error instanceof Error && error.message.includes('404 Not Found')) {\n                return undefined;\n            }\n            throw error;\n        }\n    }\n    /** @internal */\n    static async getFromMetadata(key, metadata) {\n        assertNonNull(metadata);\n        const userId = metadata?.[key]?.values[0];\n        return userId ? User.getById(asT2ID(userId), metadata) : Promise.resolve(undefined);\n    }\n    /** @internal */\n    static getSubredditUsersByType(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Subreddits;\n        return new Listing({\n            hasMore: true,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            after: options.after,\n            before: options.before,\n            fetch: async (fetchOptions) => {\n                const response = await client.AboutWhere({\n                    where: options.type,\n                    user: options.username,\n                    subreddit: options.subredditName,\n                    show: 'all',\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToUsers(response, options.subredditName, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static async createRelationship(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        const { type, subredditName, username, permissions, ...optionalFields } = options;\n        const response = await client.Friend({\n            type,\n            subreddit: subredditName,\n            name: username,\n            permissions: permissions ? formatModeratorPermissions(permissions) : undefined,\n            ...optionalFields,\n        }, metadata);\n        if (response.json?.errors?.length) {\n            throw new Error(response.json.errors.join('\\n'));\n        }\n    }\n    /** @internal */\n    static async removeRelationship(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        await client.Unfriend({\n            type: options.type,\n            subreddit: options.subredditName,\n            name: options.username,\n        }, metadata);\n    }\n    /** @internal */\n    static async setModeratorPermissions(username, subredditName, permissions, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        const response = await client.SetPermissions({\n            subreddit: subredditName,\n            name: username,\n            type: 'moderator',\n            permissions: formatModeratorPermissions(permissions),\n        }, metadata);\n        if (response.json?.errors?.length) {\n            throw new Error(response.json.errors.join('\\n'));\n        }\n    }\n    /** @internal */\n    static async getSnoovatarUrl(username, metadata) {\n        const operationName = 'GetSnoovatarUrlByName';\n        const persistedQueryHash = 'c47fd42345af268616d2d8904b56856acdc05cf61d3650380f539ad7d596ac0c';\n        // Legacy GQL query. Do not copy this pattern.\n        // eslint-disable-next-line no-restricted-properties\n        const response = await GraphQL.query(operationName, persistedQueryHash, { username }, metadata);\n        return response.data?.redditorInfoByName?.snoovatarIcon?.url;\n    }\n    /** @internal */\n    static getOverview(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Users;\n        return new Listing({\n            hasMore: true,\n            before: options.before,\n            after: options.after,\n            pageSize: options.pageSize,\n            limit: options.limit,\n            async fetch(fetchOptions) {\n                const response = await client.UserWhere({\n                    username: options.username,\n                    where: 'overview',\n                    ...fetchOptions,\n                }, metadata);\n                return listingProtosToPostsOrComments(response, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static async getUserKarmaFromCurrentSubreddit(username, metadata) {\n        assertNonNull(metadata);\n        const subredditId = metadata?.[Header.Subreddit]?.values[0];\n        if (!subredditId) {\n            throw new Error('Subreddit ID is missing from metadata');\n        }\n        return await Devvit.redditAPIPlugins.Users.GetUserKarmaForSubreddit({\n            username: username,\n            subredditId,\n        });\n    }\n}\n_User_id = new WeakMap(), _User_username = new WeakMap(), _User_createdAt = new WeakMap(), _User_linkKarma = new WeakMap(), _User_commentKarma = new WeakMap(), _User_nsfw = new WeakMap(), _User_isAdmin = new WeakMap(), _User_modPermissionsBySubreddit = new WeakMap(), _User_url = new WeakMap(), _User_permalink = new WeakMap(), _User_hasVerifiedEmail = new WeakMap(), _User_displayName = new WeakMap(), _User_about = new WeakMap(), _User_metadata = new WeakMap();\nfunction listingProtosToPostsOrComments(listingProto, metadata) {\n    if (!listingProto.data?.children) {\n        throw new Error('Listing response is missing children');\n    }\n    const children = listingProto.data.children.map((child) => {\n        if (child.kind === 't3') {\n            return new Post(child.data, metadata);\n        }\n        else if (child.kind === 't1') {\n            return new Comment(child.data, metadata);\n        }\n        throw new Error(`Type ${child.kind} is not supported`);\n    });\n    return {\n        children: children,\n        before: listingProto.data.before,\n        after: listingProto.data.after,\n    };\n}\nasync function listingProtosToUsers(listingProto, subredditName, metadata) {\n    const client = Devvit.redditAPIPlugins.Users;\n    if (!listingProto.data?.children) {\n        throw new Error('Listing response is missing children');\n    }\n    const userIds = listingProto.data.children.map((child) => {\n        assertNonNull(child.data?.id, 'User id is still from listing data');\n        return child.data.id;\n    });\n    // break the ids into chunks since they're passed over a query parameter\n    const chunkSize = 100;\n    const userIdChunks = [];\n    for (let i = 0; i < userIds.length; i += chunkSize) {\n        userIdChunks.push(userIds.slice(i, i + chunkSize));\n    }\n    // perform the requests\n    const usersMapResponses = await Promise.all(userIdChunks.map((userIds) => client.UserDataByAccountIds({\n        ids: userIds.join(','),\n    }, metadata)));\n    // join the responses back into a single map of user data\n    const userDataById = usersMapResponses.reduce((allUsers, response) => ({ ...allUsers, ...response.users }), {});\n    const children = listingProto.data.children.map((child) => {\n        const id = child.data?.id;\n        assertNonNull(id, 'User id is missing from listing');\n        const userData = userDataById[id];\n        // Casting to unknown because Typescript assumes that userData is always defined\n        // because of how we defined the UserDataByAccountIdsResponse_UserAccountData protobuf.\n        assertNonNull(userData, 'User data is missing from response');\n        return new User({\n            id,\n            name: userData.name,\n            linkKarma: userData.linkKarma,\n            commentKarma: userData.commentKarma,\n            createdUtc: userData.createdUtc,\n            over18: userData.profileOver18,\n            snoovatarSize: [],\n            modPermissions: {\n                [subredditName]: child.data?.modPermissions ?? [],\n            },\n        }, metadata);\n    });\n    return {\n        children,\n        before: listingProto.data.before,\n        after: listingProto.data.after,\n    };\n}\n/** @internal */\nasync function getUsernameById(id, metadata) {\n    const client = Devvit.redditAPIPlugins.Users;\n    const response = await client.UserDataByAccountIds({ ids: id }, metadata);\n    return response?.users?.[id]?.name;\n}\n/** @internal */\nexport async function getCurrentUsernameFromMetadata(metadata) {\n    assertNonNull(metadata);\n    const username = metadata?.[Header.Username]?.values[0];\n    if (username) {\n        return username;\n    }\n    const userId = metadata?.[Header.User]?.values[0];\n    if (!userId) {\n        return undefined;\n    }\n    return getUsernameById(userId, metadata);\n}\n", "import { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { Listing } from './Listing.js';\nexport function getModerationLog(options, metadata) {\n    const client = Devvit.redditAPIPlugins.Moderation;\n    return new Listing({\n        hasMore: true,\n        after: options.after,\n        before: options.before,\n        limit: options.limit,\n        pageSize: options.pageSize,\n        fetch: async (fetchOptions) => {\n            const response = await client.AboutLog({\n                subreddit: options.subredditName,\n                mod: options.moderatorUsernames ? options.moderatorUsernames.join(',') : undefined,\n                type: options.type,\n                ...fetchOptions,\n            }, metadata);\n            return aboutLogResponseToModActions(response);\n        },\n    });\n}\nfunction aboutLogResponseToModActions(response) {\n    if (!response.data?.children) {\n        throw new Error('AboutLogResponse is missing children');\n    }\n    const children = response.data.children.map((child) => {\n        if (!child.data) {\n            throw new Error('ModAction from AboutLogResponse is missing or invalid');\n        }\n        const { id, mod, modId36, createdUtc, subreddit, subredditNamePrefixed, action, srId36, description, details, targetAuthor, targetBody, targetFullname, targetPermalink, targetTitle, } = child.data;\n        assertNonNull(id, 'ModAction from AboutLogResponse is missing id');\n        assertNonNull(mod, 'ModAction from AboutLogResponse is missing mod');\n        assertNonNull(modId36, 'ModAction from AboutLogResponse is missing modId36');\n        assertNonNull(createdUtc, 'ModAction from AboutLogResponse is missing createdUtc');\n        assertNonNull(subreddit, 'ModAction from AboutLogResponse is missing subreddit');\n        assertNonNull(subredditNamePrefixed, 'ModAction from AboutLogResponse is missing subredditNamePrefixed');\n        assertNonNull(action, 'ModAction from AboutLogResponse is missing action');\n        assertNonNull(srId36, 'ModAction from AboutLogResponse is missing srId36');\n        const createdAt = new Date(0);\n        createdAt.setUTCSeconds(createdUtc);\n        const modAction = {\n            id,\n            type: action,\n            moderatorName: mod,\n            moderatorId: `t2_${modId36}`,\n            createdAt,\n            subredditName: subreddit,\n            subredditId: `t5_${srId36}`,\n            description,\n            details,\n            target: targetFullname\n                ? {\n                    id: targetFullname,\n                    author: targetAuthor,\n                    body: targetBody,\n                    permalink: targetPermalink,\n                    title: targetTitle,\n                }\n                : undefined,\n        };\n        return modAction;\n    });\n    return {\n        children,\n        after: response.data.after,\n        before: response.data.before,\n    };\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _ModMailService_instances, _ModMailService_metadata, _ModMailService_transformConversationData, _ModMailService_getConversationMessages, _ModMailService_getConversationModActions;\nimport {} from '@devvit/protos';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT5ID } from '../../../types/tid.js';\nimport { GraphQL } from '../graphql/GraphQL.js';\nexport var ModMailConversationState;\n(function (ModMailConversationState) {\n    ModMailConversationState[\"New\"] = \"New\";\n    ModMailConversationState[\"InProgress\"] = \"InProgress\";\n    ModMailConversationState[\"Archived\"] = \"Archived\";\n    ModMailConversationState[\"Appeals\"] = \"Appeals\";\n    ModMailConversationState[\"JoinRequests\"] = \"JoinRequests\";\n    ModMailConversationState[\"Filtered\"] = \"Filtered\";\n})(ModMailConversationState || (ModMailConversationState = {}));\nconst R2_TO_MODMAIL_CONVERSATION_STATE = {\n    0: ModMailConversationState.New,\n    1: ModMailConversationState.InProgress,\n    2: ModMailConversationState.Archived,\n    3: ModMailConversationState.Appeals,\n    4: ModMailConversationState.JoinRequests,\n    5: ModMailConversationState.Filtered,\n};\n/**\n * An ActionType describes a particular logged action within a conversation. For example,\n * if a mod highlights a conversation, a ModerationAction record with the type `Highlighted`\n * would be created.\n */\nexport var ModMailActionType;\n(function (ModMailActionType) {\n    ModMailActionType[\"Highlighted\"] = \"Highlighted\";\n    ModMailActionType[\"Unhighlighted\"] = \"Unhighlighted\";\n    ModMailActionType[\"Archived\"] = \"Archived\";\n    ModMailActionType[\"Unarchived\"] = \"Unarchived\";\n    ModMailActionType[\"ReportedToAdmins\"] = \"ReportedToAdmins\";\n    ModMailActionType[\"Muted\"] = \"Muted\";\n    ModMailActionType[\"Unmuted\"] = \"Unmuted\";\n    ModMailActionType[\"Banned\"] = \"Banned\";\n    ModMailActionType[\"Unbanned\"] = \"Unbanned\";\n    ModMailActionType[\"Approved\"] = \"Approved\";\n    ModMailActionType[\"Disapproved\"] = \"Disapproved\";\n    ModMailActionType[\"Filtered\"] = \"Filtered\";\n    ModMailActionType[\"Unfiltered\"] = \"Unfiltered\";\n})(ModMailActionType || (ModMailActionType = {}));\nconst R2_TO_MOD_ACTION_TYPE = {\n    0: ModMailActionType.Highlighted,\n    1: ModMailActionType.Unhighlighted,\n    2: ModMailActionType.Archived,\n    3: ModMailActionType.Unarchived,\n    4: ModMailActionType.ReportedToAdmins,\n    5: ModMailActionType.Muted,\n    6: ModMailActionType.Unmuted,\n    7: ModMailActionType.Banned,\n    8: ModMailActionType.Unbanned,\n    9: ModMailActionType.Approved,\n    10: ModMailActionType.Disapproved,\n    11: ModMailActionType.Filtered,\n    12: ModMailActionType.Unfiltered,\n};\n/**\n * Class providing the methods for working with Mod Mail\n */\nexport class ModMailService {\n    /**\n     * @internal\n     */\n    constructor(metadata) {\n        _ModMailService_instances.add(this);\n        _ModMailService_metadata.set(this, void 0);\n        this.notificationSubjectPrefix = '[notification]';\n        __classPrivateFieldSet(this, _ModMailService_metadata, metadata, \"f\");\n    }\n    /**\n     * Marks all conversations read for a particular conversation state within the passed list of subreddits.\n     *\n     * @param subreddits Array of subreddit names\n     * @param state One of the possible conversation states ('all' to read all conversations)\n     *\n     * @returns conversationIds\n     *\n     * @example\n     * ```ts\n     * const conversationIds = await reddit.modMail.bulkReadConversations(\n     *   ['askReddit', 'myAwesomeSubreddit'],\n     *   'filtered'\n     * );\n     * ```\n     */\n    async bulkReadConversations(subreddits, state) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const { conversationIds } = await client.BulkReadConversations({\n            entity: subreddits.join(','),\n            state,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return conversationIds;\n    }\n    /**\n     * Get conversations for a logged in user or subreddits\n     *\n     * @param params.after id of a modmail\n     * @param params.subreddits array of subreddit names\n     * @param params.limit an integer between 1 and 100 (default: 25)\n     * @param params.sort one of (recent, mod, user, unread)\n     * @param params.state One of the possible conversation states ('all' to read all conversations)\n     *\n     * @example\n     * ```ts\n     * const {viewerId, conversations} = await reddit.modMail.getConversations({\n     *   after: 'abcdef',\n     *   limit: 42\n     * });\n     *\n     * const arrayOfConversations = Object.values(conversations);\n     * ```\n     */\n    async getConversations(params) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.GetConversations({\n            after: params.after,\n            entity: params.subreddits ? params.subreddits.join(',') : undefined,\n            limit: params.limit,\n            sort: params.sort,\n            state: params.state,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        const conversations = {};\n        for (const id in response.conversations) {\n            conversations[id] = __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations[id],\n                protoMessages: response.messages,\n                protoModActions: {},\n            });\n        }\n        return {\n            conversations,\n            viewerId: response.viewerId,\n            conversationIds: response.conversationIds,\n        };\n    }\n    /**\n     * Returns all messages, mod actions and conversation metadata for a given conversation id\n     *\n     * @param params.conversationId id of a modmail conversation\n     * @param params.markRead should be marked as read (default: false)\n     *\n     * @example\n     * ```ts\n     * const { conversation, messages, modActions, user } = await reddit.modMail.getConversation({ conversationId: 'abcdef', markRead: true });\n     * ```\n     */\n    async getConversation(params) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.GetConversation({ ...params, markRead: !!params.markRead }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            participantSubreddit: response.participantSubreddit,\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Returns a list of Subreddits that the user moderates with mail permission\n     *\n     * @example\n     * ```ts\n     * const subredditsData = await reddit.modMail.getSubreddits();\n     *\n     * for (const subreddit of Object.values(subreddits)) {\n     *   console.log(subreddit.id);\n     *   console.log(subreddit.name);\n     * }\n     * ```\n     */\n    async getSubreddits() {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const { subreddits } = await client.Subreddits({}, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return subreddits;\n    }\n    /**\n     * Creates a new conversation for a particular SR.\n     *\n     * This endpoint will create a ModmailConversation object\n     * as well as the first ModmailMessage within the ModmailConversation object.\n     *\n     * @note\n     * Note on {param.to}:\n     * The to field for this endpoint is somewhat confusing. It can be:\n     * - A User, passed like \"username\" or \"u/username\"\n     * - A Subreddit, passed like \"r/subreddit\"\n     * - null, meaning an internal moderator discussion\n     *\n     * In this way to is a bit of a misnomer in modmail conversations.\n     * What it really means is the participant of the conversation who is not a mod of the subreddit.\n     *\n     * If you plan to send a message to the app-account or a moderator of the subreddit, use {@link ModMailService.createModDiscussionConversation}, {@link ModMailService.createModInboxConversation}, or {@link ModMailService.createModNotification} instead.\n     * Otherwise, messages sent to the app-account or moderator will automatically be routed to Mod Discussions.\n     * @param params.body markdown text\n     * @param params.isAuthorHidden is author hidden? (default: false)\n     * @param params.subredditName subreddit name\n     * @param params.subject subject of the conversation. max 100 characters\n     * @param params.to a user (e.g. u/username), a subreddit (e.g. r/subreddit) or null\n     *\n     * @example\n     * ```ts\n     * const { conversation, messages, modActions } = await reddit.modMail.createConversation({\n     *   subredditName: 'askReddit',\n     *   subject: 'Test conversation',\n     *   body: 'Lorem ipsum sit amet',\n     *   to: null,\n     * });\n     * ```\n     */\n    async createConversation(params) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.CreateConversation({\n            body: params.body,\n            isAuthorHidden: params.isAuthorHidden ?? false,\n            srName: params.subredditName,\n            subject: params.subject,\n            to: params.to ? params.to : undefined,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Creates a conversation in Mod Discussions with the moderators of the given subredditId.\n     *\n     * Note: The app must be installed in the subreddit in order to create a conversation in Mod Discussions.\n     *\n     * @param subject - The subject of the message.\n     * @param bodyMarkdown - The body of the message in markdown format, e.g. `Hello world \\n\\n **Have a great day**`.\n     * @param subredditId - The ID (starting with `t5_`) of the subreddit to which to send the message, e.g. `t5_2qjpg`.\n     * @returns A Promise that resolves a string representing the conversationId of the message.\n     * @example\n     * ```ts\n     * const conversationId = await reddit.modMail.createModDiscussionConversation({\n     *   subject: 'Test conversation',\n     *   bodyMarkdown: '**Hello there** \\n\\n _Have a great day!_',\n     *   subredditId: context.subredditId\n     * });\n     * ```\n     */\n    async createModDiscussionConversation(params) {\n        return createModmailConversation({\n            subject: params.subject,\n            bodyMarkdown: params.bodyMarkdown,\n            subredditId: asT5ID(params.subredditId),\n            isInternal: true,\n            participantType: 'MODERATOR',\n            conversationType: 'INTERNAL',\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n    /**\n     * Creates a conversation in the Modmail Inbox with the moderators of the given subredditId.\n     *\n     * @param subject - The subject of the message.\n     * @param bodyMarkdown - The body of the message in markdown format, e.g. `Hello world \\n\\n **Have a great day**`.\n     * @param subredditId - The ID (starting with `t5_`) of the subreddit to which to send the message, e.g. `t5_2qjpg`.\n     * @returns A Promise that resolves a string representing the conversationId of the message.\n     * @example\n     * ```ts\n     * const conversationId = await reddit.modMail.createModInboxConversation({\n     *   subject: 'Test conversation',\n     *   bodyMarkdown: '**Hello there** \\n\\n _Have a great day!_',\n     *   subredditId: context.subredditId\n     * });\n     * ```\n     */\n    async createModInboxConversation(params) {\n        return createModmailConversation({\n            subject: params.subject,\n            bodyMarkdown: params.bodyMarkdown,\n            subredditId: asT5ID(params.subredditId),\n            isInternal: false,\n            participantType: 'PARTICIPANT_USER',\n            conversationType: 'SR_USER',\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n    /**\n     * Creates a notification in the Modmail Inbox.\n     * This function is different from {@link ModMailService.createModInboxConversation} in that the conversation also appears in the \"Notifications\" section of Modmail.\n     *\n     * @param subject - The subject of the message.\n     * @param bodyMarkdown - The body of the message in markdown format, e.g. `Hello world \\n\\n **Have a great day**`.\n     * @param subredditId - The ID (starting with `t5_`) of the subreddit to which to send the message, e.g. `t5_2qjpg`.\n     * @returns A Promise that resolves a string representing the conversationId of the message.\n     * @example\n     * ```ts\n     * const conversationId = await reddit.modMail.createModNotification({\n     *   subject: 'Test notification',\n     *   bodyMarkdown: '**Hello there** \\n\\n _This is a notification!_',\n     *   subredditId: context.subredditId\n     * });\n     * ```\n     */\n    async createModNotification(params) {\n        let notificationSubject = params.subject;\n        if (!params.subject.startsWith(this.notificationSubjectPrefix)) {\n            notificationSubject = `${this.notificationSubjectPrefix} ${params.subject}`;\n        }\n        return createModmailConversation({\n            subject: notificationSubject,\n            bodyMarkdown: params.bodyMarkdown,\n            subredditId: asT5ID(params.subredditId),\n            isInternal: false,\n            participantType: 'PARTICIPANT_USER',\n            conversationType: 'SR_USER',\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n    /**\n     * Creates a new message for a particular conversation.\n     *\n     * @param params.conversationId Id of a modmail conversation\n     * @param params.body markdown text\n     * @param params.isInternal is internal message? (default: false)\n     * @param params.isAuthorHidden is author hidden? (default: false)\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.reply({\n     *   body: 'Lorem ipsum sit amet',\n     *   conversationId: 'abcdef',\n     * });\n     * ```\n     */\n    async reply(params) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.CreateConversationMessage({\n            body: params.body,\n            conversationId: params.conversationId,\n            isAuthorHidden: params.isAuthorHidden ?? false,\n            isInternal: params.isInternal ?? false,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: {},\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Marks a conversation as highlighted.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.highlightConversation('abcdef');\n     * ```\n     */\n    async highlightConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.HighlightConversation({\n            conversationId: conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n        };\n    }\n    /**\n     * Removes a highlight from a conversation.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.unhighlightConversation('abcdef');\n     * ```\n     */\n    async unhighlightConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.UnhighlightConversation({\n            conversationId: conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n        };\n    }\n    /**\n     * Marks a conversation as archived\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.archive('abcdef');\n     * ```\n     */\n    async archiveConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.ArchiveConversation({\n            conversationId: conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n        };\n    }\n    /**\n     * Marks conversation as unarchived.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.unarchiveConversation('abcdef');\n     * ```\n     */\n    async unarchiveConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.UnarchiveConversation({\n            conversationId: conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversation,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n        };\n    }\n    /**\n     * Marks a conversation as read for the user.\n     *\n     * @param params.conversationId Id of a modmail conversation\n     * @param params.numHours For how many hours the conversation needs to be muted. Must be one of 72, 168, or 672 hours\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.muteConversation({ conversationId: 'abcdef', numHours: 72 });\n     * ```\n     */\n    async muteConversation(params) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.MuteConversation({\n            conversationId: params.conversationId,\n            numHours: params.numHours,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Unmutes the non mod user associated with a particular conversation.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.unmuteConversation('abcdef');\n     * ```\n     */\n    async unmuteConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.UnmuteConversation({\n            conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Marks a conversations as read for the user.\n     *\n     * @param conversationIds An array of ids\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.readConversations(['abcdef', 'qwerty']);\n     * ```\n     */\n    async readConversations(conversationIds) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        await client.Read({\n            conversationIds: conversationIds.join(','),\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n    /**\n     * Marks conversations as unread for the user.\n     *\n     * @param conversationIds An array of ids\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.unreadConversations(['abcdef', 'qwerty']);\n     * ```\n     */\n    async unreadConversations(conversationIds) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        await client.Unread({\n            conversationIds: conversationIds.join(','),\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n    /**\n     * Approve the non mod user associated with a particular conversation.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.approveConversation('abcdef');\n     * ```\n     */\n    async approveConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.ApproveConversation({\n            conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Disapprove the non mod user associated with a particular conversation.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.disapproveConversation('abcdef');\n     * ```\n     */\n    async disapproveConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.DisapproveConversation({\n            conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Temporary ban (switch from permanent to temporary ban) the non mod user associated with a particular conversation.\n     *\n     * @param params.conversationId a modmail conversation id\n     * @param params.duration duration in days, max 999\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.tempBanConversation({ conversationId: 'abcdef', duration: 42 });\n     * ```\n     */\n    async tempBanConversation(params) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.TempBan({\n            ...params,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Unban the non mod user associated with a particular conversation.\n     *\n     * @param conversationId a modmail conversation id\n     *\n     * @example\n     * ```ts\n     * await reddit.modMail.unbanConversation('abcdef');\n     * ```\n     */\n    async unbanConversation(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        const response = await client.Unban({\n            conversationId,\n        }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n        return {\n            conversation: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_transformConversationData).call(this, {\n                protoConversation: response.conversations,\n                protoMessages: response.messages,\n                protoModActions: response.modActions,\n            }),\n            user: response.user,\n        };\n    }\n    /**\n     * Endpoint to retrieve the unread conversation count by conversation state.\n     *\n     * @example\n     * ```ts\n     * const response = await reddit.modMail.getUnreadCount();\n     *\n     * console.log(response.highlighted);\n     * console.log(response.new);\n     * ```\n     */\n    async getUnreadCount() {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        return await client.UnreadCount({}, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n    /**\n     * Returns recent posts, comments and modmail conversations for a given user.\n     *\n     * @param conversationId Id of a modmail conversation\n     *\n     * @example\n     * ```ts\n     * const data = await reddit.modMail.getUserConversations('abcdef');\n     *\n     * console.log(data.recentComments);\n     * console.log(data.recentPosts);\n     * ```\n     */\n    async getUserConversations(conversationId) {\n        const client = Devvit.redditAPIPlugins.NewModmail;\n        return await client.UserConversations({ conversationId }, __classPrivateFieldGet(this, _ModMailService_metadata, \"f\"));\n    }\n}\n_ModMailService_metadata = new WeakMap(), _ModMailService_instances = new WeakSet(), _ModMailService_transformConversationData = function _ModMailService_transformConversationData({ protoConversation, protoMessages, protoModActions, }) {\n    return {\n        ...protoConversation,\n        state: R2_TO_MODMAIL_CONVERSATION_STATE[protoConversation.state],\n        messages: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_getConversationMessages).call(this, protoConversation, protoMessages),\n        modActions: __classPrivateFieldGet(this, _ModMailService_instances, \"m\", _ModMailService_getConversationModActions).call(this, protoConversation, protoModActions),\n    };\n}, _ModMailService_getConversationMessages = function _ModMailService_getConversationMessages(protoConversation, protoMessages) {\n    const messages = {};\n    const messageIds = protoConversation.objIds\n        .filter((o) => o.key === 'messages')\n        .map(({ id }) => id);\n    for (const messageId of messageIds) {\n        const protoMessage = protoMessages[messageId];\n        if (protoMessage) {\n            messages[messageId] = protoMessage;\n        }\n    }\n    return messages;\n}, _ModMailService_getConversationModActions = function _ModMailService_getConversationModActions(protoConversation, protoModActions) {\n    const modActions = {};\n    const modActionIds = protoConversation.objIds\n        .filter((o) => o.key === 'modActions')\n        .map(({ id }) => id);\n    for (const modActionId of modActionIds) {\n        const protoModAction = protoModActions[modActionId];\n        if (protoModAction) {\n            modActions[modActionId] = {\n                ...protoModAction,\n                actionType: R2_TO_MOD_ACTION_TYPE[protoModAction.actionTypeId],\n            };\n        }\n    }\n    return modActions;\n};\n/**\n * Creates a Modmail conversation with the moderators of the given subredditId.\n * @internal\n * @param subject - The subject of the message.\n * @param bodyMarkdown - The body of the message in markdown format, e.g. `Hello world \\n\\n **Have a great day**`.\n * @param subredditId - The ID (starting with `t5_`) of the subreddit to which to send the message, e.g. `t5_2qjpg`.\n * @param isInternal - Indicates if the conversation should be internal or not.\n * @param participantType - The type of participant the author is in the conversation.\n * @param conversationType - The type of conversation to create.\n * @returns A Promise that resolves a string representing the conversationId of the message.\n */\nasync function createModmailConversation(params, metadata) {\n    const appUserId = metadata[Header.AppUser]?.values[0];\n    const operationName = 'CreateModmailConversation';\n    const persistedQueryHash = '5f9ae20b0c7bdffcafb80241728a72e67cd4239bc09f67284b79d4aa706ee0e5';\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, persistedQueryHash, {\n        subject: params.subject,\n        bodyMarkdown: params.bodyMarkdown,\n        subredditId: params.subredditId,\n        authorId: appUserId,\n        isInternal: params.isInternal,\n        participantType: params.participantType,\n        conversationType: params.conversationType,\n    }, metadata);\n    if (response.data?.createModmailConversationV2?.ok) {\n        return response.data?.createModmailConversationV2?.conversationId;\n    }\n    throw new Error('modmail conversation creation failed; ${response.data?.createModmailConversationV2?.errors[0].message}');\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PrivateMessage_id, _PrivateMessage_from, _PrivateMessage_body, _PrivateMessage_bodyHtml, _PrivateMessage_created, _PrivateMessage_metadata;\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT2ID, asT5ID, asTID } from '../../../types/tid.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nimport { Listing } from './Listing.js';\nexport class PrivateMessage {\n    /** @internal */\n    static async getMessages(options, metadata) {\n        const client = Devvit.redditAPIPlugins.PrivateMessages;\n        return new Listing({\n            ...options,\n            fetch: async (fetchOpts) => {\n                const listing = await client.MessageWhere({\n                    ...fetchOpts,\n                    where: options.type ?? 'inbox',\n                }, metadata);\n                return {\n                    after: listing.data?.after,\n                    before: listing.data?.before,\n                    children: (listing.data?.children\n                        ?.map((child) => {\n                        return new PrivateMessage(child.data, metadata);\n                    })\n                        .filter(Boolean) || []),\n                };\n            },\n        });\n    }\n    /** @internal */\n    static async send({ to, subject, text }, metadata) {\n        const client = Devvit.redditAPIPlugins.PrivateMessages;\n        await client.Compose({\n            to,\n            subject,\n            text,\n            fromSr: '',\n        }, metadata);\n    }\n    /** @internal */\n    static async sendAsSubreddit({ to, fromSubredditName, subject, text }, metadata) {\n        const client = Devvit.redditAPIPlugins.PrivateMessages;\n        await client.Compose({\n            to,\n            fromSr: fromSubredditName,\n            subject,\n            text,\n        }, metadata);\n    }\n    /** @internal */\n    static async markAllAsRead(metadata) {\n        const client = Devvit.redditAPIPlugins.PrivateMessages;\n        await client.ReadAllMessages({ filterTypes: '' }, metadata);\n    }\n    /**\n     * @internal\n     */\n    constructor(data, metadata) {\n        _PrivateMessage_id.set(this, void 0);\n        _PrivateMessage_from.set(this, void 0);\n        _PrivateMessage_body.set(this, void 0);\n        _PrivateMessage_bodyHtml.set(this, void 0);\n        _PrivateMessage_created.set(this, void 0);\n        _PrivateMessage_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        assertNonNull(data.id, 'PrivateMessage: Invalid data, no id');\n        assertNonNull(data.name, 'PrivateMessage: Invalid data, no name');\n        assertNonNull(data.created, 'PrivateMessage: Invalid data, no created date');\n        __classPrivateFieldSet(this, _PrivateMessage_id, asTID(data.name), \"f\");\n        if (data.author != null) {\n            __classPrivateFieldSet(this, _PrivateMessage_from, {\n                type: 'user',\n                username: data.author,\n                id: data.authorFullname ? asT2ID(data.authorFullname) : undefined,\n            }, \"f\");\n        }\n        else if (data.subreddit != null) {\n            __classPrivateFieldSet(this, _PrivateMessage_from, {\n                type: 'subreddit',\n                name: data.subreddit,\n                id: data.subredditId ? asT5ID(data.subredditId) : undefined,\n            }, \"f\");\n        }\n        else {\n            throw new Error('PrivateMessage: Invalid data, no author or subreddit');\n        }\n        __classPrivateFieldSet(this, _PrivateMessage_body, data.body ?? '', \"f\");\n        __classPrivateFieldSet(this, _PrivateMessage_bodyHtml, data.bodyHtml ?? '', \"f\");\n        const created = new Date(0);\n        created.setUTCSeconds(data.createdUtc);\n        __classPrivateFieldSet(this, _PrivateMessage_created, created, \"f\");\n        __classPrivateFieldSet(this, _PrivateMessage_metadata, metadata, \"f\");\n    }\n    get id() {\n        return __classPrivateFieldGet(this, _PrivateMessage_id, \"f\");\n    }\n    get from() {\n        return __classPrivateFieldGet(this, _PrivateMessage_from, \"f\");\n    }\n    get body() {\n        return __classPrivateFieldGet(this, _PrivateMessage_body, \"f\");\n    }\n    get bodyHtml() {\n        return __classPrivateFieldGet(this, _PrivateMessage_bodyHtml, \"f\");\n    }\n    get created() {\n        return __classPrivateFieldGet(this, _PrivateMessage_created, \"f\");\n    }\n    async markAsRead() {\n        const client = Devvit.redditAPIPlugins.PrivateMessages;\n        await client.ReadMessage({ id: __classPrivateFieldGet(this, _PrivateMessage_id, \"f\") }, __classPrivateFieldGet(this, _PrivateMessage_metadata, \"f\"));\n    }\n}\n_PrivateMessage_id = new WeakMap(), _PrivateMessage_from = new WeakMap(), _PrivateMessage_body = new WeakMap(), _PrivateMessage_bodyHtml = new WeakMap(), _PrivateMessage_created = new WeakMap(), _PrivateMessage_metadata = new WeakMap();\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Subreddit_id, _Subreddit_name, _Subreddit_createdAt, _Subreddit_type, _Subreddit_title, _Subreddit_description, _Subreddit_language, _Subreddit_numberOfSubscribers, _Subreddit_numberOfActiveUsers, _Subreddit_nsfw, _Subreddit_settings, _Subreddit_permalink, _Subreddit_metadata;\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { asT5ID } from '../../../types/tid.js';\nimport { GraphQL } from '../graphql/GraphQL.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nimport { Comment } from './Comment.js';\nimport { convertUserFlairProtoToAPI, Flair, FlairTemplate } from './Flair.js';\nimport { Listing } from './Listing.js';\nimport { getModerationLog } from './ModAction.js';\nimport { Post } from './Post.js';\nimport { User } from './User.js';\nexport var AboutLocations;\n(function (AboutLocations) {\n    AboutLocations[\"Reports\"] = \"reports\";\n    AboutLocations[\"Spam\"] = \"spam\";\n    AboutLocations[\"Modqueue\"] = \"modqueue\";\n    AboutLocations[\"Unmoderated\"] = \"unmoderated\";\n    AboutLocations[\"Edited\"] = \"edited\";\n})(AboutLocations || (AboutLocations = {}));\nexport class SubredditDescription {\n}\nexport class SubredditWikiSettings {\n}\nexport class AuthorFlairSettings {\n}\nexport class PostFlairSettings {\n}\n/**\n * A class representing a subreddit.\n */\nexport class Subreddit {\n    /**\n     * @internal\n     */\n    constructor(data, metadata) {\n        _Subreddit_id.set(this, void 0);\n        _Subreddit_name.set(this, void 0);\n        _Subreddit_createdAt.set(this, void 0);\n        _Subreddit_type.set(this, void 0);\n        _Subreddit_title.set(this, void 0);\n        _Subreddit_description.set(this, void 0);\n        _Subreddit_language.set(this, void 0);\n        _Subreddit_numberOfSubscribers.set(this, void 0);\n        _Subreddit_numberOfActiveUsers.set(this, void 0);\n        _Subreddit_nsfw.set(this, void 0);\n        _Subreddit_settings.set(this, void 0);\n        // R2 bug: subreddit does not contain a permalink field, but uses the url field instead\n        _Subreddit_permalink.set(this, void 0);\n        _Subreddit_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        assertNonNull(data.id, 'Subreddit id is missing or undefined');\n        assertNonNull(data.displayName, 'Subreddit name is missing or undefined');\n        __classPrivateFieldSet(this, _Subreddit_id, asT5ID(`t5_${data.id}`), \"f\");\n        __classPrivateFieldSet(this, _Subreddit_name, data.displayName, \"f\");\n        assertNonNull(data.createdUtc, 'Subreddit is missing created date');\n        const createdAt = new Date(0);\n        createdAt.setUTCSeconds(data.createdUtc);\n        __classPrivateFieldSet(this, _Subreddit_createdAt, createdAt, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_type, asSubredditType(data.subredditType), \"f\");\n        __classPrivateFieldSet(this, _Subreddit_title, data.title, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_description, data.description, \"f\");\n        assertNonNull(data.lang, 'Subreddit is missing language');\n        __classPrivateFieldSet(this, _Subreddit_language, data.lang, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_numberOfSubscribers, data.subscribers ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_numberOfActiveUsers, data.activeUserCount ?? 0, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_nsfw, data.over18 ?? false, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_permalink, data.url ?? '', \"f\");\n        __classPrivateFieldSet(this, _Subreddit_settings, {\n            acceptFollowers: data.acceptFollowers ?? false,\n            allOriginalContent: data.allOriginalContent ?? false,\n            allowChatPostCreation: data.allowChatPostCreation ?? false,\n            allowDiscovery: data.allowDiscovery ?? false,\n            allowGalleries: data.allowGalleries ?? false,\n            allowImages: data.allowImages ?? false,\n            allowPolls: data.allowPolls ?? false,\n            allowPredictionContributors: data.allowPredictionContributors ?? false,\n            allowPredictions: data.allowPredictions ?? false,\n            allowPredictionsTournament: data.allowPredictionsTournament ?? false,\n            allowTalks: data.allowTalks ?? false,\n            allowVideoGifs: data.allowVideogifs ?? false,\n            allowVideos: data.allowVideos ?? false,\n            chatPostEnabled: data.isChatPostFeatureEnabled ?? false,\n            collectionsEnabled: data.collectionsEnabled ?? false,\n            crosspostable: data.isCrosspostableSubreddit ?? false,\n            emojisEnabled: data.emojisEnabled ?? false,\n            eventPostsEnabled: data.eventPostsEnabled ?? false,\n            linkFlairEnabled: data.linkFlairEnabled ?? false,\n            originalContentTagEnabled: data.originalContentTagEnabled ?? false,\n            restrictCommenting: data.restrictCommenting ?? false,\n            restrictPosting: data.restrictPosting ?? false,\n            shouldArchivePosts: data.shouldArchivePosts ?? false,\n            spoilersEnabled: data.spoilersEnabled ?? false,\n            wikiEnabled: data.wikiEnabled ?? false,\n            allowedPostType: asAllowedPostType(data.submissionType),\n            allowedMediaInComments: (data.allowedMediaInComments ?? []).map(asCommentMediaTypes),\n            bannerBackgroundColor: data.bannerBackgroundColor,\n            bannerBackgroundImage: data.bannerBackgroundImage,\n            bannerImage: data.bannerImg,\n            communityIcon: data.communityIcon,\n            headerTitle: data.headerTitle,\n            keyColor: data.keyColor,\n            mobileBannerImage: data.mobileBannerImage,\n            primaryColor: data.primaryColor,\n            userFlairs: {\n                enabled: data.userFlairEnabledInSr ?? false,\n                usersCanAssign: data.canAssignUserFlair ?? false,\n                userFlairBackgroundColor: data.userFlairBackgroundColor,\n                userFlairTextColor: data.userFlairTextColor,\n            },\n            postFlairs: {\n                enabled: data.linkFlairEnabled ?? false,\n                usersCanAssign: data.canAssignLinkFlair ?? false,\n            },\n            // R2 bug: url is a permalink\n            url: new URL(__classPrivateFieldGet(this, _Subreddit_permalink, \"f\"), 'https://www.reddit.com').toString(),\n        }, \"f\");\n        __classPrivateFieldSet(this, _Subreddit_metadata, metadata, \"f\");\n    }\n    /**\n     * The ID (starting with t5_) of the subreddit to retrieve. e.g. t5_2qjpg\n     */\n    get id() {\n        return __classPrivateFieldGet(this, _Subreddit_id, \"f\");\n    }\n    /**\n     * The name of a subreddit omitting the r/.\n     */\n    get name() {\n        return __classPrivateFieldGet(this, _Subreddit_name, \"f\");\n    }\n    /**\n     * The creation date of the subreddit.\n     */\n    get createdAt() {\n        return __classPrivateFieldGet(this, _Subreddit_createdAt, \"f\");\n    }\n    /**\n     * The type of subreddit (public, private, etc.).\n     */\n    get type() {\n        return __classPrivateFieldGet(this, _Subreddit_type, \"f\");\n    }\n    /**\n     * The title of the subreddit.\n     */\n    get title() {\n        return __classPrivateFieldGet(this, _Subreddit_title, \"f\");\n    }\n    /**\n     * The description of the subreddit.\n     */\n    get description() {\n        return __classPrivateFieldGet(this, _Subreddit_description, \"f\");\n    }\n    /**\n     * The language of the subreddit.\n     */\n    get language() {\n        return __classPrivateFieldGet(this, _Subreddit_language, \"f\");\n    }\n    /**\n     * The number of subscribers of the subreddit.\n     */\n    get numberOfSubscribers() {\n        return __classPrivateFieldGet(this, _Subreddit_numberOfSubscribers, \"f\");\n    }\n    /**\n     * The number of active users of the subreddit.\n     */\n    get numberOfActiveUsers() {\n        return __classPrivateFieldGet(this, _Subreddit_numberOfActiveUsers, \"f\");\n    }\n    /**\n     * Whether the subreddit is marked as NSFW (Not Safe For Work).\n     */\n    get nsfw() {\n        return __classPrivateFieldGet(this, _Subreddit_nsfw, \"f\");\n    }\n    /**\n     * The settings of the subreddit.\n     */\n    get settings() {\n        return __classPrivateFieldGet(this, _Subreddit_settings, \"f\");\n    }\n    /**\n     * Whether the user flairs are enabled for this subreddit.\n     */\n    get userFlairsEnabled() {\n        return this.settings.userFlairs.enabled;\n    }\n    /**\n     * Whether the post flairs are enabled for this subreddit.\n     */\n    get postFlairsEnabled() {\n        return this.settings.postFlairs.enabled;\n    }\n    /**\n     * Whether the user can assign user flairs.\n     * This is only true if the user flairs are enabled.\n     */\n    get usersCanAssignUserFlairs() {\n        return this.settings.userFlairs.usersCanAssign;\n    }\n    /**\n     * Whether the user can assign post flairs.\n     * This is only true if the post flairs are enabled.\n     */\n    get usersCanAssignPostFlairs() {\n        return this.settings.postFlairs.usersCanAssign;\n    }\n    /**\n     * Returns the HTTP URL for the subreddit.\n     * (R2 bug: subreddit.url is a permalink path and does not return a fully qualified URL in subreddit.url)\n     */\n    get url() {\n        return this.settings.url;\n    }\n    /**\n     * Returns a permalink path\n     * (R2 bug: subreddit.url is a permalink, and does not have a subreddit.permalink field)\n     */\n    get permalink() {\n        return __classPrivateFieldGet(this, _Subreddit_permalink, \"f\");\n    }\n    toJSON() {\n        return {\n            id: this.id,\n            name: this.name,\n            createdAt: this.createdAt,\n            type: this.type,\n            title: this.title,\n            description: this.description,\n            language: this.language,\n            nsfw: this.nsfw,\n            numberOfSubscribers: this.numberOfSubscribers,\n            numberOfActiveUsers: this.numberOfActiveUsers,\n            settings: this.settings,\n        };\n    }\n    async submitPost(options) {\n        const submitPostOptions = {\n            ...options,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        };\n        return Post.submit(submitPostOptions, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getControversialPosts(options = {}) {\n        if (!__classPrivateFieldGet(this, _Subreddit_name, \"f\")) {\n            throw new Error('subreddit missing displayName - it might not have been fetched');\n        }\n        return Post.getControversialPosts({\n            ...options,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getTopPosts(options = {}) {\n        if (!__classPrivateFieldGet(this, _Subreddit_name, \"f\")) {\n            throw new Error('subreddit missing displayName - it might not have been fetched');\n        }\n        return Post.getTopPosts({\n            ...options,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getApprovedUsers(options = {}) {\n        return User.getSubredditUsersByType({\n            type: 'contributors',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    approveUser(username) {\n        return User.createRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'contributor',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    removeUser(username) {\n        return User.removeRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'contributor',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getWikiContributors(options = {}) {\n        return User.getSubredditUsersByType({\n            type: 'wikicontributors',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    addWikiContributor(username) {\n        return User.createRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'wikicontributor',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    removeWikiContributor(username) {\n        return User.removeRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'wikicontributor',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getBannedUsers(options = {}) {\n        return User.getSubredditUsersByType({\n            type: 'banned',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    banUser(options) {\n        return User.createRelationship({\n            username: options.username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'banned',\n            banReason: options.reason,\n            banMessage: options.message,\n            note: options.note,\n            duration: options.duration,\n            banContext: options.context,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    unbanUser(username) {\n        return User.removeRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'banned',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getBannedWikiContributors(options = {}) {\n        return User.getSubredditUsersByType({\n            type: 'wikibanned',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    banWikiContributor(options) {\n        return User.createRelationship({\n            username: options.username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'wikibanned',\n            banReason: options.reason,\n            note: options.note,\n            duration: options.duration,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    unbanWikiContributor(username) {\n        return User.removeRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'wikibanned',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getModerators(options = {}) {\n        return User.getSubredditUsersByType({\n            type: 'moderators',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    inviteModerator(username, permissions) {\n        return User.createRelationship({\n            type: 'moderator_invite',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            username,\n            permissions: permissions ?? [],\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    revokeModeratorInvite(username) {\n        return User.removeRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'moderator_invite',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    removeModerator(username) {\n        return User.removeRelationship({\n            type: 'moderator',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            username,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    setModeratorPermissions(username, permissions) {\n        return User.setModeratorPermissions(username, __classPrivateFieldGet(this, _Subreddit_name, \"f\"), permissions, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getMutedUsers(options = {}) {\n        return User.getSubredditUsersByType({\n            type: 'muted',\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    muteUser(username, note) {\n        return User.createRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'muted',\n            note,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    unmuteUser(username) {\n        return User.removeRelationship({\n            username,\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            type: 'muted',\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getModerationLog(options) {\n        return getModerationLog({\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getUserFlairTemplates() {\n        return FlairTemplate.getUserFlairTemplates(__classPrivateFieldGet(this, _Subreddit_name, \"f\"), __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getPostFlairTemplates() {\n        return FlairTemplate.getPostFlairTemplates(__classPrivateFieldGet(this, _Subreddit_name, \"f\"), __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    createPostFlairTemplate(options) {\n        return FlairTemplate.createPostFlairTemplate({\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    createUserFlairTemplate(options) {\n        return FlairTemplate.createUserFlairTemplate({\n            subredditName: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    /**\n     * Get the user flair for the given subreddit. If `usernames` is provided then it will return only the\n     * flair for the specified users. If retrieving the list of flair for a given subreddit and the list is long\n     * then this method will return a `next` field which can be passed into the `after` field on the next call to\n     * retrieve the next slice of data. To retrieve the previous slice of data pass the `prev` field into the `before` field\n     * during the subsequent call.\n     *\n     * @param options See interface\n     * @param metadata See interface\n     *\n     * @example\n     * ```ts\n     * const subredditName = \"mysubreddit\"\n     * const subreddit = await reddit.getSubredditByName(subredditName)\n     * const response = await subreddit.getUserFlair();\n     * const userFlairList = response.users\n     * ```\n     * @example\n     * ```ts\n     * const response = await subreddit.getUserFlair({ after: \"t2_awefae\"});\n     * const userFlairList = response.users\n     * ```\n     *\n     * @example\n     * ```ts\n     * const response = await subreddit.getUserFlair({ usernames: ['toxictoad', 'badapple']});\n     * const userFlairList = response.users\n     * ```\n     */\n    async getUserFlair(options) {\n        if (options?.usernames !== undefined) {\n            const users = await Promise.all(options.usernames.map(async (name) => {\n                const response = await Flair.getUserFlairBySubreddit({\n                    subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n                    name,\n                }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n                return convertUserFlairProtoToAPI(response.users[0]);\n            }));\n            return { users };\n        }\n        else {\n            const response = await Flair.getUserFlairBySubreddit({\n                ...options,\n                subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n            }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n            return {\n                next: response.next,\n                prev: response.prev,\n                users: response.users.map((userFlair) => convertUserFlairProtoToAPI(userFlair)),\n            };\n        }\n    }\n    getModQueue(options = { type: 'all' }) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Modqueue,\n            subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getReports(options = { type: 'all' }) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Reports,\n            subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getSpam(options = { type: 'all' }) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Spam,\n            subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getUnmoderated(options = { type: 'all' }) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Unmoderated,\n            subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    getEdited(options = { type: 'all' }) {\n        return Subreddit.aboutLocation({\n            ...options,\n            location: AboutLocations.Edited,\n            subreddit: __classPrivateFieldGet(this, _Subreddit_name, \"f\"),\n        }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n    }\n    /** @internal */\n    static aboutLocation(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Moderation;\n        let only;\n        switch (options.type) {\n            case 'post':\n                only = 'links';\n                break;\n            case 'comment':\n                only = 'comments';\n                break;\n            default:\n                only = undefined;\n        }\n        return new Listing({\n            ...options,\n            fetch: async (fetchOptions) => {\n                const listing = await client.AboutLocation({\n                    ...fetchOptions,\n                    ...options,\n                    only,\n                }, metadata);\n                return parseListing(listing, metadata);\n            },\n        });\n    }\n    /**\n     * Return a listing of things specified by their fullnames.\n     *\n     * @param ids Array of thing full ids (e.g. t3_abc123)\n     * @example\n     * ```ts\n     * const subreddit = await reddit.getSubredditByName('askReddit');\n     * const listing = subreddit.getCommentsAndPostsByIds(['t3_abc123', 't1_xyz123']);\n     * const items = await listing.all();\n     * console.log(items) // [Post, Comment]\n     * ```\n     */\n    getCommentsAndPostsByIds(ids) {\n        const client = Devvit.redditAPIPlugins.LinksAndComments;\n        return new Listing({\n            fetch: async () => {\n                const listing = await client.Info({ thingIds: ids, subreddits: [__classPrivateFieldGet(this, _Subreddit_id, \"f\")] }, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n                return parseListing(listing, __classPrivateFieldGet(this, _Subreddit_metadata, \"f\"));\n            },\n        });\n    }\n    /** @internal */\n    static async addRemovalReason(subredditName, title, message, metadata) {\n        const client = Devvit.redditAPIPlugins.Subreddits;\n        const response = await client.SubredditAddRemovalReason({\n            title,\n            message,\n            subreddit: subredditName,\n        }, metadata);\n        return response.id;\n    }\n    /** @internal */\n    static async getRemovalReasons(subredditName, metadata) {\n        const client = Devvit.redditAPIPlugins.Subreddits;\n        const result = await client.SubredditGetRemovalReasons({\n            subreddit: subredditName,\n        }, metadata);\n        return result.order.map((id) => ({ ...result.data[id] }));\n    }\n    /** @internal */\n    static async getFromMetadata(metadata) {\n        assertNonNull(metadata);\n        const subredditName = metadata?.[Header.SubredditName]?.values[0];\n        if (subredditName) {\n            return Subreddit.getByName(subredditName, metadata);\n        }\n        const subredditId = metadata?.[Header.Subreddit]?.values[0];\n        assertNonNull(subredditId);\n        return Subreddit.getById(asT5ID(subredditId), metadata);\n    }\n    /** @internal */\n    static async getById(id, metadata) {\n        const subredditName = await getSubredditNameById(id, metadata);\n        if (!subredditName) {\n            return;\n        }\n        return Subreddit.getByName(subredditName, metadata);\n    }\n    /** @internal */\n    static async getByName(subredditName, metadata) {\n        const client = Devvit.redditAPIPlugins.Subreddits;\n        const response = await client.SubredditAbout({\n            subreddit: subredditName,\n        }, metadata);\n        if (!response?.data) {\n            throw new Error('not found');\n        }\n        return new Subreddit(response.data, metadata);\n    }\n}\n_Subreddit_id = new WeakMap(), _Subreddit_name = new WeakMap(), _Subreddit_createdAt = new WeakMap(), _Subreddit_type = new WeakMap(), _Subreddit_title = new WeakMap(), _Subreddit_description = new WeakMap(), _Subreddit_language = new WeakMap(), _Subreddit_numberOfSubscribers = new WeakMap(), _Subreddit_numberOfActiveUsers = new WeakMap(), _Subreddit_nsfw = new WeakMap(), _Subreddit_settings = new WeakMap(), _Subreddit_permalink = new WeakMap(), _Subreddit_metadata = new WeakMap();\n/**\n * Gets a {@link SubredditInfo} object by ID\n *\n * @param {string} id - The ID (starting with t5_) of the subreddit to retrieve. e.g. t5_2qjpg\n * @param metadata - Optional RPC metadata passed with every request.\n * @returns {Promise<SubredditInfo>} A Promise that resolves a SubredditInfo object.\n */\nexport async function getSubredditInfoById(subredditId, metadata) {\n    const operationName = 'GetSubredditInfoById';\n    const persistedQueryHash = '315a9b75c22a017d526afdf2d274616946156451aacfd56dfb91e7ad3f7a2fde';\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, persistedQueryHash, { id: subredditId }, metadata);\n    const subredditInfo = response.data?.subredditInfoById;\n    if (!subredditInfo)\n        throw new Error('subreddit info not found');\n    if (subredditInfo.type) {\n        subredditInfo.type = asSubredditType(subredditInfo.type);\n    }\n    return subredditInfo;\n}\n/**\n * Gets a {@link SubredditInfo} object by name\n *\n * @param {string} name The name of a subreddit omitting the r/. This is case insensitive.\n * @param metadata - Optional RPC metadata passed with every request.\n * @returns {Promise<SubredditInfo>} A Promise that resolves a SubredditInfo object.\n */\nexport async function getSubredditInfoByName(subredditName, metadata) {\n    const operationName = 'GetSubredditInfoByName';\n    const persistedQueryHash = '4aa69726c7e3f5d33ab2bee22b3d74fce645824fddd5ea3ec6dfe30bdb4295cb';\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, persistedQueryHash, { name: subredditName }, metadata);\n    const subredditInfo = response.data?.subredditInfoByName;\n    if (!subredditInfo)\n        throw new Error('subreddit info not found');\n    if (subredditInfo.type) {\n        subredditInfo.type = asSubredditType(subredditInfo.type);\n    }\n    return subredditInfo;\n}\nexport async function getSubredditLeaderboard(subredditId, metadata) {\n    const operationName = 'GetSubredditLeaderboard';\n    const persistedQueryHash = '18ead70c46b6446d45ecd8b679b16d9a929a933d6ef25d8262a459cb18b72848';\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, persistedQueryHash, { id: subredditId }, metadata);\n    const leaderboard = response.data?.subredditInfoById?.leaderboard;\n    if (!leaderboard)\n        throw new Error('subreddit leaderboard not found');\n    if (!leaderboard.summary)\n        throw new Error('subreddit leaderboard summary not found');\n    return {\n        id: leaderboard.id,\n        summary: leaderboard.summary,\n    };\n}\nexport async function getSubredditStyles(subredditId, metadata) {\n    const operationName = 'GetSubredditStyles';\n    const persistedQueryHash = 'd491d17ea8858f563ea578b26b9595d64adecf4bf34557d567c7e53c470f5f22';\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, persistedQueryHash, { id: subredditId }, metadata);\n    const styles = response.data?.subredditInfoById?.styles;\n    if (!styles)\n        throw new Error('subreddit styles not found');\n    return styles;\n}\nfunction asSubredditType(type) {\n    const normalizedType = type?.toLowerCase();\n    if (normalizedType === 'public' ||\n        normalizedType === 'private' ||\n        normalizedType === 'restricted' ||\n        normalizedType === 'employees_only' ||\n        normalizedType === 'gold_only' ||\n        normalizedType === 'gold_restricted' ||\n        normalizedType === 'archived' ||\n        normalizedType === 'user') {\n        return normalizedType;\n    }\n    throw new Error(`invalid subreddit type: ${type}`);\n}\nfunction asAllowedPostType(type) {\n    if (type === 'any' || type === 'link' || type === 'self') {\n        return type;\n    }\n    throw new Error(`invalid allowed post type: ${type}`);\n}\nfunction asCommentMediaTypes(type) {\n    if (type === 'animated' || type === 'giphy' || type === 'static' || type === 'expression') {\n        return type;\n    }\n    throw new Error(`invalid comment media type: ${type}`);\n}\nfunction parseListing(listing, metadata) {\n    const children = listing.data?.children ?? [];\n    const postsAndComments = children\n        .map((child) => {\n        const post = tryParseAsPost(child);\n        if (post != null) {\n            return post;\n        }\n        const comment = tryParseAsComment(child);\n        if (comment != null) {\n            return comment;\n        }\n        return null;\n    })\n        .filter(Boolean);\n    return {\n        after: listing.data?.after,\n        before: listing.data?.before,\n        children: postsAndComments,\n    };\n    function tryParseAsPost(obj) {\n        try {\n            return new Post(obj.data, metadata);\n        }\n        catch {\n            return null;\n        }\n    }\n    function tryParseAsComment(obj) {\n        try {\n            return new Comment(obj.data, metadata);\n        }\n        catch {\n            return null;\n        }\n    }\n}\n/** @internal */\nexport async function getSubredditNameById(id, metadata) {\n    const client = Devvit.redditAPIPlugins.LinksAndComments;\n    const response = await client.Info({ thingIds: [id], subreddits: [] }, metadata);\n    return response.data?.children[0]?.data?.displayName;\n}\n", "import { asT2ID } from '../../../types/tid.js';\nimport { GraphQL } from '../graphql/GraphQL.js';\nexport async function getVaultByAddress(address, metadata) {\n    return getVaultByParams('GetVaultContactByAddress', '3e2f7966a5c120e64fd2795d06a46595c52d988185be98d3ed71c3f81ae80d2e', {\n        provider: 'ethereum', // Only one supported at the moment\n        address,\n    }, metadata);\n}\nexport async function getVaultByUserId(userId, metadata) {\n    return getVaultByParams('GetVaultContactByUserId', 'a854ddc19d0e22c4f36ed917fdbd568f299f3571427e393aee5e2972080fffe9', {\n        provider: 'ethereum', // Only one supported at the moment\n        userId,\n    }, metadata);\n}\nasync function getVaultByParams(operationName, queryHash, params, metadata) {\n    // Legacy GQL query. Do not copy this pattern.\n    // eslint-disable-next-line no-restricted-properties\n    const response = await GraphQL.query(operationName, queryHash, params, metadata);\n    const contact = response?.data?.vault?.contact;\n    const vault = {\n        provider: contact?.provider,\n        userId: asT2ID(contact?.userId),\n        address: contact?.address,\n        createdAt: contact?.createdAt,\n        isActive: contact?.isActive,\n    };\n    return vault;\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _Widget_id, _Widget_name, _Widget_subredditName, _Widget_metadata, _ImageWidget_images, _CalendarWidget_googleCalendarId, _CalendarWidget_configuration, _CalendarWidget_styles, _TextAreaWidget_text, _TextAreaWidget_styles, _ButtonWidget_buttons, _ButtonWidget_description, _ButtonWidget_styles, _CommunityListWidget_communities, _CommunityListWidget_styles, _PostFlairWidget_styles, _PostFlairWidget_templates, _PostFlairWidget_display, _CustomWidget_images, _CustomWidget_text, _CustomWidget_stylesheetUrl, _CustomWidget_height, _CustomWidget_css, _SubredditRulesWidget_rules;\nimport { CommunityListWidget_CommunityData as CommunityData, GetWidgetsResponse_WidgetItem as WidgetItem, } from '@devvit/protos';\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nexport class Widget {\n    constructor(widgetData, subredditName, metadata) {\n        _Widget_id.set(this, void 0);\n        _Widget_name.set(this, void 0);\n        _Widget_subredditName.set(this, void 0);\n        _Widget_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        __classPrivateFieldSet(this, _Widget_id, widgetData.id, \"f\");\n        __classPrivateFieldSet(this, _Widget_name, widgetData.shortName, \"f\");\n        __classPrivateFieldSet(this, _Widget_subredditName, subredditName, \"f\");\n        __classPrivateFieldSet(this, _Widget_metadata, metadata, \"f\");\n    }\n    get id() {\n        return __classPrivateFieldGet(this, _Widget_id, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet(this, _Widget_name, \"f\");\n    }\n    get subredditName() {\n        return __classPrivateFieldGet(this, _Widget_subredditName, \"f\");\n    }\n    toJSON() {\n        return {\n            id: this.id,\n            name: this.name,\n            subredditName: this.subredditName,\n        };\n    }\n    delete() {\n        return Widget.delete(this.subredditName, this.id, __classPrivateFieldGet(this, _Widget_metadata, \"f\"));\n    }\n    /**\n     * @internal\n     * @note - This method only returns the widgets listed on the sidebar.\n     */\n    static async getWidgets(subredditName, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.GetWidgets({\n            subreddit: subredditName,\n        }, metadata);\n        assertNonNull(response.layout, 'Failed to load widgets for subreddit');\n        const widgetsMap = response.items;\n        const widgets = [];\n        for (const widgetId of response.layout.sidebar?.order ?? []) {\n            const widgetData = widgetsMap[widgetId];\n            switch (widgetData?.kind) {\n                case 'image':\n                    widgets.push(new ImageWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'calendar':\n                    widgets.push(new CalendarWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'textarea':\n                    widgets.push(new TextAreaWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'button':\n                    widgets.push(new ButtonWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'community-list':\n                    widgets.push(new CommunityListWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'post-flair':\n                    widgets.push(new PostFlairWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'custom':\n                    widgets.push(new CustomWidget(widgetData, subredditName, metadata));\n                    break;\n                case 'subreddit-rules': {\n                    // subreddit rule widget does not contain any data\n                    // we need to fetch it separately\n                    const rulesRsp = await Devvit.redditAPIPlugins.Subreddits.SubredditAboutRules({\n                        subreddit: subredditName,\n                    }, metadata);\n                    widgets.push(new SubredditRulesWidget(rulesRsp, widgetData, subredditName, metadata));\n                    break;\n                }\n                default:\n                    throw new Error(`Unknown widget type: ${widgetData.kind}`);\n            }\n        }\n        return widgets;\n    }\n    /** @internal */\n    static async delete(subredditName, id, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        await client.DeleteWidget({\n            subreddit: subredditName,\n            id,\n        }, metadata);\n    }\n    /** @internal */\n    static async reorder(subredditName, orderByIds, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        await client.OrderWidgets({\n            subreddit: subredditName,\n            order: orderByIds,\n        }, metadata);\n    }\n    /** @internal */\n    static async add(widgetData, metadata) {\n        // Styles are optional in the proto create requests, but are required by r2\n        widgetData.styles = {\n            backgroundColor: widgetData.styles?.backgroundColor ?? '',\n            headerColor: widgetData.styles?.headerColor ?? '',\n        };\n        switch (widgetData?.type) {\n            case 'image':\n                return ImageWidget.create(widgetData, metadata);\n            case 'calendar':\n                return CalendarWidget.create(widgetData, metadata);\n            case 'textarea':\n                return TextAreaWidget.create(widgetData, metadata);\n            case 'button':\n                return ButtonWidget.create(widgetData, metadata);\n            case 'community-list':\n                return CommunityListWidget.create(widgetData, metadata);\n            case 'post-flair':\n                return PostFlairWidget.create(widgetData, metadata);\n            case 'custom':\n                return CustomWidget.create(widgetData, metadata);\n            default:\n                throw new Error(`Unknown widget type: ${widgetData}`);\n        }\n    }\n    /** @internal */\n    static async patch(widgetData, metadata) {\n        // Styles are optional in the proto update requests, but are required by r2\n        widgetData.styles = {\n            backgroundColor: widgetData.styles?.backgroundColor ?? '',\n            headerColor: widgetData.styles?.headerColor ?? '',\n        };\n        switch (widgetData?.type) {\n            case 'image':\n                return ImageWidget.update(widgetData, metadata);\n            case 'calendar':\n                return CalendarWidget.update(widgetData, metadata);\n            case 'textarea':\n                return TextAreaWidget.update(widgetData, metadata);\n            case 'button':\n                return ButtonWidget.update(widgetData, metadata);\n            case 'community-list':\n                return CommunityListWidget.update(widgetData, metadata);\n            case 'post-flair':\n                return PostFlairWidget.update(widgetData, metadata);\n            case 'custom':\n                return CustomWidget.update(widgetData, metadata);\n            default:\n                throw new Error(`Unknown widget type: ${widgetData}`);\n        }\n    }\n}\n_Widget_id = new WeakMap(), _Widget_name = new WeakMap(), _Widget_subredditName = new WeakMap(), _Widget_metadata = new WeakMap();\nexport class ImageWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _ImageWidget_images.set(this, void 0);\n        __classPrivateFieldSet(this, _ImageWidget_images, widgetData.data.map((data) => {\n            assertNonNull(data.url, 'Image widget data is missing url');\n            assertNonNull(data.height, 'Image widget data is missing height');\n            assertNonNull(data.width, 'Image widget data is missing width');\n            return {\n                url: data.url,\n                height: data.height,\n                width: data.width,\n                linkUrl: data.linkUrl ?? '',\n            };\n        }), \"f\");\n    }\n    get images() {\n        return __classPrivateFieldGet(this, _ImageWidget_images, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            images: this.images,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddImageWidget(options, metadata);\n        return new ImageWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdateImageWidget(options, metadata);\n        return new ImageWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_ImageWidget_images = new WeakMap();\nexport class CalendarWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _CalendarWidget_googleCalendarId.set(this, void 0);\n        _CalendarWidget_configuration.set(this, void 0);\n        _CalendarWidget_styles.set(this, void 0);\n        assertNonNull(widgetData.googleCalendarId, 'Calendar widget data is missing googleCalendarId');\n        assertNonNull(widgetData.configuration, 'Calendar widget data is missing configuration');\n        assertNonNull(widgetData.styles, 'Calendar widget data is missing styles');\n        __classPrivateFieldSet(this, _CalendarWidget_googleCalendarId, widgetData.googleCalendarId, \"f\");\n        __classPrivateFieldSet(this, _CalendarWidget_configuration, widgetData.configuration, \"f\");\n        __classPrivateFieldSet(this, _CalendarWidget_styles, widgetData.styles, \"f\");\n    }\n    get googleCalendarId() {\n        return __classPrivateFieldGet(this, _CalendarWidget_googleCalendarId, \"f\");\n    }\n    get configuration() {\n        return __classPrivateFieldGet(this, _CalendarWidget_configuration, \"f\");\n    }\n    get styles() {\n        return __classPrivateFieldGet(this, _CalendarWidget_styles, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            googleCalendarId: this.googleCalendarId,\n            configuration: this.configuration,\n            styles: this.styles,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddCalendarWidget(options, metadata);\n        return new CalendarWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdateCalendarWidget(options, metadata);\n        return new CalendarWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_CalendarWidget_googleCalendarId = new WeakMap(), _CalendarWidget_configuration = new WeakMap(), _CalendarWidget_styles = new WeakMap();\nexport class TextAreaWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _TextAreaWidget_text.set(this, void 0);\n        _TextAreaWidget_styles.set(this, void 0);\n        assertNonNull(widgetData.text, 'Textarea widget data is missing text');\n        assertNonNull(widgetData.styles, 'Textarea widget data is missing styles');\n        __classPrivateFieldSet(this, _TextAreaWidget_text, widgetData.text, \"f\");\n        __classPrivateFieldSet(this, _TextAreaWidget_styles, widgetData.styles, \"f\");\n    }\n    get text() {\n        return __classPrivateFieldGet(this, _TextAreaWidget_text, \"f\");\n    }\n    get styles() {\n        return __classPrivateFieldGet(this, _TextAreaWidget_styles, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            text: this.text,\n            styles: this.styles,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddTextAreaWidget(options, metadata);\n        return new TextAreaWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdateTextAreaWidget(options, metadata);\n        return new TextAreaWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_TextAreaWidget_text = new WeakMap(), _TextAreaWidget_styles = new WeakMap();\nexport class ButtonWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _ButtonWidget_buttons.set(this, void 0);\n        _ButtonWidget_description.set(this, void 0);\n        _ButtonWidget_styles.set(this, void 0);\n        assertNonNull(widgetData.styles, 'Button widget data is missing styles');\n        __classPrivateFieldSet(this, _ButtonWidget_buttons, widgetData.buttons, \"f\");\n        __classPrivateFieldSet(this, _ButtonWidget_description, widgetData.description ?? '', \"f\");\n        __classPrivateFieldSet(this, _ButtonWidget_styles, widgetData.styles, \"f\");\n    }\n    get buttons() {\n        return __classPrivateFieldGet(this, _ButtonWidget_buttons, \"f\");\n    }\n    get description() {\n        return __classPrivateFieldGet(this, _ButtonWidget_description, \"f\");\n    }\n    get styles() {\n        return __classPrivateFieldGet(this, _ButtonWidget_styles, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            buttons: this.buttons,\n            description: this.description,\n            styles: this.styles,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddButtonWidget(options, metadata);\n        return new ButtonWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdateButtonWidget(options, metadata);\n        return new ButtonWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_ButtonWidget_buttons = new WeakMap(), _ButtonWidget_description = new WeakMap(), _ButtonWidget_styles = new WeakMap();\nexport class CommunityListWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _CommunityListWidget_communities.set(this, void 0);\n        _CommunityListWidget_styles.set(this, void 0);\n        __classPrivateFieldSet(this, _CommunityListWidget_communities, widgetData.data.map((communityData) => CommunityData.fromJSON(communityData)), \"f\");\n        assertNonNull(widgetData.styles, 'Community list widget data is missing styles');\n        __classPrivateFieldSet(this, _CommunityListWidget_styles, widgetData.styles, \"f\");\n    }\n    get communities() {\n        return __classPrivateFieldGet(this, _CommunityListWidget_communities, \"f\");\n    }\n    get styles() {\n        return __classPrivateFieldGet(this, _CommunityListWidget_styles, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            communities: this.communities,\n            styles: this.styles,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddCommunityListWidget(options, metadata);\n        return new CommunityListWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdateCommunityListWidget(options, metadata);\n        return new CommunityListWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_CommunityListWidget_communities = new WeakMap(), _CommunityListWidget_styles = new WeakMap();\nexport class PostFlairWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _PostFlairWidget_styles.set(this, void 0);\n        _PostFlairWidget_templates.set(this, void 0);\n        _PostFlairWidget_display.set(this, void 0);\n        assertNonNull(widgetData.styles, 'Post flair widget data is missing styles');\n        __classPrivateFieldSet(this, _PostFlairWidget_styles, widgetData.styles, \"f\");\n        __classPrivateFieldSet(this, _PostFlairWidget_templates, widgetData.order.map((templateId) => widgetData.templates[templateId]), \"f\");\n        if (!((widgetData.display && widgetData.display === 'list') || widgetData.display === 'cloud')) {\n            throw new Error('Post flair widget data is missing display type');\n        }\n        __classPrivateFieldSet(this, _PostFlairWidget_display, widgetData.display, \"f\");\n    }\n    get styles() {\n        return __classPrivateFieldGet(this, _PostFlairWidget_styles, \"f\");\n    }\n    get templates() {\n        return __classPrivateFieldGet(this, _PostFlairWidget_templates, \"f\");\n    }\n    get display() {\n        return __classPrivateFieldGet(this, _PostFlairWidget_display, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            styles: this.styles,\n            templates: this.templates,\n            display: this.display,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddPostFlairWidget(options, metadata);\n        return new PostFlairWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdatePostFlairWidget(options, metadata);\n        return new PostFlairWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_PostFlairWidget_styles = new WeakMap(), _PostFlairWidget_templates = new WeakMap(), _PostFlairWidget_display = new WeakMap();\nexport class CustomWidget extends Widget {\n    constructor(widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _CustomWidget_images.set(this, void 0);\n        _CustomWidget_text.set(this, void 0);\n        _CustomWidget_stylesheetUrl.set(this, void 0);\n        _CustomWidget_height.set(this, void 0);\n        _CustomWidget_css.set(this, void 0);\n        assertNonNull(widgetData.stylesheetUrl, 'Custom widget data is missing stylesheetUrl');\n        assertNonNull(widgetData.height, 'Custom widget data is missing height');\n        assertNonNull(widgetData.css, 'Custom widget data is missing css');\n        __classPrivateFieldSet(this, _CustomWidget_images, widgetData.imageData ?? [], \"f\");\n        __classPrivateFieldSet(this, _CustomWidget_text, widgetData.text ?? '', \"f\");\n        __classPrivateFieldSet(this, _CustomWidget_stylesheetUrl, widgetData.stylesheetUrl, \"f\");\n        __classPrivateFieldSet(this, _CustomWidget_height, widgetData.height, \"f\");\n        __classPrivateFieldSet(this, _CustomWidget_css, widgetData.css, \"f\");\n    }\n    get images() {\n        return __classPrivateFieldGet(this, _CustomWidget_images, \"f\");\n    }\n    get text() {\n        return __classPrivateFieldGet(this, _CustomWidget_text, \"f\");\n    }\n    get stylesheetUrl() {\n        return __classPrivateFieldGet(this, _CustomWidget_stylesheetUrl, \"f\");\n    }\n    get height() {\n        return __classPrivateFieldGet(this, _CustomWidget_height, \"f\");\n    }\n    get css() {\n        return __classPrivateFieldGet(this, _CustomWidget_css, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            images: this.images,\n            text: this.text,\n            stylesheetUrl: this.stylesheetUrl,\n            height: this.height,\n            css: this.css,\n        };\n    }\n    /** @internal */\n    static async create(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.AddCustomWidget(options, metadata);\n        return new CustomWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n    /** @internal */\n    static async update(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Widgets;\n        const response = await client.UpdateCustomWidget(options, metadata);\n        return new CustomWidget(WidgetItem.fromJSON(response), options.subreddit, metadata);\n    }\n}\n_CustomWidget_images = new WeakMap(), _CustomWidget_text = new WeakMap(), _CustomWidget_stylesheetUrl = new WeakMap(), _CustomWidget_height = new WeakMap(), _CustomWidget_css = new WeakMap();\nexport class SubredditRulesWidget extends Widget {\n    constructor(subredditAboutRulesRsp, widgetData, subredditName, metadata) {\n        super(widgetData, subredditName, metadata);\n        _SubredditRulesWidget_rules.set(this, void 0);\n        const rules = subredditAboutRulesRsp.rules.map(({ description, priority, shortName, violationReason }) => {\n            assertNonNull(description, 'Subreddit rule is missing description');\n            assertNonNull(priority, 'Subreddit rule is missing priority');\n            assertNonNull(shortName, 'Subreddit rule is missing shortName');\n            assertNonNull(violationReason, 'Subreddit rule is missing violationReason');\n            return {\n                description,\n                priority,\n                shortName,\n                violationReason,\n            };\n        });\n        __classPrivateFieldSet(this, _SubredditRulesWidget_rules, rules, \"f\");\n    }\n    get rules() {\n        return __classPrivateFieldGet(this, _SubredditRulesWidget_rules, \"f\");\n    }\n    toJSON() {\n        return {\n            ...super.toJSON(),\n            rules: this.rules,\n        };\n    }\n}\n_SubredditRulesWidget_rules = new WeakMap();\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _WikiPage_name, _WikiPage_subredditName, _WikiPage_content, _WikiPage_contentHtml, _WikiPage_revisionId, _WikiPage_revisionDate, _WikiPage_revisionReason, _WikiPage_revisionAuthor, _WikiPage_metadata, _WikiPageRevision_id, _WikiPageRevision_page, _WikiPageRevision_date, _WikiPageRevision_author, _WikiPageRevision_reason, _WikiPageRevision_hidden, _WikiPageSettings_listed, _WikiPageSettings_permLevel, _WikiPageSettings_editors;\nimport { assertNonNull } from '@devvit/shared-types/NonNull.js';\nimport { Devvit } from '../../../devvit/Devvit.js';\nimport { makeGettersEnumerable } from '../helpers/makeGettersEnumerable.js';\nimport { Listing } from './Listing.js';\nimport { User } from './User.js';\nexport var WikiPagePermissionLevel;\n(function (WikiPagePermissionLevel) {\n    /** Use subreddit wiki permissions */\n    WikiPagePermissionLevel[WikiPagePermissionLevel[\"SUBREDDIT_PERMISSIONS\"] = 0] = \"SUBREDDIT_PERMISSIONS\";\n    /** Only approved wiki contributors for this page may edit */\n    WikiPagePermissionLevel[WikiPagePermissionLevel[\"APPROVED_CONTRIBUTORS_ONLY\"] = 1] = \"APPROVED_CONTRIBUTORS_ONLY\";\n    /** Only mods may edit and view */\n    WikiPagePermissionLevel[WikiPagePermissionLevel[\"MODS_ONLY\"] = 2] = \"MODS_ONLY\";\n})(WikiPagePermissionLevel || (WikiPagePermissionLevel = {}));\n/**\n * Listing endpoints expect the fullname of an object for the `before` and `after` parameters. Usually\n * this is a `tX_` ID, but the fullname of a wiki page revision is its ID prefixed with `WikiPageRevision_`.\n *\n * Also, when fetching a listing of wiki page revisions, the `after` and `before` values returned\n * by the API are already prefixed. However, the IDs in the revisions themselves are not prefixed.\n */\nconst WikiPageRevisionPrefix = 'WikiPageRevision_';\nexport class WikiPage {\n    /**\n     * @internal\n     */\n    constructor(name, subredditName, data, metadata) {\n        _WikiPage_name.set(this, void 0);\n        _WikiPage_subredditName.set(this, void 0);\n        _WikiPage_content.set(this, void 0);\n        _WikiPage_contentHtml.set(this, void 0);\n        _WikiPage_revisionId.set(this, void 0);\n        _WikiPage_revisionDate.set(this, void 0);\n        _WikiPage_revisionReason.set(this, void 0);\n        _WikiPage_revisionAuthor.set(this, void 0);\n        _WikiPage_metadata.set(this, void 0);\n        makeGettersEnumerable(this);\n        __classPrivateFieldSet(this, _WikiPage_name, name, \"f\");\n        __classPrivateFieldSet(this, _WikiPage_subredditName, subredditName, \"f\");\n        __classPrivateFieldSet(this, _WikiPage_content, data.contentMd, \"f\");\n        __classPrivateFieldSet(this, _WikiPage_contentHtml, data.contentHtml, \"f\");\n        __classPrivateFieldSet(this, _WikiPage_revisionId, data.revisionId, \"f\");\n        __classPrivateFieldSet(this, _WikiPage_revisionDate, new Date(data.revisionDate * 1000), \"f\"); // data.revisionDate is represented in seconds, so multiply by 1000 to get milliseconds\n        __classPrivateFieldSet(this, _WikiPage_revisionReason, data.reason ?? '', \"f\");\n        __classPrivateFieldSet(this, _WikiPage_revisionAuthor, data.revisionBy?.data\n            ? new User(data.revisionBy.data, metadata)\n            : undefined, \"f\");\n        __classPrivateFieldSet(this, _WikiPage_metadata, metadata, \"f\");\n    }\n    /** The name of the page. */\n    get name() {\n        return __classPrivateFieldGet(this, _WikiPage_name, \"f\");\n    }\n    /** The name of the subreddit the page is in. */\n    get subredditName() {\n        return __classPrivateFieldGet(this, _WikiPage_subredditName, \"f\");\n    }\n    /** The Markdown content of the page. */\n    get content() {\n        return __classPrivateFieldGet(this, _WikiPage_content, \"f\");\n    }\n    /** The HTML content of the page. */\n    get contentHtml() {\n        return __classPrivateFieldGet(this, _WikiPage_contentHtml, \"f\");\n    }\n    /** The ID of the revision. */\n    get revisionId() {\n        return __classPrivateFieldGet(this, _WikiPage_revisionId, \"f\");\n    }\n    /** The date of the revision. */\n    get revisionDate() {\n        return __classPrivateFieldGet(this, _WikiPage_revisionDate, \"f\");\n    }\n    /** The reason for the revision. */\n    get revisionReason() {\n        return __classPrivateFieldGet(this, _WikiPage_revisionReason, \"f\");\n    }\n    /** The author of this revision. */\n    get revisionAuthor() {\n        return __classPrivateFieldGet(this, _WikiPage_revisionAuthor, \"f\");\n    }\n    toJSON() {\n        return {\n            name: __classPrivateFieldGet(this, _WikiPage_name, \"f\"),\n            subredditName: __classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"),\n            content: __classPrivateFieldGet(this, _WikiPage_content, \"f\"),\n            contentHtml: __classPrivateFieldGet(this, _WikiPage_contentHtml, \"f\"),\n            revisionId: __classPrivateFieldGet(this, _WikiPage_revisionId, \"f\"),\n            revisionDate: __classPrivateFieldGet(this, _WikiPage_revisionDate, \"f\"),\n            revisionReason: __classPrivateFieldGet(this, _WikiPage_revisionReason, \"f\"),\n            revisionAuthor: __classPrivateFieldGet(this, _WikiPage_revisionAuthor, \"f\")?.toJSON(),\n        };\n    }\n    /** Update this page. */\n    async update(content, reason) {\n        return WikiPage.updatePage({\n            subredditName: __classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"),\n            page: __classPrivateFieldGet(this, _WikiPage_name, \"f\"),\n            content,\n            reason,\n        }, __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** Get the revisions for this page. */\n    async getRevisions(options) {\n        return WikiPage.getPageRevisions({\n            subredditName: __classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"),\n            page: __classPrivateFieldGet(this, _WikiPage_name, \"f\"),\n            ...options,\n        }, __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** Revert this page to a previous revision. */\n    async revertTo(revisionId) {\n        return WikiPage.revertPage(__classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"), __classPrivateFieldGet(this, _WikiPage_name, \"f\"), revisionId, __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** Get the settings for this page. */\n    async getSettings() {\n        return WikiPage.getPageSettings(__classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"), __classPrivateFieldGet(this, _WikiPage_name, \"f\"), __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** Update the settings for this page. */\n    async updateSettings(options) {\n        return WikiPage.updatePageSettings({\n            subredditName: __classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"),\n            page: __classPrivateFieldGet(this, _WikiPage_name, \"f\"),\n            listed: options.listed,\n            permLevel: options.permLevel,\n        }, __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** Add an editor to this page. */\n    async addEditor(username) {\n        return WikiPage.addEditor(__classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"), __classPrivateFieldGet(this, _WikiPage_name, \"f\"), username, __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** Remove an editor from this page. */\n    async removeEditor(username) {\n        return WikiPage.removeEditor(__classPrivateFieldGet(this, _WikiPage_subredditName, \"f\"), __classPrivateFieldGet(this, _WikiPage_name, \"f\"), username, __classPrivateFieldGet(this, _WikiPage_metadata, \"f\"));\n    }\n    /** @internal */\n    static async getPage(subredditName, page, revisionId, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        const response = await client.GetWikiPage({\n            subreddit: subredditName,\n            page,\n            revisionId,\n        }, metadata);\n        assertNonNull(response.data, 'Failed to get wiki page');\n        return new WikiPage(page, subredditName, response.data, metadata);\n    }\n    /** @internal */\n    static async getPages(subredditName, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        const response = await client.GetWikiPages({ subreddit: subredditName }, metadata);\n        return response.data || [];\n    }\n    /** @internal */\n    static async createPage(options, metadata) {\n        return WikiPage.updatePage(options, metadata);\n    }\n    /** @internal */\n    static async updatePage(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        await client.EditWikiPage({\n            subreddit: options.subredditName,\n            page: options.page,\n            content: options.content,\n            reason: options.reason ?? '',\n        }, metadata);\n        return WikiPage.getPage(options.subredditName, options.page, undefined, metadata);\n    }\n    /** @internal */\n    static getPageRevisions(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        const after = ensureWikiRevisionCursor(options.after);\n        const before = ensureWikiRevisionCursor(options.before);\n        return new Listing({\n            hasMore: true,\n            after: after,\n            before: before,\n            limit: options.limit,\n            pageSize: options.pageSize,\n            async fetch(fetchOptions) {\n                const response = await client.GetWikiPageRevisions({\n                    subreddit: options.subredditName,\n                    page: options.page ?? '',\n                    limit: fetchOptions.limit,\n                    after: fetchOptions.after,\n                    before: fetchOptions.before,\n                }, metadata);\n                return wikiPageRevisionListingProtoToWikiPageRevision(response, metadata);\n            },\n        });\n    }\n    /** @internal */\n    static async revertPage(subredditName, page, revisionId, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        await client.RevertWikiPage({\n            subreddit: subredditName,\n            page,\n            revision: revisionId,\n        }, metadata);\n    }\n    /** @internal */\n    static async getPageSettings(subredditName, page, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        const response = await client.GetWikiPageSettings({\n            subreddit: subredditName,\n            page,\n        }, metadata);\n        assertNonNull(response.data, 'Failed to get wiki page settings');\n        return new WikiPageSettings(response.data, metadata);\n    }\n    /** @internal */\n    static async updatePageSettings(options, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        const response = await client.UpdateWikiPageSettings({\n            subreddit: options.subredditName,\n            page: options.page,\n            listed: options.listed ? 'on' : '',\n            permlevel: options.permLevel,\n        }, metadata);\n        assertNonNull(response.data, 'Failed to update wiki page settings');\n        return new WikiPageSettings(response.data, metadata);\n    }\n    /** @internal */\n    static async addEditor(subredditName, page, username, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        await client.AllowEditor({\n            act: 'add',\n            subreddit: subredditName,\n            page,\n            username,\n        }, metadata);\n    }\n    /** @internal */\n    static async removeEditor(subredditName, page, username, metadata) {\n        const client = Devvit.redditAPIPlugins.Wiki;\n        await client.AllowEditor({\n            act: 'del',\n            subreddit: subredditName,\n            page,\n            username,\n        }, metadata);\n    }\n}\n_WikiPage_name = new WeakMap(), _WikiPage_subredditName = new WeakMap(), _WikiPage_content = new WeakMap(), _WikiPage_contentHtml = new WeakMap(), _WikiPage_revisionId = new WeakMap(), _WikiPage_revisionDate = new WeakMap(), _WikiPage_revisionReason = new WeakMap(), _WikiPage_revisionAuthor = new WeakMap(), _WikiPage_metadata = new WeakMap();\nexport class WikiPageRevision {\n    constructor(data, metadata) {\n        _WikiPageRevision_id.set(this, void 0);\n        _WikiPageRevision_page.set(this, void 0);\n        _WikiPageRevision_date.set(this, void 0);\n        _WikiPageRevision_author.set(this, void 0);\n        _WikiPageRevision_reason.set(this, void 0);\n        _WikiPageRevision_hidden.set(this, void 0);\n        __classPrivateFieldSet(this, _WikiPageRevision_id, data.id, \"f\");\n        __classPrivateFieldSet(this, _WikiPageRevision_page, data.page, \"f\");\n        __classPrivateFieldSet(this, _WikiPageRevision_date, new Date(data.timestamp), \"f\");\n        assertNonNull(data.author?.data, 'Wiki page revision author details are missing');\n        __classPrivateFieldSet(this, _WikiPageRevision_author, new User(data.author.data, metadata), \"f\");\n        __classPrivateFieldSet(this, _WikiPageRevision_reason, data.reason ?? '', \"f\");\n        __classPrivateFieldSet(this, _WikiPageRevision_hidden, data.revisionHidden ?? false, \"f\");\n    }\n    get id() {\n        return __classPrivateFieldGet(this, _WikiPageRevision_id, \"f\");\n    }\n    get page() {\n        return __classPrivateFieldGet(this, _WikiPageRevision_page, \"f\");\n    }\n    get date() {\n        return __classPrivateFieldGet(this, _WikiPageRevision_date, \"f\");\n    }\n    get author() {\n        return __classPrivateFieldGet(this, _WikiPageRevision_author, \"f\");\n    }\n    get reason() {\n        return __classPrivateFieldGet(this, _WikiPageRevision_reason, \"f\");\n    }\n    get hidden() {\n        return __classPrivateFieldGet(this, _WikiPageRevision_hidden, \"f\");\n    }\n    toJSON() {\n        return {\n            id: __classPrivateFieldGet(this, _WikiPageRevision_id, \"f\"),\n            page: __classPrivateFieldGet(this, _WikiPageRevision_page, \"f\"),\n            date: __classPrivateFieldGet(this, _WikiPageRevision_date, \"f\"),\n            author: __classPrivateFieldGet(this, _WikiPageRevision_author, \"f\").toJSON(),\n            reason: __classPrivateFieldGet(this, _WikiPageRevision_reason, \"f\"),\n            hidden: __classPrivateFieldGet(this, _WikiPageRevision_hidden, \"f\"),\n        };\n    }\n}\n_WikiPageRevision_id = new WeakMap(), _WikiPageRevision_page = new WeakMap(), _WikiPageRevision_date = new WeakMap(), _WikiPageRevision_author = new WeakMap(), _WikiPageRevision_reason = new WeakMap(), _WikiPageRevision_hidden = new WeakMap();\nexport class WikiPageSettings {\n    constructor(data, metadata) {\n        _WikiPageSettings_listed.set(this, void 0);\n        _WikiPageSettings_permLevel.set(this, void 0);\n        _WikiPageSettings_editors.set(this, void 0);\n        __classPrivateFieldSet(this, _WikiPageSettings_listed, data.listed, \"f\");\n        __classPrivateFieldSet(this, _WikiPageSettings_permLevel, data.permLevel, \"f\");\n        __classPrivateFieldSet(this, _WikiPageSettings_editors, data.editors.map((editor) => {\n            assertNonNull(editor.data, 'Wiki page editor details are missing');\n            return new User(editor.data, metadata);\n        }), \"f\");\n    }\n    get listed() {\n        return __classPrivateFieldGet(this, _WikiPageSettings_listed, \"f\");\n    }\n    get permLevel() {\n        return __classPrivateFieldGet(this, _WikiPageSettings_permLevel, \"f\");\n    }\n    get editors() {\n        return __classPrivateFieldGet(this, _WikiPageSettings_editors, \"f\");\n    }\n    toJSON() {\n        return {\n            listed: __classPrivateFieldGet(this, _WikiPageSettings_listed, \"f\"),\n            permLevel: __classPrivateFieldGet(this, _WikiPageSettings_permLevel, \"f\"),\n            editors: __classPrivateFieldGet(this, _WikiPageSettings_editors, \"f\").map((editor) => editor.toJSON()),\n        };\n    }\n}\n_WikiPageSettings_listed = new WeakMap(), _WikiPageSettings_permLevel = new WeakMap(), _WikiPageSettings_editors = new WeakMap();\nfunction wikiPageRevisionListingProtoToWikiPageRevision(listingProto, metadata) {\n    assertNonNull(listingProto.data?.children, 'Wiki page revision listing is missing children');\n    const children = listingProto.data.children.map((child) => {\n        return new WikiPageRevision(child, metadata);\n    });\n    return {\n        children,\n        before: listingProto.data.before,\n        after: listingProto.data.after,\n    };\n}\n/**\n * When fetching a listing of wiki page revisions, the `after` and `before` values returned\n * by the API are already prefixed. However, the IDs in the revisions themselves are not prefixed.\n *\n * This function ensures that developers can pass either the raw ID (from `WikiPageRevision.id`) or\n * the prefixed ID (from `Listing.after` / `Listing.before`) to listing methods.\n */\nfunction ensureWikiRevisionCursor(token) {\n    if (!token)\n        return undefined;\n    return token.startsWith(WikiPageRevisionPrefix) ? token : `${WikiPageRevisionPrefix}${token}`;\n}\n", "var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _WebViewHook_hookId, _WebViewHook_url, _WebViewHook_onMessage, _WebViewHook_onUnmount, _WebViewHook_renderContext, _WebViewHook_invalidate, _WebViewHook_emitFullscreenEffect;\nimport { EffectType } from '@devvit/protos';\nimport { WebViewVisibility } from '@devvit/protos';\nimport { apiPathPrefix } from '@devvit/shared-types/constants.js';\nimport { StringUtil } from '@devvit/shared-types/StringUtil.js';\nimport { webViewMessageIsInternalAndClientScope } from '../../helpers/devvitInternalMessage.js';\nimport { registerHook } from './BlocksHandler.js';\nclass WebViewHook {\n    constructor(params, options) {\n        this.state = { messageCount: 0, isMounted: false };\n        _WebViewHook_hookId.set(this, void 0);\n        // This url is the path to the asset that will be loaded in the web view.\n        // It is ensured to be a valid path prior to the effect being emitted.\n        _WebViewHook_url.set(this, void 0);\n        _WebViewHook_onMessage.set(this, void 0);\n        _WebViewHook_onUnmount.set(this, void 0);\n        _WebViewHook_renderContext.set(this, void 0);\n        _WebViewHook_invalidate.set(this, void 0);\n        /**\n         * Send a message from a Devvit app to a web view (fullscreen).\n         */\n        this.postMessage = (message) => {\n            try {\n                // Encode message as JSON for consistency with the mobile clients\n                const jsonString = JSON.stringify(message);\n                // Handle messages sent from Devvit app -> web view\n                __classPrivateFieldGet(this, _WebViewHook_renderContext, \"f\").emitEffect(`postMessage${this.state.messageCount++}`, {\n                    type: EffectType.EFFECT_WEB_VIEW,\n                    webView: {\n                        postMessage: {\n                            webViewId: __classPrivateFieldGet(this, _WebViewHook_hookId, \"f\"),\n                            app: {\n                                message, // This is deprecated, but populated for mobile client backwards compatibility\n                                jsonString,\n                            },\n                        },\n                    },\n                });\n            }\n            catch (e) {\n                console.error(StringUtil.caughtToString(e));\n                // Safety net if something went wrong with JSON.stringify\n                throw Error('Something went wrong. Please check the contents of your postMessage.');\n            }\n        };\n        /**\n         * Triggers the fullscreen effect to show the web view in fullscreen mode.\n         */\n        this.mount = () => {\n            // If already mounted, do nothing\n            if (this.state.isMounted) {\n                console.warn('Webview is already mounted!');\n                return;\n            }\n            const assets = __classPrivateFieldGet(this, _WebViewHook_renderContext, \"f\")?.devvitContext?.assets;\n            let url;\n            if (__classPrivateFieldGet(this, _WebViewHook_url, \"f\").startsWith(apiPathPrefix))\n                url = __classPrivateFieldGet(this, _WebViewHook_url, \"f\");\n            // Get the public URL for the asset. Returns an empty string if the asset is not found.\n            else {\n                const asset = __classPrivateFieldGet(this, _WebViewHook_url, \"f\").replace(/[#?].*/, '');\n                url = `${assets.getURL(asset, { webView: true })}${__classPrivateFieldGet(this, _WebViewHook_url, \"f\").slice(asset.length)}`;\n            }\n            if (!url) {\n                throw Error(`useWebView fullscreen request failed; web view asset could not be found`);\n            }\n            __classPrivateFieldGet(this, _WebViewHook_emitFullscreenEffect, \"f\").call(this, true, url);\n        };\n        /**\n         * Triggers the fullscreen effect to hide the open web view.\n         */\n        this.unmount = () => {\n            __classPrivateFieldGet(this, _WebViewHook_emitFullscreenEffect, \"f\").call(this, false, '');\n        };\n        _WebViewHook_emitFullscreenEffect.set(this, (show, url) => {\n            __classPrivateFieldGet(this, _WebViewHook_renderContext, \"f\").emitEffect('fullscreen', {\n                type: EffectType.EFFECT_WEB_VIEW,\n                webView: {\n                    fullscreen: {\n                        id: __classPrivateFieldGet(this, _WebViewHook_hookId, \"f\"),\n                        show,\n                        url,\n                    },\n                },\n            });\n        });\n        // Default to index.html if there is no URL provided.\n        __classPrivateFieldSet(this, _WebViewHook_url, options.url ?? 'index.html', \"f\");\n        __classPrivateFieldSet(this, _WebViewHook_hookId, params.hookId, \"f\");\n        __classPrivateFieldSet(this, _WebViewHook_onMessage, options.onMessage, \"f\");\n        __classPrivateFieldSet(this, _WebViewHook_onUnmount, options.onUnmount, \"f\");\n        __classPrivateFieldSet(this, _WebViewHook_renderContext, params.context, \"f\");\n        __classPrivateFieldSet(this, _WebViewHook_invalidate, params.invalidate, \"f\");\n    }\n    onStateLoaded() {\n        // No need to remount here since the UI events will handle the state\n    }\n    /**\n     * Handles UI events originating from the web view and calls associated callbacks for the Devvit app to handle.\n     */\n    async onUIEvent(event) {\n        if (event.webView?.fullScreen) {\n            const isVisible = event.webView.fullScreen.visibility === WebViewVisibility.WEBVIEW_VISIBLE;\n            this.state.isMounted = isVisible;\n            __classPrivateFieldGet(this, _WebViewHook_invalidate, \"f\").call(this); // Ensure the state change is persisted\n            if (!isVisible && __classPrivateFieldGet(this, _WebViewHook_onUnmount, \"f\"))\n                await __classPrivateFieldGet(this, _WebViewHook_onUnmount, \"f\").call(this, this);\n        }\n        else if (event.webView?.postMessage) {\n            // Handle messages sent from web view -> Devvit app\n            // Fallback to deprecated message field for mobile client backwards compatibility\n            const message = event.webView.postMessage.jsonString\n                ? JSON.parse(event.webView.postMessage.jsonString)\n                : event.webView.postMessage.message;\n            // TODO: Temporary. Remove this filter once clients are updated.\n            if (webViewMessageIsInternalAndClientScope(message))\n                return;\n            await __classPrivateFieldGet(this, _WebViewHook_onMessage, \"f\").call(this, message, this);\n        }\n    }\n}\n_WebViewHook_hookId = new WeakMap(), _WebViewHook_url = new WeakMap(), _WebViewHook_onMessage = new WeakMap(), _WebViewHook_onUnmount = new WeakMap(), _WebViewHook_renderContext = new WeakMap(), _WebViewHook_invalidate = new WeakMap(), _WebViewHook_emitFullscreenEffect = new WeakMap();\n/**\n * Use this hook to handle a web view's visibility state and any messages sent to your app.\n * */\nexport function useWebView(options) {\n    const hook = registerHook({\n        namespace: 'useWebView',\n        initializer: (params) => new WebViewHook(params, options),\n    });\n    return {\n        postMessage: hook.postMessage,\n        mount: hook.mount,\n        unmount: hook.unmount,\n    };\n}\n", "import { OrderStatus as OrderStatusProto } from '@devvit/protos/json/devvit/payments/v1alpha/order.js';\nimport { purgeReservedDevvitKeysFromMetadata } from '../reservedDevvitMetadataKeys.js';\nimport { productFromProto } from './Product.js';\n/**\n * The status of an order.\n */\nexport var OrderStatus;\n(function (OrderStatus) {\n    OrderStatus[\"NEW\"] = \"NEW\";\n    OrderStatus[\"CREATED\"] = \"CREATED\";\n    OrderStatus[\"PAID\"] = \"PAID\";\n    OrderStatus[\"DELIVERED\"] = \"DELIVERED\";\n    OrderStatus[\"CANCELED\"] = \"CANCELED\";\n    OrderStatus[\"REVERTED\"] = \"REVERTED\";\n    OrderStatus[\"UNRECOGNIZED\"] = \"UNRECOGNIZED\";\n})(OrderStatus || (OrderStatus = {}));\n/**\n * Maps an OrderStatus enum to the corresponding protobuf enum value.\n */\nexport function mapOrderStatusToProto(status) {\n    switch (status) {\n        case OrderStatus.NEW:\n            return OrderStatusProto.ORDER_STATUS_NEW;\n        case OrderStatus.CREATED:\n            return OrderStatusProto.ORDER_STATUS_CREATED;\n        case OrderStatus.PAID:\n            return OrderStatusProto.ORDER_STATUS_PAID;\n        case OrderStatus.DELIVERED:\n            return OrderStatusProto.ORDER_STATUS_DELIVERED;\n        case OrderStatus.CANCELED:\n            return OrderStatusProto.ORDER_STATUS_CANCELED;\n        case OrderStatus.REVERTED:\n            return OrderStatusProto.ORDER_STATUS_REVERTED;\n        case OrderStatus.UNRECOGNIZED:\n            return OrderStatusProto.UNRECOGNIZED;\n    }\n}\n/**\n * Maps an OrderStatus protobuf enum value to the corresponding OrderStatus enum.\n */\nfunction mapProtoToOrderStatus(status) {\n    switch (status) {\n        case OrderStatusProto.ORDER_STATUS_NEW:\n            return OrderStatus.NEW;\n        case OrderStatusProto.ORDER_STATUS_CREATED:\n            return OrderStatus.CREATED;\n        case OrderStatusProto.ORDER_STATUS_PAID:\n            return OrderStatus.PAID;\n        case OrderStatusProto.ORDER_STATUS_DELIVERED:\n            return OrderStatus.DELIVERED;\n        case OrderStatusProto.ORDER_STATUS_CANCELED:\n            return OrderStatus.CANCELED;\n        case OrderStatusProto.ORDER_STATUS_REVERTED:\n            return OrderStatus.REVERTED;\n        case OrderStatusProto.ORDER_STATUS_UNSPECIFIED:\n        case OrderStatusProto.UNRECOGNIZED:\n            return OrderStatus.UNRECOGNIZED;\n    }\n}\n/**\n * Converts an Order protobuf message to an Order object.\n */\nexport function orderFromProto(data) {\n    return {\n        id: data.id,\n        status: mapProtoToOrderStatus(data.status),\n        createdAt: data.createdAt ?? null,\n        updatedAt: data.updatedAt ?? null,\n        products: data.products.map(productFromProto),\n        metadata: purgeReservedDevvitKeysFromMetadata(data.metadata),\n    };\n}\n", "export const RESERVED_DEVVIT_METADATA_PREFIX = 'devvit-';\n/**\n * Determines if a key is a reserved metadata key - i.e. it starts with 'devvit-'.\n */\nexport function isDevvitMetadataKey(key) {\n    return key.startsWith(RESERVED_DEVVIT_METADATA_PREFIX);\n}\n/**\n * Returns a filtered list of all keys that are reserved metadata keys - i.e. they start with 'devvit-'.\n * ['devvit-foo', 'color'] => ['devvit-foo']\n */\nexport function filterToReservedDevvitMetadataKeys(keys) {\n    return keys.filter(isDevvitMetadataKey);\n}\n/**\n * Removes reserved metadata keys from a metadata object and returns an object with only the non-reserved keys.\n */\nexport function purgeReservedDevvitKeysFromMetadata(metadata) {\n    return Object.fromEntries(Object.entries(metadata).filter(([key]) => !isDevvitMetadataKey(key)));\n}\n", "import { AccountingType as AccountingTypeProto } from '@devvit/protos/json/devvit/payments/v1alpha/product.js';\nimport { v5 as uuidv5 } from 'uuid';\nimport { assertNonNull } from '../NonNull.js';\nimport { purgeReservedDevvitKeysFromMetadata } from '../reservedDevvitMetadataKeys.js';\nexport var AccountingType;\n(function (AccountingType) {\n    AccountingType[\"INSTANT\"] = \"INSTANT\";\n    AccountingType[\"DURABLE\"] = \"DURABLE\";\n    AccountingType[\"CONSUMABLE\"] = \"CONSUMABLE\";\n    AccountingType[\"VALID_FOR_1D\"] = \"VALID_FOR_1D\";\n    AccountingType[\"VALID_FOR_7D\"] = \"VALID_FOR_7D\";\n    AccountingType[\"VALID_FOR_30D\"] = \"VALID_FOR_30D\";\n    AccountingType[\"VALID_FOR_1Y\"] = \"VALID_FOR_1Y\";\n    AccountingType[\"UNRECOGNIZED\"] = \"UNRECOGNIZED\";\n})(AccountingType || (AccountingType = {}));\nconst accountTypeToProtoMapping = {\n    [AccountingType.INSTANT]: AccountingTypeProto.ACCOUNTING_TYPE_INSTANT,\n    [AccountingType.DURABLE]: AccountingTypeProto.ACCOUNTING_TYPE_DURABLE,\n    [AccountingType.CONSUMABLE]: AccountingTypeProto.ACCOUNTING_TYPE_CONSUMABLE,\n    [AccountingType.VALID_FOR_1D]: AccountingTypeProto.ACCOUNTING_TYPE_VALID_FOR_1D,\n    [AccountingType.VALID_FOR_7D]: AccountingTypeProto.ACCOUNTING_TYPE_VALID_FOR_7D,\n    [AccountingType.VALID_FOR_30D]: AccountingTypeProto.ACCOUNTING_TYPE_VALID_FOR_30D,\n    [AccountingType.VALID_FOR_1Y]: AccountingTypeProto.ACCOUNTING_TYPE_VALID_FOR_1Y,\n    [AccountingType.UNRECOGNIZED]: AccountingTypeProto.UNRECOGNIZED,\n};\n/**\n * Maps an AccountingType enum to the corresponding protobuf enum value.\n */\nexport function mapAccountingTypeToProto(type) {\n    return accountTypeToProtoMapping[type] ?? AccountingTypeProto.UNRECOGNIZED;\n}\n/**\n * Maps an AccountingType protobuf enum value to the corresponding AccountingType enum.\n */\nexport function mapProtoToAccountingType(typeProto) {\n    const entry = Object.entries(accountTypeToProtoMapping).find(([_, value]) => value === typeProto);\n    return entry ? entry[0] : AccountingType.UNRECOGNIZED;\n}\n/**\n * Converts an Product protobuf message to an Product object.\n */\nexport function productFromProto(data) {\n    // Validate the incoming data\n    assertNonNull(data.price, 'Product price is null or undefined');\n    const productIcon = data.images['icon'];\n    return {\n        sku: data.sku,\n        price: data.price.amount, // In Reddit Gold\n        accountingType: mapProtoToAccountingType(data.accountingType),\n        displayName: data.name,\n        description: data.description,\n        metadata: purgeReservedDevvitKeysFromMetadata(data.productMetadata),\n        ...(productIcon ? { images: { icon: productIcon } } : {}),\n    };\n}\nexport function newProductId(appVersionId, productSku) {\n    const uuidV5Name = productSku;\n    const uuidV5Namespace = appVersionId;\n    return uuidv5(uuidV5Name, uuidV5Namespace);\n}\n", "import { type PaymentsService, PaymentsServiceDefinition } from '@devvit/protos/payments.js';\nimport { Devvit } from '@devvit/public-api';\n\nimport { paymentHelpMenuItem } from './paymentHelpMenuItem.js';\n\n/** @internal */\nexport const paymentsPlugin: PaymentsService = Devvit.use(PaymentsServiceDefinition);\n\nDevvit.addMenuItem(paymentHelpMenuItem);\n", "import type { MenuItem } from '@devvit/public-api';\n\n/**\n * The types for this are copied over into packages/build-pack/src/esbuild/templatizer/blocks.template.tsx\n * to avoid exposing the unnecessary internal-only object to Webbit users. If you change this here,\n * change it there too.\n * @internal\n */\nexport const paymentHelpMenuItem: MenuItem = {\n  location: 'post',\n  label: 'Get Payments Help',\n  postFilter: 'currentApp',\n  onPress: async (_, context) => {\n    const url = new URL(\n      'https://support.reddithelp.com/hc/en-us/requests/new?ticket_form_id=29770197409428&tf_29764567374740=devvit_product_not_working'\n    );\n    const username = await context.reddit.getCurrentUsername();\n    // prefill reddit username\n    if (username) {\n      url.searchParams.append(`tf_360026362751`, username);\n    }\n    // prefill the post url\n    const postId = context.postId;\n    if (postId) {\n      //remove the t3_ prefix\n      const postWithoutPrefix = postId.replace('t3_', '');\n      if (postWithoutPrefix) {\n        const postUrl = `https://www.reddit.com/r/${context.subredditName}/comments/${postWithoutPrefix}`;\n        url.searchParams.append(`tf_29770117862932`, postUrl);\n      }\n    }\n\n    // subject with app name and app version\n    url.searchParams.append(\n      `tf_subject`,\n      `[${context.appName} v${context.appVersion}] Payments Help`\n    );\n\n    // navigate to the url\n    context.ui.navigateTo(url.toString());\n  },\n};\n", "import type { GetOrdersRequest } from '@devvit/protos/payments.js';\nimport { type Devvit, useAsync, useState } from '@devvit/public-api';\nimport type { Order } from '@devvit/shared-types/payments/Order.js';\nimport { orderFromProto } from '@devvit/shared-types/payments/Order.js';\n\nimport { paymentsPlugin } from '../plugin.js';\nimport type { AsyncHookResult } from './hook-types.js';\n\ntype GetOrdersOptions = Readonly<{\n  /** number of items to return */\n  limit?: number;\n  /** next page cursor to return */\n  nextPageToken?: string;\n}>;\n\nexport type GetOrdersReturn = { orders: Order[]; nextPage?: string };\n\nexport async function getOrders(opts: GetOrdersOptions = {}): Promise<Readonly<GetOrdersReturn>> {\n  const request: GetOrdersRequest = {\n    sku: '',\n    buyer: '',\n    metadata: {},\n    status: 0,\n    ...opts,\n    limit: opts.limit || 100,\n    cursor: opts.nextPageToken || '',\n  };\n\n  const ordersResponse = await paymentsPlugin.GetOrders(request);\n\n  const ordersOut: GetOrdersReturn = {\n    orders: ordersResponse.orders.map(orderFromProto),\n  };\n\n  if (ordersResponse.pageInfo?.hasNextPage) {\n    ordersOut.nextPage = ordersResponse.pageInfo?.endCursor;\n  }\n\n  return ordersOut;\n}\n\ntype OrderJSON = Omit<Order, 'createdAt' | 'updatedAt'> & {\n  createdAt: string | null;\n  updatedAt: string | null;\n};\n\nfunction orderToJSON(order: Order): OrderJSON {\n  return {\n    ...order,\n    createdAt: order.createdAt?.toISOString() ?? null,\n    updatedAt: order.updatedAt?.toISOString() ?? null,\n  };\n}\n\nfunction orderFromJSON(order: OrderJSON): Order {\n  return {\n    ...order,\n    createdAt: order.createdAt ? new Date(order.createdAt) : null,\n    updatedAt: order.updatedAt ? new Date(order.updatedAt) : null,\n  };\n}\n\nexport type UseOrdersResult = AsyncHookResult<{\n  orders: Order[];\n  nextPage?: () => Promise<void>;\n}>;\n\ntype OrdersPaginationState = {\n  orders: OrderJSON[];\n  nextPageToken: string;\n};\n\nexport function useOrders(_ctx: Devvit.Context, opts: GetOrdersOptions = {}): UseOrdersResult {\n  const [pageToken, setPageToken] = useState<string>(opts.nextPageToken ?? '');\n  const { loading, data, error } = useAsync<OrdersPaginationState>(\n    async () => {\n      const fetchRes = await getOrders({ ...opts, nextPageToken: pageToken });\n      return {\n        orders: fetchRes.orders.map(orderToJSON),\n        nextPageToken: fetchRes.nextPage || '',\n      };\n    },\n    {\n      depends: pageToken,\n    }\n  );\n\n  let base = {\n    orders: (data?.orders ?? []).map(orderFromJSON),\n  };\n  if (data?.nextPageToken) {\n    base = Object.assign(base, {\n      nextPage: async () => {\n        setPageToken(data?.nextPageToken);\n      },\n    });\n  }\n\n  if (loading) {\n    return {\n      ...base,\n      loading: true,\n      error: null,\n    };\n  }\n\n  if (error) {\n    return {\n      ...base,\n      loading,\n      error,\n    };\n  }\n\n  return {\n    ...base,\n    loading,\n    error: null,\n  };\n}\n", "import { EffectType } from '@devvit/protos/types/devvit/ui/effects/v1alpha/effect.js';\nimport type { UIEvent } from '@devvit/protos/types/devvit/ui/events/v1alpha/event.js';\nimport { registerHook } from '@devvit/public-api/devvit/internals/blocks/handler/BlocksHandler.js';\nimport type { RenderContext } from '@devvit/public-api/devvit/internals/blocks/handler/RenderContext.js';\nimport type { Hook, HookParams } from '@devvit/public-api/devvit/internals/blocks/handler/types.js';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport type { JsonValue } from '@devvit/shared-types/json.js';\n\nimport type { OnPurchaseResultHandler, OrderMetadata } from './hook-types.js';\nimport { orderStatusProtoToHook } from './hook-types.js';\n\nexport type UsePayments = {\n  /**\n   * Initiate a purchase flow for a single SKU\n   *\n   * @param sku The product to purchase\n   * @param meta Additional metadata to attach to the order receipt\n   */\n  purchase(sku: string, meta?: OrderMetadata): void;\n};\n\nclass UsePaymentsHook implements Hook, UsePayments {\n  readonly #context: RenderContext;\n  readonly #callback: OnPurchaseResultHandler;\n  readonly #debug: boolean;\n\n  readonly hookId: string;\n\n  state: JsonValue = {};\n\n  constructor(callback: OnPurchaseResultHandler, params: HookParams) {\n    this.#debug = !!params.context._devvitContext?.debug.payments;\n    this.#context = params.context;\n    this.#callback = callback;\n\n    this.hookId = params.hookId;\n\n    this.#debugLog(`usePurchase hook created (${this.hookId})`);\n  }\n\n  async onUIEvent(event: UIEvent): Promise<void> {\n    if (event.orderResult && event.hook === this.hookId) {\n      this.#debugLog(\n        `Received an order result: hookId: ${this.hookId}; Status: ${event.orderResult.status}; Order ID: ${event.orderResult.orderId}; Error Code: ${event.orderResult.errorCode}; Error Message: ${event.orderResult.errorMessage}`\n      );\n      const { status, errorCode, errorMessage, order, orderId } = event.orderResult;\n      if (!order) {\n        throw new Error('Invalid response: missing original order');\n      }\n      await this.#callback({\n        status: orderStatusProtoToHook(status),\n        errorCode,\n        errorMessage,\n        orderId,\n        sku: order.skus[0],\n        metadata: order.metadata,\n      });\n    }\n  }\n\n  purchase(sku: string, metadata: OrderMetadata = {}): void {\n    if (!sku.trim()) {\n      throw new Error('Invalid purchase; no SKU provided');\n    }\n\n    this.#debugLog(`Requesting a purchase for product: ${sku}`);\n\n    // inject post id into metadata to be read by the order handler\n    const devvitMetadata: OrderMetadata = {\n      [Header.Post]: this.#context._devvitContext?.postId ?? '',\n    };\n\n    this.#context.emitEffect('createOrder', {\n      type: EffectType.EFFECT_CREATE_ORDER,\n      createOrder: {\n        id: this.hookId,\n        skus: [sku],\n        metadata: {\n          ...metadata,\n          ...devvitMetadata,\n        },\n      },\n    });\n  }\n\n  #debugLog = (msg: string): void => {\n    if (this.#debug) {\n      console.debug(`[payments] ${msg}`);\n    }\n  };\n}\n\n/**\n * Creates a reusable hook to trigger purchases in an app and handle\n * the results in a single callback\n *\n * @param callback A function to call when a purchase flow is completed\n */\nexport function usePayments(callback: OnPurchaseResultHandler): UsePayments {\n  return registerHook({\n    namespace: 'payments',\n    initializer: (params) => new UsePaymentsHook(callback, params),\n  });\n}\n", "import type { GetProductsRequest } from '@devvit/protos/payments.js';\nimport { type Devvit, useAsync, useState } from '@devvit/public-api';\nimport type { Product, SKU } from '@devvit/shared-types/payments/Product.js';\nimport { productFromProto } from '@devvit/shared-types/payments/Product.js';\n\nimport { paymentsPlugin } from '../plugin.js';\nimport type { AsyncHookResult } from './hook-types.js';\n\ntype GetProductsOptions = Readonly<{\n  /** start time filter */\n  skus?: SKU[];\n  /** metadata to filter on. these values are combined via AND */\n  metadata?: { [key: string]: string };\n}>;\n\nexport async function getProducts(opts: GetProductsOptions = {}): Promise<Product[]> {\n  const request: GetProductsRequest = {\n    skus: opts.skus || [],\n    metadata: opts.metadata || {},\n  };\n\n  return (await paymentsPlugin.GetProducts(request)).products.map(productFromProto);\n}\n\nexport type UseProductsResult = AsyncHookResult<{\n  products: Product[];\n  refetch: () => Promise<void>;\n}>;\n\nexport function useProducts(\n  _ctx: Devvit.Context,\n  opts: GetProductsOptions = {}\n): UseProductsResult {\n  // internal state used to trigger refetch\n  const [refetchBit, setRefetchBit] = useState(0);\n  const { loading, data, error } = useAsync(async () => getProducts(opts), {\n    depends: refetchBit,\n  });\n\n  const products: Product[] = data ?? [];\n  const refetch = async (): Promise<void> => {\n    setRefetchBit((b) => ~b); // flip bit to trigger callback execution\n  };\n\n  const base = {\n    products,\n    refetch,\n  };\n\n  if (loading) {\n    return {\n      ...base,\n      loading: true,\n      error: null,\n    };\n  }\n\n  if (error != null) {\n    return {\n      ...base,\n      loading: false,\n      error,\n    };\n  }\n\n  return {\n    ...base,\n    loading: false,\n    error: null,\n  };\n}\n", "import type { Metadata } from '@devvit/protos/lib/Types.js';\nimport type {\n  FulfillOrderRequest,\n  FulfillOrderResponse,\n  Order as ProtoOrder,\n  PaymentProcessor,\n  RefundOrderRequest,\n  RefundOrderResponse,\n} from '@devvit/protos/payments.js';\nimport { PaymentProcessorDefinition } from '@devvit/protos/payments.js';\nimport { Devvit, type TriggerContext } from '@devvit/public-api';\nimport { makeAPIClients } from '@devvit/public-api/apis/makeAPIClients.js';\nimport { getContextFromMetadata } from '@devvit/public-api/devvit/internals/context.js';\nimport { Header } from '@devvit/shared-types/Header.js';\nimport { type Order, orderFromProto } from '@devvit/shared-types/payments/Order.js';\n\nexport type PaymentHandlerResponse = void | { success: true } | { success: false; reason?: string };\n\nexport type PaymentHandler = {\n  fulfillOrder(\n    order: Order,\n    ctx: TriggerContext\n  ): PaymentHandlerResponse | Promise<PaymentHandlerResponse>;\n  refundOrder?(order: Order, ctx: TriggerContext): void | Promise<void>;\n};\n\n// The typed for this are copied over into `packages/build-pack/src/esbuild/templatizer/blocks.template.tsx`\n// to avoid exposing the unnecessary internal-only function to Webbit users. If you change this here,\n// change it there too.\nexport function addPaymentHandler(paymentHandler: PaymentHandler): void {\n  Devvit.provide(PaymentProcessorDefinition);\n  Object.assign(Devvit.prototype, makeWrappedHandler(paymentHandler));\n}\n\nexport function makeWrappedHandler(userDefinedHandler: PaymentHandler): PaymentProcessor {\n  return {\n    async FulfillOrder(req: FulfillOrderRequest, md: Metadata): Promise<FulfillOrderResponse> {\n      if (req.order == null || req.order.products.length === 0) {\n        return {};\n      }\n\n      const context = Object.assign(\n        makeAPIClients({ metadata: md }),\n        getContextFromMetadata(md, req.order.metadata[Header.Post])\n      );\n\n      const order = mapOrder(req.order);\n      const response = await userDefinedHandler.fulfillOrder(order, context);\n\n      if (!response || response.success) {\n        return { acknowledged: true };\n      } else {\n        return { rejectionReason: response.reason };\n      }\n    },\n    async RefundOrder(req: RefundOrderRequest, md: Metadata): Promise<RefundOrderResponse> {\n      if (req.order == null || !userDefinedHandler.refundOrder) {\n        return {};\n      }\n\n      const context = Object.assign(makeAPIClients({ metadata: md }), getContextFromMetadata(md));\n      const order = mapOrder(req.order);\n      await userDefinedHandler.refundOrder(order, context);\n      return {};\n    },\n  };\n}\n\n// A utility mapper function that maps between the Order protobuf message and the Order type\n// it also does some basic order validation (e.g. ensuring there is exactly one product)\nfunction mapOrder(order: ProtoOrder): Order {\n  const outOrder = orderFromProto(order);\n  if (outOrder.products.length > 1) {\n    throw new Error('Multi-product orders not supported');\n  }\n  if (outOrder.products.length === 0) {\n    throw new Error('No products in order');\n  }\n\n  return outOrder;\n}\n"],
  "mappings": "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",
  "names": ["require_kind_of", "__commonJSMin", "exports", "module", "toString", "val", "type", "isGeneratorFn", "isArray", "isBuffer", "isArguments", "isDate", "isError", "isRegexp", "ctorName", "isGeneratorObj", "name", "err", "require_shallow_clone", "__commonJSMin", "exports", "module", "valueOf", "typeOf", "clone", "val", "deep", "cloneBuffer", "cloneSymbol", "cloneArrayBuffer", "cloneTypedArray", "cloneRegExp", "flags", "re", "res", "len", "buf", "require_isobject", "__commonJSMin", "exports", "module", "val", "require_is_plain_object", "__commonJSMin", "exports", "module", "isObject", "isObjectObject", "o", "ctor", "prot", "require_clone_deep", "__commonJSMin", "exports", "module", "clone", "typeOf", "isPlainObject", "cloneDeep", "val", "instanceClone", "cloneObjectDeep", "cloneArrayDeep", "res", "key", "require_base64_js", "__commonJSMin", "exports", "byteLength", "toByteArray", "fromByteArray", "lookup", "revLookup", "Arr", "code", "i", "len", "getLens", "b64", "validLen", "placeHoldersLen", "lens", "_byteLength", "tmp", "arr", "curByte", "tripletToBase64", "num", "encodeChunk", "uint8", "start", "end", "output", "extraBytes", "parts", "maxChunkLength", "len2", "OrderResultStatusProto", "OrderResultStatus", "orderStatusProtoToHook", "orderResultStatus", "RunAs", "Scope", "assertNonNull", "val", "msg", "protos", "Scope", "Actor", "config", "TOP_LEVEL_DOMAIN_REGEX", "assertRequestedFetchDomainsLimit", "requestedFetchDomains", "normalizeDomains", "normalizedSet", "rawDomain", "TOP_LEVEL_DOMAIN_REGEX", "normalizedDomain", "error", "DeletionReason", "EventSource", "CrowdControlLevel", "DistinguishType", "SubredditRating", "SubredditType", "SettingScope", "assert", "condition", "msg", "T_PREFIX", "assertValidFormFields", "fields", "seenNames", "field", "fieldName", "assertAppSecretsOnly", "SettingScope", "Hook", "DeletionReason", "EventSource", "AppSettingsDefinition", "GetFieldsResponse", "FormFieldType", "transformFormFields", "fields", "field", "transformStringField", "transformImageField", "transformParagraphField", "transformNumberField", "transformSelectField", "transformBooleanField", "transformGroupField", "extendDevvitPrototype", "key", "value", "Devvit", "ValidateFormResponse", "RealtimeSubscriptionStatus", "Header", "AppDebug", "ChannelStatus", "makeUseChannelHook", "reconciler", "useChannel", "options", "hookIndex", "currentState", "previousState", "appId", "Header", "assertNonNull", "installationId", "send", "msg", "name", "subscribe", "unsubscribe", "hook", "event", "result", "RealtimeSubscriptionStatus", "hookState", "Hook", "status", "ChannelStatus", "FormFieldType", "flattenFormFieldValue", "value", "getFormValues", "results", "acc", "key", "val", "makeUseFormHook", "reconciler", "useForm", "form", "onSubmit", "hookIndex", "componentKey", "currentState", "previousState", "formKey", "hookState", "Hook", "formSubmittedEvent", "response", "getFormValues", "makeUseIntervalHook", "reconciler", "useInterval", "callback", "requestedDelayMs", "hookIndex", "currentState", "previousState", "minDelay", "delayMs", "hookState", "Hook", "start", "i", "stateItem", "stop", "response", "makeUseStateHook", "reconciler", "useState", "initialState", "hookIndex", "currentState", "previousState", "stateSetter", "value", "valueOrFunction", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_PromiseCache_instances", "_PromiseCache_redis", "_PromiseCache_localCache", "_PromiseCache_clock", "_PromiseCache_state", "_PromiseCache_localCachedAnswer", "_PromiseCache_maybeRefreshCache", "_PromiseCache_refreshCache", "_PromiseCache_pollForCache", "_PromiseCache_updateCache", "_PromiseCache_calculateRamp", "_PromiseCache_redisEntry", "_PromiseCache_enforceTTL", "SystemClock", "_namespaced", "key", "_lock", "pollEvery", "maxPollingTimeout", "minTtlValue", "retryLimit", "errorRetryProbability", "clientRetryDelay", "allowStaleFor", "_unwrap", "entry", "PromiseCache", "redis", "clock", "closure", "options", "localCachedAnswer", "existing", "val", "now", "hasRetryableError", "expires", "rampProbability", "lockKey", "lockExpiration", "start", "ttl", "pollingTimeout", "resolve", "e", "expiry", "remaining", "makeCache", "redis", "state", "clock", "SystemClock", "pc", "PromiseCache", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_AssetsClient_instances", "_AssetsClient_webViewAssetMap", "_AssetsClient_getURL", "_AssetsClient_getURLs", "assertValidUrl", "path", "AssetsClient", "Devvit", "assetPathOrPaths", "options", "assetPath", "localUrl", "assetPaths", "retval", "missingPaths", "cache", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_KeyValueStorage_metadata", "KeyValueStorage", "metadata", "key", "messages", "Devvit", "keys", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_MediaClient_metadata", "MediaClient", "metadata", "opts", "response", "Devvit", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_RealtimeClient_metadata", "RealtimeClient", "metadata", "channel", "msg", "Devvit", "T_PREFIX", "isT1ID", "id", "isT2ID", "isT3ID", "isT4ID", "isT5ID", "isT6ID", "assertT1ID", "assert", "assertT2ID", "assertT3ID", "assertT4ID", "assertT5ID", "assertT6ID", "asT1ID", "asT2ID", "asT3ID", "asT4ID", "asT5ID", "asT6ID", "asTID", "isCommentId", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_RedditAPIClient_metadata", "_RedditAPIClient_modMailService", "_RedditAPIClient_currentUser", "_RedditAPIClient_currentUsername", "RedditAPIClient", "metadata", "ModMailService", "id", "Subreddit", "asTID", "getSubredditInfoById", "name", "getSubredditInfoByName", "subredditName", "options", "nameFromMetadata", "Header", "subredditId", "nameFromId", "getSubredditNameById", "asT5ID", "currentSubreddit", "Post", "User", "username", "getCurrentUsernameFromMetadata", "currentUsername", "snoovatarUrl", "Comment", "getModerationLog", "permissions", "ModNote", "req", "PrivateMessage", "isT1ID", "isT3ID", "isSpam", "FlairTemplate", "flairTemplateId", "Flair", "flairs", "postId", "asT3ID", "Widget", "widgetId", "widgetData", "orderByIds", "page", "revisionId", "WikiPage", "thing", "Devvit", "AboutLocations", "address", "getVaultByAddress", "userId", "getVaultByUserId", "getSubredditLeaderboard", "getSubredditStyles", "BitfieldOverflowBehavior", "RedisKeyScope", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_TxClient_storage", "_TxClient_transactionId", "_TxClient_metadata", "_RedisClient_metadata", "_RedisClient_storage", "isRedisNilError", "e", "TxClient", "storage", "transactionId", "metadata", "key", "options", "expiration", "keys", "response", "output", "result", "start", "end", "offset", "keyValues", "kv", "seconds", "members", "member", "cursor", "pattern", "count", "request", "stop", "opts", "min", "max", "field", "fields", "fieldValues", "fv", "RedisClient", "_RedisClient", "scope", "RedisKeyScope", "Devvit", "txId", "newKey", "cmds", "commands", "argIndex", "currentArg", "command", "behavior", "toBehaviorProto", "lowercase", "BitfieldOverflowBehavior", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_SchedulerClient_metadata", "SchedulerClient", "metadata", "job", "Devvit", "jobId", "action", "assertNonNull", "FormFieldType", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_SettingsClient_metadata", "SettingsClient", "metadata", "name", "response", "Devvit", "cleanAppSettings", "getSettingsValues", "key", "settingDefinition", "FormFieldType", "results", "settingsDefinitions", "settingsValues", "acc", "flattenFormFieldValue", "setDefaultsIfNecessary", "definition", "EffectType", "ToastAppearance", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_UIClient_effects", "_UIClient_reconciler", "_UIClient_webViewClient", "_UIClient_postMessage", "UIClient", "reconciler", "webViewIdOrMessage", "message", "webViewId", "msg", "EffectType", "formKey", "data", "formInternalOverride", "formDefinition", "Devvit", "hookForm", "formData", "form", "assertValidFormFields", "transformFormFields", "textOrToast", "toast", "ToastAppearance", "thingOrUrl", "inputUrl", "normalizedUrl", "makeAPIClients", "metadata", "ui", "hooks", "reconciler", "kvStore", "KeyValueStorage", "redis", "RedisClient", "cache", "makeCache", "reddit", "RedditAPIClient", "scheduler", "SchedulerClient", "settings", "SettingsClient", "uiClient", "UIClient", "media", "MediaClient", "assets", "AssetsClient", "realtime", "RealtimeClient", "useState", "makeUseStateHook", "useInterval", "makeUseIntervalHook", "useForm", "makeUseFormHook", "useChannel", "makeUseChannelHook", "version_default", "getContextFromMetadata", "metadata", "postId", "commentId", "subredditId", "Header", "assertNonNull", "subredditName", "postData", "postDataJSON", "appAccountId", "appSlug", "appVersion", "snoovatar", "username", "userId", "debug", "parseDebug", "meta", "_a", "keyset", "lowerKeyToKey", "key", "kv", "k", "v", "version_default", "extractSettingsFields", "settings", "field", "onValidateFormHelper", "req", "metadata", "response", "formValues", "getFormValues", "flattendFields", "fieldName", "value", "validator", "context", "makeAPIClients", "getContextFromMetadata", "error", "ValidateFormResponse", "onGetSettingsFields", "GetFieldsResponse", "transformFormFields", "Devvit", "onValidateForm", "req", "metadata", "onValidateFormHelper", "registerAppSettings", "config", "AppSettingsDefinition", "extendDevvitPrototype", "CustomPostDefinition", "RenderPostResponse", "BlockRenderEventType", "EffectType", "getEffectsFromUIClient", "ui", "makeUniqueIdGenerator", "seenActionIds", "id", "uniqueId", "counter", "BlockActionType", "BlockAvatarBackground", "BlockAvatarFacing", "BlockAvatarSize", "BlockBorderWidth", "BlockButtonAppearance", "BlockButtonSize", "BlockGap", "BlockHorizontalAlignment", "BlockIconSize", "BlockImageResizeMode", "BlockPadding", "BlockRadius", "BlockSpacerShape", "BlockSpacerSize", "BlockStackDirection", "BlockTextOutline", "BlockTextOverflow", "BlockTextSize", "BlockTextStyle", "BlockTextWeight", "BlockType", "BlockVerticalAlignment", "semanticColors", "namedHTMLColorToHex", "isHexColor", "color", "isRPLColor", "semanticColors", "isNamedHTMLColor", "isRgbaColor", "isHslColor", "getHexFromRPLColor", "theme", "getHexFromNamedHTMLColor", "finalColor", "getHexFromRgbaColor", "r", "g", "b", "a", "convertedValues", "val", "aFloat", "alphaNumberValue", "number", "BlockStackDirection", "ROOT_STACK_TRANSFORM_CONTEXT", "ExpandDirection", "makeStackDimensionsDetails", "props", "stackParentLayout", "blockSizes", "growDirection", "stretchDirection", "makeBlockGrowStretchDetails", "hasHeight", "isExpandingOnConstrainedRespectiveAxis", "hasWidth", "axis", "parentHasDimensionSet", "isGrowing", "parentStackDirection", "parentAlignment", "parentIsVerticalOrRoot", "parentIsHoritzontal", "hnone", "vnone", "isStretching", "BlockSizeUnit", "BlockStackDirection", "parseSize", "size", "parts", "unit", "omitRelativeSizes", "blockSizes", "stackParentLayout", "makeBlockSizes", "props", "transformContext", "hasWidth", "hasHeight", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_BlocksTransformer_assetsClient", "DATA_PREFIX", "ACTION_HANDLERS", "ACTION_TYPES", "BlockActionType", "BlocksTransformer", "getAssetsClient", "type", "props", "children", "block", "ROOT_STACK_TRANSFORM_CONTEXT", "transformContext", "height", "padding", "BlockPadding", "radius", "BlockRadius", "gap", "BlockGap", "alignment", "vertical", "horizontal", "BlockVerticalAlignment", "BlockHorizontalAlignment", "borderWidth", "color", "lightColor", "darkColor", "width", "BlockBorderWidth", "borderColor", "colors", "textSize", "BlockTextSize", "style", "BlockTextStyle", "outline", "BlockTextOutline", "weight", "BlockTextWeight", "overflow", "BlockTextOverflow", "appearance", "BlockButtonAppearance", "size", "BlockButtonSize", "resize", "BlockImageResizeMode", "BlockSpacerSize", "BlockSpacerShape", "BlockIconSize", "BlockAvatarSize", "facing", "BlockAvatarFacing", "background", "BlockAvatarBackground", "key", "p", "c", "_type", "actions", "dataSet", "action", "id", "theme", "isHexColor", "isRPLColor", "getHexFromRPLColor", "isNamedHTMLColor", "getHexFromNamedHTMLColor", "isRgbaColor", "getHexFromRgbaColor", "isHslColor", "child", "light", "dark", "tokens", "matches", "group", "input", "url", "options", "BlockType", "Devvit", "direction", "backgroundColors", "blockSizes", "makeBlockSizes", "blockDimensionsDetails", "makeStackDimensionsDetails", "BlockStackDirection", "textColors", "config", "root", "__classPrivateFieldGet", "receiver", "state", "kind", "f", "__classPrivateFieldSet", "value", "_BlocksReconciler_instances", "_BlocksReconciler_reset", "_BlocksReconciler_makeContextProps", "_BlocksReconciler_flatten", "_BlocksReconciler_rerenderAlreadyScheduled", "assertNotString", "reified", "toXML", "node", "xml", "attributes", "key", "child", "getIndentation", "level", "indentXML", "formatted", "indentLevel", "xmlArr", "i", "isClosingTag", "BlocksReconciler", "_dedupeKey", "effect", "component", "event", "metadata", "dimensions", "BlocksTransformer", "apiClients", "makeAPIClients", "results", "id", "uniqueId", "counter", "ctx", "blockElement", "handler", "hook", "rootBlockElement", "block", "element", "Devvit", "props", "actionHandlers", "action", "name", "idGenerator", "makeUniqueIdGenerator", "path", "childrens", "children", "collapsedChildren", "componentKey", "c", "result", "promiseOrError", "previousState", "pathPrefix", "BlockRenderEventType", "realtimeEvent", "delayMs", "EffectType", "channel", "getEffectsFromUIClient", "getContextFromMetadata", "Header", "arr", "out", "renderPost", "req", "metadata", "customPostType", "Devvit", "reconciler", "BlocksReconciler", "_props", "context", "blocksUI", "RenderPostResponse", "registerCustomPost", "config", "CustomPostDefinition", "extendDevvitPrototype", "GetFieldsResponse", "InstallationSettingsDefinition", "onGetSettingsFields", "GetFieldsResponse", "transformFormFields", "Devvit", "onValidateForm", "req", "metadata", "onValidateFormHelper", "registerInstallationSettings", "config", "InstallationSettingsDefinition", "extendDevvitPrototype", "ContextActionDefinition", "ContextActionList", "ContextActionResponse", "getUserHeader", "context", "userHeader", "Header", "getSubredditHeader", "subredditHeader", "addCSRFTokenToContext", "req", "commentId", "postId", "subredditId", "targetId", "comment", "post", "thisItem", "getMenuItemById", "needsModCheck", "isModerator", "val", "subreddit", "mod", "validateCSRFToken", "actionId", "thingId", "csrfData", "getActionId", "index", "getMenuItemById", "id", "Devvit", "_", "menuItemPertainsToLocation", "menuItem", "location", "getActions", "_metadata", "actions", "item", "ContextActionList", "onAction", "req", "metadata", "commentId", "postId", "subredditId", "targetId", "assertNonNull", "event", "context", "makeAPIClients", "getContextFromMetadata", "Header", "addCSRFTokenToContext", "ContextActionResponse", "getEffectsFromUIClient", "registerMenuItems", "config", "ContextActionDefinition", "extendDevvitPrototype", "pluginIsEnabled", "settings", "SchedulerHandlerDefinition", "handleScheduledAction", "args", "metadata", "jobName", "scheduledJobHandler", "Devvit", "event", "context", "makeAPIClients", "getContextFromMetadata", "registerScheduler", "config", "SchedulerHandlerDefinition", "extendDevvitPrototype", "OnAppInstallDefinition", "OnAppUpgradeDefinition", "OnAutomoderatorFilterCommentDefinition", "OnAutomoderatorFilterPostDefinition", "OnCommentCreateDefinition", "OnCommentDeleteDefinition", "OnCommentReportDefinition", "OnCommentSubmitDefinition", "OnCommentUpdateDefinition", "OnModActionDefinition", "OnModMailDefinition", "OnPostCreateDefinition", "OnPostDeleteDefinition", "OnPostFlairUpdateDefinition", "OnPostNsfwUpdateDefinition", "OnPostReportDefinition", "OnPostSpoilerUpdateDefinition", "OnPostSubmitDefinition", "OnPostUpdateDefinition", "StringUtil", "ellipsize", "str", "limit", "capitalize", "isBlank", "caughtToString", "val", "preferredErrorProperty", "caughtToStringUntyped", "createCombinedHandler", "eventType", "handlers", "assertNonNull", "arg", "metadata", "event", "context", "makeAPIClients", "getContextFromMetadata", "results", "fn", "errResult", "joinSettledErrors", "registerTriggers", "config", "Devvit", "OnPostSubmitDefinition", "extendDevvitPrototype", "OnPostCreateDefinition", "OnPostUpdateDefinition", "OnPostReportDefinition", "OnPostDeleteDefinition", "OnPostFlairUpdateDefinition", "OnCommentSubmitDefinition", "OnCommentCreateDefinition", "OnCommentUpdateDefinition", "OnCommentReportDefinition", "OnCommentDeleteDefinition", "OnAppInstallDefinition", "OnAppUpgradeDefinition", "OnModActionDefinition", "OnModMailDefinition", "OnPostNsfwUpdateDefinition", "OnPostSpoilerUpdateDefinition", "OnAutomoderatorFilterPostDefinition", "OnAutomoderatorFilterCommentDefinition", "errs", "sum", "result", "err", "StringUtil", "EffectType", "HandleUIEventResponse", "UIEventHandlerDefinition", "import_clone_deep", "isPlainObject", "value", "isEqual", "a", "b", "isSameArray", "isPlainObject", "isSameObject", "dataViewsAreEqual", "isTypedArray", "keys1", "keys2", "key", "element", "index", "offset", "value", "handleUIEvent", "req", "metadata", "originalState", "state", "cloneDeep", "apiClients", "makeAPIClients", "formKey", "Devvit", "blocksReconciler", "BlocksReconciler", "_props", "context", "HandleUIEventResponse", "formDefinition", "postId", "commentId", "actionId", "thingId", "menuItem", "getMenuItemById", "menuItemPertainsToLocation", "getContextFromMetadata", "Header", "validateCSRFToken", "getFormValues", "stateWasUpdated", "isEqual", "uiEffects", "getEffectsFromUIClient", "effects", "EffectType", "registerUIEventHandler", "config", "UIEventHandlerDefinition", "extendDevvitPrototype", "CustomPostDefinition", "UIResponse", "UIEventScope", "CIRCUIT_BREAKER_MSG", "isCircuitBreaker", "err", "CIRCUIT_BREAKER_MSG", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_PromiseCache_instances", "_PromiseCache_redis", "_PromiseCache_localCache", "_PromiseCache_clock", "_PromiseCache_state", "_PromiseCache_localCachedAnswer", "_PromiseCache_maybeRefreshCache", "_PromiseCache_refreshCache", "_PromiseCache_pollForCache", "_PromiseCache_updateCache", "_PromiseCache_calculateRamp", "_PromiseCache_redisEntry", "_PromiseCache_enforceTTL", "SystemClock", "_namespaced", "key", "_lock", "pollEvery", "maxPollingTimeout", "minTtlValue", "retryLimit", "errorRetryProbability", "clientRetryDelay", "allowStaleFor", "_unwrap", "entry", "PromiseCache", "redis", "clock", "closure", "options", "_a", "localCachedAnswer", "existing", "val", "now", "hasRetryableError", "expires", "rampProbability", "lockKey", "lockExpiration", "start", "ttl", "pollingTimeout", "resolve", "e", "expiry", "remaining", "makeCache", "redis", "state", "clock", "SystemClock", "pc", "PromiseCache", "EffectType", "ToastAppearance", "formKeyToHookId", "formKey", "match", "UseFormHook", "params", "form", "onSubmit", "event", "getFormValues", "useForm", "hook", "registerHook", "hookRefToFormKey", "hookRef", "getFormDefinition", "renderContext", "formKey", "hookId", "formKeyToHookId", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_UIClient_renderContext", "_UIClient_webViewMessageCount", "_UIClient_webViewClient", "_UIClient_webViewPostMessage", "UIClient", "renderContext", "_UIClient_renderContext", "_UIClient_webViewMessageCount", "_UIClient_webViewClient", "_UIClient_webViewPostMessage", "webViewIdOrMessage", "message", "_a", "_b", "webViewId", "msg", "__classPrivateFieldGet", "__classPrivateFieldSet", "EffectType", "formKey", "data", "formInternalOverride", "formDefinition", "getFormDefinition", "formData", "form", "assertValidFormFields", "transformFormFields", "textOrToast", "toast", "ToastAppearance", "thingOrUrl", "inputUrl", "normalizedUrl", "EffectType", "RealtimeSubscriptionStatus", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_ChannelHook_instances", "_a", "_ChannelHook_context", "_ChannelHook_debug", "_ChannelHook_invalidate", "_ChannelHook_opts", "_ChannelHook_emitSubscribed", "ChannelHook", "opts", "params", "appID", "Header", "installID", "channel", "hook", "ev", "realtime", "RealtimeSubscriptionStatus", "msg", "ChannelStatus", "channels", "EffectType", "useChannel", "id", "registerHook", "EffectType", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_RenderContext_state", "_RenderContext_hooks", "_isTombstone", "RenderContext", "_RenderContext", "context", "request", "meta", "changed", "key", "unmounted", "t", "hooks", "options", "id", "handler", "ref", "ev", "allHandlers", "_", "dedupeKey", "effect", "events", "grouped", "acc", "event", "builder", "i", "segment", "tag", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_IntervalHook_hookId", "_IntervalHook_invalidate", "_IntervalHook_callback", "_IntervalHook_context", "intervals", "RenderContext", "event", "context", "EffectType", "IntervalHook", "callback", "requestedDelayMs", "params", "seconds", "nanos", "_event", "useInterval", "hook", "registerHook", "UIEventScope", "RenderInterruptError", "UIEventScope", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_AsyncHook_debug", "_AsyncHook_hookId", "_AsyncHook_invalidate", "_AsyncHook_ctx", "_AsyncHook_options", "toSerializableErrorOrCircuitBreak", "e", "CIRCUIT_BREAKER_MSG", "StringUtil", "AsyncHook", "initializer", "options", "params", "isEqual", "requeueEvent", "UIEventScope", "event", "context", "asyncResponse", "anticipatedRequestId", "useAsync", "hook", "registerHook", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_UseStateHook_changed", "_UseStateHook_ctx", "_UseStateHook_initializer", "_UseStateHook_hookId", "UseStateHook", "initializer", "params", "toSerializableErrorOrCircuitBreak", "action", "RenderInterruptError", "initialValue", "e", "requeueEvent", "UIEventScope", "useState", "initialState", "hook", "registerHook", "ContextBuilder", "renderContext", "request", "metadata", "kvStore", "KeyValueStorage", "redis", "RedisClient", "reddit", "RedditAPIClient", "scheduler", "SchedulerClient", "settings", "SettingsClient", "ui", "UIClient", "media", "MediaClient", "assets", "AssetsClient", "realtime", "RealtimeClient", "cache", "makeCache", "apiClients", "useState", "useChannel", "useInterval", "useForm", "Header", "baseContext", "getContextFromMetadata", "__classPrivateFieldGet", "receiver", "state", "kind", "f", "__classPrivateFieldSet", "value", "_BlocksHandler_instances", "_BlocksHandler_root", "_BlocksHandler_contextBuilder", "_BlocksHandler_blocksTransformer", "_BlocksHandler_debug_get", "_BlocksHandler_loadHooks", "_BlocksHandler_handleAsyncQueues", "_BlocksHandler_attemptHook", "_BlocksHandler_handleMainQueue", "_BlocksHandler_renderRoot", "_BlocksHandler_render", "_BlocksHandler_renderList", "_BlocksHandler_renderElement", "_BlocksHandler_reifyProps", "_activeRenderContext", "_structuredClone", "obj", "assertValidNamespace", "input", "registerHook", "initializer", "hookSegment", "_activeRenderContext", "hookId", "context", "params", "fromNull", "_isTombstone", "hook", "_latestBlocksHandler", "MaxIterations", "BlocksHandler", "root", "_BlocksHandler_instances", "_BlocksHandler_root", "_BlocksHandler_contextBuilder", "ContextBuilder", "_BlocksHandler_blocksTransformer", "BlocksTransformer", "__classPrivateFieldGet", "_BlocksHandler_debug_get", "__classPrivateFieldSet", "request", "metadata", "RenderContext", "devvitContext", "blocks", "drop", "eventsToProcess", "dropped", "ev", "isMainQueue", "e", "isBlockingSSR", "changed", "progress", "remaining", "UIEventScope", "iterations", "batch", "stateCopy", "_BlocksHandler_handleAsyncQueues", "_BlocksHandler_handleMainQueue", "isCircuitBreaker", "requeueable", "requeueEvent", "remainingRequeueEvents", "event", "_BlocksHandler_renderRoot", "tags", "_BlocksHandler_loadHooks", "_events", "_BlocksHandler_attemptHook", "component", "props", "roots", "_BlocksHandler_render", "RenderInterruptError", "element", "_BlocksHandler_renderElement", "_BlocksHandler_renderList", "list", "i", "isBlockElement", "propsWithChildren", "reifiedChildren", "reifiedProps", "_BlocksHandler_reifyProps", "key", "message", "value", "getVersionNumberFromRawVersion", "rawVersion", "versionNumber", "parseDevvitUserAgent", "input", "company", "platform", "shouldShowUpgradeAppScreen", "parsedDevvitUserAgent", "getUpgradeLinkForPlatform", "UpgradeAppComponent", "context", "Devvit", "upgradeLink", "makeUpgradeAppComponent", "FeatureUnavailable", "Devvit", "UIComponentBindings", "CustomPostDefinition", "_props", "context", "_context", "makeHandler", "component", "req", "metadata", "parsedUserAgent", "parseDevvitUserAgent", "shouldShowUpgradeAppScreen", "handler", "BlocksHandler", "makeUpgradeAppComponent", "UIResponse", "registerUIRequestHandlers", "config", "definition", "method", "extendDevvitPrototype", "__classPrivateFieldGet", "receiver", "state", "kind", "f", "__classPrivateFieldSet", "value", "_a", "_Devvit_appSettings", "_Devvit_config", "_Devvit_customPostType", "_Devvit_formDefinitions", "_Devvit_installationSettings", "_Devvit_menuItems", "_Devvit_scheduledJobHandlers", "_Devvit_triggerOnEventHandlers", "_Devvit_webViewAssets", "_Devvit_domains", "_Devvit_scopes", "_Devvit_additionallyProvides", "_Devvit_uses", "_Devvit_pluginClients", "_Devvit_getUserScopesFromConfig", "Devvit", "Actor", "config", "httpConfig", "hasRequestedDomains", "pluginIsEnabled", "assertRequestedFetchDomainsLimit", "normalizeDomains", "userActionsConfig", "pluginEnabled", "item", "customPostType", "form", "onSubmit", "formKey", "job", "fields", "_b", "fieldsArray", "installSettings", "field", "SettingScope", "appSettings", "assertValidFormFields", "triggerDefinition", "eventType", "event", "context", "def", "d", "wrapped", "method", "args", "metadata", "scheduler", "kvStore", "redis", "media", "settings", "realtime", "global", "sub", "_c", "fullName", "use", "registerMenuItems", "registerScheduler", "registerCustomPost", "registerUIRequestHandlers", "registerUIEventHandler", "registerInstallationSettings", "registerAppSettings", "registerTriggers", "provides", "scope", "scopeName", "Scope", "configUserActions", "createElement", "type", "props", "children", "makeGettersEnumerable", "obj", "descriptors", "key", "descriptor", "FormattingFlag", "TEXT_ELEMENT", "RAW_TEXT_ELEMENT", "LINEBREAK_ELEMENT", "LINK_ELEMENT", "COMMENT_LINK_ELEMENT", "POST_LINK_ELEMENT", "SUBREDDIT_LINK_ELEMENT", "USER_LINK_ELEMENT", "USER_MENTION_ELEMENT", "SPOILER_TEXT_ELEMENT", "PARAGRAPH_ELEMENT", "HEADING_ELEMENT", "HORIZONTAL_RULE_ELEMENT", "BLOCK_QUOTE_ELEMENT", "CODE_BLOCK_ELEMENT", "LIST_ITEM_ELEMENT", "LIST_ELEMENT", "COLUMN_ALIGN_LEFT", "COLUMN_ALIGN_RIGHT", "COLUMN_ALIGN_CENTER", "TABLE_ELEMENT", "EMBED_ELEMENT", "IMAGE_ELEMENT", "ANIMATED_IMAGE_ELEMENT", "VIDEO_ELEMENT", "makeAnimatedImage", "opts", "ANIMATED_IMAGE_ELEMENT", "makeBlockQuote", "cb", "context", "content", "mixinBlockQuoteContext", "mixinCodeBlockContext", "mixinHeadingContext", "mixinListContext", "mixinParagraphContext", "mixinTableContext", "BLOCK_QUOTE_ELEMENT", "makeCodeBlock", "mixinRawTextContext", "CODE_BLOCK_ELEMENT", "makeCommentLink", "COMMENT_LINK_ELEMENT", "makeHeadingContext", "mixinLinkContext", "HEADING_ELEMENT", "makeEmbed", "EMBED_ELEMENT", "makeHorizontalRule", "HORIZONTAL_RULE_ELEMENT", "makeImage", "opts", "IMAGE_ELEMENT", "makeLineBreak", "LINEBREAK_ELEMENT", "makeLink", "LINK_ELEMENT", "makeList", "cb", "context", "content", "mixinListItemContext", "LIST_ELEMENT", "makeListItem", "mixinBlockQuoteContext", "mixinCodeBlockContext", "mixinHeadingContext", "mixinHorizontalRuleContext", "mixinListContext", "mixinParagraphContext", "mixinTableContext", "LIST_ITEM_ELEMENT", "makeParagraph", "mixinTextContext", "mixinLinkContext", "mixinLineBreakContext", "mixinSpoilerContext", "mixinImageContext", "PARAGRAPH_ELEMENT", "makePostLink", "POST_LINK_ELEMENT", "makeRawText", "text", "RAW_TEXT_ELEMENT", "makeSpoilerText", "SPOILER_TEXT_ELEMENT", "makeSubredditLink", "SUBREDDIT_LINK_ELEMENT", "makeTable", "headerContent", "rowContent", "mixinTableContentContext", "TABLE_ELEMENT", "makeTableCell", "tableCellTextContext", "makeTableHeaderCell", "alignment", "COLUMN_ALIGN_LEFT", "COLUMN_ALIGN_RIGHT", "COLUMN_ALIGN_CENTER", "makeTableRow", "mixinTableRowContext", "makeText", "TEXT_ELEMENT", "makeUserLink", "USER_LINK_ELEMENT", "makeUserMention", "USER_MENTION_ELEMENT", "makeVideo", "VIDEO_ELEMENT", "mixinBlockQuoteContext", "ctx", "c", "opts", "cb", "makeBlockQuote", "mixinCodeBlockContext", "makeCodeBlock", "mixinEmbedContext", "makeEmbed", "mixinHeadingContext", "makeHeadingContext", "mixinHorizontalRuleContext", "makeHorizontalRule", "mixinImageContext", "makeImage", "makeAnimatedImage", "mixinLineBreakContext", "makeLineBreak", "mixinLinkContext", "makeLink", "makeCommentLink", "makePostLink", "makeSubredditLink", "makeUserLink", "makeUserMention", "mixinListContext", "makeList", "mixinListItemContext", "makeListItem", "mixinParagraphContext", "makeParagraph", "mixinRawTextContext", "text", "makeRawText", "mixinSpoilerContext", "makeSpoilerText", "mixinTableContentContext", "h", "makeTableHeaderCell", "makeTableRow", "mixinTableContext", "makeTable", "mixinTableRowContext", "makeTableCell", "mixinTextContext", "lines", "index", "line", "makeText", "mixinVideoContext", "makeVideo", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_RichTextBuilder_content", "RichTextBuilder", "content", "mixinParagraphContext", "mixinHeadingContext", "mixinHorizontalRuleContext", "mixinBlockQuoteContext", "mixinCodeBlockContext", "mixinEmbedContext", "mixinListContext", "mixinTableContext", "mixinImageContext", "mixinVideoContext", "_cb", "_opts", "richtextToString", "richtext", "richtextString", "RichTextBuilder", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_a", "_FlairTemplate_id", "_FlairTemplate_subredditName", "_FlairTemplate_text", "_FlairTemplate_textColor", "_FlairTemplate_backgroundColor", "_FlairTemplate_allowableContent", "_FlairTemplate_modOnly", "_FlairTemplate_maxEmojis", "_FlairTemplate_allowUserEdits", "_FlairTemplate_metadata", "_FlairTemplate_createOrUpdateFlairTemplate", "_b", "_Flair_setFlair", "_Flair_setUserFlairBatch", "_Flair_removeFlair", "FlairType", "FlairTemplate", "data", "subredditName", "metadata", "makeGettersEnumerable", "assertNonNull", "asFlairTextColor", "asFlairBackgroundColor", "asAllowableContent", "options", "editOptions", "Devvit", "flair", "flairTemplateId", "subreddit", "allowableContent", "backgroundColor", "flairType", "maxEmojis", "modOnly", "text", "textColor", "textEditable", "response", "convertProtosFlairToCommonFlair", "a", "u", "convertUserFlairProtoToAPI", "userFlair", "Flair", "flairs", "asT3ID", "postId", "username", "csvDelimiter", "flairCsv", "userConfig", "propertyName", "color", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_Listing_instances", "_Listing_before", "_Listing_after", "_Listing_more", "_Listing_started", "_Listing_next", "DEFAULT_PAGE_SIZE", "DEFAULT_LIMIT", "Listing", "options", "makeGettersEnumerable", "currentIndex", "more", "count", "limit", "children", "before", "after", "__classPrivateFieldGet", "receiver", "state", "kind", "f", "_a", "_ModNote_fromProto", "ModNote", "options", "metadata", "client", "Devvit", "Listing", "fetchOptions", "protoRes", "protoModNote", "deleted", "res", "assertNonNull", "asT2ID", "asT5ID", "asTID", "GraphQL", "q", "metadata", "Devvit", "operationName", "id", "variables", "MODERATOR_PERMISSIONS", "formatPermissions", "permissions", "allPermissions", "permission", "formatModeratorPermissions", "validModPermissions", "Block", "UIResponse", "Scope", "StringValue", "decodeProtoErrors", "errors", "err", "import_base64_js", "getCustomPostRichTextFallback", "textFallbackOptions", "richTextToTextFallbackString", "textFallback", "RichTextBuilder", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_Post_id", "_Post_authorId", "_Post_authorName", "_Post_createdAt", "_Post_subredditId", "_Post_subredditName", "_Post_permalink", "_Post_title", "_Post_body", "_Post_bodyHtml", "_Post_url", "_Post_score", "_Post_numberOfComments", "_Post_numberOfReports", "_Post_thumbnail", "_Post_approved", "_Post_approvedAtUtc", "_Post_bannedAtUtc", "_Post_spam", "_Post_stickied", "_Post_removed", "_Post_removedBy", "_Post_removedByCategory", "_Post_archived", "_Post_edited", "_Post_locked", "_Post_nsfw", "_Post_quarantined", "_Post_spoiler", "_Post_hidden", "_Post_ignoringReports", "_Post_distinguishedBy", "_Post_flair", "_Post_authorFlair", "_Post_secureMedia", "_Post_modReportReasons", "_Post_userReportReasons", "_Post_gallery", "_Post_metadata", "SetCustomPostPreviewRequestBodyType", "Post", "_Post", "data", "metadata", "_Post_id", "_Post_authorId", "_Post_authorName", "_Post_createdAt", "_Post_subredditId", "_Post_subredditName", "_Post_permalink", "_Post_title", "_Post_body", "_Post_bodyHtml", "_Post_url", "_Post_score", "_Post_numberOfComments", "_Post_numberOfReports", "_Post_thumbnail", "_Post_approved", "_Post_approvedAtUtc", "_Post_bannedAtUtc", "_Post_spam", "_Post_stickied", "_Post_removed", "_Post_removedBy", "_Post_removedByCategory", "_Post_archived", "_Post_edited", "_Post_locked", "_Post_nsfw", "_Post_quarantined", "_Post_spoiler", "_Post_hidden", "_Post_ignoringReports", "_Post_distinguishedBy", "_Post_flair", "_Post_authorFlair", "_Post_secureMedia", "_Post_modReportReasons", "_Post_userReportReasons", "_Post_gallery", "_Post_metadata", "makeGettersEnumerable", "assertNonNull", "__classPrivateFieldSet", "asT3ID", "asT2ID", "asT5ID", "createdAt", "reason", "convertProtosFlairToCommonFlair", "item", "__classPrivateFieldGet", "Comment", "options", "newPost", "suggestedSort", "postData", "prev", "ui", "appUsername", "Header", "isSpam", "position", "distinguishedBy", "User", "ModNote", "getThumbnailV2", "id", "client", "Devvit", "postId", "isT3ID", "response", "runAs", "runAsType", "RunAs", "Scope", "previewBlock", "BlocksReconciler", "encodedCached", "Block", "textFallback", "sanitizedOptions", "richtextFallback", "getCustomPostRichTextFallback", "userGeneratedContent", "devvitPostData", "submitRequest", "richtextToString", "errorMessages", "decodeProtoErrors", "postIdText", "subredditName", "rest", "richtextString", "GraphQL", "res", "handler", "BlocksHandler", "block", "UIResponse", "blocksRenderContent", "SetCustomPostPreviewRequestBodyType", "asAdmin", "post", "Listing", "fetchOptions", "listingProtosToPosts", "listingProto", "child", "thumbnail", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_User_id", "_User_username", "_User_createdAt", "_User_linkKarma", "_User_commentKarma", "_User_nsfw", "_User_isAdmin", "_User_modPermissionsBySubreddit", "_User_url", "_User_permalink", "_User_hasVerifiedEmail", "_User_displayName", "_User_about", "_User_metadata", "SocialLinkType", "User", "_User", "data", "metadata", "makeGettersEnumerable", "assertNonNull", "asT2ID", "isT2ID", "createdAt", "subredditName", "permissions", "validModPermissions", "mods", "options", "Comment", "Post", "subreddit", "userFlairs", "Flair", "convertUserFlairProtoToAPI", "response", "GraphQL", "link", "id", "username", "getUsernameById", "client", "Devvit", "error", "key", "userId", "Listing", "fetchOptions", "listingProtosToUsers", "type", "optionalFields", "formatModeratorPermissions", "listingProtosToPostsOrComments", "subredditId", "Header", "listingProto", "child", "userIds", "chunkSize", "userIdChunks", "i", "userDataById", "allUsers", "userData", "getCurrentUsernameFromMetadata", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_a", "_Comment_id", "_Comment_authorId", "_Comment_authorName", "_Comment_body", "_Comment_createdAt", "_Comment_parentId", "_Comment_postId", "_Comment_subredditId", "_Comment_subredditName", "_Comment_replies", "_Comment_approved", "_Comment_approvedAtUtc", "_Comment_bannedAtUtc", "_Comment_edited", "_Comment_locked", "_Comment_removed", "_Comment_stickied", "_Comment_spam", "_Comment_distinguishedBy", "_Comment_numReports", "_Comment_collapsedBecauseCrowdControl", "_Comment_score", "_Comment_permalink", "_Comment_modReportReasons", "_Comment_userReportReasons", "_Comment_url", "_Comment_ignoringReports", "_Comment_authorFlair", "_Comment_metadata", "_Comment_getCommentsListing", "_Comment_buildCommentsTree", "Comment", "data", "metadata", "makeGettersEnumerable", "assertNonNull", "asT1ID", "asT2ID", "asT5ID", "isCommentId", "asT3ID", "convertProtosFlairToCommonFlair", "reason", "createdAt", "options", "newComment", "isSpam", "User", "makeSticky", "distinguishedBy", "stickied", "ModNote", "id", "client", "Devvit", "commentId", "isT1ID", "response", "postId", "rest", "richtextString", "richtextToString", "RunAs", "comment", "runAs", "runAsType", "Scope", "sticky", "asAdmin", "Listing", "fetchOptions", "child", "depthOffset", "limit", "listingsClient", "linksAndCommentsClient", "more", "moreIds", "children", "responseChildren", "topLevelComment", "redditObjects", "parentId", "commentsMap", "parentComment", "thisMore", "getModerationLog", "options", "metadata", "client", "Devvit", "Listing", "fetchOptions", "response", "aboutLogResponseToModActions", "child", "id", "mod", "modId36", "createdUtc", "subreddit", "subredditNamePrefixed", "action", "srId36", "description", "details", "targetAuthor", "targetBody", "targetFullname", "targetPermalink", "targetTitle", "assertNonNull", "createdAt", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_ModMailService_instances", "_ModMailService_metadata", "_ModMailService_transformConversationData", "_ModMailService_getConversationMessages", "_ModMailService_getConversationModActions", "ModMailConversationState", "R2_TO_MODMAIL_CONVERSATION_STATE", "ModMailActionType", "R2_TO_MOD_ACTION_TYPE", "ModMailService", "metadata", "subreddits", "client", "Devvit", "conversationIds", "params", "response", "conversations", "id", "createModmailConversation", "asT5ID", "notificationSubject", "conversationId", "protoConversation", "protoMessages", "protoModActions", "messages", "messageIds", "o", "messageId", "protoMessage", "modActions", "modActionIds", "modActionId", "protoModAction", "appUserId", "Header", "GraphQL", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_PrivateMessage_id", "_PrivateMessage_from", "_PrivateMessage_body", "_PrivateMessage_bodyHtml", "_PrivateMessage_created", "_PrivateMessage_metadata", "PrivateMessage", "_PrivateMessage", "options", "metadata", "client", "Devvit", "Listing", "fetchOpts", "listing", "child", "to", "subject", "text", "fromSubredditName", "data", "makeGettersEnumerable", "assertNonNull", "asTID", "asT2ID", "asT5ID", "created", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_Subreddit_id", "_Subreddit_name", "_Subreddit_createdAt", "_Subreddit_type", "_Subreddit_title", "_Subreddit_description", "_Subreddit_language", "_Subreddit_numberOfSubscribers", "_Subreddit_numberOfActiveUsers", "_Subreddit_nsfw", "_Subreddit_settings", "_Subreddit_permalink", "_Subreddit_metadata", "AboutLocations", "Subreddit", "_Subreddit", "data", "metadata", "_Subreddit_id", "_Subreddit_name", "_Subreddit_createdAt", "_Subreddit_type", "_Subreddit_title", "_Subreddit_description", "_Subreddit_language", "_Subreddit_numberOfSubscribers", "_Subreddit_numberOfActiveUsers", "_Subreddit_nsfw", "_Subreddit_settings", "_Subreddit_permalink", "_Subreddit_metadata", "makeGettersEnumerable", "assertNonNull", "__classPrivateFieldSet", "asT5ID", "createdAt", "asSubredditType", "asAllowedPostType", "asCommentMediaTypes", "__classPrivateFieldGet", "options", "submitPostOptions", "Post", "User", "username", "permissions", "note", "getModerationLog", "FlairTemplate", "name", "response", "Flair", "convertUserFlairProtoToAPI", "userFlair", "AboutLocations", "client", "Devvit", "only", "Listing", "fetchOptions", "listing", "parseListing", "ids", "subredditName", "title", "message", "result", "id", "Header", "subredditId", "getSubredditNameById", "getSubredditInfoById", "subredditInfo", "GraphQL", "getSubredditInfoByName", "getSubredditLeaderboard", "leaderboard", "getSubredditStyles", "styles", "type", "normalizedType", "postsAndComments", "child", "post", "tryParseAsPost", "comment", "tryParseAsComment", "obj", "Comment", "getVaultByAddress", "address", "metadata", "getVaultByParams", "getVaultByUserId", "userId", "operationName", "queryHash", "params", "contact", "GraphQL", "asT2ID", "CommunityData", "WidgetItem", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_Widget_id", "_Widget_name", "_Widget_subredditName", "_Widget_metadata", "_ImageWidget_images", "_CalendarWidget_googleCalendarId", "_CalendarWidget_configuration", "_CalendarWidget_styles", "_TextAreaWidget_text", "_TextAreaWidget_styles", "_ButtonWidget_buttons", "_ButtonWidget_description", "_ButtonWidget_styles", "_CommunityListWidget_communities", "_CommunityListWidget_styles", "_PostFlairWidget_styles", "_PostFlairWidget_templates", "_PostFlairWidget_display", "_CustomWidget_images", "_CustomWidget_text", "_CustomWidget_stylesheetUrl", "_CustomWidget_height", "_CustomWidget_css", "_SubredditRulesWidget_rules", "Widget", "_Widget", "widgetData", "subredditName", "metadata", "makeGettersEnumerable", "response", "Devvit", "assertNonNull", "widgetsMap", "widgets", "widgetId", "ImageWidget", "CalendarWidget", "TextAreaWidget", "ButtonWidget", "CommunityListWidget", "PostFlairWidget", "CustomWidget", "rulesRsp", "SubredditRulesWidget", "id", "orderByIds", "_ImageWidget", "data", "options", "WidgetItem", "_CalendarWidget", "_TextAreaWidget", "_ButtonWidget", "_CommunityListWidget", "communityData", "CommunityData", "_PostFlairWidget", "templateId", "_CustomWidget", "subredditAboutRulesRsp", "rules", "description", "priority", "shortName", "violationReason", "__classPrivateFieldSet", "receiver", "state", "value", "kind", "f", "__classPrivateFieldGet", "_WikiPage_name", "_WikiPage_subredditName", "_WikiPage_content", "_WikiPage_contentHtml", "_WikiPage_revisionId", "_WikiPage_revisionDate", "_WikiPage_revisionReason", "_WikiPage_revisionAuthor", "_WikiPage_metadata", "_WikiPageRevision_id", "_WikiPageRevision_page", "_WikiPageRevision_date", "_WikiPageRevision_author", "_WikiPageRevision_reason", "_WikiPageRevision_hidden", "_WikiPageSettings_listed", "_WikiPageSettings_permLevel", "_WikiPageSettings_editors", "WikiPagePermissionLevel", "WikiPageRevisionPrefix", "WikiPage", "_WikiPage", "name", "subredditName", "data", "metadata", "makeGettersEnumerable", "User", "content", "reason", "options", "revisionId", "username", "page", "response", "Devvit", "assertNonNull", "client", "after", "ensureWikiRevisionCursor", "before", "Listing", "fetchOptions", "wikiPageRevisionListingProtoToWikiPageRevision", "WikiPageSettings", "WikiPageRevision", "editor", "listingProto", "child", "token", "EffectType", "WebViewVisibility", "_WebViewHook_hookId", "_WebViewHook_url", "_WebViewHook_onMessage", "_WebViewHook_onUnmount", "_WebViewHook_renderContext", "_WebViewHook_invalidate", "_WebViewHook_emitFullscreenEffect", "_WebViewHook_hookId", "_WebViewHook_url", "_WebViewHook_onMessage", "_WebViewHook_onUnmount", "_WebViewHook_renderContext", "_WebViewHook_invalidate", "_WebViewHook_emitFullscreenEffect", "OrderStatusProto", "RESERVED_DEVVIT_METADATA_PREFIX", "isDevvitMetadataKey", "key", "purgeReservedDevvitKeysFromMetadata", "metadata", "key", "isDevvitMetadataKey", "AccountingTypeProto", "AccountingType", "accountTypeToProtoMapping", "AccountingTypeProto", "mapProtoToAccountingType", "typeProto", "entry", "accountTypeToProtoMapping", "_", "value", "AccountingType", "productFromProto", "data", "assertNonNull", "productIcon", "purgeReservedDevvitKeysFromMetadata", "OrderStatus", "mapProtoToOrderStatus", "status", "OrderStatusProto", "OrderStatus", "orderFromProto", "data", "productFromProto", "purgeReservedDevvitKeysFromMetadata", "PaymentsServiceDefinition", "paymentHelpMenuItem", "_", "context", "url", "username", "postId", "postWithoutPrefix", "postUrl", "paymentsPlugin", "Devvit", "PaymentsServiceDefinition", "paymentHelpMenuItem", "getOrders", "opts", "request", "ordersResponse", "paymentsPlugin", "ordersOut", "orderFromProto", "orderToJSON", "order", "orderFromJSON", "useOrders", "_ctx", "pageToken", "setPageToken", "useState", "loading", "data", "error", "useAsync", "fetchRes", "base", "EffectType", "_context", "_callback", "_debug", "_debugLog", "UsePaymentsHook", "callback", "params", "__privateAdd", "msg", "__privateGet", "__privateSet", "event", "status", "errorCode", "errorMessage", "order", "orderId", "orderStatusProtoToHook", "sku", "metadata", "devvitMetadata", "Header", "EffectType", "usePayments", "registerHook", "getProducts", "opts", "request", "paymentsPlugin", "productFromProto", "useProducts", "_ctx", "refetchBit", "setRefetchBit", "useState", "loading", "data", "error", "useAsync", "base", "b", "PaymentProcessorDefinition", "addPaymentHandler", "paymentHandler", "Devvit", "PaymentProcessorDefinition", "makeWrappedHandler", "userDefinedHandler", "req", "md", "context", "makeAPIClients", "getContextFromMetadata", "Header", "order", "mapOrder", "response", "outOrder", "orderFromProto"]
}
